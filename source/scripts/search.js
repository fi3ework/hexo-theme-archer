/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@algolia/events/events.js":
/*!************************************************!*\
  !*** ./node_modules/@algolia/events/events.js ***!
  \************************************************/
/***/ ((module) => {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
// EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}


/***/ }),

/***/ "./node_modules/@algolia/ui-components-highlight-vdom/dist/esm/Highlight.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@algolia/ui-components-highlight-vdom/dist/esm/Highlight.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createHighlightComponent": () => (/* binding */ createHighlightComponent)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var _algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/ui-components-shared */ "./node_modules/@algolia/ui-components-shared/dist/esm/cx.js");


var _excluded = ["parts", "highlightedTagName", "nonHighlightedTagName", "separator", "className", "classNames"];

/** @jsx createElement */


function createHighlightPartComponent(_ref) {
  var createElement = _ref.createElement;
  return function HighlightPart(_ref2) {
    var classNames = _ref2.classNames,
        children = _ref2.children,
        highlightedTagName = _ref2.highlightedTagName,
        isHighlighted = _ref2.isHighlighted,
        nonHighlightedTagName = _ref2.nonHighlightedTagName;
    var TagName = isHighlighted ? highlightedTagName : nonHighlightedTagName;
    return createElement(TagName, {
      className: isHighlighted ? classNames.highlighted : classNames.nonHighlighted
    }, children);
  };
}

function createHighlightComponent(_ref3) {
  var createElement = _ref3.createElement,
      Fragment = _ref3.Fragment;
  var HighlightPart = createHighlightPartComponent({
    createElement: createElement,
    Fragment: Fragment
  });
  return function Highlight(_ref4) {
    var parts = _ref4.parts,
        _ref4$highlightedTagN = _ref4.highlightedTagName,
        highlightedTagName = _ref4$highlightedTagN === void 0 ? 'mark' : _ref4$highlightedTagN,
        _ref4$nonHighlightedT = _ref4.nonHighlightedTagName,
        nonHighlightedTagName = _ref4$nonHighlightedT === void 0 ? 'span' : _ref4$nonHighlightedT,
        _ref4$separator = _ref4.separator,
        separator = _ref4$separator === void 0 ? ', ' : _ref4$separator,
        className = _ref4.className,
        _ref4$classNames = _ref4.classNames,
        classNames = _ref4$classNames === void 0 ? {} : _ref4$classNames,
        props = (0,_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__["default"])(_ref4, _excluded);

    return createElement("span", (0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, props, {
      className: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)(classNames.root, className)
    }), parts.map(function (part, partIndex) {
      var isLastPart = partIndex === parts.length - 1;
      return createElement(Fragment, {
        key: partIndex
      }, part.map(function (subPart, subPartIndex) {
        return createElement(HighlightPart, {
          key: subPartIndex,
          classNames: classNames,
          highlightedTagName: highlightedTagName,
          nonHighlightedTagName: nonHighlightedTagName,
          isHighlighted: subPart.isHighlighted
        }, subPart.value);
      }), !isLastPart && createElement("span", {
        className: classNames.separator
      }, separator));
    }));
  };
}

/***/ }),

/***/ "./node_modules/@algolia/ui-components-shared/dist/esm/cx.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@algolia/ui-components-shared/dist/esm/cx.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "cx": () => (/* binding */ cx)
/* harmony export */ });
function cx() {
  for (var _len = arguments.length, classNames = new Array(_len), _key = 0; _key < _len; _key++) {
    classNames[_key] = arguments[_key];
  }

  return classNames.filter(Boolean).join(' ') || undefined;
}

/***/ }),

/***/ "./node_modules/algoliasearch-helper/index.js":
/*!****************************************************!*\
  !*** ./node_modules/algoliasearch-helper/index.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var AlgoliaSearchHelper = __webpack_require__(/*! ./src/algoliasearch.helper */ "./node_modules/algoliasearch-helper/src/algoliasearch.helper.js");

var SearchParameters = __webpack_require__(/*! ./src/SearchParameters */ "./node_modules/algoliasearch-helper/src/SearchParameters/index.js");
var SearchResults = __webpack_require__(/*! ./src/SearchResults */ "./node_modules/algoliasearch-helper/src/SearchResults/index.js");

/**
 * The algoliasearchHelper module is the function that will let its
 * contains everything needed to use the Algoliasearch
 * Helper. It is a also a function that instanciate the helper.
 * To use the helper, you also need the Algolia JS client v3.
 * @example
 * //using the UMD build
 * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');
 * var helper = algoliasearchHelper(client, 'bestbuy', {
 *   facets: ['shipping'],
 *   disjunctiveFacets: ['category']
 * });
 * helper.on('result', function(event) {
 *   console.log(event.results);
 * });
 * helper
 *   .toggleFacetRefinement('category', 'Movies & TV Shows')
 *   .toggleFacetRefinement('shipping', 'Free shipping')
 *   .search();
 * @example
 * // The helper is an event emitter using the node API
 * helper.on('result', updateTheResults);
 * helper.once('result', updateTheResults);
 * helper.removeListener('result', updateTheResults);
 * helper.removeAllListeners('result');
 * @module algoliasearchHelper
 * @param  {AlgoliaSearch} client an AlgoliaSearch client
 * @param  {string} index the name of the index to query
 * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.
 * @return {AlgoliaSearchHelper}
 */
function algoliasearchHelper(client, index, opts) {
  return new AlgoliaSearchHelper(client, index, opts);
}

/**
 * The version currently used
 * @member module:algoliasearchHelper.version
 * @type {number}
 */
algoliasearchHelper.version = __webpack_require__(/*! ./src/version.js */ "./node_modules/algoliasearch-helper/src/version.js");

/**
 * Constructor for the Helper.
 * @member module:algoliasearchHelper.AlgoliaSearchHelper
 * @type {AlgoliaSearchHelper}
 */
algoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;

/**
 * Constructor for the object containing all the parameters of the search.
 * @member module:algoliasearchHelper.SearchParameters
 * @type {SearchParameters}
 */
algoliasearchHelper.SearchParameters = SearchParameters;

/**
 * Constructor for the object containing the results of the search.
 * @member module:algoliasearchHelper.SearchResults
 * @type {SearchResults}
 */
algoliasearchHelper.SearchResults = SearchResults;

module.exports = algoliasearchHelper;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/DerivedHelper/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/DerivedHelper/index.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var EventEmitter = __webpack_require__(/*! @algolia/events */ "./node_modules/@algolia/events/events.js");
var inherits = __webpack_require__(/*! ../functions/inherits */ "./node_modules/algoliasearch-helper/src/functions/inherits.js");

/**
 * A DerivedHelper is a way to create sub requests to
 * Algolia from a main helper.
 * @class
 * @classdesc The DerivedHelper provides an event based interface for search callbacks:
 *  - search: when a search is triggered using the `search()` method.
 *  - result: when the response is retrieved from Algolia and is processed.
 *    This event contains a {@link SearchResults} object and the
 *    {@link SearchParameters} corresponding to this answer.
 */
function DerivedHelper(mainHelper, fn) {
  this.main = mainHelper;
  this.fn = fn;
  this.lastResults = null;
}

inherits(DerivedHelper, EventEmitter);

/**
 * Detach this helper from the main helper
 * @return {undefined}
 * @throws Error if the derived helper is already detached
 */
DerivedHelper.prototype.detach = function() {
  this.removeAllListeners();
  this.main.detachDerivedHelper(this);
};

DerivedHelper.prototype.getModifiedState = function(parameters) {
  return this.fn(parameters);
};

module.exports = DerivedHelper;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


/**
 * Functions to manipulate refinement lists
 *
 * The RefinementList is not formally defined through a prototype but is based
 * on a specific structure.
 *
 * @module SearchParameters.refinementList
 *
 * @typedef {string[]} SearchParameters.refinementList.Refinements
 * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList
 */

var defaultsPure = __webpack_require__(/*! ../functions/defaultsPure */ "./node_modules/algoliasearch-helper/src/functions/defaultsPure.js");
var omit = __webpack_require__(/*! ../functions/omit */ "./node_modules/algoliasearch-helper/src/functions/omit.js");
var objectHasKeys = __webpack_require__(/*! ../functions/objectHasKeys */ "./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js");

var lib = {
  /**
   * Adds a refinement to a RefinementList
   * @param {RefinementList} refinementList the initial list
   * @param {string} attribute the attribute to refine
   * @param {string} value the value of the refinement, if the value is not a string it will be converted
   * @return {RefinementList} a new and updated refinement list
   */
  addRefinement: function addRefinement(refinementList, attribute, value) {
    if (lib.isRefined(refinementList, attribute, value)) {
      return refinementList;
    }

    var valueAsString = '' + value;

    var facetRefinement = !refinementList[attribute] ?
      [valueAsString] :
      refinementList[attribute].concat(valueAsString);

    var mod = {};

    mod[attribute] = facetRefinement;

    return defaultsPure({}, mod, refinementList);
  },
  /**
   * Removes refinement(s) for an attribute:
   *  - if the value is specified removes the refinement for the value on the attribute
   *  - if no value is specified removes all the refinements for this attribute
   * @param {RefinementList} refinementList the initial list
   * @param {string} attribute the attribute to refine
   * @param {string} [value] the value of the refinement
   * @return {RefinementList} a new and updated refinement lst
   */
  removeRefinement: function removeRefinement(refinementList, attribute, value) {
    if (value === undefined) {
      // we use the "filter" form of clearRefinement, since it leaves empty values as-is
      // the form with a string will remove the attribute completely
      return lib.clearRefinement(refinementList, function(v, f) {
        return attribute === f;
      });
    }

    var valueAsString = '' + value;

    return lib.clearRefinement(refinementList, function(v, f) {
      return attribute === f && valueAsString === v;
    });
  },
  /**
   * Toggles the refinement value for an attribute.
   * @param {RefinementList} refinementList the initial list
   * @param {string} attribute the attribute to refine
   * @param {string} value the value of the refinement
   * @return {RefinementList} a new and updated list
   */
  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {
    if (value === undefined) throw new Error('toggleRefinement should be used with a value');

    if (lib.isRefined(refinementList, attribute, value)) {
      return lib.removeRefinement(refinementList, attribute, value);
    }

    return lib.addRefinement(refinementList, attribute, value);
  },
  /**
   * Clear all or parts of a RefinementList. Depending on the arguments, three
   * kinds of behavior can happen:
   *  - if no attribute is provided: clears the whole list
   *  - if an attribute is provided as a string: clears the list for the specific attribute
   *  - if an attribute is provided as a function: discards the elements for which the function returns true
   * @param {RefinementList} refinementList the initial list
   * @param {string} [attribute] the attribute or function to discard
   * @param {string} [refinementType] optional parameter to give more context to the attribute function
   * @return {RefinementList} a new and updated refinement list
   */
  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {
    if (attribute === undefined) {
      if (!objectHasKeys(refinementList)) {
        return refinementList;
      }
      return {};
    } else if (typeof attribute === 'string') {
      return omit(refinementList, [attribute]);
    } else if (typeof attribute === 'function') {
      var hasChanged = false;

      var newRefinementList = Object.keys(refinementList).reduce(function(memo, key) {
        var values = refinementList[key] || [];
        var facetList = values.filter(function(value) {
          return !attribute(value, key, refinementType);
        });

        if (facetList.length !== values.length) {
          hasChanged = true;
        }
        memo[key] = facetList;

        return memo;
      }, {});

      if (hasChanged) return newRefinementList;
      return refinementList;
    }
  },
  /**
   * Test if the refinement value is used for the attribute. If no refinement value
   * is provided, test if the refinementList contains any refinement for the
   * given attribute.
   * @param {RefinementList} refinementList the list of refinement
   * @param {string} attribute name of the attribute
   * @param {string} [refinementValue] value of the filter/refinement
   * @return {boolean}
   */
  isRefined: function isRefined(refinementList, attribute, refinementValue) {
    var containsRefinements = !!refinementList[attribute] &&
      refinementList[attribute].length > 0;

    if (refinementValue === undefined || !containsRefinements) {
      return containsRefinements;
    }

    var refinementValueAsString = '' + refinementValue;

    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;
  }
};

module.exports = lib;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/SearchParameters/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/SearchParameters/index.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var merge = __webpack_require__(/*! ../functions/merge */ "./node_modules/algoliasearch-helper/src/functions/merge.js");
var defaultsPure = __webpack_require__(/*! ../functions/defaultsPure */ "./node_modules/algoliasearch-helper/src/functions/defaultsPure.js");
var intersection = __webpack_require__(/*! ../functions/intersection */ "./node_modules/algoliasearch-helper/src/functions/intersection.js");
var find = __webpack_require__(/*! ../functions/find */ "./node_modules/algoliasearch-helper/src/functions/find.js");
var valToNumber = __webpack_require__(/*! ../functions/valToNumber */ "./node_modules/algoliasearch-helper/src/functions/valToNumber.js");
var omit = __webpack_require__(/*! ../functions/omit */ "./node_modules/algoliasearch-helper/src/functions/omit.js");
var objectHasKeys = __webpack_require__(/*! ../functions/objectHasKeys */ "./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js");
var isValidUserToken = __webpack_require__(/*! ../utils/isValidUserToken */ "./node_modules/algoliasearch-helper/src/utils/isValidUserToken.js");

var RefinementList = __webpack_require__(/*! ./RefinementList */ "./node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js");

/**
 * isEqual, but only for numeric refinement values, possible values:
 * - 5
 * - [5]
 * - [[5]]
 * - [[5,5],[4]]
 */
function isEqualNumericRefinement(a, b) {
  if (Array.isArray(a) && Array.isArray(b)) {
    return (
      a.length === b.length &&
      a.every(function(el, i) {
        return isEqualNumericRefinement(b[i], el);
      })
    );
  }
  return a === b;
}

/**
 * like _.find but using deep equality to be able to use it
 * to find arrays.
 * @private
 * @param {any[]} array array to search into (elements are base or array of base)
 * @param {any} searchedValue the value we're looking for (base or array of base)
 * @return {any} the searched value or undefined
 */
function findArray(array, searchedValue) {
  return find(array, function(currentValue) {
    return isEqualNumericRefinement(currentValue, searchedValue);
  });
}

/**
 * The facet list is the structure used to store the list of values used to
 * filter a single attribute.
 * @typedef {string[]} SearchParameters.FacetList
 */

/**
 * Structure to store numeric filters with the operator as the key. The supported operators
 * are `=`, `>`, `<`, `>=`, `<=` and `!=`.
 * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList
 */

/**
 * SearchParameters is the data structure that contains all the information
 * usable for making a search to Algolia API. It doesn't do the search itself,
 * nor does it contains logic about the parameters.
 * It is an immutable object, therefore it has been created in a way that each
 * changes does not change the object itself but returns a copy with the
 * modification.
 * This object should probably not be instantiated outside of the helper. It will
 * be provided when needed. This object is documented for reference as you'll
 * get it from events generated by the {@link AlgoliaSearchHelper}.
 * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}
 * @constructor
 * @classdesc contains all the parameters of a search
 * @param {object|SearchParameters} newParameters existing parameters or partial object
 * for the properties of a new SearchParameters
 * @see SearchParameters.make
 * @example <caption>SearchParameters of the first query in
 *   <a href="http://demos.algolia.com/instant-search-demo/">the instant search demo</a></caption>
{
   "query": "",
   "disjunctiveFacets": [
      "customerReviewCount",
      "category",
      "salePrice_range",
      "manufacturer"
  ],
   "maxValuesPerFacet": 30,
   "page": 0,
   "hitsPerPage": 10,
   "facets": [
      "type",
      "shipping"
  ]
}
 */
function SearchParameters(newParameters) {
  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};

  if (params.userToken !== undefined && !isValidUserToken(params.userToken)) {
    console.warn('[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}');
  }
  /**
   * This attribute contains the list of all the conjunctive facets
   * used. This list will be added to requested facets in the
   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.
   * @member {string[]}
   */
  this.facets = params.facets || [];
  /**
   * This attribute contains the list of all the disjunctive facets
   * used. This list will be added to requested facets in the
   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.
   * @member {string[]}
   */
  this.disjunctiveFacets = params.disjunctiveFacets || [];
  /**
   * This attribute contains the list of all the hierarchical facets
   * used. This list will be added to requested facets in the
   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.
   * Hierarchical facets are a sub type of disjunctive facets that
   * let you filter faceted attributes hierarchically.
   * @member {string[]|object[]}
   */
  this.hierarchicalFacets = params.hierarchicalFacets || [];

  // Refinements
  /**
   * This attribute contains all the filters that need to be
   * applied on the conjunctive facets. Each facet must be properly
   * defined in the `facets` attribute.
   *
   * The key is the name of the facet, and the `FacetList` contains all
   * filters selected for the associated facet name.
   *
   * When querying algolia, the values stored in this attribute will
   * be translated into the `facetFilters` attribute.
   * @member {Object.<string, SearchParameters.FacetList>}
   */
  this.facetsRefinements = params.facetsRefinements || {};
  /**
   * This attribute contains all the filters that need to be
   * excluded from the conjunctive facets. Each facet must be properly
   * defined in the `facets` attribute.
   *
   * The key is the name of the facet, and the `FacetList` contains all
   * filters excluded for the associated facet name.
   *
   * When querying algolia, the values stored in this attribute will
   * be translated into the `facetFilters` attribute.
   * @member {Object.<string, SearchParameters.FacetList>}
   */
  this.facetsExcludes = params.facetsExcludes || {};
  /**
   * This attribute contains all the filters that need to be
   * applied on the disjunctive facets. Each facet must be properly
   * defined in the `disjunctiveFacets` attribute.
   *
   * The key is the name of the facet, and the `FacetList` contains all
   * filters selected for the associated facet name.
   *
   * When querying algolia, the values stored in this attribute will
   * be translated into the `facetFilters` attribute.
   * @member {Object.<string, SearchParameters.FacetList>}
   */
  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};
  /**
   * This attribute contains all the filters that need to be
   * applied on the numeric attributes.
   *
   * The key is the name of the attribute, and the value is the
   * filters to apply to this attribute.
   *
   * When querying algolia, the values stored in this attribute will
   * be translated into the `numericFilters` attribute.
   * @member {Object.<string, SearchParameters.OperatorList>}
   */
  this.numericRefinements = params.numericRefinements || {};
  /**
   * This attribute contains all the tags used to refine the query.
   *
   * When querying algolia, the values stored in this attribute will
   * be translated into the `tagFilters` attribute.
   * @member {string[]}
   */
  this.tagRefinements = params.tagRefinements || [];
  /**
   * This attribute contains all the filters that need to be
   * applied on the hierarchical facets. Each facet must be properly
   * defined in the `hierarchicalFacets` attribute.
   *
   * The key is the name of the facet, and the `FacetList` contains all
   * filters selected for the associated facet name. The FacetList values
   * are structured as a string that contain the values for each level
   * separated by the configured separator.
   *
   * When querying algolia, the values stored in this attribute will
   * be translated into the `facetFilters` attribute.
   * @member {Object.<string, SearchParameters.FacetList>}
   */
  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};

  var self = this;
  Object.keys(params).forEach(function(paramName) {
    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;
    var isValueDefined = params[paramName] !== undefined;

    if (!isKeyKnown && isValueDefined) {
      self[paramName] = params[paramName];
    }
  });
}

/**
 * List all the properties in SearchParameters and therefore all the known Algolia properties
 * This doesn't contain any beta/hidden features.
 * @private
 */
SearchParameters.PARAMETERS = Object.keys(new SearchParameters());

/**
 * @private
 * @param {object} partialState full or part of a state
 * @return {object} a new object with the number keys as number
 */
SearchParameters._parseNumbers = function(partialState) {
  // Do not reparse numbers in SearchParameters, they ought to be parsed already
  if (partialState instanceof SearchParameters) return partialState;

  var numbers = {};

  var numberKeys = [
    'aroundPrecision',
    'aroundRadius',
    'getRankingInfo',
    'minWordSizefor2Typos',
    'minWordSizefor1Typo',
    'page',
    'maxValuesPerFacet',
    'distinct',
    'minimumAroundRadius',
    'hitsPerPage',
    'minProximity'
  ];

  numberKeys.forEach(function(k) {
    var value = partialState[k];
    if (typeof value === 'string') {
      var parsedValue = parseFloat(value);
      // global isNaN is ok to use here, value is only number or NaN
      numbers[k] = isNaN(parsedValue) ? value : parsedValue;
    }
  });

  // there's two formats of insideBoundingBox, we need to parse
  // the one which is an array of float geo rectangles
  if (Array.isArray(partialState.insideBoundingBox)) {
    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {
      if (Array.isArray(geoRect)) {
        return geoRect.map(function(value) {
          return parseFloat(value);
        });
      }
      return geoRect;
    });
  }

  if (partialState.numericRefinements) {
    var numericRefinements = {};
    Object.keys(partialState.numericRefinements).forEach(function(attribute) {
      var operators = partialState.numericRefinements[attribute] || {};
      numericRefinements[attribute] = {};
      Object.keys(operators).forEach(function(operator) {
        var values = operators[operator];
        var parsedValues = values.map(function(v) {
          if (Array.isArray(v)) {
            return v.map(function(vPrime) {
              if (typeof vPrime === 'string') {
                return parseFloat(vPrime);
              }
              return vPrime;
            });
          } else if (typeof v === 'string') {
            return parseFloat(v);
          }
          return v;
        });
        numericRefinements[attribute][operator] = parsedValues;
      });
    });
    numbers.numericRefinements = numericRefinements;
  }

  return merge({}, partialState, numbers);
};

/**
 * Factory for SearchParameters
 * @param {object|SearchParameters} newParameters existing parameters or partial
 * object for the properties of a new SearchParameters
 * @return {SearchParameters} frozen instance of SearchParameters
 */
SearchParameters.make = function makeSearchParameters(newParameters) {
  var instance = new SearchParameters(newParameters);

  var hierarchicalFacets = newParameters.hierarchicalFacets || [];
  hierarchicalFacets.forEach(function(facet) {
    if (facet.rootPath) {
      var currentRefinement = instance.getHierarchicalRefinement(facet.name);

      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {
        instance = instance.clearRefinements(facet.name);
      }

      // get it again in case it has been cleared
      currentRefinement = instance.getHierarchicalRefinement(facet.name);
      if (currentRefinement.length === 0) {
        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);
      }
    }
  });

  return instance;
};

/**
 * Validates the new parameters based on the previous state
 * @param {SearchParameters} currentState the current state
 * @param {object|SearchParameters} parameters the new parameters to set
 * @return {Error|null} Error if the modification is invalid, null otherwise
 */
SearchParameters.validate = function(currentState, parameters) {
  var params = parameters || {};

  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {
    return new Error(
      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +
      'an error, if it is really what you want, you should first clear the tags with clearTags method.');
  }

  if (currentState.tagRefinements.length > 0 && params.tagFilters) {
    return new Error(
      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +
      'an error, if it is not, you should first clear the tags with clearTags method.');
  }

  if (
    currentState.numericFilters &&
    params.numericRefinements &&
    objectHasKeys(params.numericRefinements)
  ) {
    return new Error(
      "[Numeric filters] Can't switch from the advanced to the managed API. It" +
        ' is probably an error, if this is really what you want, you have to first' +
        ' clear the numeric filters.'
    );
  }

  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {
    return new Error(
      "[Numeric filters] Can't switch from the managed API to the advanced. It" +
      ' is probably an error, if this is really what you want, you have to first' +
      ' clear the numeric filters.');
  }

  return null;
};

SearchParameters.prototype = {
  constructor: SearchParameters,

  /**
   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)
   * @method
   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function
   * - If not given, means to clear all the filters.
   * - If `string`, means to clear all refinements for the `attribute` named filter.
   * - If `function`, means to clear all the refinements that return truthy values.
   * @return {SearchParameters}
   */
  clearRefinements: function clearRefinements(attribute) {
    var patch = {
      numericRefinements: this._clearNumericRefinements(attribute),
      facetsRefinements: RefinementList.clearRefinement(
        this.facetsRefinements,
        attribute,
        'conjunctiveFacet'
      ),
      facetsExcludes: RefinementList.clearRefinement(
        this.facetsExcludes,
        attribute,
        'exclude'
      ),
      disjunctiveFacetsRefinements: RefinementList.clearRefinement(
        this.disjunctiveFacetsRefinements,
        attribute,
        'disjunctiveFacet'
      ),
      hierarchicalFacetsRefinements: RefinementList.clearRefinement(
        this.hierarchicalFacetsRefinements,
        attribute,
        'hierarchicalFacet'
      )
    };
    if (
      patch.numericRefinements === this.numericRefinements &&
      patch.facetsRefinements === this.facetsRefinements &&
      patch.facetsExcludes === this.facetsExcludes &&
      patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&
      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements
    ) {
      return this;
    }
    return this.setQueryParameters(patch);
  },
  /**
   * Remove all the refined tags from the SearchParameters
   * @method
   * @return {SearchParameters}
   */
  clearTags: function clearTags() {
    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;

    return this.setQueryParameters({
      tagFilters: undefined,
      tagRefinements: []
    });
  },
  /**
   * Set the index.
   * @method
   * @param {string} index the index name
   * @return {SearchParameters}
   */
  setIndex: function setIndex(index) {
    if (index === this.index) return this;

    return this.setQueryParameters({
      index: index
    });
  },
  /**
   * Query setter
   * @method
   * @param {string} newQuery value for the new query
   * @return {SearchParameters}
   */
  setQuery: function setQuery(newQuery) {
    if (newQuery === this.query) return this;

    return this.setQueryParameters({
      query: newQuery
    });
  },
  /**
   * Page setter
   * @method
   * @param {number} newPage new page number
   * @return {SearchParameters}
   */
  setPage: function setPage(newPage) {
    if (newPage === this.page) return this;

    return this.setQueryParameters({
      page: newPage
    });
  },
  /**
   * Facets setter
   * The facets are the simple facets, used for conjunctive (and) faceting.
   * @method
   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting
   * @return {SearchParameters}
   */
  setFacets: function setFacets(facets) {
    return this.setQueryParameters({
      facets: facets
    });
  },
  /**
   * Disjunctive facets setter
   * Change the list of disjunctive (or) facets the helper chan handle.
   * @method
   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting
   * @return {SearchParameters}
   */
  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {
    return this.setQueryParameters({
      disjunctiveFacets: facets
    });
  },
  /**
   * HitsPerPage setter
   * Hits per page represents the number of hits retrieved for this query
   * @method
   * @param {number} n number of hits retrieved per page of results
   * @return {SearchParameters}
   */
  setHitsPerPage: function setHitsPerPage(n) {
    if (this.hitsPerPage === n) return this;

    return this.setQueryParameters({
      hitsPerPage: n
    });
  },
  /**
   * typoTolerance setter
   * Set the value of typoTolerance
   * @method
   * @param {string} typoTolerance new value of typoTolerance ("true", "false", "min" or "strict")
   * @return {SearchParameters}
   */
  setTypoTolerance: function setTypoTolerance(typoTolerance) {
    if (this.typoTolerance === typoTolerance) return this;

    return this.setQueryParameters({
      typoTolerance: typoTolerance
    });
  },
  /**
   * Add a numeric filter for a given attribute
   * When value is an array, they are combined with OR
   * When value is a single value, it will combined with AND
   * @method
   * @param {string} attribute attribute to set the filter on
   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)
   * @param {number | number[]} value value of the filter
   * @return {SearchParameters}
   * @example
   * // for price = 50 or 40
   * searchparameter.addNumericRefinement('price', '=', [50, 40]);
   * @example
   * // for size = 38 and 40
   * searchparameter.addNumericRefinement('size', '=', 38);
   * searchparameter.addNumericRefinement('size', '=', 40);
   */
  addNumericRefinement: function(attribute, operator, v) {
    var value = valToNumber(v);

    if (this.isNumericRefined(attribute, operator, value)) return this;

    var mod = merge({}, this.numericRefinements);

    mod[attribute] = merge({}, mod[attribute]);

    if (mod[attribute][operator]) {
      // Array copy
      mod[attribute][operator] = mod[attribute][operator].slice();
      // Add the element. Concat can't be used here because value can be an array.
      mod[attribute][operator].push(value);
    } else {
      mod[attribute][operator] = [value];
    }

    return this.setQueryParameters({
      numericRefinements: mod
    });
  },
  /**
   * Get the list of conjunctive refinements for a single facet
   * @param {string} facetName name of the attribute used for faceting
   * @return {string[]} list of refinements
   */
  getConjunctiveRefinements: function(facetName) {
    if (!this.isConjunctiveFacet(facetName)) {
      return [];
    }
    return this.facetsRefinements[facetName] || [];
  },
  /**
   * Get the list of disjunctive refinements for a single facet
   * @param {string} facetName name of the attribute used for faceting
   * @return {string[]} list of refinements
   */
  getDisjunctiveRefinements: function(facetName) {
    if (!this.isDisjunctiveFacet(facetName)) {
      return [];
    }
    return this.disjunctiveFacetsRefinements[facetName] || [];
  },
  /**
   * Get the list of hierarchical refinements for a single facet
   * @param {string} facetName name of the attribute used for faceting
   * @return {string[]} list of refinements
   */
  getHierarchicalRefinement: function(facetName) {
    // we send an array but we currently do not support multiple
    // hierarchicalRefinements for a hierarchicalFacet
    return this.hierarchicalFacetsRefinements[facetName] || [];
  },
  /**
   * Get the list of exclude refinements for a single facet
   * @param {string} facetName name of the attribute used for faceting
   * @return {string[]} list of refinements
   */
  getExcludeRefinements: function(facetName) {
    if (!this.isConjunctiveFacet(facetName)) {
      return [];
    }
    return this.facetsExcludes[facetName] || [];
  },

  /**
   * Remove all the numeric filter for a given (attribute, operator)
   * @method
   * @param {string} attribute attribute to set the filter on
   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)
   * @param {number} [number] the value to be removed
   * @return {SearchParameters}
   */
  removeNumericRefinement: function(attribute, operator, paramValue) {
    if (paramValue !== undefined) {
      if (!this.isNumericRefined(attribute, operator, paramValue)) {
        return this;
      }
      return this.setQueryParameters({
        numericRefinements: this._clearNumericRefinements(function(value, key) {
          return (
            key === attribute &&
            value.op === operator &&
            isEqualNumericRefinement(value.val, valToNumber(paramValue))
          );
        })
      });
    } else if (operator !== undefined) {
      if (!this.isNumericRefined(attribute, operator)) return this;
      return this.setQueryParameters({
        numericRefinements: this._clearNumericRefinements(function(value, key) {
          return key === attribute && value.op === operator;
        })
      });
    }

    if (!this.isNumericRefined(attribute)) return this;
    return this.setQueryParameters({
      numericRefinements: this._clearNumericRefinements(function(value, key) {
        return key === attribute;
      })
    });
  },
  /**
   * Get the list of numeric refinements for a single facet
   * @param {string} facetName name of the attribute used for faceting
   * @return {SearchParameters.OperatorList} list of refinements
   */
  getNumericRefinements: function(facetName) {
    return this.numericRefinements[facetName] || {};
  },
  /**
   * Return the current refinement for the (attribute, operator)
   * @param {string} attribute attribute in the record
   * @param {string} operator operator applied on the refined values
   * @return {Array.<number|number[]>} refined values
   */
  getNumericRefinement: function(attribute, operator) {
    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];
  },
  /**
   * Clear numeric filters.
   * @method
   * @private
   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function
   * - If not given, means to clear all the filters.
   * - If `string`, means to clear all refinements for the `attribute` named filter.
   * - If `function`, means to clear all the refinements that return truthy values.
   * @return {Object.<string, OperatorList>}
   */
  _clearNumericRefinements: function _clearNumericRefinements(attribute) {
    if (attribute === undefined) {
      if (!objectHasKeys(this.numericRefinements)) {
        return this.numericRefinements;
      }
      return {};
    } else if (typeof attribute === 'string') {
      return omit(this.numericRefinements, [attribute]);
    } else if (typeof attribute === 'function') {
      var hasChanged = false;
      var numericRefinements = this.numericRefinements;
      var newNumericRefinements = Object.keys(numericRefinements).reduce(function(memo, key) {
        var operators = numericRefinements[key];
        var operatorList = {};

        operators = operators || {};
        Object.keys(operators).forEach(function(operator) {
          var values = operators[operator] || [];
          var outValues = [];
          values.forEach(function(value) {
            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');
            if (!predicateResult) outValues.push(value);
          });
          if (outValues.length !== values.length) {
            hasChanged = true;
          }
          operatorList[operator] = outValues;
        });

        memo[key] = operatorList;

        return memo;
      }, {});

      if (hasChanged) return newNumericRefinements;
      return this.numericRefinements;
    }
  },
  /**
   * Add a facet to the facets attribute of the helper configuration, if it
   * isn't already present.
   * @method
   * @param {string} facet facet name to add
   * @return {SearchParameters}
   */
  addFacet: function addFacet(facet) {
    if (this.isConjunctiveFacet(facet)) {
      return this;
    }

    return this.setQueryParameters({
      facets: this.facets.concat([facet])
    });
  },
  /**
   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper
   * configuration, if it isn't already present.
   * @method
   * @param {string} facet disjunctive facet name to add
   * @return {SearchParameters}
   */
  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {
    if (this.isDisjunctiveFacet(facet)) {
      return this;
    }

    return this.setQueryParameters({
      disjunctiveFacets: this.disjunctiveFacets.concat([facet])
    });
  },
  /**
   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper
   * configuration.
   * @method
   * @param {object} hierarchicalFacet hierarchical facet to add
   * @return {SearchParameters}
   * @throws will throw an error if a hierarchical facet with the same name was already declared
   */
  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {
    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {
      throw new Error(
        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');
    }

    return this.setQueryParameters({
      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])
    });
  },
  /**
   * Add a refinement on a "normal" facet
   * @method
   * @param {string} facet attribute to apply the faceting on
   * @param {string} value value of the attribute (will be converted to string)
   * @return {SearchParameters}
   */
  addFacetRefinement: function addFacetRefinement(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');
    }
    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;

    return this.setQueryParameters({
      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)
    });
  },
  /**
   * Exclude a value from a "normal" facet
   * @method
   * @param {string} facet attribute to apply the exclusion on
   * @param {string} value value of the attribute (will be converted to string)
   * @return {SearchParameters}
   */
  addExcludeRefinement: function addExcludeRefinement(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');
    }
    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;

    return this.setQueryParameters({
      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)
    });
  },
  /**
   * Adds a refinement on a disjunctive facet.
   * @method
   * @param {string} facet attribute to apply the faceting on
   * @param {string} value value of the attribute (will be converted to string)
   * @return {SearchParameters}
   */
  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {
    if (!this.isDisjunctiveFacet(facet)) {
      throw new Error(
        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');
    }

    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;

    return this.setQueryParameters({
      disjunctiveFacetsRefinements: RefinementList.addRefinement(
        this.disjunctiveFacetsRefinements, facet, value)
    });
  },
  /**
   * addTagRefinement adds a tag to the list used to filter the results
   * @param {string} tag tag to be added
   * @return {SearchParameters}
   */
  addTagRefinement: function addTagRefinement(tag) {
    if (this.isTagRefined(tag)) return this;

    var modification = {
      tagRefinements: this.tagRefinements.concat(tag)
    };

    return this.setQueryParameters(modification);
  },
  /**
   * Remove a facet from the facets attribute of the helper configuration, if it
   * is present.
   * @method
   * @param {string} facet facet name to remove
   * @return {SearchParameters}
   */
  removeFacet: function removeFacet(facet) {
    if (!this.isConjunctiveFacet(facet)) {
      return this;
    }

    return this.clearRefinements(facet).setQueryParameters({
      facets: this.facets.filter(function(f) {
        return f !== facet;
      })
    });
  },
  /**
   * Remove a disjunctive facet from the disjunctiveFacets attribute of the
   * helper configuration, if it is present.
   * @method
   * @param {string} facet disjunctive facet name to remove
   * @return {SearchParameters}
   */
  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {
    if (!this.isDisjunctiveFacet(facet)) {
      return this;
    }

    return this.clearRefinements(facet).setQueryParameters({
      disjunctiveFacets: this.disjunctiveFacets.filter(function(f) {
        return f !== facet;
      })
    });
  },
  /**
   * Remove a hierarchical facet from the hierarchicalFacets attribute of the
   * helper configuration, if it is present.
   * @method
   * @param {string} facet hierarchical facet name to remove
   * @return {SearchParameters}
   */
  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {
    if (!this.isHierarchicalFacet(facet)) {
      return this;
    }

    return this.clearRefinements(facet).setQueryParameters({
      hierarchicalFacets: this.hierarchicalFacets.filter(function(f) {
        return f.name !== facet;
      })
    });
  },
  /**
   * Remove a refinement set on facet. If a value is provided, it will clear the
   * refinement for the given value, otherwise it will clear all the refinement
   * values for the faceted attribute.
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {string} [value] value used to filter
   * @return {SearchParameters}
   */
  removeFacetRefinement: function removeFacetRefinement(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');
    }
    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;

    return this.setQueryParameters({
      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)
    });
  },
  /**
   * Remove a negative refinement on a facet
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {string} value value used to filter
   * @return {SearchParameters}
   */
  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');
    }
    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;

    return this.setQueryParameters({
      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)
    });
  },
  /**
   * Remove a refinement on a disjunctive facet
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {string} value value used to filter
   * @return {SearchParameters}
   */
  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {
    if (!this.isDisjunctiveFacet(facet)) {
      throw new Error(
        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');
    }
    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;

    return this.setQueryParameters({
      disjunctiveFacetsRefinements: RefinementList.removeRefinement(
        this.disjunctiveFacetsRefinements, facet, value)
    });
  },
  /**
   * Remove a tag from the list of tag refinements
   * @method
   * @param {string} tag the tag to remove
   * @return {SearchParameters}
   */
  removeTagRefinement: function removeTagRefinement(tag) {
    if (!this.isTagRefined(tag)) return this;

    var modification = {
      tagRefinements: this.tagRefinements.filter(function(t) {
        return t !== tag;
      })
    };

    return this.setQueryParameters(modification);
  },
  /**
   * Generic toggle refinement method to use with facet, disjunctive facets
   * and hierarchical facets
   * @param  {string} facet the facet to refine
   * @param  {string} value the associated value
   * @return {SearchParameters}
   * @throws will throw an error if the facet is not declared in the settings of the helper
   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}
   */
  toggleRefinement: function toggleRefinement(facet, value) {
    return this.toggleFacetRefinement(facet, value);
  },
  /**
   * Generic toggle refinement method to use with facet, disjunctive facets
   * and hierarchical facets
   * @param  {string} facet the facet to refine
   * @param  {string} value the associated value
   * @return {SearchParameters}
   * @throws will throw an error if the facet is not declared in the settings of the helper
   */
  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {
    if (this.isHierarchicalFacet(facet)) {
      return this.toggleHierarchicalFacetRefinement(facet, value);
    } else if (this.isConjunctiveFacet(facet)) {
      return this.toggleConjunctiveFacetRefinement(facet, value);
    } else if (this.isDisjunctiveFacet(facet)) {
      return this.toggleDisjunctiveFacetRefinement(facet, value);
    }

    throw new Error('Cannot refine the undeclared facet ' + facet +
      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');
  },
  /**
   * Switch the refinement applied over a facet/value
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {value} value value used for filtering
   * @return {SearchParameters}
   */
  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');
    }

    return this.setQueryParameters({
      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)
    });
  },
  /**
   * Switch the refinement applied over a facet/value
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {value} value value used for filtering
   * @return {SearchParameters}
   */
  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');
    }

    return this.setQueryParameters({
      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)
    });
  },
  /**
   * Switch the refinement applied over a facet/value
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {value} value value used for filtering
   * @return {SearchParameters}
   */
  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {
    if (!this.isDisjunctiveFacet(facet)) {
      throw new Error(
        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');
    }

    return this.setQueryParameters({
      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(
        this.disjunctiveFacetsRefinements, facet, value)
    });
  },
  /**
   * Switch the refinement applied over a facet/value
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {value} value value used for filtering
   * @return {SearchParameters}
   */
  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {
    if (!this.isHierarchicalFacet(facet)) {
      throw new Error(
        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');
    }

    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));

    var mod = {};

    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&
      this.hierarchicalFacetsRefinements[facet].length > 0 && (
      // remove current refinement:
      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`
      this.hierarchicalFacetsRefinements[facet][0] === value ||
      // remove a parent refinement of the current refinement:
      //  - refinement was 'beer > IPA > Flying dog'
      //  - call is toggleRefine('beer > IPA')
      //  - refinement should be `beer`
      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0
    );

    if (upOneOrMultipleLevel) {
      if (value.indexOf(separator) === -1) {
        // go back to root level
        mod[facet] = [];
      } else {
        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];
      }
    } else {
      mod[facet] = [value];
    }

    return this.setQueryParameters({
      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)
    });
  },

  /**
   * Adds a refinement on a hierarchical facet.
   * @param {string} facet the facet name
   * @param {string} path the hierarchical facet path
   * @return {SearchParameter} the new state
   * @throws Error if the facet is not defined or if the facet is refined
   */
  addHierarchicalFacetRefinement: function(facet, path) {
    if (this.isHierarchicalFacetRefined(facet)) {
      throw new Error(facet + ' is already refined.');
    }
    if (!this.isHierarchicalFacet(facet)) {
      throw new Error(facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration.');
    }
    var mod = {};
    mod[facet] = [path];
    return this.setQueryParameters({
      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)
    });
  },

  /**
   * Removes the refinement set on a hierarchical facet.
   * @param {string} facet the facet name
   * @return {SearchParameter} the new state
   * @throws Error if the facet is not defined or if the facet is not refined
   */
  removeHierarchicalFacetRefinement: function(facet) {
    if (!this.isHierarchicalFacetRefined(facet)) {
      return this;
    }
    var mod = {};
    mod[facet] = [];
    return this.setQueryParameters({
      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)
    });
  },
  /**
   * Switch the tag refinement
   * @method
   * @param {string} tag the tag to remove or add
   * @return {SearchParameters}
   */
  toggleTagRefinement: function toggleTagRefinement(tag) {
    if (this.isTagRefined(tag)) {
      return this.removeTagRefinement(tag);
    }

    return this.addTagRefinement(tag);
  },
  /**
   * Test if the facet name is from one of the disjunctive facets
   * @method
   * @param {string} facet facet name to test
   * @return {boolean}
   */
  isDisjunctiveFacet: function(facet) {
    return this.disjunctiveFacets.indexOf(facet) > -1;
  },
  /**
   * Test if the facet name is from one of the hierarchical facets
   * @method
   * @param {string} facetName facet name to test
   * @return {boolean}
   */
  isHierarchicalFacet: function(facetName) {
    return this.getHierarchicalFacetByName(facetName) !== undefined;
  },
  /**
   * Test if the facet name is from one of the conjunctive/normal facets
   * @method
   * @param {string} facet facet name to test
   * @return {boolean}
   */
  isConjunctiveFacet: function(facet) {
    return this.facets.indexOf(facet) > -1;
  },
  /**
   * Returns true if the facet is refined, either for a specific value or in
   * general.
   * @method
   * @param {string} facet name of the attribute for used for faceting
   * @param {string} value, optional value. If passed will test that this value
   * is filtering the given facet.
   * @return {boolean} returns true if refined
   */
  isFacetRefined: function isFacetRefined(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      return false;
    }
    return RefinementList.isRefined(this.facetsRefinements, facet, value);
  },
  /**
   * Returns true if the facet contains exclusions or if a specific value is
   * excluded.
   *
   * @method
   * @param {string} facet name of the attribute for used for faceting
   * @param {string} [value] optional value. If passed will test that this value
   * is filtering the given facet.
   * @return {boolean} returns true if refined
   */
  isExcludeRefined: function isExcludeRefined(facet, value) {
    if (!this.isConjunctiveFacet(facet)) {
      return false;
    }
    return RefinementList.isRefined(this.facetsExcludes, facet, value);
  },
  /**
   * Returns true if the facet contains a refinement, or if a value passed is a
   * refinement for the facet.
   * @method
   * @param {string} facet name of the attribute for used for faceting
   * @param {string} value optional, will test if the value is used for refinement
   * if there is one, otherwise will test if the facet contains any refinement
   * @return {boolean}
   */
  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {
    if (!this.isDisjunctiveFacet(facet)) {
      return false;
    }
    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);
  },
  /**
   * Returns true if the facet contains a refinement, or if a value passed is a
   * refinement for the facet.
   * @method
   * @param {string} facet name of the attribute for used for faceting
   * @param {string} value optional, will test if the value is used for refinement
   * if there is one, otherwise will test if the facet contains any refinement
   * @return {boolean}
   */
  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {
    if (!this.isHierarchicalFacet(facet)) {
      return false;
    }

    var refinements = this.getHierarchicalRefinement(facet);

    if (!value) {
      return refinements.length > 0;
    }

    return refinements.indexOf(value) !== -1;
  },
  /**
   * Test if the triple (attribute, operator, value) is already refined.
   * If only the attribute and the operator are provided, it tests if the
   * contains any refinement value.
   * @method
   * @param {string} attribute attribute for which the refinement is applied
   * @param {string} [operator] operator of the refinement
   * @param {string} [value] value of the refinement
   * @return {boolean} true if it is refined
   */
  isNumericRefined: function isNumericRefined(attribute, operator, value) {
    if (value === undefined && operator === undefined) {
      return !!this.numericRefinements[attribute];
    }

    var isOperatorDefined =
      this.numericRefinements[attribute] &&
      this.numericRefinements[attribute][operator] !== undefined;

    if (value === undefined || !isOperatorDefined) {
      return isOperatorDefined;
    }

    var parsedValue = valToNumber(value);
    var isAttributeValueDefined =
      findArray(this.numericRefinements[attribute][operator], parsedValue) !==
      undefined;

    return isOperatorDefined && isAttributeValueDefined;
  },
  /**
   * Returns true if the tag refined, false otherwise
   * @method
   * @param {string} tag the tag to check
   * @return {boolean}
   */
  isTagRefined: function isTagRefined(tag) {
    return this.tagRefinements.indexOf(tag) !== -1;
  },
  /**
   * Returns the list of all disjunctive facets refined
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {value} value value used for filtering
   * @return {string[]}
   */
  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {
    var self = this;

    // attributes used for numeric filter can also be disjunctive
    var disjunctiveNumericRefinedFacets = intersection(
      Object.keys(this.numericRefinements).filter(function(facet) {
        return Object.keys(self.numericRefinements[facet]).length > 0;
      }),
      this.disjunctiveFacets
    );

    return Object.keys(this.disjunctiveFacetsRefinements).filter(function(facet) {
      return self.disjunctiveFacetsRefinements[facet].length > 0;
    })
      .concat(disjunctiveNumericRefinedFacets)
      .concat(this.getRefinedHierarchicalFacets());
  },
  /**
   * Returns the list of all disjunctive facets refined
   * @method
   * @param {string} facet name of the attribute used for faceting
   * @param {value} value value used for filtering
   * @return {string[]}
   */
  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {
    var self = this;
    return intersection(
      // enforce the order between the two arrays,
      // so that refinement name index === hierarchical facet index
      this.hierarchicalFacets.map(function(facet) { return facet.name; }),
      Object.keys(this.hierarchicalFacetsRefinements).filter(function(facet) {
        return self.hierarchicalFacetsRefinements[facet].length > 0;
      })
    );
  },
  /**
   * Returned the list of all disjunctive facets not refined
   * @method
   * @return {string[]}
   */
  getUnrefinedDisjunctiveFacets: function() {
    var refinedFacets = this.getRefinedDisjunctiveFacets();

    return this.disjunctiveFacets.filter(function(f) {
      return refinedFacets.indexOf(f) === -1;
    });
  },

  managedParameters: [
    'index',

    'facets',
    'disjunctiveFacets',
    'facetsRefinements',
    'hierarchicalFacets',
    'facetsExcludes',

    'disjunctiveFacetsRefinements',
    'numericRefinements',
    'tagRefinements',
    'hierarchicalFacetsRefinements'
  ],
  getQueryParams: function getQueryParams() {
    var managedParameters = this.managedParameters;

    var queryParams = {};

    var self = this;
    Object.keys(this).forEach(function(paramName) {
      var paramValue = self[paramName];
      if (managedParameters.indexOf(paramName) === -1 && paramValue !== undefined) {
        queryParams[paramName] = paramValue;
      }
    });

    return queryParams;
  },
  /**
   * Let the user set a specific value for a given parameter. Will return the
   * same instance if the parameter is invalid or if the value is the same as the
   * previous one.
   * @method
   * @param {string} parameter the parameter name
   * @param {any} value the value to be set, must be compliant with the definition
   * of the attribute on the object
   * @return {SearchParameters} the updated state
   */
  setQueryParameter: function setParameter(parameter, value) {
    if (this[parameter] === value) return this;

    var modification = {};

    modification[parameter] = value;

    return this.setQueryParameters(modification);
  },
  /**
   * Let the user set any of the parameters with a plain object.
   * @method
   * @param {object} params all the keys and the values to be updated
   * @return {SearchParameters} a new updated instance
   */
  setQueryParameters: function setQueryParameters(params) {
    if (!params) return this;

    var error = SearchParameters.validate(this, params);

    if (error) {
      throw error;
    }

    var self = this;
    var nextWithNumbers = SearchParameters._parseNumbers(params);
    var previousPlainObject = Object.keys(this).reduce(function(acc, key) {
      acc[key] = self[key];
      return acc;
    }, {});

    var nextPlainObject = Object.keys(nextWithNumbers).reduce(
      function(previous, key) {
        var isPreviousValueDefined = previous[key] !== undefined;
        var isNextValueDefined = nextWithNumbers[key] !== undefined;

        if (isPreviousValueDefined && !isNextValueDefined) {
          return omit(previous, [key]);
        }

        if (isNextValueDefined) {
          previous[key] = nextWithNumbers[key];
        }

        return previous;
      },
      previousPlainObject
    );

    return new this.constructor(nextPlainObject);
  },

  /**
   * Returns a new instance with the page reset. Two scenarios possible:
   * the page is omitted -> return the given instance
   * the page is set -> return a new instance with a page of 0
   * @return {SearchParameters} a new updated instance
   */
  resetPage: function() {
    if (this.page === undefined) {
      return this;
    }

    return this.setPage(0);
  },

  /**
   * Helper function to get the hierarchicalFacet separator or the default one (`>`)
   * @param  {object} hierarchicalFacet
   * @return {string} returns the hierarchicalFacet.separator or `>` as default
   */
  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {
    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];
  },

  /**
   * Helper function to get the hierarchicalFacet separator or the default one (`>`)
   * @private
   * @param  {object} hierarchicalFacet
   * @return {string} returns the hierarchicalFacet.separator or `>` as default
   */
  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {
    return hierarchicalFacet.separator || ' > ';
  },

  /**
   * Helper function to get the hierarchicalFacet prefix path or null
   * @private
   * @param  {object} hierarchicalFacet
   * @return {string} returns the hierarchicalFacet.rootPath or null as default
   */
  _getHierarchicalRootPath: function(hierarchicalFacet) {
    return hierarchicalFacet.rootPath || null;
  },

  /**
   * Helper function to check if we show the parent level of the hierarchicalFacet
   * @private
   * @param  {object} hierarchicalFacet
   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default
   */
  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {
    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {
      return hierarchicalFacet.showParentLevel;
    }
    return true;
  },

  /**
   * Helper function to get the hierarchicalFacet by it's name
   * @param  {string} hierarchicalFacetName
   * @return {object} a hierarchicalFacet
   */
  getHierarchicalFacetByName: function(hierarchicalFacetName) {
    return find(
      this.hierarchicalFacets,
      function(f) {
        return f.name === hierarchicalFacetName;
      }
    );
  },

  /**
   * Get the current breadcrumb for a hierarchical facet, as an array
   * @param  {string} facetName Hierarchical facet name
   * @return {array.<string>} the path as an array of string
   */
  getHierarchicalFacetBreadcrumb: function(facetName) {
    if (!this.isHierarchicalFacet(facetName)) {
      return [];
    }

    var refinement = this.getHierarchicalRefinement(facetName)[0];
    if (!refinement) return [];

    var separator = this._getHierarchicalFacetSeparator(
      this.getHierarchicalFacetByName(facetName)
    );
    var path = refinement.split(separator);
    return path.map(function(part) {
      return part.trim();
    });
  },

  toString: function() {
    return JSON.stringify(this, null, 2);
  }
};

/**
 * Callback used for clearRefinement method
 * @callback SearchParameters.clearCallback
 * @param {OperatorList|FacetList} value the value of the filter
 * @param {string} key the current attribute name
 * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`
 * depending on the type of facet
 * @return {boolean} `true` if the element should be removed. `false` otherwise.
 */
module.exports = SearchParameters;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js ***!
  \*******************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


module.exports = generateTrees;

var orderBy = __webpack_require__(/*! ../functions/orderBy */ "./node_modules/algoliasearch-helper/src/functions/orderBy.js");
var find = __webpack_require__(/*! ../functions/find */ "./node_modules/algoliasearch-helper/src/functions/find.js");
var prepareHierarchicalFacetSortBy = __webpack_require__(/*! ../functions/formatSort */ "./node_modules/algoliasearch-helper/src/functions/formatSort.js");
var fv = __webpack_require__(/*! ../functions/escapeFacetValue */ "./node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js");
var escapeFacetValue = fv.escapeFacetValue;
var unescapeFacetValue = fv.unescapeFacetValue;

function generateTrees(state) {
  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {
    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];
    var hierarchicalFacetRefinement =
      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&
        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||
      '';
    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(
      hierarchicalFacet
    );
    var hierarchicalRootPath = state._getHierarchicalRootPath(
      hierarchicalFacet
    );
    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(
      hierarchicalFacet
    );
    var sortBy = prepareHierarchicalFacetSortBy(
      state._getHierarchicalFacetSortBy(hierarchicalFacet)
    );

    var rootExhaustive = hierarchicalFacetResult.every(function(facetResult) {
      return facetResult.exhaustive;
    });

    var generateTreeFn = generateHierarchicalTree(
      sortBy,
      hierarchicalSeparator,
      hierarchicalRootPath,
      hierarchicalShowParentLevel,
      hierarchicalFacetRefinement
    );

    var results = hierarchicalFacetResult;

    if (hierarchicalRootPath) {
      results = hierarchicalFacetResult.slice(
        hierarchicalRootPath.split(hierarchicalSeparator).length
      );
    }

    return results.reduce(generateTreeFn, {
      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,
      count: null, // root level, no count
      isRefined: true, // root level, always refined
      path: null, // root level, no path
      escapedValue: null,
      exhaustive: rootExhaustive,
      data: null
    });
  };
}

function generateHierarchicalTree(
  sortBy,
  hierarchicalSeparator,
  hierarchicalRootPath,
  hierarchicalShowParentLevel,
  currentRefinement
) {
  return function generateTree(
    hierarchicalTree,
    hierarchicalFacetResult,
    currentHierarchicalLevel
  ) {
    var parent = hierarchicalTree;

    if (currentHierarchicalLevel > 0) {
      var level = 0;

      parent = hierarchicalTree;

      while (level < currentHierarchicalLevel) {
        /**
         * @type {object[]]} hierarchical data
         */
        var data = parent && Array.isArray(parent.data) ? parent.data : [];
        parent = find(data, function(subtree) {
          return subtree.isRefined;
        });
        level++;
      }
    }

    // we found a refined parent, let's add current level data under it
    if (parent) {
      // filter values in case an object has multiple categories:
      //   {
      //     categories: {
      //       level0: ['beers', 'bières'],
      //       level1: ['beers > IPA', 'bières > Belges']
      //     }
      //   }
      //
      // If parent refinement is `beers`, then we do not want to have `bières > Belges`
      // showing up

      var picked = Object.keys(hierarchicalFacetResult.data)
        .map(function(facetValue) {
          return [facetValue, hierarchicalFacetResult.data[facetValue]];
        })
        .filter(function(tuple) {
          var facetValue = tuple[0];
          return onlyMatchingTree(
            facetValue,
            parent.path || hierarchicalRootPath,
            currentRefinement,
            hierarchicalSeparator,
            hierarchicalRootPath,
            hierarchicalShowParentLevel
          );
        });

      parent.data = orderBy(
        picked.map(function(tuple) {
          var facetValue = tuple[0];
          var facetCount = tuple[1];

          return format(
            facetCount,
            facetValue,
            hierarchicalSeparator,
            unescapeFacetValue(currentRefinement),
            hierarchicalFacetResult.exhaustive
          );
        }),
        sortBy[0],
        sortBy[1]
      );
    }

    return hierarchicalTree;
  };
}

function onlyMatchingTree(
  facetValue,
  parentPath,
  currentRefinement,
  hierarchicalSeparator,
  hierarchicalRootPath,
  hierarchicalShowParentLevel
) {
  // we want the facetValue is a child of hierarchicalRootPath
  if (
    hierarchicalRootPath &&
    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||
      hierarchicalRootPath === facetValue)
  ) {
    return false;
  }

  // we always want root levels (only when there is no prefix path)
  return (
    (!hierarchicalRootPath &&
      facetValue.indexOf(hierarchicalSeparator) === -1) ||
    // if there is a rootPath, being root level mean 1 level under rootPath
    (hierarchicalRootPath &&
      facetValue.split(hierarchicalSeparator).length -
        hierarchicalRootPath.split(hierarchicalSeparator).length ===
        1) ||
    // if current refinement is a root level and current facetValue is a root level,
    // keep the facetValue
    (facetValue.indexOf(hierarchicalSeparator) === -1 &&
      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||
    // currentRefinement is a child of the facet value
    currentRefinement.indexOf(facetValue) === 0 ||
    // facetValue is a child of the current parent, add it
    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&
      (hierarchicalShowParentLevel ||
        facetValue.indexOf(currentRefinement) === 0))
  );
}

function format(
  facetCount,
  facetValue,
  hierarchicalSeparator,
  currentRefinement,
  exhaustive
) {
  var parts = facetValue.split(hierarchicalSeparator);
  return {
    name: parts[parts.length - 1].trim(),
    path: facetValue,
    escapedValue: escapeFacetValue(facetValue),
    count: facetCount,
    isRefined:
      currentRefinement === facetValue ||
      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,
    exhaustive: exhaustive,
    data: null
  };
}


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/SearchResults/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/SearchResults/index.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var merge = __webpack_require__(/*! ../functions/merge */ "./node_modules/algoliasearch-helper/src/functions/merge.js");
var defaultsPure = __webpack_require__(/*! ../functions/defaultsPure */ "./node_modules/algoliasearch-helper/src/functions/defaultsPure.js");
var orderBy = __webpack_require__(/*! ../functions/orderBy */ "./node_modules/algoliasearch-helper/src/functions/orderBy.js");
var compact = __webpack_require__(/*! ../functions/compact */ "./node_modules/algoliasearch-helper/src/functions/compact.js");
var find = __webpack_require__(/*! ../functions/find */ "./node_modules/algoliasearch-helper/src/functions/find.js");
var findIndex = __webpack_require__(/*! ../functions/findIndex */ "./node_modules/algoliasearch-helper/src/functions/findIndex.js");
var formatSort = __webpack_require__(/*! ../functions/formatSort */ "./node_modules/algoliasearch-helper/src/functions/formatSort.js");
var fv = __webpack_require__(/*! ../functions/escapeFacetValue */ "./node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js");
var escapeFacetValue = fv.escapeFacetValue;
var unescapeFacetValue = fv.unescapeFacetValue;

var generateHierarchicalTree = __webpack_require__(/*! ./generate-hierarchical-tree */ "./node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js");

/**
 * @typedef SearchResults.Facet
 * @type {object}
 * @property {string} name name of the attribute in the record
 * @property {object} data the faceting data: value, number of entries
 * @property {object} stats undefined unless facet_stats is retrieved from algolia
 */

/**
 * @typedef SearchResults.HierarchicalFacet
 * @type {object}
 * @property {string} name name of the current value given the hierarchical level, trimmed.
 * If root node, you get the facet name
 * @property {number} count number of objects matching this hierarchical value
 * @property {string} path the current hierarchical value full path
 * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise
 * @property {HierarchicalFacet[]} data sub values for the current level
 */

/**
 * @typedef SearchResults.FacetValue
 * @type {object}
 * @property {string} name the facet value itself
 * @property {number} count times this facet appears in the results
 * @property {boolean} isRefined is the facet currently selected
 * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)
 */

/**
 * @typedef Refinement
 * @type {object}
 * @property {string} type the type of filter used:
 * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`
 * @property {string} attributeName name of the attribute used for filtering
 * @property {string} name the value of the filter
 * @property {number} numericValue the value as a number. Only for numeric filters.
 * @property {string} operator the operator used. Only for numeric filters.
 * @property {number} count the number of computed hits for this filter. Only on facets.
 * @property {boolean} exhaustive if the count is exhaustive
 */

/**
 * @param {string[]} attributes
 */
function getIndices(attributes) {
  var indices = {};

  attributes.forEach(function(val, idx) {
    indices[val] = idx;
  });

  return indices;
}

function assignFacetStats(dest, facetStats, key) {
  if (facetStats && facetStats[key]) {
    dest.stats = facetStats[key];
  }
}

/**
 * @typedef {Object} HierarchicalFacet
 * @property {string} name
 * @property {string[]} attributes
 */

/**
 * @param {HierarchicalFacet[]} hierarchicalFacets
 * @param {string} hierarchicalAttributeName
 */
function findMatchingHierarchicalFacetFromAttributeName(
  hierarchicalFacets,
  hierarchicalAttributeName
) {
  return find(hierarchicalFacets, function facetKeyMatchesAttribute(
    hierarchicalFacet
  ) {
    var facetNames = hierarchicalFacet.attributes || [];
    return facetNames.indexOf(hierarchicalAttributeName) > -1;
  });
}

/*eslint-disable */
/**
 * Constructor for SearchResults
 * @class
 * @classdesc SearchResults contains the results of a query to Algolia using the
 * {@link AlgoliaSearchHelper}.
 * @param {SearchParameters} state state that led to the response
 * @param {array.<object>} results the results from algolia client
 * @example <caption>SearchResults of the first query in
 * <a href="http://demos.algolia.com/instant-search-demo">the instant search demo</a></caption>
{
   "hitsPerPage": 10,
   "processingTimeMS": 2,
   "facets": [
      {
         "name": "type",
         "data": {
            "HardGood": 6627,
            "BlackTie": 550,
            "Music": 665,
            "Software": 131,
            "Game": 456,
            "Movie": 1571
         },
         "exhaustive": false
      },
      {
         "exhaustive": false,
         "data": {
            "Free shipping": 5507
         },
         "name": "shipping"
      }
  ],
   "hits": [
      {
         "thumbnailImage": "http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif",
         "_highlightResult": {
            "shortDescription": {
               "matchLevel": "none",
               "value": "Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection",
               "matchedWords": []
            },
            "category": {
               "matchLevel": "none",
               "value": "Computer Security Software",
               "matchedWords": []
            },
            "manufacturer": {
               "matchedWords": [],
               "value": "Webroot",
               "matchLevel": "none"
            },
            "name": {
               "value": "Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows",
               "matchedWords": [],
               "matchLevel": "none"
            }
         },
         "image": "http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg",
         "shipping": "Free shipping",
         "bestSellingRank": 4,
         "shortDescription": "Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection",
         "url": "http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devi…d=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ",
         "name": "Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows",
         "category": "Computer Security Software",
         "salePrice_range": "1 - 50",
         "objectID": "1688832",
         "type": "Software",
         "customerReviewCount": 5980,
         "salePrice": 49.99,
         "manufacturer": "Webroot"
      },
      ....
  ],
   "nbHits": 10000,
   "disjunctiveFacets": [
      {
         "exhaustive": false,
         "data": {
            "5": 183,
            "12": 112,
            "7": 149,
            ...
         },
         "name": "customerReviewCount",
         "stats": {
            "max": 7461,
            "avg": 157.939,
            "min": 1
         }
      },
      {
         "data": {
            "Printer Ink": 142,
            "Wireless Speakers": 60,
            "Point & Shoot Cameras": 48,
            ...
         },
         "name": "category",
         "exhaustive": false
      },
      {
         "exhaustive": false,
         "data": {
            "> 5000": 2,
            "1 - 50": 6524,
            "501 - 2000": 566,
            "201 - 500": 1501,
            "101 - 200": 1360,
            "2001 - 5000": 47
         },
         "name": "salePrice_range"
      },
      {
         "data": {
            "Dynex™": 202,
            "Insignia™": 230,
            "PNY": 72,
            ...
         },
         "name": "manufacturer",
         "exhaustive": false
      }
  ],
   "query": "",
   "nbPages": 100,
   "page": 0,
   "index": "bestbuy"
}
 **/
/*eslint-enable */
function SearchResults(state, results, options) {
  var mainSubResponse = results[0];

  this._rawResults = results;

  var self = this;

  // https://www.algolia.com/doc/api-reference/api-methods/search/#response
  Object.keys(mainSubResponse).forEach(function(key) {
    self[key] = mainSubResponse[key];
  });

  // Make every key of the result options reachable from the instance
  Object.keys(options || {}).forEach(function(key) {
    self[key] = options[key];
  });

  /**
   * query used to generate the results
   * @name query
   * @member {string}
   * @memberof SearchResults
   * @instance
   */
  /**
   * The query as parsed by the engine given all the rules.
   * @name parsedQuery
   * @member {string}
   * @memberof SearchResults
   * @instance
   */
  /**
   * all the records that match the search parameters. Each record is
   * augmented with a new attribute `_highlightResult`
   * which is an object keyed by attribute and with the following properties:
   *  - `value` : the value of the facet highlighted (html)
   *  - `matchLevel`: full, partial or none depending on how the query terms match
   * @name hits
   * @member {object[]}
   * @memberof SearchResults
   * @instance
   */
  /**
   * index where the results come from
   * @name index
   * @member {string}
   * @memberof SearchResults
   * @instance
   */
  /**
   * number of hits per page requested
   * @name hitsPerPage
   * @member {number}
   * @memberof SearchResults
   * @instance
   */
  /**
   * total number of hits of this query on the index
   * @name nbHits
   * @member {number}
   * @memberof SearchResults
   * @instance
   */
  /**
   * total number of pages with respect to the number of hits per page and the total number of hits
   * @name nbPages
   * @member {number}
   * @memberof SearchResults
   * @instance
   */
  /**
   * current page
   * @name page
   * @member {number}
   * @memberof SearchResults
   * @instance
   */
  /**
   * The position if the position was guessed by IP.
   * @name aroundLatLng
   * @member {string}
   * @memberof SearchResults
   * @instance
   * @example "48.8637,2.3615",
   */
  /**
   * The radius computed by Algolia.
   * @name automaticRadius
   * @member {string}
   * @memberof SearchResults
   * @instance
   * @example "126792922",
   */
  /**
   * String identifying the server used to serve this request.
   *
   * getRankingInfo needs to be set to `true` for this to be returned
   *
   * @name serverUsed
   * @member {string}
   * @memberof SearchResults
   * @instance
   * @example "c7-use-2.algolia.net",
   */
  /**
   * Boolean that indicates if the computation of the counts did time out.
   * @deprecated
   * @name timeoutCounts
   * @member {boolean}
   * @memberof SearchResults
   * @instance
   */
  /**
   * Boolean that indicates if the computation of the hits did time out.
   * @deprecated
   * @name timeoutHits
   * @member {boolean}
   * @memberof SearchResults
   * @instance
   */
  /**
   * True if the counts of the facets is exhaustive
   * @name exhaustiveFacetsCount
   * @member {boolean}
   * @memberof SearchResults
   * @instance
   */
  /**
   * True if the number of hits is exhaustive
   * @name exhaustiveNbHits
   * @member {boolean}
   * @memberof SearchResults
   * @instance
   */
  /**
   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).
   * @name userData
   * @member {object[]}
   * @memberof SearchResults
   * @instance
   */
  /**
   * queryID is the unique identifier of the query used to generate the current search results.
   * This value is only available if the `clickAnalytics` search parameter is set to `true`.
   * @name queryID
   * @member {string}
   * @memberof SearchResults
   * @instance
   */

  /**
   * sum of the processing time of all the queries
   * @member {number}
   */
  this.processingTimeMS = results.reduce(function(sum, result) {
    return result.processingTimeMS === undefined
      ? sum
      : sum + result.processingTimeMS;
  }, 0);

  /**
   * disjunctive facets results
   * @member {SearchResults.Facet[]}
   */
  this.disjunctiveFacets = [];
  /**
   * disjunctive facets results
   * @member {SearchResults.HierarchicalFacet[]}
   */
  this.hierarchicalFacets = state.hierarchicalFacets.map(function initFutureTree() {
    return [];
  });
  /**
   * other facets results
   * @member {SearchResults.Facet[]}
   */
  this.facets = [];

  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();

  var facetsIndices = getIndices(state.facets);
  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);
  var nextDisjunctiveResult = 1;

  // Since we send request only for disjunctive facets that have been refined,
  // we get the facets information from the first, general, response.

  var mainFacets = mainSubResponse.facets || {};

  Object.keys(mainFacets).forEach(function(facetKey) {
    var facetValueObject = mainFacets[facetKey];

    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(
      state.hierarchicalFacets,
      facetKey
    );

    if (hierarchicalFacet) {
      // Place the hierarchicalFacet data at the correct index depending on
      // the attributes order that was defined at the helper initialization
      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);
      var idxAttributeName = findIndex(state.hierarchicalFacets, function(f) {
        return f.name === hierarchicalFacet.name;
      });
      self.hierarchicalFacets[idxAttributeName][facetIndex] = {
        attribute: facetKey,
        data: facetValueObject,
        exhaustive: mainSubResponse.exhaustiveFacetsCount
      };
    } else {
      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;
      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;
      var position;

      if (isFacetDisjunctive) {
        position = disjunctiveFacetsIndices[facetKey];
        self.disjunctiveFacets[position] = {
          name: facetKey,
          data: facetValueObject,
          exhaustive: mainSubResponse.exhaustiveFacetsCount
        };
        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);
      }
      if (isFacetConjunctive) {
        position = facetsIndices[facetKey];
        self.facets[position] = {
          name: facetKey,
          data: facetValueObject,
          exhaustive: mainSubResponse.exhaustiveFacetsCount
        };
        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);
      }
    }
  });

  // Make sure we do not keep holes within the hierarchical facets
  this.hierarchicalFacets = compact(this.hierarchicalFacets);

  // aggregate the refined disjunctive facets
  disjunctiveFacets.forEach(function(disjunctiveFacet) {
    var result = results[nextDisjunctiveResult];
    var facets = result && result.facets ? result.facets : {};
    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);

    // There should be only item in facets.
    Object.keys(facets).forEach(function(dfacet) {
      var facetResults = facets[dfacet];

      var position;

      if (hierarchicalFacet) {
        position = findIndex(state.hierarchicalFacets, function(f) {
          return f.name === hierarchicalFacet.name;
        });
        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {
          return f.attribute === dfacet;
        });

        // previous refinements and no results so not able to find it
        if (attributeIndex === -1) {
          return;
        }

        self.hierarchicalFacets[position][attributeIndex].data = merge(
          {},
          self.hierarchicalFacets[position][attributeIndex].data,
          facetResults
        );
      } else {
        position = disjunctiveFacetsIndices[dfacet];

        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};

        self.disjunctiveFacets[position] = {
          name: dfacet,
          data: defaultsPure({}, facetResults, dataFromMainRequest),
          exhaustive: result.exhaustiveFacetsCount
        };
        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);

        if (state.disjunctiveFacetsRefinements[dfacet]) {
          state.disjunctiveFacetsRefinements[dfacet].forEach(function(refinementValue) {
            // add the disjunctive refinements if it is no more retrieved
            if (!self.disjunctiveFacets[position].data[refinementValue] &&
              state.disjunctiveFacetsRefinements[dfacet].indexOf(unescapeFacetValue(refinementValue)) > -1) {
              self.disjunctiveFacets[position].data[refinementValue] = 0;
            }
          });
        }
      }
    });
    nextDisjunctiveResult++;
  });

  // if we have some parent level values for hierarchical facets, merge them
  state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {
    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);
    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);

    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);
    // if we are already at a root refinement (or no refinement at all), there is no
    // root level values request
    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {
      return;
    }

    results.slice(nextDisjunctiveResult).forEach(function(result) {
      var facets = result && result.facets
        ? result.facets
        : {};

      Object.keys(facets).forEach(function(dfacet) {
        var facetResults = facets[dfacet];
        var position = findIndex(state.hierarchicalFacets, function(f) {
          return f.name === hierarchicalFacet.name;
        });
        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {
          return f.attribute === dfacet;
        });

        // previous refinements and no results so not able to find it
        if (attributeIndex === -1) {
          return;
        }

        // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),
        // then the disjunctive values will be `beers` (count: 100),
        // but we do not want to display
        //   | beers (100)
        //     > IPA (5)
        // We want
        //   | beers (5)
        //     > IPA (5)
        var defaultData = {};

        if (currentRefinement.length > 0) {
          var root = currentRefinement[0].split(separator)[0];
          defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];
        }

        self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(
          defaultData,
          facetResults,
          self.hierarchicalFacets[position][attributeIndex].data
        );
      });

      nextDisjunctiveResult++;
    });
  });

  // add the excludes
  Object.keys(state.facetsExcludes).forEach(function(facetName) {
    var excludes = state.facetsExcludes[facetName];
    var position = facetsIndices[facetName];

    self.facets[position] = {
      name: facetName,
      data: mainSubResponse.facets[facetName],
      exhaustive: mainSubResponse.exhaustiveFacetsCount
    };
    excludes.forEach(function(facetValue) {
      self.facets[position] = self.facets[position] || {name: facetName};
      self.facets[position].data = self.facets[position].data || {};
      self.facets[position].data[facetValue] = 0;
    });
  });

  /**
   * @type {Array}
   */
  this.hierarchicalFacets = this.hierarchicalFacets.map(generateHierarchicalTree(state));

  /**
   * @type {Array}
   */
  this.facets = compact(this.facets);
  /**
   * @type {Array}
   */
  this.disjunctiveFacets = compact(this.disjunctiveFacets);

  this._state = state;
}

/**
 * Get a facet object with its name
 * @deprecated
 * @param {string} name name of the faceted attribute
 * @return {SearchResults.Facet} the facet object
 */
SearchResults.prototype.getFacetByName = function(name) {
  function predicate(facet) {
    return facet.name === name;
  }

  return find(this.facets, predicate) ||
    find(this.disjunctiveFacets, predicate) ||
    find(this.hierarchicalFacets, predicate);
};

/**
 * Get the facet values of a specified attribute from a SearchResults object.
 * @private
 * @param {SearchResults} results the search results to search in
 * @param {string} attribute name of the faceted attribute to search for
 * @return {array|object} facet values. For the hierarchical facets it is an object.
 */
function extractNormalizedFacetValues(results, attribute) {
  function predicate(facet) {
    return facet.name === attribute;
  }

  if (results._state.isConjunctiveFacet(attribute)) {
    var facet = find(results.facets, predicate);
    if (!facet) return [];

    return Object.keys(facet.data).map(function(name) {
      var value = escapeFacetValue(name);
      return {
        name: name,
        escapedValue: value,
        count: facet.data[name],
        isRefined: results._state.isFacetRefined(attribute, value),
        isExcluded: results._state.isExcludeRefined(attribute, name)
      };
    });
  } else if (results._state.isDisjunctiveFacet(attribute)) {
    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);
    if (!disjunctiveFacet) return [];

    return Object.keys(disjunctiveFacet.data).map(function(name) {
      var value = escapeFacetValue(name);
      return {
        name: name,
        escapedValue: value,
        count: disjunctiveFacet.data[name],
        isRefined: results._state.isDisjunctiveFacetRefined(attribute, value)
      };
    });
  } else if (results._state.isHierarchicalFacet(attribute)) {
    return find(results.hierarchicalFacets, predicate);
  }
}

/**
 * Sort nodes of a hierarchical or disjunctive facet results
 * @private
 * @param {function} sortFn
 * @param {HierarchicalFacet|Array} node node upon which we want to apply the sort
 * @param {string[]} names attribute names
 * @param {number} [level=0] current index in the names array
 */
function recSort(sortFn, node, names, level) {
  level = level || 0;

  if (Array.isArray(node)) {
    return sortFn(node, names[level]);
  }

  if (!node.data || node.data.length === 0) {
    return node;
  }

  var children = node.data.map(function(childNode) {
    return recSort(sortFn, childNode, names, level + 1);
  });
  var sortedChildren = sortFn(children, names[level]);
  var newNode = defaultsPure({data: sortedChildren}, node);
  return newNode;
}

SearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];

function vanillaSortFn(order, data) {
  return data.sort(order);
}

/**
 * @typedef FacetOrdering
 * @type {Object}
 * @property {string[]} [order]
 * @property {'count' | 'alpha' | 'hidden'} [sortRemainingBy]
 */

/**
 * Sorts facet arrays via their facet ordering
 * @param {Array} facetValues the values
 * @param {FacetOrdering} facetOrdering the ordering
 * @returns {Array}
 */
function sortViaFacetOrdering(facetValues, facetOrdering) {
  var orderedFacets = [];
  var remainingFacets = [];

  var order = facetOrdering.order || [];
  /**
   * an object with the keys being the values in order, the values their index:
   * ['one', 'two'] -> { one: 0, two: 1 }
   */
  var reverseOrder = order.reduce(function(acc, name, i) {
    acc[name] = i;
    return acc;
  }, {});

  facetValues.forEach(function(item) {
    // hierarchical facets get sorted using their raw name
    var name = item.path || item.name;
    if (reverseOrder[name] !== undefined) {
      orderedFacets[reverseOrder[name]] = item;
    } else {
      remainingFacets.push(item);
    }
  });

  orderedFacets = orderedFacets.filter(function(facet) {
    return facet;
  });

  var sortRemainingBy = facetOrdering.sortRemainingBy;
  var ordering;
  if (sortRemainingBy === 'hidden') {
    return orderedFacets;
  } else if (sortRemainingBy === 'alpha') {
    ordering = [['path', 'name'], ['asc', 'asc']];
  } else {
    ordering = [['count'], ['desc']];
  }

  return orderedFacets.concat(
    orderBy(remainingFacets, ordering[0], ordering[1])
  );
}

/**
 * @param {SearchResults} results the search results class
 * @param {string} attribute the attribute to retrieve ordering of
 * @returns {FacetOrdering=}
 */
function getFacetOrdering(results, attribute) {
  return (
    results.renderingContent &&
    results.renderingContent.facetOrdering &&
    results.renderingContent.facetOrdering.values &&
    results.renderingContent.facetOrdering.values[attribute]
  );
}

/**
 * Get a the list of values for a given facet attribute. Those values are sorted
 * refinement first, descending count (bigger value on top), and name ascending
 * (alphabetical order). The sort formula can overridden using either string based
 * predicates or a function.
 *
 * This method will return all the values returned by the Algolia engine plus all
 * the values already refined. This means that it can happen that the
 * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)
 * might not be respected if you have facet values that are already refined.
 * @param {string} attribute attribute name
 * @param {object} opts configuration options.
 * @param {boolean} [opts.facetOrdering]
 * Force the use of facetOrdering from the result if a sortBy is present. If
 * sortBy isn't present, facetOrdering will be used automatically.
 * @param {Array.<string> | function} opts.sortBy
 * When using strings, it consists of
 * the name of the [FacetValue](#SearchResults.FacetValue) or the
 * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the
 * order (`asc` or `desc`). For example to order the value by count, the
 * argument would be `['count:asc']`.
 *
 * If only the attribute name is specified, the ordering defaults to the one
 * specified in the default value for this attribute.
 *
 * When not specified, the order is
 * ascending.  This parameter can also be a function which takes two facet
 * values and should return a number, 0 if equal, 1 if the first argument is
 * bigger or -1 otherwise.
 *
 * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`
 * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of
 * the attribute requested (hierarchical, disjunctive or conjunctive)
 * @example
 * helper.on('result', function(event){
 *   //get values ordered only by name ascending using the string predicate
 *   event.results.getFacetValues('city', {sortBy: ['name:asc']});
 *   //get values  ordered only by count ascending using a function
 *   event.results.getFacetValues('city', {
 *     // this is equivalent to ['count:asc']
 *     sortBy: function(a, b) {
 *       if (a.count === b.count) return 0;
 *       if (a.count > b.count)   return 1;
 *       if (b.count > a.count)   return -1;
 *     }
 *   });
 * });
 */
SearchResults.prototype.getFacetValues = function(attribute, opts) {
  var facetValues = extractNormalizedFacetValues(this, attribute);
  if (!facetValues) {
    return undefined;
  }

  var options = defaultsPure({}, opts, {
    sortBy: SearchResults.DEFAULT_SORT,
    // if no sortBy is given, attempt to sort based on facetOrdering
    // if it is given, we still allow to sort via facet ordering first
    facetOrdering: !(opts && opts.sortBy)
  });

  var results = this;
  var attributes;
  if (Array.isArray(facetValues)) {
    attributes = [attribute];
  } else {
    var config = results._state.getHierarchicalFacetByName(facetValues.name);
    attributes = config.attributes;
  }

  return recSort(function(data, facetName) {
    if (options.facetOrdering) {
      var facetOrdering = getFacetOrdering(results, facetName);
      if (Boolean(facetOrdering)) {
        return sortViaFacetOrdering(data, facetOrdering);
      }
    }

    if (Array.isArray(options.sortBy)) {
      var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);
      return orderBy(data, order[0], order[1]);
    } else if (typeof options.sortBy === 'function') {
      return vanillaSortFn(options.sortBy, data);
    }
    throw new Error(
      'options.sortBy is optional but if defined it must be ' +
        'either an array of string (predicates) or a sorting function'
    );
  }, facetValues, attributes);
};

/**
 * Returns the facet stats if attribute is defined and the facet contains some.
 * Otherwise returns undefined.
 * @param {string} attribute name of the faceted attribute
 * @return {object} The stats of the facet
 */
SearchResults.prototype.getFacetStats = function(attribute) {
  if (this._state.isConjunctiveFacet(attribute)) {
    return getFacetStatsIfAvailable(this.facets, attribute);
  } else if (this._state.isDisjunctiveFacet(attribute)) {
    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);
  }

  return undefined;
};

/**
 * @typedef {Object} FacetListItem
 * @property {string} name
 */

/**
 * @param {FacetListItem[]} facetList (has more items, but enough for here)
 * @param {string} facetName
 */
function getFacetStatsIfAvailable(facetList, facetName) {
  var data = find(facetList, function(facet) {
    return facet.name === facetName;
  });
  return data && data.stats;
}

/**
 * Returns all refinements for all filters + tags. It also provides
 * additional information: count and exhaustiveness for each filter.
 *
 * See the [refinement type](#Refinement) for an exhaustive view of the available
 * data.
 *
 * Note that for a numeric refinement, results are grouped per operator, this
 * means that it will return responses for operators which are empty.
 *
 * @return {Array.<Refinement>} all the refinements
 */
SearchResults.prototype.getRefinements = function() {
  var state = this._state;
  var results = this;
  var res = [];

  Object.keys(state.facetsRefinements).forEach(function(attributeName) {
    state.facetsRefinements[attributeName].forEach(function(name) {
      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));
    });
  });

  Object.keys(state.facetsExcludes).forEach(function(attributeName) {
    state.facetsExcludes[attributeName].forEach(function(name) {
      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));
    });
  });

  Object.keys(state.disjunctiveFacetsRefinements).forEach(function(attributeName) {
    state.disjunctiveFacetsRefinements[attributeName].forEach(function(name) {
      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));
    });
  });

  Object.keys(state.hierarchicalFacetsRefinements).forEach(function(attributeName) {
    state.hierarchicalFacetsRefinements[attributeName].forEach(function(name) {
      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));
    });
  });


  Object.keys(state.numericRefinements).forEach(function(attributeName) {
    var operators = state.numericRefinements[attributeName];
    Object.keys(operators).forEach(function(operator) {
      operators[operator].forEach(function(value) {
        res.push({
          type: 'numeric',
          attributeName: attributeName,
          name: value,
          numericValue: value,
          operator: operator
        });
      });
    });
  });

  state.tagRefinements.forEach(function(name) {
    res.push({type: 'tag', attributeName: '_tags', name: name});
  });

  return res;
};

/**
 * @typedef {Object} Facet
 * @property {string} name
 * @property {Object} data
 * @property {boolean} exhaustive
 */

/**
 * @param {*} state
 * @param {*} type
 * @param {string} attributeName
 * @param {*} name
 * @param {Facet[]} resultsFacets
 */
function getRefinement(state, type, attributeName, name, resultsFacets) {
  var facet = find(resultsFacets, function(f) {
    return f.name === attributeName;
  });
  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;
  var exhaustive = (facet && facet.exhaustive) || false;

  return {
    type: type,
    attributeName: attributeName,
    name: name,
    count: count,
    exhaustive: exhaustive
  };
}

/**
 * @param {*} state
 * @param {string} attributeName
 * @param {*} name
 * @param {Facet[]} resultsFacets
 */
function getHierarchicalRefinement(state, attributeName, name, resultsFacets) {
  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);
  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);
  var split = name.split(separator);
  var rootFacet = find(resultsFacets, function(facet) {
    return facet.name === attributeName;
  });

  var facet = split.reduce(function(intermediateFacet, part) {
    var newFacet =
      intermediateFacet && find(intermediateFacet.data, function(f) {
        return f.name === part;
      });
    return newFacet !== undefined ? newFacet : intermediateFacet;
  }, rootFacet);

  var count = (facet && facet.count) || 0;
  var exhaustive = (facet && facet.exhaustive) || false;
  var path = (facet && facet.path) || '';

  return {
    type: 'hierarchical',
    attributeName: attributeName,
    name: path,
    count: count,
    exhaustive: exhaustive
  };
}

module.exports = SearchResults;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/algoliasearch.helper.js":
/*!***********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/algoliasearch.helper.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var SearchParameters = __webpack_require__(/*! ./SearchParameters */ "./node_modules/algoliasearch-helper/src/SearchParameters/index.js");
var SearchResults = __webpack_require__(/*! ./SearchResults */ "./node_modules/algoliasearch-helper/src/SearchResults/index.js");
var DerivedHelper = __webpack_require__(/*! ./DerivedHelper */ "./node_modules/algoliasearch-helper/src/DerivedHelper/index.js");
var requestBuilder = __webpack_require__(/*! ./requestBuilder */ "./node_modules/algoliasearch-helper/src/requestBuilder.js");

var EventEmitter = __webpack_require__(/*! @algolia/events */ "./node_modules/@algolia/events/events.js");
var inherits = __webpack_require__(/*! ./functions/inherits */ "./node_modules/algoliasearch-helper/src/functions/inherits.js");
var objectHasKeys = __webpack_require__(/*! ./functions/objectHasKeys */ "./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js");
var omit = __webpack_require__(/*! ./functions/omit */ "./node_modules/algoliasearch-helper/src/functions/omit.js");
var merge = __webpack_require__(/*! ./functions/merge */ "./node_modules/algoliasearch-helper/src/functions/merge.js");

var version = __webpack_require__(/*! ./version */ "./node_modules/algoliasearch-helper/src/version.js");
var escapeFacetValue = (__webpack_require__(/*! ./functions/escapeFacetValue */ "./node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js").escapeFacetValue);

/**
 * Event triggered when a parameter is set or updated
 * @event AlgoliaSearchHelper#event:change
 * @property {object} event
 * @property {SearchParameters} event.state the current parameters with the latest changes applied
 * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request
 * @example
 * helper.on('change', function(event) {
 *   console.log('The parameters have changed');
 * });
 */

/**
 * Event triggered when a main search is sent to Algolia
 * @event AlgoliaSearchHelper#event:search
 * @property {object} event
 * @property {SearchParameters} event.state the parameters used for this search
 * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.
 * @example
 * helper.on('search', function(event) {
 *   console.log('Search sent');
 * });
 */

/**
 * Event triggered when a search using `searchForFacetValues` is sent to Algolia
 * @event AlgoliaSearchHelper#event:searchForFacetValues
 * @property {object} event
 * @property {SearchParameters} event.state the parameters used for this search it is the first search.
 * @property {string} event.facet the facet searched into
 * @property {string} event.query the query used to search in the facets
 * @example
 * helper.on('searchForFacetValues', function(event) {
 *   console.log('searchForFacetValues sent');
 * });
 */

/**
 * Event triggered when a search using `searchOnce` is sent to Algolia
 * @event AlgoliaSearchHelper#event:searchOnce
 * @property {object} event
 * @property {SearchParameters} event.state the parameters used for this search it is the first search.
 * @example
 * helper.on('searchOnce', function(event) {
 *   console.log('searchOnce sent');
 * });
 */

/**
 * Event triggered when the results are retrieved from Algolia
 * @event AlgoliaSearchHelper#event:result
 * @property {object} event
 * @property {SearchResults} event.results the results received from Algolia
 * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).
 * @example
 * helper.on('result', function(event) {
 *   console.log('Search results received');
 * });
 */

/**
 * Event triggered when Algolia sends back an error. For example, if an unknown parameter is
 * used, the error can be caught using this event.
 * @event AlgoliaSearchHelper#event:error
 * @property {object} event
 * @property {Error} event.error the error returned by the Algolia.
 * @example
 * helper.on('error', function(event) {
 *   console.log('Houston we got a problem.');
 * });
 */

/**
 * Event triggered when the queue of queries have been depleted (with any result or outdated queries)
 * @event AlgoliaSearchHelper#event:searchQueueEmpty
 * @example
 * helper.on('searchQueueEmpty', function() {
 *   console.log('No more search pending');
 *   // This is received before the result event if we're not expecting new results
 * });
 *
 * helper.search();
 */

/**
 * Initialize a new AlgoliaSearchHelper
 * @class
 * @classdesc The AlgoliaSearchHelper is a class that ease the management of the
 * search. It provides an event based interface for search callbacks:
 *  - change: when the internal search state is changed.
 *    This event contains a {@link SearchParameters} object and the
 *    {@link SearchResults} of the last result if any.
 *  - search: when a search is triggered using the `search()` method.
 *  - result: when the response is retrieved from Algolia and is processed.
 *    This event contains a {@link SearchResults} object and the
 *    {@link SearchParameters} corresponding to this answer.
 *  - error: when the response is an error. This event contains the error returned by the server.
 * @param  {AlgoliaSearch} client an AlgoliaSearch client
 * @param  {string} index the index name to query
 * @param  {SearchParameters | object} options an object defining the initial
 * config of the search. It doesn't have to be a {SearchParameters},
 * just an object containing the properties you need from it.
 */
function AlgoliaSearchHelper(client, index, options) {
  if (typeof client.addAlgoliaAgent === 'function') {
    client.addAlgoliaAgent('JS Helper (' + version + ')');
  }

  this.setClient(client);
  var opts = options || {};
  opts.index = index;
  this.state = SearchParameters.make(opts);
  this.lastResults = null;
  this._queryId = 0;
  this._lastQueryIdReceived = -1;
  this.derivedHelpers = [];
  this._currentNbQueries = 0;
}

inherits(AlgoliaSearchHelper, EventEmitter);

/**
 * Start the search with the parameters set in the state. When the
 * method is called, it triggers a `search` event. The results will
 * be available through the `result` event. If an error occurs, an
 * `error` will be fired instead.
 * @return {AlgoliaSearchHelper}
 * @fires search
 * @fires result
 * @fires error
 * @chainable
 */
AlgoliaSearchHelper.prototype.search = function() {
  this._search({onlyWithDerivedHelpers: false});
  return this;
};

AlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function() {
  this._search({onlyWithDerivedHelpers: true});
  return this;
};

/**
 * Gets the search query parameters that would be sent to the Algolia Client
 * for the hits
 * @return {object} Query Parameters
 */
AlgoliaSearchHelper.prototype.getQuery = function() {
  var state = this.state;
  return requestBuilder._getHitsSearchParams(state);
};

/**
 * Start a search using a modified version of the current state. This method does
 * not trigger the helper lifecycle and does not modify the state kept internally
 * by the helper. This second aspect means that the next search call will be the
 * same as a search call before calling searchOnce.
 * @param {object} options can contain all the parameters that can be set to SearchParameters
 * plus the index
 * @param {function} [callback] optional callback executed when the response from the
 * server is back.
 * @return {promise|undefined} if a callback is passed the method returns undefined
 * otherwise it returns a promise containing an object with two keys :
 *  - content with a SearchResults
 *  - state with the state used for the query as a SearchParameters
 * @example
 * // Changing the number of records returned per page to 1
 * // This example uses the callback API
 * var state = helper.searchOnce({hitsPerPage: 1},
 *   function(error, content, state) {
 *     // if an error occurred it will be passed in error, otherwise its value is null
 *     // content contains the results formatted as a SearchResults
 *     // state is the instance of SearchParameters used for this search
 *   });
 * @example
 * // Changing the number of records returned per page to 1
 * // This example uses the promise API
 * var state1 = helper.searchOnce({hitsPerPage: 1})
 *                 .then(promiseHandler);
 *
 * function promiseHandler(res) {
 *   // res contains
 *   // {
 *   //   content : SearchResults
 *   //   state   : SearchParameters (the one used for this specific search)
 *   // }
 * }
 */
AlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {
  var tempState = !options ? this.state : this.state.setQueryParameters(options);
  var queries = requestBuilder._getQueries(tempState.index, tempState);
  var self = this;

  this._currentNbQueries++;

  this.emit('searchOnce', {
    state: tempState
  });

  if (cb) {
    this.client
      .search(queries)
      .then(function(content) {
        self._currentNbQueries--;
        if (self._currentNbQueries === 0) {
          self.emit('searchQueueEmpty');
        }

        cb(null, new SearchResults(tempState, content.results), tempState);
      })
      .catch(function(err) {
        self._currentNbQueries--;
        if (self._currentNbQueries === 0) {
          self.emit('searchQueueEmpty');
        }

        cb(err, null, tempState);
      });

    return undefined;
  }

  return this.client.search(queries).then(function(content) {
    self._currentNbQueries--;
    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');
    return {
      content: new SearchResults(tempState, content.results),
      state: tempState,
      _originalResponse: content
    };
  }, function(e) {
    self._currentNbQueries--;
    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');
    throw e;
  });
};

 /**
 * Start the search for answers with the parameters set in the state.
 * This method returns a promise.
 * @param {Object} options - the options for answers API call
 * @param {string[]} options.attributesForPrediction - Attributes to use for predictions. If empty, `searchableAttributes` is used instead.
 * @param {string[]} options.queryLanguages - The languages in the query. Currently only supports ['en'].
 * @param {number} options.nbHits - Maximum number of answers to retrieve from the Answers Engine. Cannot be greater than 1000.
 *
 * @return {promise} the answer results
 */
AlgoliaSearchHelper.prototype.findAnswers = function(options) {
  var state = this.state;
  var derivedHelper = this.derivedHelpers[0];
  if (!derivedHelper) {
    return Promise.resolve([]);
  }
  var derivedState = derivedHelper.getModifiedState(state);
  var data = merge(
    {
      attributesForPrediction: options.attributesForPrediction,
      nbHits: options.nbHits
    },
    {
      params: omit(requestBuilder._getHitsSearchParams(derivedState), [
        'attributesToSnippet',
        'hitsPerPage',
        'restrictSearchableAttributes',
        'snippetEllipsisText' // FIXME remove this line once the engine is fixed.
      ])
    }
  );

  var errorMessage = 'search for answers was called, but this client does not have a function client.initIndex(index).findAnswers';
  if (typeof this.client.initIndex !== 'function') {
    throw new Error(errorMessage);
  }
  var index = this.client.initIndex(derivedState.index);
  if (typeof index.findAnswers !== 'function') {
    throw new Error(errorMessage);
  }
  return index.findAnswers(derivedState.query, options.queryLanguages, data);
};

/**
 * Structure of each result when using
 * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)
 * @typedef FacetSearchHit
 * @type {object}
 * @property {string} value the facet value
 * @property {string} highlighted the facet value highlighted with the query string
 * @property {number} count number of occurrence of this facet value
 * @property {boolean} isRefined true if the value is already refined
 */

/**
 * Structure of the data resolved by the
 * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)
 * promise.
 * @typedef FacetSearchResult
 * @type {object}
 * @property {FacetSearchHit} facetHits the results for this search for facet values
 * @property {number} processingTimeMS time taken by the query inside the engine
 */

/**
 * Search for facet values based on an query and the name of a faceted attribute. This
 * triggers a search and will return a promise. On top of using the query, it also sends
 * the parameters from the state so that the search is narrowed down to only the possible values.
 *
 * See the description of [FacetSearchResult](reference.html#FacetSearchResult)
 * @param {string} facet the name of the faceted attribute
 * @param {string} query the string query for the search
 * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100
 * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes
 * it in the generated query.
 * @return {promise.<FacetSearchResult>} the results of the search
 */
AlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {
  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';
  var clientHasInitIndex = typeof this.client.initIndex === 'function';
  if (
    !clientHasSFFV &&
    !clientHasInitIndex &&
    typeof this.client.search !== 'function'
  ) {
    throw new Error(
      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'
    );
  }

  var state = this.state.setQueryParameters(userState || {});
  var isDisjunctive = state.isDisjunctiveFacet(facet);
  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);

  this._currentNbQueries++;
  var self = this;
  var searchForFacetValuesPromise;
  // newer algoliasearch ^3.27.1 - ~4.0.0
  if (clientHasSFFV) {
    searchForFacetValuesPromise = this.client.searchForFacetValues([
      {indexName: state.index, params: algoliaQuery}
    ]);
    // algoliasearch < 3.27.1
  } else if (clientHasInitIndex) {
    searchForFacetValuesPromise = this.client
      .initIndex(state.index)
      .searchForFacetValues(algoliaQuery);
    // algoliasearch ~5.0.0
  } else {
    // @MAJOR only use client.search
    delete algoliaQuery.facetName;
    searchForFacetValuesPromise = this.client
      .search([
        {
          type: 'facet',
          facet: facet,
          indexName: state.index,
          params: algoliaQuery
        }
      ])
      .then(function processResponse(response) {
        return response.results[0];
      });
  }

  this.emit('searchForFacetValues', {
    state: state,
    facet: facet,
    query: query
  });

  return searchForFacetValuesPromise.then(function addIsRefined(content) {
    self._currentNbQueries--;
    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');

    content = Array.isArray(content) ? content[0] : content;

    content.facetHits.forEach(function(f) {
      f.escapedValue = escapeFacetValue(f.value);
      f.isRefined = isDisjunctive
        ? state.isDisjunctiveFacetRefined(facet, f.escapedValue)
        : state.isFacetRefined(facet, f.escapedValue);
    });

    return content;
  }, function(e) {
    self._currentNbQueries--;
    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');
    throw e;
  });
};

/**
 * Sets the text query used for the search.
 *
 * This method resets the current page to 0.
 * @param  {string} q the user query
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.setQuery = function(q) {
  this._change({
    state: this.state.resetPage().setQuery(q),
    isPageReset: true
  });

  return this;
};

/**
 * Remove all the types of refinements except tags. A string can be provided to remove
 * only the refinements of a specific attribute. For more advanced use case, you can
 * provide a function instead. This function should follow the
 * [clearCallback definition](#SearchParameters.clearCallback).
 *
 * This method resets the current page to 0.
 * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 * @example
 * // Removing all the refinements
 * helper.clearRefinements().search();
 * @example
 * // Removing all the filters on a the category attribute.
 * helper.clearRefinements('category').search();
 * @example
 * // Removing only the exclude filters on the category facet.
 * helper.clearRefinements(function(value, attribute, type) {
 *   return type === 'exclude' && attribute === 'category';
 * }).search();
 */
AlgoliaSearchHelper.prototype.clearRefinements = function(name) {
  this._change({
    state: this.state.resetPage().clearRefinements(name),
    isPageReset: true
  });

  return this;
};

/**
 * Remove all the tag filters.
 *
 * This method resets the current page to 0.
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.clearTags = function() {
  this._change({
    state: this.state.resetPage().clearTags(),
    isPageReset: true
  });

  return this;
};

/**
 * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the
 * filter is already set, it doesn't change the filters.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} value the associated value (will be converted to string)
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {
  this._change({
    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}
 */
AlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {
  return this.addDisjunctiveFacetRefinement.apply(this, arguments);
};

/**
 * Adds a refinement on a hierarchical facet. It will throw
 * an exception if the facet is not defined or if the facet
 * is already refined.
 *
 * This method resets the current page to 0.
 * @param {string} facet the facet name
 * @param {string} path the hierarchical facet path
 * @return {AlgoliaSearchHelper}
 * @throws Error if the facet is not defined or if the facet is refined
 * @chainable
 * @fires change
 */
AlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {
  this._change({
    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the
 * filter is already set, it doesn't change the filters.
 *
 * This method resets the current page to 0.
 * @param  {string} attribute the attribute on which the numeric filter applies
 * @param  {string} operator the operator of the filter
 * @param  {number} value the value of the filter
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {
  this._change({
    state: this.state.resetPage().addNumericRefinement(attribute, operator, value),
    isPageReset: true
  });

  return this;
};

/**
 * Adds a filter to a faceted attribute with the `value` provided. If the
 * filter is already set, it doesn't change the filters.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} value the associated value (will be converted to string)
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {
  this._change({
    state: this.state.resetPage().addFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}
 */
AlgoliaSearchHelper.prototype.addRefine = function() {
  return this.addFacetRefinement.apply(this, arguments);
};


/**
 * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the
 * filter is already set, it doesn't change the filters.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} value the associated value (will be converted to string)
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {
  this._change({
    state: this.state.resetPage().addExcludeRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}
 */
AlgoliaSearchHelper.prototype.addExclude = function() {
  return this.addFacetExclusion.apply(this, arguments);
};

/**
 * Adds a tag filter with the `tag` provided. If the
 * filter is already set, it doesn't change the filters.
 *
 * This method resets the current page to 0.
 * @param {string} tag the tag to add to the filter
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.addTag = function(tag) {
  this._change({
    state: this.state.resetPage().addTagRefinement(tag),
    isPageReset: true
  });

  return this;
};

/**
 * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the
 * filter is not set, it doesn't change the filters.
 *
 * Some parameters are optional, triggering different behavior:
 *  - if the value is not provided, then all the numeric value will be removed for the
 *  specified attribute/operator couple.
 *  - if the operator is not provided either, then all the numeric filter on this attribute
 *  will be removed.
 *
 * This method resets the current page to 0.
 * @param  {string} attribute the attribute on which the numeric filter applies
 * @param  {string} [operator] the operator of the filter
 * @param  {number} [value] the value of the filter
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {
  this._change({
    state: this.state.resetPage().removeNumericRefinement(attribute, operator, value),
    isPageReset: true
  });

  return this;
};

/**
 * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the
 * filter is not set, it doesn't change the filters.
 *
 * If the value is omitted, then this method will remove all the filters for the
 * attribute.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} [value] the associated value
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {
  this._change({
    state: this.state.resetPage().removeDisjunctiveFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}
 */
AlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {
  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);
};

/**
 * Removes the refinement set on a hierarchical facet.
 * @param {string} facet the facet name
 * @return {AlgoliaSearchHelper}
 * @throws Error if the facet is not defined or if the facet is not refined
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {
  this._change({
    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),
    isPageReset: true
  });

  return this;
};

/**
 * Removes a filter to a faceted attribute with the `value` provided. If the
 * filter is not set, it doesn't change the filters.
 *
 * If the value is omitted, then this method will remove all the filters for the
 * attribute.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} [value] the associated value
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {
  this._change({
    state: this.state.resetPage().removeFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}
 */
AlgoliaSearchHelper.prototype.removeRefine = function() {
  return this.removeFacetRefinement.apply(this, arguments);
};

/**
 * Removes an exclusion filter to a faceted attribute with the `value` provided. If the
 * filter is not set, it doesn't change the filters.
 *
 * If the value is omitted, then this method will remove all the filters for the
 * attribute.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} [value] the associated value
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {
  this._change({
    state: this.state.resetPage().removeExcludeRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}
 */
AlgoliaSearchHelper.prototype.removeExclude = function() {
  return this.removeFacetExclusion.apply(this, arguments);
};

/**
 * Removes a tag filter with the `tag` provided. If the
 * filter is not set, it doesn't change the filters.
 *
 * This method resets the current page to 0.
 * @param {string} tag tag to remove from the filter
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.removeTag = function(tag) {
  this._change({
    state: this.state.resetPage().removeTagRefinement(tag),
    isPageReset: true
  });

  return this;
};

/**
 * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If
 * the value is set then it removes it, otherwise it adds the filter.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} value the associated value
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {
  this._change({
    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}
 */
AlgoliaSearchHelper.prototype.toggleExclude = function() {
  return this.toggleFacetExclusion.apply(this, arguments);
};

/**
 * Adds or removes a filter to a faceted attribute with the `value` provided. If
 * the value is set then it removes it, otherwise it adds the filter.
 *
 * This method can be used for conjunctive, disjunctive and hierarchical filters.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} value the associated value
 * @return {AlgoliaSearchHelper}
 * @throws Error will throw an error if the facet is not declared in the settings of the helper
 * @fires change
 * @chainable
 * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}
 */
AlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {
  return this.toggleFacetRefinement(facet, value);
};

/**
 * Adds or removes a filter to a faceted attribute with the `value` provided. If
 * the value is set then it removes it, otherwise it adds the filter.
 *
 * This method can be used for conjunctive, disjunctive and hierarchical filters.
 *
 * This method resets the current page to 0.
 * @param  {string} facet the facet to refine
 * @param  {string} value the associated value
 * @return {AlgoliaSearchHelper}
 * @throws Error will throw an error if the facet is not declared in the settings of the helper
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {
  this._change({
    state: this.state.resetPage().toggleFacetRefinement(facet, value),
    isPageReset: true
  });

  return this;
};

/**
 * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}
 */
AlgoliaSearchHelper.prototype.toggleRefine = function() {
  return this.toggleFacetRefinement.apply(this, arguments);
};

/**
 * Adds or removes a tag filter with the `value` provided. If
 * the value is set then it removes it, otherwise it adds the filter.
 *
 * This method resets the current page to 0.
 * @param {string} tag tag to remove or add
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.toggleTag = function(tag) {
  this._change({
    state: this.state.resetPage().toggleTagRefinement(tag),
    isPageReset: true
  });

  return this;
};

/**
 * Increments the page number by one.
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 * @example
 * helper.setPage(0).nextPage().getPage();
 * // returns 1
 */
AlgoliaSearchHelper.prototype.nextPage = function() {
  var page = this.state.page || 0;
  return this.setPage(page + 1);
};

/**
 * Decrements the page number by one.
 * @fires change
 * @return {AlgoliaSearchHelper}
 * @chainable
 * @example
 * helper.setPage(1).previousPage().getPage();
 * // returns 0
 */
AlgoliaSearchHelper.prototype.previousPage = function() {
  var page = this.state.page || 0;
  return this.setPage(page - 1);
};

/**
 * @private
 */
function setCurrentPage(page) {
  if (page < 0) throw new Error('Page requested below 0.');

  this._change({
    state: this.state.setPage(page),
    isPageReset: false
  });

  return this;
}

/**
 * Change the current page
 * @deprecated
 * @param  {number} page The page number
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;

/**
 * Updates the current page.
 * @function
 * @param  {number} page The page number
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.setPage = setCurrentPage;

/**
 * Updates the name of the index that will be targeted by the query.
 *
 * This method resets the current page to 0.
 * @param {string} name the index name
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.setIndex = function(name) {
  this._change({
    state: this.state.resetPage().setIndex(name),
    isPageReset: true
  });

  return this;
};

/**
 * Update a parameter of the search. This method reset the page
 *
 * The complete list of parameters is available on the
 * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).
 * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)
 * or benefit from higher-level APIs (all the kind of filters and facets have their own API)
 *
 * This method resets the current page to 0.
 * @param {string} parameter name of the parameter to update
 * @param {any} value new value of the parameter
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 * @example
 * helper.setQueryParameter('hitsPerPage', 20).search();
 */
AlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {
  this._change({
    state: this.state.resetPage().setQueryParameter(parameter, value),
    isPageReset: true
  });

  return this;
};

/**
 * Set the whole state (warning: will erase previous state)
 * @param {SearchParameters} newState the whole new state
 * @return {AlgoliaSearchHelper}
 * @fires change
 * @chainable
 */
AlgoliaSearchHelper.prototype.setState = function(newState) {
  this._change({
    state: SearchParameters.make(newState),
    isPageReset: false
  });

  return this;
};

/**
 * Override the current state without triggering a change event.
 * Do not use this method unless you know what you are doing. (see the example
 * for a legit use case)
 * @param {SearchParameters} newState the whole new state
 * @return {AlgoliaSearchHelper}
 * @example
 *  helper.on('change', function(state){
 *    // In this function you might want to find a way to store the state in the url/history
 *    updateYourURL(state)
 *  })
 *  window.onpopstate = function(event){
 *    // This is naive though as you should check if the state is really defined etc.
 *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()
 *  }
 * @chainable
 */
AlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {
  this.state = new SearchParameters(newState);
  return this;
};

/**
 * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.
 * @param {string} attribute the name of the attribute
 * @return {boolean} true if the attribute is filtered by at least one value
 * @example
 * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters
 * helper.hasRefinements('price'); // false
 * helper.addNumericRefinement('price', '>', 100);
 * helper.hasRefinements('price'); // true
 *
 * helper.hasRefinements('color'); // false
 * helper.addFacetRefinement('color', 'blue');
 * helper.hasRefinements('color'); // true
 *
 * helper.hasRefinements('material'); // false
 * helper.addDisjunctiveFacetRefinement('material', 'plastic');
 * helper.hasRefinements('material'); // true
 *
 * helper.hasRefinements('categories'); // false
 * helper.toggleFacetRefinement('categories', 'kitchen > knife');
 * helper.hasRefinements('categories'); // true
 *
 */
AlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {
  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {
    return true;
  } else if (this.state.isConjunctiveFacet(attribute)) {
    return this.state.isFacetRefined(attribute);
  } else if (this.state.isDisjunctiveFacet(attribute)) {
    return this.state.isDisjunctiveFacetRefined(attribute);
  } else if (this.state.isHierarchicalFacet(attribute)) {
    return this.state.isHierarchicalFacetRefined(attribute);
  }

  // there's currently no way to know that the user did call `addNumericRefinement` at some point
  // thus we cannot distinguish if there once was a numeric refinement that was cleared
  // so we will return false in every other situations to be consistent
  // while what we should do here is throw because we did not find the attribute in any type
  // of refinement
  return false;
};

/**
 * Check if a value is excluded for a specific faceted attribute. If the value
 * is omitted then the function checks if there is any excluding refinements.
 *
 * @param  {string}  facet name of the attribute for used for faceting
 * @param  {string}  [value] optional value. If passed will test that this value
   * is filtering the given facet.
 * @return {boolean} true if refined
 * @example
 * helper.isExcludeRefined('color'); // false
 * helper.isExcludeRefined('color', 'blue') // false
 * helper.isExcludeRefined('color', 'red') // false
 *
 * helper.addFacetExclusion('color', 'red');
 *
 * helper.isExcludeRefined('color'); // true
 * helper.isExcludeRefined('color', 'blue') // false
 * helper.isExcludeRefined('color', 'red') // true
 */
AlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {
  return this.state.isExcludeRefined(facet, value);
};

/**
 * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}
 */
AlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {
  return this.state.isDisjunctiveFacetRefined(facet, value);
};

/**
 * Check if the string is a currently filtering tag.
 * @param {string} tag tag to check
 * @return {boolean}
 */
AlgoliaSearchHelper.prototype.hasTag = function(tag) {
  return this.state.isTagRefined(tag);
};

/**
 * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}
 */
AlgoliaSearchHelper.prototype.isTagRefined = function() {
  return this.hasTagRefinements.apply(this, arguments);
};


/**
 * Get the name of the currently used index.
 * @return {string}
 * @example
 * helper.setIndex('highestPrice_products').getIndex();
 * // returns 'highestPrice_products'
 */
AlgoliaSearchHelper.prototype.getIndex = function() {
  return this.state.index;
};

function getCurrentPage() {
  return this.state.page;
}

/**
 * Get the currently selected page
 * @deprecated
 * @return {number} the current page
 */
AlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;
/**
 * Get the currently selected page
 * @function
 * @return {number} the current page
 */
AlgoliaSearchHelper.prototype.getPage = getCurrentPage;

/**
 * Get all the tags currently set to filters the results.
 *
 * @return {string[]} The list of tags currently set.
 */
AlgoliaSearchHelper.prototype.getTags = function() {
  return this.state.tagRefinements;
};

/**
 * Get the list of refinements for a given attribute. This method works with
 * conjunctive, disjunctive, excluding and numerical filters.
 *
 * See also SearchResults#getRefinements
 *
 * @param {string} facetName attribute name used for faceting
 * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and
 * a type. Numeric also contains an operator.
 * @example
 * helper.addNumericRefinement('price', '>', 100);
 * helper.getRefinements('price');
 * // [
 * //   {
 * //     "value": [
 * //       100
 * //     ],
 * //     "operator": ">",
 * //     "type": "numeric"
 * //   }
 * // ]
 * @example
 * helper.addFacetRefinement('color', 'blue');
 * helper.addFacetExclusion('color', 'red');
 * helper.getRefinements('color');
 * // [
 * //   {
 * //     "value": "blue",
 * //     "type": "conjunctive"
 * //   },
 * //   {
 * //     "value": "red",
 * //     "type": "exclude"
 * //   }
 * // ]
 * @example
 * helper.addDisjunctiveFacetRefinement('material', 'plastic');
 * // [
 * //   {
 * //     "value": "plastic",
 * //     "type": "disjunctive"
 * //   }
 * // ]
 */
AlgoliaSearchHelper.prototype.getRefinements = function(facetName) {
  var refinements = [];

  if (this.state.isConjunctiveFacet(facetName)) {
    var conjRefinements = this.state.getConjunctiveRefinements(facetName);

    conjRefinements.forEach(function(r) {
      refinements.push({
        value: r,
        type: 'conjunctive'
      });
    });

    var excludeRefinements = this.state.getExcludeRefinements(facetName);

    excludeRefinements.forEach(function(r) {
      refinements.push({
        value: r,
        type: 'exclude'
      });
    });
  } else if (this.state.isDisjunctiveFacet(facetName)) {
    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);

    disjRefinements.forEach(function(r) {
      refinements.push({
        value: r,
        type: 'disjunctive'
      });
    });
  }

  var numericRefinements = this.state.getNumericRefinements(facetName);

  Object.keys(numericRefinements).forEach(function(operator) {
    var value = numericRefinements[operator];

    refinements.push({
      value: value,
      operator: operator,
      type: 'numeric'
    });
  });

  return refinements;
};

/**
 * Return the current refinement for the (attribute, operator)
 * @param {string} attribute attribute in the record
 * @param {string} operator operator applied on the refined values
 * @return {Array.<number|number[]>} refined values
 */
AlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {
  return this.state.getNumericRefinement(attribute, operator);
};

/**
 * Get the current breadcrumb for a hierarchical facet, as an array
 * @param  {string} facetName Hierarchical facet name
 * @return {array.<string>} the path as an array of string
 */
AlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {
  return this.state.getHierarchicalFacetBreadcrumb(facetName);
};

// /////////// PRIVATE

/**
 * Perform the underlying queries
 * @private
 * @return {undefined}
 * @fires search
 * @fires result
 * @fires error
 */
AlgoliaSearchHelper.prototype._search = function(options) {
  var state = this.state;
  var states = [];
  var mainQueries = [];

  if (!options.onlyWithDerivedHelpers) {
    mainQueries = requestBuilder._getQueries(state.index, state);

    states.push({
      state: state,
      queriesCount: mainQueries.length,
      helper: this
    });

    this.emit('search', {
      state: state,
      results: this.lastResults
    });
  }

  var derivedQueries = this.derivedHelpers.map(function(derivedHelper) {
    var derivedState = derivedHelper.getModifiedState(state);
    var derivedStateQueries = requestBuilder._getQueries(derivedState.index, derivedState);

    states.push({
      state: derivedState,
      queriesCount: derivedStateQueries.length,
      helper: derivedHelper
    });

    derivedHelper.emit('search', {
      state: derivedState,
      results: derivedHelper.lastResults
    });

    return derivedStateQueries;
  });

  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);
  var queryId = this._queryId++;

  this._currentNbQueries++;

  try {
    this.client.search(queries)
      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))
      .catch(this._dispatchAlgoliaError.bind(this, queryId));
  } catch (error) {
    // If we reach this part, we're in an internal error state
    this.emit('error', {
      error: error
    });
  }
};

/**
 * Transform the responses as sent by the server and transform them into a user
 * usable object that merge the results of all the batch requests. It will dispatch
 * over the different helper + derived helpers (when there are some).
 * @private
 * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}
 *  state state used for to generate the request
 * @param {number} queryId id of the current request
 * @param {object} content content of the response
 * @return {undefined}
 */
AlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {
  // FIXME remove the number of outdated queries discarded instead of just one

  if (queryId < this._lastQueryIdReceived) {
    // Outdated answer
    return;
  }

  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);
  this._lastQueryIdReceived = queryId;

  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');

  var results = content.results.slice();

  states.forEach(function(s) {
    var state = s.state;
    var queriesCount = s.queriesCount;
    var helper = s.helper;
    var specificResults = results.splice(0, queriesCount);

    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);

    helper.emit('result', {
      results: formattedResponse,
      state: state
    });
  });
};

AlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, error) {
  if (queryId < this._lastQueryIdReceived) {
    // Outdated answer
    return;
  }

  this._currentNbQueries -= queryId - this._lastQueryIdReceived;
  this._lastQueryIdReceived = queryId;

  this.emit('error', {
    error: error
  });

  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');
};

AlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {
  return query ||
    facetFilters.length !== 0 ||
    numericFilters.length !== 0 ||
    tagFilters.length !== 0;
};

/**
 * Test if there are some disjunctive refinements on the facet
 * @private
 * @param {string} facet the attribute to test
 * @return {boolean}
 */
AlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {
  return this.state.disjunctiveRefinements[facet] &&
    this.state.disjunctiveRefinements[facet].length > 0;
};

AlgoliaSearchHelper.prototype._change = function(event) {
  var state = event.state;
  var isPageReset = event.isPageReset;

  if (state !== this.state) {
    this.state = state;

    this.emit('change', {
      state: this.state,
      results: this.lastResults,
      isPageReset: isPageReset
    });
  }
};

/**
 * Clears the cache of the underlying Algolia client.
 * @return {AlgoliaSearchHelper}
 */
AlgoliaSearchHelper.prototype.clearCache = function() {
  this.client.clearCache && this.client.clearCache();
  return this;
};

/**
 * Updates the internal client instance. If the reference of the clients
 * are equal then no update is actually done.
 * @param  {AlgoliaSearch} newClient an AlgoliaSearch client
 * @return {AlgoliaSearchHelper}
 */
AlgoliaSearchHelper.prototype.setClient = function(newClient) {
  if (this.client === newClient) return this;

  if (typeof newClient.addAlgoliaAgent === 'function') {
    newClient.addAlgoliaAgent('JS Helper (' + version + ')');
  }
  this.client = newClient;

  return this;
};

/**
 * Gets the instance of the currently used client.
 * @return {AlgoliaSearch}
 */
AlgoliaSearchHelper.prototype.getClient = function() {
  return this.client;
};

/**
 * Creates an derived instance of the Helper. A derived helper
 * is a way to request other indices synchronised with the lifecycle
 * of the main Helper. This mechanism uses the multiqueries feature
 * of Algolia to aggregate all the requests in a single network call.
 *
 * This method takes a function that is used to create a new SearchParameter
 * that will be used to create requests to Algolia. Those new requests
 * are created just before the `search` event. The signature of the function
 * is `SearchParameters -> SearchParameters`.
 *
 * This method returns a new DerivedHelper which is an EventEmitter
 * that fires the same `search`, `result` and `error` events. Those
 * events, however, will receive data specific to this DerivedHelper
 * and the SearchParameters that is returned by the call of the
 * parameter function.
 * @param {function} fn SearchParameters -> SearchParameters
 * @return {DerivedHelper}
 */
AlgoliaSearchHelper.prototype.derive = function(fn) {
  var derivedHelper = new DerivedHelper(this, fn);
  this.derivedHelpers.push(derivedHelper);
  return derivedHelper;
};

/**
 * This method detaches a derived Helper from the main one. Prefer using the one from the
 * derived helper itself, to remove the event listeners too.
 * @private
 * @return {undefined}
 * @throws Error
 */
AlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {
  var pos = this.derivedHelpers.indexOf(derivedHelper);
  if (pos === -1) throw new Error('Derived helper already detached');
  this.derivedHelpers.splice(pos, 1);
};

/**
 * This method returns true if there is currently at least one on-going search.
 * @return {boolean} true if there is a search pending
 */
AlgoliaSearchHelper.prototype.hasPendingRequests = function() {
  return this._currentNbQueries > 0;
};

/**
 * @typedef AlgoliaSearchHelper.NumericRefinement
 * @type {object}
 * @property {number[]} value the numbers that are used for filtering this attribute with
 * the operator specified.
 * @property {string} operator the faceting data: value, number of entries
 * @property {string} type will be 'numeric'
 */

/**
 * @typedef AlgoliaSearchHelper.FacetRefinement
 * @type {object}
 * @property {string} value the string use to filter the attribute
 * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'
 */

module.exports = AlgoliaSearchHelper;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/compact.js":
/*!********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/compact.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";


module.exports = function compact(array) {
  if (!Array.isArray(array)) {
    return [];
  }

  return array.filter(Boolean);
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/defaultsPure.js":
/*!*************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/defaultsPure.js ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";


// NOTE: this behaves like lodash/defaults, but doesn't mutate the target
// it also preserve keys order
module.exports = function defaultsPure() {
  var sources = Array.prototype.slice.call(arguments);

  return sources.reduceRight(function(acc, source) {
    Object.keys(Object(source)).forEach(function(key) {
      if (source[key] === undefined) {
        return;
      }
      if (acc[key] !== undefined) {
        // remove if already added, so that we can add it in correct order
        delete acc[key];
      }
      acc[key] = source[key];
    });
    return acc;
  }, {});
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";


/**
 * Replaces a leading - with \-
 * @private
 * @param {any} value the facet value to replace
 * @returns any
 */
function escapeFacetValue(value) {
  if (typeof value !== 'string') return value;

  return String(value).replace(/^-/, '\\-');
}

/**
 * Replaces a leading \- with -
 * @private
 * @param {any} value the escaped facet value
 * @returns any
 */
function unescapeFacetValue(value) {
  if (typeof value !== 'string') return value;

  return value.replace(/^\\-/, '-');
}

module.exports = {
  escapeFacetValue: escapeFacetValue,
  unescapeFacetValue: unescapeFacetValue
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/find.js":
/*!*****************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/find.js ***!
  \*****************************************************************/
/***/ ((module) => {

"use strict";


// @MAJOR can be replaced by native Array#find when we change support
module.exports = function find(array, comparator) {
  if (!Array.isArray(array)) {
    return undefined;
  }

  for (var i = 0; i < array.length; i++) {
    if (comparator(array[i])) {
      return array[i];
    }
  }
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/findIndex.js":
/*!**********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/findIndex.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";


// @MAJOR can be replaced by native Array#findIndex when we change support
module.exports = function find(array, comparator) {
  if (!Array.isArray(array)) {
    return -1;
  }

  for (var i = 0; i < array.length; i++) {
    if (comparator(array[i])) {
      return i;
    }
  }
  return -1;
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/formatSort.js":
/*!***********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/formatSort.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var find = __webpack_require__(/*! ./find */ "./node_modules/algoliasearch-helper/src/functions/find.js");

/**
 * Transform sort format from user friendly notation to lodash format
 * @param {string[]} sortBy array of predicate of the form "attribute:order"
 * @param {string[]} [defaults] array of predicate of the form "attribute:order"
 * @return {array.<string[]>} array containing 2 elements : attributes, orders
 */
module.exports = function formatSort(sortBy, defaults) {
  var defaultInstructions = (defaults || []).map(function(sort) {
    return sort.split(':');
  });

  return sortBy.reduce(
    function preparePredicate(out, sort) {
      var sortInstruction = sort.split(':');

      var matchingDefault = find(defaultInstructions, function(
        defaultInstruction
      ) {
        return defaultInstruction[0] === sortInstruction[0];
      });

      if (sortInstruction.length > 1 || !matchingDefault) {
        out[0].push(sortInstruction[0]);
        out[1].push(sortInstruction[1]);
        return out;
      }

      out[0].push(matchingDefault[0]);
      out[1].push(matchingDefault[1]);
      return out;
    },
    [[], []]
  );
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/inherits.js":
/*!*********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/inherits.js ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";


function inherits(ctor, superCtor) {
  ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
      value: ctor,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
}

module.exports = inherits;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/intersection.js":
/*!*************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/intersection.js ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";


function intersection(arr1, arr2) {
  return arr1.filter(function(value, index) {
    return (
      arr2.indexOf(value) > -1 &&
      arr1.indexOf(value) === index /* skips duplicates */
    );
  });
}

module.exports = intersection;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/merge.js":
/*!******************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/merge.js ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";


function clone(value) {
  if (typeof value === 'object' && value !== null) {
    return _merge(Array.isArray(value) ? [] : {}, value);
  }
  return value;
}

function isObjectOrArrayOrFunction(value) {
  return (
    typeof value === 'function' ||
    Array.isArray(value) ||
    Object.prototype.toString.call(value) === '[object Object]'
  );
}

function _merge(target, source) {
  if (target === source) {
    return target;
  }

  for (var key in source) {
    if (
      !Object.prototype.hasOwnProperty.call(source, key) ||
      key === '__proto__'
    ) {
      continue;
    }

    var sourceVal = source[key];
    var targetVal = target[key];

    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {
      continue;
    }

    if (
      isObjectOrArrayOrFunction(targetVal) &&
      isObjectOrArrayOrFunction(sourceVal)
    ) {
      target[key] = _merge(targetVal, sourceVal);
    } else {
      target[key] = clone(sourceVal);
    }
  }
  return target;
}

/**
 * This method is like Object.assign, but recursively merges own and inherited
 * enumerable keyed properties of source objects into the destination object.
 *
 * NOTE: this behaves like lodash/merge, but:
 * - does mutate functions if they are a source
 * - treats non-plain objects as plain
 * - does not work for circular objects
 * - treats sparse arrays as sparse
 * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays
 *
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @returns {Object} Returns `object`.
 */

function merge(target) {
  if (!isObjectOrArrayOrFunction(target)) {
    target = {};
  }

  for (var i = 1, l = arguments.length; i < l; i++) {
    var source = arguments[i];

    if (isObjectOrArrayOrFunction(source)) {
      _merge(target, source);
    }
  }
  return target;
}

module.exports = merge;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js":
/*!**************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";


function objectHasKeys(obj) {
  return obj && Object.keys(obj).length > 0;
}

module.exports = objectHasKeys;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/omit.js":
/*!*****************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/omit.js ***!
  \*****************************************************************/
/***/ ((module) => {

"use strict";


// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source === null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key;
  var i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

module.exports = _objectWithoutPropertiesLoose;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/orderBy.js":
/*!********************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/orderBy.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";


function compareAscending(value, other) {
  if (value !== other) {
    var valIsDefined = value !== undefined;
    var valIsNull = value === null;

    var othIsDefined = other !== undefined;
    var othIsNull = other === null;

    if (
      (!othIsNull && value > other) ||
      (valIsNull && othIsDefined) ||
      !valIsDefined
    ) {
      return 1;
    }
    if (
      (!valIsNull && value < other) ||
      (othIsNull && valIsDefined) ||
      !othIsDefined
    ) {
      return -1;
    }
  }
  return 0;
}

/**
 * @param {Array<object>} collection object with keys in attributes
 * @param {Array<string>} iteratees attributes
 * @param {Array<string>} orders asc | desc
 */
function orderBy(collection, iteratees, orders) {
  if (!Array.isArray(collection)) {
    return [];
  }

  if (!Array.isArray(orders)) {
    orders = [];
  }

  var result = collection.map(function(value, index) {
    return {
      criteria: iteratees.map(function(iteratee) {
        return value[iteratee];
      }),
      index: index,
      value: value
    };
  });

  result.sort(function comparer(object, other) {
    var index = -1;

    while (++index < object.criteria.length) {
      var res = compareAscending(object.criteria[index], other.criteria[index]);
      if (res) {
        if (index >= orders.length) {
          return res;
        }
        if (orders[index] === 'desc') {
          return -res;
        }
        return res;
      }
    }

    // This ensures a stable sort in V8 and other engines.
    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.
    return object.index - other.index;
  });

  return result.map(function(res) {
    return res.value;
  });
}

module.exports = orderBy;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/functions/valToNumber.js":
/*!************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/functions/valToNumber.js ***!
  \************************************************************************/
/***/ ((module) => {

"use strict";


function valToNumber(v) {
  if (typeof v === 'number') {
    return v;
  } else if (typeof v === 'string') {
    return parseFloat(v);
  } else if (Array.isArray(v)) {
    return v.map(valToNumber);
  }

  throw new Error('The value should be a number, a parsable string or an array of those.');
}

module.exports = valToNumber;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/requestBuilder.js":
/*!*****************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/requestBuilder.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var merge = __webpack_require__(/*! ./functions/merge */ "./node_modules/algoliasearch-helper/src/functions/merge.js");

function sortObject(obj) {
  return Object.keys(obj)
    .sort(function(a, b) {
      return a.localeCompare(b);
    })
    .reduce(function(acc, curr) {
      acc[curr] = obj[curr];
      return acc;
    }, {});
}

var requestBuilder = {
  /**
   * Get all the queries to send to the client, those queries can used directly
   * with the Algolia client.
   * @private
   * @return {object[]} The queries
   */
  _getQueries: function getQueries(index, state) {
    var queries = [];

    // One query for the hits
    queries.push({
      indexName: index,
      params: requestBuilder._getHitsSearchParams(state)
    });

    // One for each disjunctive facets
    state.getRefinedDisjunctiveFacets().forEach(function(refinedFacet) {
      queries.push({
        indexName: index,
        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)
      });
    });

    // More to get the parent levels of the hierarchical facets when refined
    state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {
      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);
      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);
      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);

      // If we are deeper than level 0 (starting from `beer > IPA`)
      // we want to get all parent values
      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {
        // We generate a map of the filters we will use for our facet values queries
        var filtersMap = currentRefinement[0].split(separator).slice(0, -1).reduce(
          function createFiltersMap(map, segment, level) {
            return map.concat({
              attribute: hierarchicalFacet.attributes[level],
              value: level === 0
                ? segment
                : [map[map.length - 1].value, segment].join(separator)
            });
          }
        , []);

        filtersMap.forEach(function(filter, level) {
          var params = requestBuilder._getDisjunctiveFacetSearchParams(
            state,
            filter.attribute,
            level === 0
          );

          // Keep facet filters unrelated to current hierarchical attributes
          function hasHierarchicalFacetFilter(value) {
            return hierarchicalFacet.attributes.some(function(attribute) {
              return attribute === value.split(':')[0];
            });
          }

          var filteredFacetFilters = (params.facetFilters || []).reduce(function(acc, facetFilter) {
            if (Array.isArray(facetFilter)) {
              var filtered = facetFilter.filter(function(filterValue) {
                return !hasHierarchicalFacetFilter(filterValue);
              });

              if (filtered.length > 0) {
                acc.push(filtered);
              }
            }

            if (typeof facetFilter === 'string' && !hasHierarchicalFacetFilter(facetFilter)) {
              acc.push(facetFilter);
            }

            return acc;
          }, []);

          var parent = filtersMap[level - 1];
          if (level > 0) {
            params.facetFilters = filteredFacetFilters.concat(parent.attribute + ':' + parent.value);
          } else {
            params.facetFilters = filteredFacetFilters.length > 0 ? filteredFacetFilters : undefined;
          }

          queries.push({indexName: index, params: params});
        });
      }
    });

    return queries;
  },

  /**
   * Build search parameters used to fetch hits
   * @private
   * @return {object.<string, any>}
   */
  _getHitsSearchParams: function(state) {
    var facets = state.facets
      .concat(state.disjunctiveFacets)
      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));


    var facetFilters = requestBuilder._getFacetFilters(state);
    var numericFilters = requestBuilder._getNumericFilters(state);
    var tagFilters = requestBuilder._getTagFilters(state);
    var additionalParams = {
      facets: facets.indexOf('*') > -1 ? ['*'] : facets,
      tagFilters: tagFilters
    };

    if (facetFilters.length > 0) {
      additionalParams.facetFilters = facetFilters;
    }

    if (numericFilters.length > 0) {
      additionalParams.numericFilters = numericFilters;
    }

    return sortObject(merge({}, state.getQueryParams(), additionalParams));
  },

  /**
   * Build search parameters used to fetch a disjunctive facet
   * @private
   * @param  {string} facet the associated facet name
   * @param  {boolean} hierarchicalRootLevel ?? FIXME
   * @return {object}
   */
  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {
    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);
    var numericFilters = requestBuilder._getNumericFilters(state, facet);
    var tagFilters = requestBuilder._getTagFilters(state);
    var additionalParams = {
      hitsPerPage: 0,
      page: 0,
      analytics: false,
      clickAnalytics: false
    };

    if (tagFilters.length > 0) {
      additionalParams.tagFilters = tagFilters;
    }

    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);

    if (hierarchicalFacet) {
      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(
        state,
        hierarchicalFacet,
        hierarchicalRootLevel
      );
    } else {
      additionalParams.facets = facet;
    }

    if (numericFilters.length > 0) {
      additionalParams.numericFilters = numericFilters;
    }

    if (facetFilters.length > 0) {
      additionalParams.facetFilters = facetFilters;
    }

    return sortObject(merge({}, state.getQueryParams(), additionalParams));
  },

  /**
   * Return the numeric filters in an algolia request fashion
   * @private
   * @param {string} [facetName] the name of the attribute for which the filters should be excluded
   * @return {string[]} the numeric filters in the algolia format
   */
  _getNumericFilters: function(state, facetName) {
    if (state.numericFilters) {
      return state.numericFilters;
    }

    var numericFilters = [];

    Object.keys(state.numericRefinements).forEach(function(attribute) {
      var operators = state.numericRefinements[attribute] || {};
      Object.keys(operators).forEach(function(operator) {
        var values = operators[operator] || [];
        if (facetName !== attribute) {
          values.forEach(function(value) {
            if (Array.isArray(value)) {
              var vs = value.map(function(v) {
                return attribute + operator + v;
              });
              numericFilters.push(vs);
            } else {
              numericFilters.push(attribute + operator + value);
            }
          });
        }
      });
    });

    return numericFilters;
  },

  /**
   * Return the tags filters depending
   * @private
   * @return {string}
   */
  _getTagFilters: function(state) {
    if (state.tagFilters) {
      return state.tagFilters;
    }

    return state.tagRefinements.join(',');
  },


  /**
   * Build facetFilters parameter based on current refinements. The array returned
   * contains strings representing the facet filters in the algolia format.
   * @private
   * @param  {string} [facet] if set, the current disjunctive facet
   * @return {array.<string>}
   */
  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {
    var facetFilters = [];

    var facetsRefinements = state.facetsRefinements || {};
    Object.keys(facetsRefinements).forEach(function(facetName) {
      var facetValues = facetsRefinements[facetName] || [];
      facetValues.forEach(function(facetValue) {
        facetFilters.push(facetName + ':' + facetValue);
      });
    });

    var facetsExcludes = state.facetsExcludes || {};
    Object.keys(facetsExcludes).forEach(function(facetName) {
      var facetValues = facetsExcludes[facetName] || [];
      facetValues.forEach(function(facetValue) {
        facetFilters.push(facetName + ':-' + facetValue);
      });
    });

    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};
    Object.keys(disjunctiveFacetsRefinements).forEach(function(facetName) {
      var facetValues = disjunctiveFacetsRefinements[facetName] || [];
      if (facetName === facet || !facetValues || facetValues.length === 0) {
        return;
      }
      var orFilters = [];

      facetValues.forEach(function(facetValue) {
        orFilters.push(facetName + ':' + facetValue);
      });

      facetFilters.push(orFilters);
    });

    var hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements || {};
    Object.keys(hierarchicalFacetsRefinements).forEach(function(facetName) {
      var facetValues = hierarchicalFacetsRefinements[facetName] || [];
      var facetValue = facetValues[0];

      if (facetValue === undefined) {
        return;
      }

      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);
      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);
      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);
      var attributeToRefine;
      var attributesIndex;

      // we ask for parent facet values only when the `facet` is the current hierarchical facet
      if (facet === facetName) {
        // if we are at the root level already, no need to ask for facet values, we get them from
        // the hits query
        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||
          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {
          return;
        }

        if (!rootPath) {
          attributesIndex = facetValue.split(separator).length - 2;
          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));
        } else {
          attributesIndex = rootPath.split(separator).length - 1;
          facetValue = rootPath;
        }

        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];
      } else {
        attributesIndex = facetValue.split(separator).length - 1;

        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];
      }

      if (attributeToRefine) {
        facetFilters.push([attributeToRefine + ':' + facetValue]);
      }
    });

    return facetFilters;
  },

  _getHitsHierarchicalFacetsAttributes: function(state) {
    var out = [];

    return state.hierarchicalFacets.reduce(
      // ask for as much levels as there's hierarchical refinements
      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {
        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];

        // if no refinement, ask for root level
        if (!hierarchicalRefinement) {
          allAttributes.push(hierarchicalFacet.attributes[0]);
          return allAttributes;
        }

        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);
        var level = hierarchicalRefinement.split(separator).length;
        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);

        return allAttributes.concat(newAttributes);
      }, out);
  },

  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {
    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);
    if (rootLevel === true) {
      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);
      var attributeIndex = 0;

      if (rootPath) {
        attributeIndex = rootPath.split(separator).length;
      }
      return [hierarchicalFacet.attributes[attributeIndex]];
    }

    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';
    // if refinement is 'beers > IPA > Flying dog',
    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)

    var parentLevel = hierarchicalRefinement.split(separator).length - 1;
    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);
  },

  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {
    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?
      state.clearRefinements(facetName) :
      state;
    var searchForFacetSearchParameters = {
      facetQuery: query,
      facetName: facetName
    };
    if (typeof maxFacetHits === 'number') {
      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;
    }
    return sortObject(merge(
      {},
      requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),
      searchForFacetSearchParameters
    ));
  }
};

module.exports = requestBuilder;


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/utils/isValidUserToken.js":
/*!*************************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/utils/isValidUserToken.js ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";


module.exports = function isValidUserToken(userToken) {
  if (userToken === null) {
    return false;
  }
  return /^[a-zA-Z0-9_-]{1,64}$/.test(userToken);
};


/***/ }),

/***/ "./node_modules/algoliasearch-helper/src/version.js":
/*!**********************************************************!*\
  !*** ./node_modules/algoliasearch-helper/src/version.js ***!
  \**********************************************************/
/***/ ((module) => {

"use strict";


module.exports = '3.11.1';


/***/ }),

/***/ "./node_modules/algoliasearch-helper/types/algoliasearch.js":
/*!******************************************************************!*\
  !*** ./node_modules/algoliasearch-helper/types/algoliasearch.js ***!
  \******************************************************************/
/***/ (() => {

// fake file to allow `export * from 'algoliasearch-helper/types/algoliasearch'`


/***/ }),

/***/ "./node_modules/algoliasearch/dist/algoliasearch-lite.umd.js":
/*!*******************************************************************!*\
  !*** ./node_modules/algoliasearch/dist/algoliasearch-lite.umd.js ***!
  \*******************************************************************/
/***/ (function(module) {

/*! algoliasearch-lite.umd.js | 4.14.2 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */
!function(e,t){ true?module.exports=t():0}(this,(function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e){var t,r="algoliasearch-client-js-".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||"{}")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=a()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=o(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=a(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,o).catch((function(){return i({caches:t}).get(e,n,o)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var u=n(),i=o&&o.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var h={WithinQueryParameters:0,WithinHeaders:1};function d(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var m={Read:1,Write:2,Any:3},p=1,v=2,y=3;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function b(e){return"string"==typeof e?{protocol:"https",url:e,accept:m.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||m.Any}}var O="GET",P="POST";function q(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(g(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===y&&Date.now()-e.lastUpdate<=12e4}(e)})),o=[].concat(a(r),a(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:o.length>0?o.map((function(e){return b(e)})):t}}))}function w(e,t,n,o){var u=[],i=function(e,t){if(e.method===O||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,o),s=function(e,t){var n=r(r({},e.headers),t.headers),o={};return Object.keys(n).forEach((function(e){var t=n[e];o[e.toLowerCase()]=t})),o}(e,o),c=n.method,l=n.method!==O?{}:r(r({},n.data),o.data),f=r(r(r({"x-algolia-agent":e.userAgent.value},e.queryParameters),l),o.queryParameters),h=0,d=function t(r,a){var l=r.pop();if(void 0===l)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:A(u)};var d={data:i,headers:s,method:c,url:S(l,n.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,o.timeout)},m=function(e){var t={request:d,response:e,host:l,triesLeft:r.length};return u.push(t),t},p={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var o=m(n);return n.isTimedOut&&h++,Promise.all([e.logger.info("Retryable failure",x(o)),e.hostsCache.set(l,g(l,n.isTimedOut?y:v))]).then((function(){return t(r,a)}))},onFail:function(e){throw m(e),function(e,t){var r=e.content,n=e.status,o=r;try{o=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:"ApiError",message:e,status:t,transporterStackTrace:r}}(o,n,t)}(e,A(u))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,p)}))};return q(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function j(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var r="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(r)&&(t.value="".concat(t.value).concat(r)),t}};return t}function S(e,t,r){var n=T(r),o="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return n.length&&(o+="?".concat(n)),o}function T(e){return Object.keys(e).map((function(t){return f("%s=%s",t,(r=e[t],"[object Object]"===Object.prototype.toString.call(r)||"[object Array]"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join("&")}function A(e){return e.map((function(e){return x(e)}))}function x(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var N=function(e){var t=e.appId,n=function(e,t,r){var n={"x-algolia-api-key":r,"x-algolia-application-id":t};return{headers:function(){return e===h.WithinHeaders?n:{}},queryParameters:function(){return e===h.WithinQueryParameters?n:{}}}}(void 0!==e.authMode?e.authMode:h.WithinHeaders,t,e.apiKey),a=function(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return b(e)})),read:function(e,t){var r=d(t,f.timeouts.read),n=function(){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,n()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=o(e,2);t[0];return t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Write)})),e,d(t,f.timeouts.write))}};return f}(r(r({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:m.Read},{url:"".concat(t,".algolia.net"),accept:m.Write}].concat(c([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:r(r(r({},n.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return l({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)},C=function(e){return function(t,r){return t.method===O?e.transporter.read(t,r):e.transporter.write(t,r)}},k=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return l(n,r.methods)}},J=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{params:T(e.params||{})})}));return e.transporter.read({method:P,path:"1/indexes/*/queries",data:{requests:o},cacheable:!0},n)}},E=function(e){return function(t,o){return Promise.all(t.map((function(t){var a=t.params,u=a.facetName,i=a.facetQuery,s=n(a,["facetName","facetQuery"]);return k(e)(t.indexName,{methods:{searchForFacetValues:R}}).searchForFacetValues(u,i,r(r({},o),s))})))}},I=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},F=function(e){return function(t,r){return e.transporter.read({method:P,path:f("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r)}},R=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},D=1,W=2,H=3;function Q(e,t,n){var o,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,o=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},a=o(e.connectTimeout,"Connection timeout");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(a),n=o(e.responseTimeout,"Socket timeout"))},r.onerror=function(){0===r.status&&(clearTimeout(a),clearTimeout(n),t({content:r.responseText||"Network request failed",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(a),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=H,{debug:function(e,t){return D>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return W>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:"".concat("4.14.2","-").concat(e)}),s()]}),userAgent:j("4.14.2").add({segment:"Browser",version:"lite"}),authMode:h.WithinQueryParameters};return N(r(r(r({},a),n),{},{methods:{search:J,searchForFacetValues:E,multipleQueries:J,multipleSearchForFacetValues:E,customRequest:C,initIndex:function(e){return function(t){return k(e)(t,{methods:{search:F,searchForFacetValues:R,findAnswers:I}})}}}}))}return Q.version="4.14.2",Q}));


/***/ }),

/***/ "./src/js/util.js":
/*!************************!*\
  !*** ./src/js/util.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.regexp.test.js */ "./node_modules/core-js/modules/es.regexp.test.js");
/* harmony import */ var core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.regexp.constructor.js */ "./node_modules/core-js/modules/es.regexp.constructor.js");
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.regexp.dot-all.js */ "./node_modules/core-js/modules/es.regexp.dot-all.js");
/* harmony import */ var core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.regexp.sticky.js */ "./node_modules/core-js/modules/es.regexp.sticky.js");
/* harmony import */ var core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ "./node_modules/core-js/modules/es.regexp.to-string.js");
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.parse-int.js */ "./node_modules/core-js/modules/es.parse-int.js");
/* harmony import */ var core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_7__);








// stopBodyScroll 方法依赖
var bodyEl = document.body;
var windowTop = 0;
var bodyElPosition = bodyEl.style.position;
var archerUtil = {
  // 回到顶部
  backTop: function backTop(event) {
    event.preventDefault();
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  },
  // 获取元素在页面上相对左上角的位置
  getAbsPosition: function getAbsPosition(e) {
    var x = e.offsetLeft,
      y = e.offsetTop;
    var current = e.offsetParent;
    while (current !== null) {
      x += current.offsetLeft;
      y += current.offsetTop;
      current = current.offsetParent;
    }
    return {
      x: x,
      y: y
    };
  },
  // 格式化日期
  dateFormater: function dateFormater(date, fmt) {
    var o = {
      'M+': date.getMonth() + 1,
      // 月份
      'd+': date.getDate(),
      // 日
      'h+': date.getHours(),
      // 小时
      'm+': date.getMinutes(),
      // 分
      's+': date.getSeconds(),
      // 秒
      'q+': Math.floor((date.getMonth() + 3) / 3),
      // 季度
      S: date.getMilliseconds() // 毫秒
    };

    if (/(y+)/.test(fmt)) {
      fmt = fmt.replace(RegExp.$1, String(date.getFullYear()).substr(4 - RegExp.$1.length));
    }
    for (var k in o) {
      if (new RegExp('(' + k + ')').test(fmt)) {
        fmt = fmt.replace(RegExp.$1, RegExp.$1.length === 1 ? o[k] : ('00' + o[k]).substr(String(o[k]).length));
      }
    }
    return fmt;
  },
  // 获取 1rem 对应的 px 值
  rem: function rem() {
    return parseInt($('html').css('font-size'), 10);
  },
  // 设置地址栏 hash
  setWindowHash: function setWindowHash(hash) {
    window.history.replaceState({}, '', "#/".concat(hash));
  },
  // 读取地址栏 hash
  getWindowHash: function getWindowHash() {
    return window.location.hash.replace(/^#\//, '#');
  },
  // rAF 的 ticking
  rafTick: function rafTick(ticking, updateFunc) {
    if (!ticking) {
      requestAnimationFrame(updateFunc);
    }
    ticking = true;
  },
  // 固定 body
  // see: https://segmentfault.com/a/1190000012313337
  stopBodyScroll: function stopBodyScroll(isFixed) {
    if (isFixed) {
      windowTop = window.scrollY;
      bodyEl.style.position = 'fixed';
      bodyEl.style.top = -windowTop + 'px';
      bodyEl.style.width = '100%';
    } else {
      bodyEl.style.position = bodyElPosition;
      bodyEl.style.top = '';
      bodyEl.style.width = '';
      window.scrollTo(0, windowTop);
    }
  },
  // 函数节流
  throttle: function throttle(func, wait) {
    var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var timer;
    return function () {
      var _this = this;
      var args = arguments;
      if (!timer) {
        if (immediate) {
          timer = setTimeout(function () {
            timer = undefined;
          }, wait);
          func.apply(this, args);
        } else {
          timer = setTimeout(function () {
            timer = undefined;
            func.apply(_this, args);
          }, wait);
        }
      }
    };
  },
  // 函数防抖
  debounce: function debounce(func, wait) {
    var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var timer;
    return function () {
      var _this2 = this;
      var args = arguments;
      timer && clearTimeout(timer);
      if (immediate) {
        !timer && func.apply(this, args);
        timer = setTimeout(function () {
          timer = undefined;
        }, wait);
      } else {
        timer = setTimeout(function () {
          func.apply(_this2, args);
        }, wait);
      }
    };
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (archerUtil);

/***/ }),

/***/ "./node_modules/classnames/index.js":
/*!******************************************!*\
  !*** ./node_modules/classnames/index.js ***!
  \******************************************/
/***/ ((module, exports) => {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
/* global define */

(function () {
	'use strict';

	var hasOwn = {}.hasOwnProperty;
	var nativeCodeString = '[native code]';

	function classNames() {
		var classes = [];

		for (var i = 0; i < arguments.length; i++) {
			var arg = arguments[i];
			if (!arg) continue;

			var argType = typeof arg;

			if (argType === 'string' || argType === 'number') {
				classes.push(arg);
			} else if (Array.isArray(arg)) {
				if (arg.length) {
					var inner = classNames.apply(null, arg);
					if (inner) {
						classes.push(inner);
					}
				}
			} else if (argType === 'object') {
				if (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {
					classes.push(arg.toString());
					continue;
				}

				for (var key in arg) {
					if (hasOwn.call(arg, key) && arg[key]) {
						classes.push(key);
					}
				}
			}
		}

		return classes.join(' ');
	}

	if ( true && module.exports) {
		classNames.default = classNames;
		module.exports = classNames;
	} else if (true) {
		// register as 'classnames', consistent with npm package name
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
			return classNames;
		}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}());


/***/ }),

/***/ "./node_modules/core-js/internals/a-callable.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/a-callable.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");

var $TypeError = TypeError;

// `Assert: IsCallable(argument) is true`
module.exports = function (argument) {
  if (isCallable(argument)) return argument;
  throw $TypeError(tryToString(argument) + ' is not a function');
};


/***/ }),

/***/ "./node_modules/core-js/internals/a-possible-prototype.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/a-possible-prototype.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var $String = String;
var $TypeError = TypeError;

module.exports = function (argument) {
  if (typeof argument == 'object' || isCallable(argument)) return argument;
  throw $TypeError("Can't set " + $String(argument) + ' as a prototype');
};


/***/ }),

/***/ "./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var defineProperty = (__webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f);

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] == undefined) {
  defineProperty(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "./node_modules/core-js/internals/advance-string-index.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/advance-string-index.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var charAt = (__webpack_require__(/*! ../internals/string-multibyte */ "./node_modules/core-js/internals/string-multibyte.js").charAt);

// `AdvanceStringIndex` abstract operation
// https://tc39.es/ecma262/#sec-advancestringindex
module.exports = function (S, index, unicode) {
  return index + (unicode ? charAt(S, index).length : 1);
};


/***/ }),

/***/ "./node_modules/core-js/internals/an-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/an-object.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var $String = String;
var $TypeError = TypeError;

// `Assert: Type(argument) is Object`
module.exports = function (argument) {
  if (isObject(argument)) return argument;
  throw $TypeError($String(argument) + ' is not an object');
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-includes.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/array-includes.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = lengthOfArrayLike(O);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare -- NaN check
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare -- NaN check
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.es/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.es/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/array-iteration.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var arraySpeciesCreate = __webpack_require__(/*! ../internals/array-species-create */ "./node_modules/core-js/internals/array-species-create.js");

var push = uncurryThis([].push);

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var IS_FILTER_REJECT = TYPE == 7;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var boundFunction = bind(callbackfn, that);
    var length = lengthOfArrayLike(self);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push(target, value);      // filter
        } else switch (TYPE) {
          case 4: return false;             // every
          case 7: push(target, value);      // filterReject
        }
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6),
  // `Array.prototype.filterReject` method
  // https://github.com/tc39/proposal-array-filtering
  filterReject: createMethod(7)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var SPECIES = wellKnownSymbol('species');
var $Array = Array;

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? $Array : C;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-create.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arraySpeciesConstructor = __webpack_require__(/*! ../internals/array-species-constructor */ "./node_modules/core-js/internals/array-species-constructor.js");

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof-raw.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/classof-raw.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThisRaw = __webpack_require__(/*! ../internals/function-uncurry-this-raw */ "./node_modules/core-js/internals/function-uncurry-this-raw.js");

var toString = uncurryThisRaw({}.toString);
var stringSlice = uncurryThisRaw(''.slice);

module.exports = function (it) {
  return stringSlice(toString(it), 8, -1);
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/classof.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classofRaw = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;

// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/copy-constructor-properties.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var ownKeys = __webpack_require__(/*! ../internals/own-keys */ "./node_modules/core-js/internals/own-keys.js");
var getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

module.exports = function (target, source, exceptions) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
      defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-non-enumerable-property.js":
/*!**************************************************************************!*\
  !*** ./node_modules/core-js/internals/create-non-enumerable-property.js ***!
  \**************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-property-descriptor.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
  \**********************************************************************/
/***/ ((module) => {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/define-built-in-accessor.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/define-built-in-accessor.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var makeBuiltIn = __webpack_require__(/*! ../internals/make-built-in */ "./node_modules/core-js/internals/make-built-in.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

module.exports = function (target, name, descriptor) {
  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });
  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });
  return defineProperty.f(target, name, descriptor);
};


/***/ }),

/***/ "./node_modules/core-js/internals/define-built-in.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/define-built-in.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var makeBuiltIn = __webpack_require__(/*! ../internals/make-built-in */ "./node_modules/core-js/internals/make-built-in.js");
var defineGlobalProperty = __webpack_require__(/*! ../internals/define-global-property */ "./node_modules/core-js/internals/define-global-property.js");

module.exports = function (O, key, value, options) {
  if (!options) options = {};
  var simple = options.enumerable;
  var name = options.name !== undefined ? options.name : key;
  if (isCallable(value)) makeBuiltIn(value, name, options);
  if (options.global) {
    if (simple) O[key] = value;
    else defineGlobalProperty(key, value);
  } else {
    try {
      if (!options.unsafe) delete O[key];
      else if (O[key]) simple = true;
    } catch (error) { /* empty */ }
    if (simple) O[key] = value;
    else definePropertyModule.f(O, key, {
      value: value,
      enumerable: false,
      configurable: !options.nonConfigurable,
      writable: !options.nonWritable
    });
  } return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/define-global-property.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/define-global-property.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;

module.exports = function (key, value) {
  try {
    defineProperty(global, key, { value: value, configurable: true, writable: true });
  } catch (error) {
    global[key] = value;
  } return value;
};


/***/ }),

/***/ "./node_modules/core-js/internals/descriptors.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/descriptors.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// Detect IE8's incomplete defineProperty implementation
module.exports = !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;
});


/***/ }),

/***/ "./node_modules/core-js/internals/document-all.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/document-all.js ***!
  \********************************************************/
/***/ ((module) => {

var documentAll = typeof document == 'object' && document.all;

// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot
var IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;

module.exports = {
  all: documentAll,
  IS_HTMLDDA: IS_HTMLDDA
};


/***/ }),

/***/ "./node_modules/core-js/internals/document-create-element.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/document-create-element.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var document = global.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};


/***/ }),

/***/ "./node_modules/core-js/internals/engine-user-agent.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-user-agent.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('navigator', 'userAgent') || '';


/***/ }),

/***/ "./node_modules/core-js/internals/engine-v8-version.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-v8-version.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

var process = global.process;
var Deno = global.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  // in old Chrome, versions of V8 isn't V8 = Chrome / 10
  // but their correct versions are not interesting for us
  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}

// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`
// so check `userAgent` even if `.v8` exists, but 0
if (!version && userAgent) {
  match = userAgent.match(/Edge\/(\d+)/);
  if (!match || match[1] >= 74) {
    match = userAgent.match(/Chrome\/(\d+)/);
    if (match) version = +match[1];
  }
}

module.exports = version;


/***/ }),

/***/ "./node_modules/core-js/internals/enum-bug-keys.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
  \*********************************************************/
/***/ ((module) => {

// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];


/***/ }),

/***/ "./node_modules/core-js/internals/export.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/export.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getOwnPropertyDescriptor = (__webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f);
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var defineGlobalProperty = __webpack_require__(/*! ../internals/define-global-property */ "./node_modules/core-js/internals/define-global-property.js");
var copyConstructorProperties = __webpack_require__(/*! ../internals/copy-constructor-properties */ "./node_modules/core-js/internals/copy-constructor-properties.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");

/*
  options.target         - name of the target object
  options.global         - target is the global object
  options.stat           - export as static methods of target
  options.proto          - export as prototype methods of target
  options.real           - real prototype method for the `pure` version
  options.forced         - export even if the native feature is available
  options.bind           - bind methods to the target, required for the `pure` version
  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe         - use the simple assignment of property instead of delete + defineProperty
  options.sham           - add a flag to not completely full polyfills
  options.enumerable     - export as enumerable property
  options.dontCallGetSet - prevent calling a getter on target
  options.name           - the .name of the function if it does not match the key
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = global;
  } else if (STATIC) {
    target = global[TARGET] || defineGlobalProperty(TARGET, {});
  } else {
    target = (global[TARGET] || {}).prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.dontCallGetSet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty == typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      createNonEnumerableProperty(sourceProperty, 'sham', true);
    }
    defineBuiltIn(target, key, sourceProperty, options);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/fails.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/internals/fails.js ***!
  \*************************************************/
/***/ ((module) => {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":
/*!******************************************************************************!*\
  !*** ./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js ***!
  \******************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

// TODO: Remove from `core-js@4` since it's moved to entry points
__webpack_require__(/*! ../modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var regexpExec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");

var SPECIES = wellKnownSymbol('species');
var RegExpPrototype = RegExp.prototype;

module.exports = function (KEY, exec, FORCED, SHAM) {
  var SYMBOL = wellKnownSymbol(KEY);

  var DELEGATES_TO_SYMBOL = !fails(function () {
    // String methods call symbol-named RegEp methods
    var O = {};
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) != 7;
  });

  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
    // Symbol-named RegExp methods call .exec
    var execCalled = false;
    var re = /a/;

    if (KEY === 'split') {
      // We can't use real regex here since it causes deoptimization
      // and serious performance degradation in V8
      // https://github.com/zloirock/core-js/issues/306
      re = {};
      // RegExp[@@split] doesn't call the regex's exec method, but first creates
      // a new one. We need to return the patched regex when creating the new one.
      re.constructor = {};
      re.constructor[SPECIES] = function () { return re; };
      re.flags = '';
      re[SYMBOL] = /./[SYMBOL];
    }

    re.exec = function () { execCalled = true; return null; };

    re[SYMBOL]('');
    return !execCalled;
  });

  if (
    !DELEGATES_TO_SYMBOL ||
    !DELEGATES_TO_EXEC ||
    FORCED
  ) {
    var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);
    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
      var uncurriedNativeMethod = uncurryThis(nativeMethod);
      var $exec = regexp.exec;
      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
          // The native String method already delegates to @@method (this
          // polyfilled function), leasing to infinite recursion.
          // We avoid it by directly calling the native @@method method.
          return { done: true, value: uncurriedNativeRegExpMethod(regexp, str, arg2) };
        }
        return { done: true, value: uncurriedNativeMethod(str, regexp, arg2) };
      }
      return { done: false };
    });

    defineBuiltIn(String.prototype, KEY, methods[0]);
    defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);
  }

  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-apply.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/function-apply.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");

var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var call = FunctionPrototype.call;

// eslint-disable-next-line es/no-reflect -- safe
module.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {
  return call.apply(apply, arguments);
});


/***/ }),

/***/ "./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-bind-context.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");

var bind = uncurryThis(uncurryThis.bind);

// optional / simple context binding
module.exports = function (fn, that) {
  aCallable(fn);
  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-bind-native.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-bind-native.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = !fails(function () {
  // eslint-disable-next-line es/no-function-prototype-bind -- safe
  var test = (function () { /* empty */ }).bind();
  // eslint-disable-next-line no-prototype-builtins -- safe
  return typeof test != 'function' || test.hasOwnProperty('prototype');
});


/***/ }),

/***/ "./node_modules/core-js/internals/function-call.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/function-call.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");

var call = Function.prototype.call;

module.exports = NATIVE_BIND ? call.bind(call) : function () {
  return call.apply(call, arguments);
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-name.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/function-name.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");

var FunctionPrototype = Function.prototype;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;

var EXISTS = hasOwn(FunctionPrototype, 'name');
// additional protection from minified / mangled / dropped function names
var PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));

module.exports = {
  EXISTS: EXISTS,
  PROPER: PROPER,
  CONFIGURABLE: CONFIGURABLE
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-uncurry-this-raw.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/function-uncurry-this-raw.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");

var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);

module.exports = function (fn) {
  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {
    return call.apply(fn, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-uncurry-this.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-uncurry-this.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var classofRaw = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var uncurryThisRaw = __webpack_require__(/*! ../internals/function-uncurry-this-raw */ "./node_modules/core-js/internals/function-uncurry-this-raw.js");

module.exports = function (fn) {
  // Nashorn bug:
  //   https://github.com/zloirock/core-js/issues/1128
  //   https://github.com/zloirock/core-js/issues/1130
  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-built-in.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/get-built-in.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var aFunction = function (argument) {
  return isCallable(argument) ? argument : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-method.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/get-method.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var isNullOrUndefined = __webpack_require__(/*! ../internals/is-null-or-undefined */ "./node_modules/core-js/internals/is-null-or-undefined.js");

// `GetMethod` abstract operation
// https://tc39.es/ecma262/#sec-getmethod
module.exports = function (V, P) {
  var func = V[P];
  return isNullOrUndefined(func) ? undefined : aCallable(func);
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-substitution.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/get-substitution.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");

var floor = Math.floor;
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d{1,2}|<[^>]*>)/g;
var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d{1,2})/g;

// `GetSubstitution` abstract operation
// https://tc39.es/ecma262/#sec-getsubstitution
module.exports = function (matched, str, position, captures, namedCaptures, replacement) {
  var tailPos = position + matched.length;
  var m = captures.length;
  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
  if (namedCaptures !== undefined) {
    namedCaptures = toObject(namedCaptures);
    symbols = SUBSTITUTION_SYMBOLS;
  }
  return replace(replacement, symbols, function (match, ch) {
    var capture;
    switch (charAt(ch, 0)) {
      case '$': return '$';
      case '&': return matched;
      case '`': return stringSlice(str, 0, position);
      case "'": return stringSlice(str, tailPos);
      case '<':
        capture = namedCaptures[stringSlice(ch, 1, -1)];
        break;
      default: // \d\d?
        var n = +ch;
        if (n === 0) return match;
        if (n > m) {
          var f = floor(n / 10);
          if (f === 0) return match;
          if (f <= m) return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);
          return match;
        }
        capture = captures[n - 1];
    }
    return capture === undefined ? '' : capture;
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/global.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/global.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var check = function (it) {
  return it && it.Math == Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line es/no-global-this -- safe
  check(typeof globalThis == 'object' && globalThis) ||
  check(typeof window == 'object' && window) ||
  // eslint-disable-next-line no-restricted-globals -- safe
  check(typeof self == 'object' && self) ||
  check(typeof __webpack_require__.g == 'object' && __webpack_require__.g) ||
  // eslint-disable-next-line no-new-func -- fallback
  (function () { return this; })() || Function('return this')();


/***/ }),

/***/ "./node_modules/core-js/internals/has-own-property.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/has-own-property.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");

var hasOwnProperty = uncurryThis({}.hasOwnProperty);

// `HasOwnProperty` abstract operation
// https://tc39.es/ecma262/#sec-hasownproperty
// eslint-disable-next-line es/no-object-hasown -- safe
module.exports = Object.hasOwn || function hasOwn(it, key) {
  return hasOwnProperty(toObject(it), key);
};


/***/ }),

/***/ "./node_modules/core-js/internals/hidden-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/hidden-keys.js ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = {};


/***/ }),

/***/ "./node_modules/core-js/internals/html.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/html.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),

/***/ "./node_modules/core-js/internals/ie8-dom-define.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var createElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");

// Thanks to IE8 for its funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a != 7;
});


/***/ }),

/***/ "./node_modules/core-js/internals/indexed-object.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/indexed-object.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

var $Object = Object;
var split = uncurryThis(''.split);

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins -- safe
  return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) == 'String' ? split(it, '') : $Object(it);
} : $Object;


/***/ }),

/***/ "./node_modules/core-js/internals/inherit-if-required.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/inherit-if-required.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");

// makes subclassing work correct for wrapped built-ins
module.exports = function ($this, dummy, Wrapper) {
  var NewTarget, NewTargetPrototype;
  if (
    // it can work only with native `setPrototypeOf`
    setPrototypeOf &&
    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this
    isCallable(NewTarget = dummy.constructor) &&
    NewTarget !== Wrapper &&
    isObject(NewTargetPrototype = NewTarget.prototype) &&
    NewTargetPrototype !== Wrapper.prototype
  ) setPrototypeOf($this, NewTargetPrototype);
  return $this;
};


/***/ }),

/***/ "./node_modules/core-js/internals/inspect-source.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/inspect-source.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var store = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");

var functionToString = uncurryThis(Function.toString);

// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper
if (!isCallable(store.inspectSource)) {
  store.inspectSource = function (it) {
    return functionToString(it);
  };
}

module.exports = store.inspectSource;


/***/ }),

/***/ "./node_modules/core-js/internals/internal-state.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/internal-state.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var NATIVE_WEAK_MAP = __webpack_require__(/*! ../internals/weak-map-basic-detection */ "./node_modules/core-js/internals/weak-map-basic-detection.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var shared = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");

var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = global.TypeError;
var WeakMap = global.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP || shared.state) {
  var store = shared.state || (shared.state = new WeakMap());
  /* eslint-disable no-self-assign -- prototype methods protection */
  store.get = store.get;
  store.has = store.has;
  store.set = store.set;
  /* eslint-enable no-self-assign -- prototype methods protection */
  set = function (it, metadata) {
    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    store.set(it, metadata);
    return metadata;
  };
  get = function (it) {
    return store.get(it) || {};
  };
  has = function (it) {
    return store.has(it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    createNonEnumerableProperty(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return hasOwn(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return hasOwn(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/is-array.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) == 'Array';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-callable.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/is-callable.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var $documentAll = __webpack_require__(/*! ../internals/document-all */ "./node_modules/core-js/internals/document-all.js");

var documentAll = $documentAll.all;

// `IsCallable` abstract operation
// https://tc39.es/ecma262/#sec-iscallable
module.exports = $documentAll.IS_HTMLDDA ? function (argument) {
  return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
  return typeof argument == 'function';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-constructor.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/is-constructor.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");

var noop = function () { /* empty */ };
var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.exec(noop);

var isConstructorModern = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(noop, empty, argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
  }
  try {
    // we can't check .prototype since constructors produced by .bind haven't it
    // `Function#toString` throws on some built-it function in some legacy engines
    // (for example, `DOMQuad` and similar in FF41-)
    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
  } catch (error) {
    return true;
  }
};

isConstructorLegacy.sham = true;

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;


/***/ }),

/***/ "./node_modules/core-js/internals/is-forced.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-forced.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value == POLYFILL ? true
    : value == NATIVE ? false
    : isCallable(detection) ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;


/***/ }),

/***/ "./node_modules/core-js/internals/is-null-or-undefined.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/is-null-or-undefined.js ***!
  \****************************************************************/
/***/ ((module) => {

// we can't use just `it == null` since of `document.all` special case
// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec
module.exports = function (it) {
  return it === null || it === undefined;
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-object.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var $documentAll = __webpack_require__(/*! ../internals/document-all */ "./node_modules/core-js/internals/document-all.js");

var documentAll = $documentAll.all;

module.exports = $documentAll.IS_HTMLDDA ? function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;
} : function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it);
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-pure.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/is-pure.js ***!
  \***************************************************/
/***/ ((module) => {

module.exports = false;


/***/ }),

/***/ "./node_modules/core-js/internals/is-regexp.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-regexp.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var MATCH = wellKnownSymbol('match');

// `IsRegExp` abstract operation
// https://tc39.es/ecma262/#sec-isregexp
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-symbol.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-symbol.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var USE_SYMBOL_AS_UID = __webpack_require__(/*! ../internals/use-symbol-as-uid */ "./node_modules/core-js/internals/use-symbol-as-uid.js");

var $Object = Object;

module.exports = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  var $Symbol = getBuiltIn('Symbol');
  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/length-of-array-like.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/length-of-array-like.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");

// `LengthOfArrayLike` abstract operation
// https://tc39.es/ecma262/#sec-lengthofarraylike
module.exports = function (obj) {
  return toLength(obj.length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/make-built-in.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/make-built-in.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").CONFIGURABLE);
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;

var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;
});

var TEMPLATE = String(String).split('String');

var makeBuiltIn = module.exports = function (value, name, options) {
  if (String(name).slice(0, 7) === 'Symbol(') {
    name = '[' + String(name).replace(/^Symbol\(([^)]*)\)/, '$1') + ']';
  }
  if (options && options.getter) name = 'get ' + name;
  if (options && options.setter) name = 'set ' + name;
  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {
    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });
    else value.name = name;
  }
  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
    defineProperty(value, 'length', { value: options.arity });
  }
  try {
    if (options && hasOwn(options, 'constructor') && options.constructor) {
      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });
    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable
    } else if (value.prototype) value.prototype = undefined;
  } catch (error) { /* empty */ }
  var state = enforceInternalState(value);
  if (!hasOwn(state, 'source')) {
    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');
  } return value;
};

// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
// eslint-disable-next-line no-extend-native -- required
Function.prototype.toString = makeBuiltIn(function toString() {
  return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');


/***/ }),

/***/ "./node_modules/core-js/internals/math-trunc.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/math-trunc.js ***!
  \******************************************************/
/***/ ((module) => {

var ceil = Math.ceil;
var floor = Math.floor;

// `Math.trunc` method
// https://tc39.es/ecma262/#sec-math.trunc
// eslint-disable-next-line es/no-math-trunc -- safe
module.exports = Math.trunc || function trunc(x) {
  var n = +x;
  return (n > 0 ? floor : ceil)(n);
};


/***/ }),

/***/ "./node_modules/core-js/internals/number-parse-int.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/number-parse-int.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var trim = (__webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim);
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var $parseInt = global.parseInt;
var Symbol = global.Symbol;
var ITERATOR = Symbol && Symbol.iterator;
var hex = /^[+-]?0x/i;
var exec = uncurryThis(hex.exec);
var FORCED = $parseInt(whitespaces + '08') !== 8 || $parseInt(whitespaces + '0x16') !== 22
  // MS Edge 18- broken with boxed symbols
  || (ITERATOR && !fails(function () { $parseInt(Object(ITERATOR)); }));

// `parseInt` method
// https://tc39.es/ecma262/#sec-parseint-string-radix
module.exports = FORCED ? function parseInt(string, radix) {
  var S = trim(toString(string));
  return $parseInt(S, (radix >>> 0) || (exec(hex, S) ? 16 : 10));
} : $parseInt;


/***/ }),

/***/ "./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-create.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* global ActiveXObject -- old IE, WSH */
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var definePropertiesModule = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var html = __webpack_require__(/*! ../internals/html */ "./node_modules/core-js/internals/html.js");
var documentCreateElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
// eslint-disable-next-line es/no-object-create -- safe
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(/*! ../internals/v8-prototype-define-bug */ "./node_modules/core-js/internals/v8-prototype-define-bug.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var props = toIndexedObject(Properties);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-property.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-property.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(/*! ../internals/v8-prototype-define-bug */ "./node_modules/core-js/internals/v8-prototype-define-bug.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");

var $TypeError = TypeError;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var $defineProperty = Object.defineProperty;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';

// `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
    var current = $getOwnPropertyDescriptor(O, P);
    if (current && current[WRITABLE]) {
      O[P] = Attributes.value;
      Attributes = {
        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
        writable: false
      };
    }
  } return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return $defineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/*!******************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var propertyIsEnumerableModule = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPropertyKey(P);
  if (IE8_DOM_DEFINE) try {
    return $getOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-names.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
// eslint-disable-next-line es/no-object-getownpropertynames -- safe
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-symbols.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe
exports.f = Object.getOwnPropertySymbols;


/***/ }),

/***/ "./node_modules/core-js/internals/object-is-prototype-of.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-is-prototype-of.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

module.exports = uncurryThis({}.isPrototypeOf);


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys-internal.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var indexOf = (__webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").indexOf);
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");

var push = uncurryThis([].push);

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (hasOwn(O, key = names[i++])) {
    ~indexOf(result, key) || push(result, key);
  }
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-property-is-enumerable.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

var $propertyIsEnumerable = {}.propertyIsEnumerable;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;


/***/ }),

/***/ "./node_modules/core-js/internals/object-set-prototype-of.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-set-prototype-of.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* eslint-disable no-proto -- safe */
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var aPossiblePrototype = __webpack_require__(/*! ../internals/a-possible-prototype */ "./node_modules/core-js/internals/a-possible-prototype.js");

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);
    setter(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    anObject(O);
    aPossiblePrototype(proto);
    if (CORRECT_SETTER) setter(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);


/***/ }),

/***/ "./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/object-to-string.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

// `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
  return '[object ' + classof(this) + ']';
};


/***/ }),

/***/ "./node_modules/core-js/internals/ordinary-to-primitive.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/ordinary-to-primitive.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var $TypeError = TypeError;

// `OrdinaryToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-ordinarytoprimitive
module.exports = function (input, pref) {
  var fn, val;
  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;
  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  throw $TypeError("Can't convert object to primitive value");
};


/***/ }),

/***/ "./node_modules/core-js/internals/own-keys.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/own-keys.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var getOwnPropertyNamesModule = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js");
var getOwnPropertySymbolsModule = __webpack_require__(/*! ../internals/object-get-own-property-symbols */ "./node_modules/core-js/internals/object-get-own-property-symbols.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

var concat = uncurryThis([].concat);

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};


/***/ }),

/***/ "./node_modules/core-js/internals/proxy-accessor.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/proxy-accessor.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var defineProperty = (__webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f);

module.exports = function (Target, Source, key) {
  key in Target || defineProperty(Target, key, {
    configurable: true,
    get: function () { return Source[key]; },
    set: function (it) { Source[key] = it; }
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-exec-abstract.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-exec-abstract.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var regexpExec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");

var $TypeError = TypeError;

// `RegExpExec` abstract operation
// https://tc39.es/ecma262/#sec-regexpexec
module.exports = function (R, S) {
  var exec = R.exec;
  if (isCallable(exec)) {
    var result = call(exec, R, S);
    if (result !== null) anObject(result);
    return result;
  }
  if (classof(R) === 'RegExp') return call(regexpExec, R, S);
  throw $TypeError('RegExp#exec called on incompatible receiver');
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-exec.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-exec.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */
/* eslint-disable regexp/no-useless-quantifier -- testing */
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var regexpFlags = __webpack_require__(/*! ../internals/regexp-flags */ "./node_modules/core-js/internals/regexp-flags.js");
var stickyHelpers = __webpack_require__(/*! ../internals/regexp-sticky-helpers */ "./node_modules/core-js/internals/regexp-sticky-helpers.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var getInternalState = (__webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js").get);
var UNSUPPORTED_DOT_ALL = __webpack_require__(/*! ../internals/regexp-unsupported-dot-all */ "./node_modules/core-js/internals/regexp-unsupported-dot-all.js");
var UNSUPPORTED_NCG = __webpack_require__(/*! ../internals/regexp-unsupported-ncg */ "./node_modules/core-js/internals/regexp-unsupported-ncg.js");

var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);

var UPDATES_LAST_INDEX_WRONG = (function () {
  var re1 = /a/;
  var re2 = /b*/g;
  call(nativeExec, re1, 'a');
  call(nativeExec, re2, 'a');
  return re1.lastIndex !== 0 || re2.lastIndex !== 0;
})();

var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;

// nonparticipating capturing group, copied from es5-shim's String#split patch.
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;

var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;

if (PATCH) {
  patchedExec = function exec(string) {
    var re = this;
    var state = getInternalState(re);
    var str = toString(string);
    var raw = state.raw;
    var result, reCopy, lastIndex, match, i, object, group;

    if (raw) {
      raw.lastIndex = re.lastIndex;
      result = call(patchedExec, raw, str);
      re.lastIndex = raw.lastIndex;
      return result;
    }

    var groups = state.groups;
    var sticky = UNSUPPORTED_Y && re.sticky;
    var flags = call(regexpFlags, re);
    var source = re.source;
    var charsAdded = 0;
    var strCopy = str;

    if (sticky) {
      flags = replace(flags, 'y', '');
      if (indexOf(flags, 'g') === -1) {
        flags += 'g';
      }

      strCopy = stringSlice(str, re.lastIndex);
      // Support anchored sticky behavior.
      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
        source = '(?: ' + source + ')';
        strCopy = ' ' + strCopy;
        charsAdded++;
      }
      // ^(? + rx + ) is needed, in combination with some str slicing, to
      // simulate the 'y' flag.
      reCopy = new RegExp('^(?:' + source + ')', flags);
    }

    if (NPCG_INCLUDED) {
      reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
    }
    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;

    match = call(nativeExec, sticky ? reCopy : re, strCopy);

    if (sticky) {
      if (match) {
        match.input = stringSlice(match.input, charsAdded);
        match[0] = stringSlice(match[0], charsAdded);
        match.index = re.lastIndex;
        re.lastIndex += match[0].length;
      } else re.lastIndex = 0;
    } else if (UPDATES_LAST_INDEX_WRONG && match) {
      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
    }
    if (NPCG_INCLUDED && match && match.length > 1) {
      // Fix browsers whose `exec` methods don't consistently return `undefined`
      // for NPCG, like IE8. NOTE: This doesn't work for /(.?)?/
      call(nativeReplace, match[0], reCopy, function () {
        for (i = 1; i < arguments.length - 2; i++) {
          if (arguments[i] === undefined) match[i] = undefined;
        }
      });
    }

    if (match && groups) {
      match.groups = object = create(null);
      for (i = 0; i < groups.length; i++) {
        group = groups[i];
        object[group[0]] = match[group[1]];
      }
    }

    return match;
  };
}

module.exports = patchedExec;


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-flags.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-flags.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

// `RegExp.prototype.flags` getter implementation
// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.hasIndices) result += 'd';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.dotAll) result += 's';
  if (that.unicode) result += 'u';
  if (that.unicodeSets) result += 'v';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-get-flags.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-get-flags.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var regExpFlags = __webpack_require__(/*! ../internals/regexp-flags */ "./node_modules/core-js/internals/regexp-flags.js");

var RegExpPrototype = RegExp.prototype;

module.exports = function (R) {
  var flags = R.flags;
  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)
    ? call(regExpFlags, R) : flags;
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-sticky-helpers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-sticky-helpers.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError
var $RegExp = global.RegExp;

var UNSUPPORTED_Y = fails(function () {
  var re = $RegExp('a', 'y');
  re.lastIndex = 2;
  return re.exec('abcd') != null;
});

// UC Browser bug
// https://github.com/zloirock/core-js/issues/1008
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
  return !$RegExp('a', 'y').sticky;
});

var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687
  var re = $RegExp('^r', 'gy');
  re.lastIndex = 2;
  return re.exec('str') != null;
});

module.exports = {
  BROKEN_CARET: BROKEN_CARET,
  MISSED_STICKY: MISSED_STICKY,
  UNSUPPORTED_Y: UNSUPPORTED_Y
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-unsupported-dot-all.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-unsupported-dot-all.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError
var $RegExp = global.RegExp;

module.exports = fails(function () {
  var re = $RegExp('.', 's');
  return !(re.dotAll && re.exec('\n') && re.flags === 's');
});


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-unsupported-ncg.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-unsupported-ncg.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError
var $RegExp = global.RegExp;

module.exports = fails(function () {
  var re = $RegExp('(?<a>b)', 'g');
  return re.exec('b').groups.a !== 'b' ||
    'b'.replace(re, '$<a>c') !== 'bc';
});


/***/ }),

/***/ "./node_modules/core-js/internals/require-object-coercible.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isNullOrUndefined = __webpack_require__(/*! ../internals/is-null-or-undefined */ "./node_modules/core-js/internals/is-null-or-undefined.js");

var $TypeError = TypeError;

// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (isNullOrUndefined(it)) throw $TypeError("Can't call method on " + it);
  return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/same-value.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/same-value.js ***!
  \******************************************************/
/***/ ((module) => {

// `SameValue` abstract operation
// https://tc39.es/ecma262/#sec-samevalue
// eslint-disable-next-line es/no-object-is -- safe
module.exports = Object.is || function is(x, y) {
  // eslint-disable-next-line no-self-compare -- NaN check
  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-species.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/set-species.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
  var defineProperty = definePropertyModule.f;

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineProperty(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/shared-key.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/shared-key.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};


/***/ }),

/***/ "./node_modules/core-js/internals/shared-store.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/shared-store.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var defineGlobalProperty = __webpack_require__(/*! ../internals/define-global-property */ "./node_modules/core-js/internals/define-global-property.js");

var SHARED = '__core-js_shared__';
var store = global[SHARED] || defineGlobalProperty(SHARED, {});

module.exports = store;


/***/ }),

/***/ "./node_modules/core-js/internals/shared.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/shared.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var store = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");

(module.exports = function (key, value) {
  return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: '3.25.5',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',
  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',
  source: 'https://github.com/zloirock/core-js'
});


/***/ }),

/***/ "./node_modules/core-js/internals/string-multibyte.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/string-multibyte.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);

var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = toString(requireObjectCoercible($this));
    var position = toIntegerOrInfinity(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = charCodeAt(S, position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING
          ? charAt(S, position)
          : first
        : CONVERT_TO_STRING
          ? stringSlice(S, position, position + 2)
          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.es/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var replace = uncurryThis(''.replace);
var whitespace = '[' + whitespaces + ']';
var ltrim = RegExp('^' + whitespace + whitespace + '*');
var rtrim = RegExp(whitespace + whitespace + '*$');

// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation
var createMethod = function (TYPE) {
  return function ($this) {
    var string = toString(requireObjectCoercible($this));
    if (TYPE & 1) string = replace(string, ltrim, '');
    if (TYPE & 2) string = replace(string, rtrim, '');
    return string;
  };
};

module.exports = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod(3)
};


/***/ }),

/***/ "./node_modules/core-js/internals/symbol-constructor-detection.js":
/*!************************************************************************!*\
  !*** ./node_modules/core-js/internals/symbol-constructor-detection.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* eslint-disable es/no-symbol -- required for testing */
var V8_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  var symbol = Symbol();
  // Chrome 38 Symbol has incorrect toString conversion
  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances
  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||
    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
    !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});


/***/ }),

/***/ "./node_modules/core-js/internals/to-absolute-index.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
module.exports = function (index, length) {
  var integer = toIntegerOrInfinity(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-indexed-object.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

// toObject with fallback for non-array-like ES3 strings
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-integer-or-infinity.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/to-integer-or-infinity.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var trunc = __webpack_require__(/*! ../internals/math-trunc */ "./node_modules/core-js/internals/math-trunc.js");

// `ToIntegerOrInfinity` abstract operation
// https://tc39.es/ecma262/#sec-tointegerorinfinity
module.exports = function (argument) {
  var number = +argument;
  // eslint-disable-next-line no-self-compare -- NaN check
  return number !== number || number === 0 ? 0 : trunc(number);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-length.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-length.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength
module.exports = function (argument) {
  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-object.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var $Object = Object;

// `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject
module.exports = function (argument) {
  return $Object(requireObjectCoercible(argument));
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-primitive.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/to-primitive.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var ordinaryToPrimitive = __webpack_require__(/*! ../internals/ordinary-to-primitive */ "./node_modules/core-js/internals/ordinary-to-primitive.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

// `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
module.exports = function (input, pref) {
  if (!isObject(input) || isSymbol(input)) return input;
  var exoticToPrim = getMethod(input, TO_PRIMITIVE);
  var result;
  if (exoticToPrim) {
    if (pref === undefined) pref = 'default';
    result = call(exoticToPrim, input, pref);
    if (!isObject(result) || isSymbol(result)) return result;
    throw $TypeError("Can't convert object to primitive value");
  }
  if (pref === undefined) pref = 'number';
  return ordinaryToPrimitive(input, pref);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-property-key.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/to-property-key.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var toPrimitive = __webpack_require__(/*! ../internals/to-primitive */ "./node_modules/core-js/internals/to-primitive.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");

// `ToPropertyKey` abstract operation
// https://tc39.es/ecma262/#sec-topropertykey
module.exports = function (argument) {
  var key = toPrimitive(argument, 'string');
  return isSymbol(key) ? key : key + '';
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),

/***/ "./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-string.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

var $String = String;

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');
  return $String(argument);
};


/***/ }),

/***/ "./node_modules/core-js/internals/try-to-string.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/try-to-string.js ***!
  \*********************************************************/
/***/ ((module) => {

var $String = String;

module.exports = function (argument) {
  try {
    return $String(argument);
  } catch (error) {
    return 'Object';
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/uid.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/internals/uid.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);

module.exports = function (key) {
  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};


/***/ }),

/***/ "./node_modules/core-js/internals/use-symbol-as-uid.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/use-symbol-as-uid.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* eslint-disable es/no-symbol -- required for testing */
var NATIVE_SYMBOL = __webpack_require__(/*! ../internals/symbol-constructor-detection */ "./node_modules/core-js/internals/symbol-constructor-detection.js");

module.exports = NATIVE_SYMBOL
  && !Symbol.sham
  && typeof Symbol.iterator == 'symbol';


/***/ }),

/***/ "./node_modules/core-js/internals/v8-prototype-define-bug.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/v8-prototype-define-bug.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// V8 ~ Chrome 36-
// https://bugs.chromium.org/p/v8/issues/detail?id=3334
module.exports = DESCRIPTORS && fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(function () { /* empty */ }, 'prototype', {
    value: 42,
    writable: false
  }).prototype != 42;
});


/***/ }),

/***/ "./node_modules/core-js/internals/weak-map-basic-detection.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/weak-map-basic-detection.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var WeakMap = global.WeakMap;

module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));


/***/ }),

/***/ "./node_modules/core-js/internals/well-known-symbol.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");
var NATIVE_SYMBOL = __webpack_require__(/*! ../internals/symbol-constructor-detection */ "./node_modules/core-js/internals/symbol-constructor-detection.js");
var USE_SYMBOL_AS_UID = __webpack_require__(/*! ../internals/use-symbol-as-uid */ "./node_modules/core-js/internals/use-symbol-as-uid.js");

var WellKnownSymbolsStore = shared('wks');
var Symbol = global.Symbol;
var symbolFor = Symbol && Symbol['for'];
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;

module.exports = function (name) {
  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {
    var description = 'Symbol.' + name;
    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {
      WellKnownSymbolsStore[name] = Symbol[name];
    } else if (USE_SYMBOL_AS_UID && symbolFor) {
      WellKnownSymbolsStore[name] = symbolFor(description);
    } else {
      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);
    }
  } return WellKnownSymbolsStore[name];
};


/***/ }),

/***/ "./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/whitespaces.js ***!
  \*******************************************************/
/***/ ((module) => {

// a string of all valid unicode whitespaces
module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' +
  '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.find.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.find.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $find = (__webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").find);
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

var FIND = 'find';
var SKIPS_HOLES = true;

// Shouldn't skip holes
if (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });

// `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find
$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables(FIND);


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var toString = __webpack_require__(/*! ../internals/object-to-string */ "./node_modules/core-js/internals/object-to-string.js");

// `Object.prototype.toString` method
// https://tc39.es/ecma262/#sec-object.prototype.tostring
if (!TO_STRING_TAG_SUPPORT) {
  defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.parse-int.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/es.parse-int.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $parseInt = __webpack_require__(/*! ../internals/number-parse-int */ "./node_modules/core-js/internals/number-parse-int.js");

// `parseInt` method
// https://tc39.es/ecma262/#sec-parseint-string-radix
$({ global: true, forced: parseInt != $parseInt }, {
  parseInt: $parseInt
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.constructor.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.constructor.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");
var inheritIfRequired = __webpack_require__(/*! ../internals/inherit-if-required */ "./node_modules/core-js/internals/inherit-if-required.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var getOwnPropertyNames = (__webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js").f);
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var isRegExp = __webpack_require__(/*! ../internals/is-regexp */ "./node_modules/core-js/internals/is-regexp.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var getRegExpFlags = __webpack_require__(/*! ../internals/regexp-get-flags */ "./node_modules/core-js/internals/regexp-get-flags.js");
var stickyHelpers = __webpack_require__(/*! ../internals/regexp-sticky-helpers */ "./node_modules/core-js/internals/regexp-sticky-helpers.js");
var proxyAccessor = __webpack_require__(/*! ../internals/proxy-accessor */ "./node_modules/core-js/internals/proxy-accessor.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var enforceInternalState = (__webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js").enforce);
var setSpecies = __webpack_require__(/*! ../internals/set-species */ "./node_modules/core-js/internals/set-species.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var UNSUPPORTED_DOT_ALL = __webpack_require__(/*! ../internals/regexp-unsupported-dot-all */ "./node_modules/core-js/internals/regexp-unsupported-dot-all.js");
var UNSUPPORTED_NCG = __webpack_require__(/*! ../internals/regexp-unsupported-ncg */ "./node_modules/core-js/internals/regexp-unsupported-ncg.js");

var MATCH = wellKnownSymbol('match');
var NativeRegExp = global.RegExp;
var RegExpPrototype = NativeRegExp.prototype;
var SyntaxError = global.SyntaxError;
var exec = uncurryThis(RegExpPrototype.exec);
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
// TODO: Use only proper RegExpIdentifierName
var IS_NCG = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/;
var re1 = /a/g;
var re2 = /a/g;

// "new" should create a new object, old webkit bug
var CORRECT_NEW = new NativeRegExp(re1) !== re1;

var MISSED_STICKY = stickyHelpers.MISSED_STICKY;
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;

var BASE_FORCED = DESCRIPTORS &&
  (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {
    re2[MATCH] = false;
    // RegExp constructor can alter flags and IsRegExp works correct with @@match
    return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';
  }));

var handleDotAll = function (string) {
  var length = string.length;
  var index = 0;
  var result = '';
  var brackets = false;
  var chr;
  for (; index <= length; index++) {
    chr = charAt(string, index);
    if (chr === '\\') {
      result += chr + charAt(string, ++index);
      continue;
    }
    if (!brackets && chr === '.') {
      result += '[\\s\\S]';
    } else {
      if (chr === '[') {
        brackets = true;
      } else if (chr === ']') {
        brackets = false;
      } result += chr;
    }
  } return result;
};

var handleNCG = function (string) {
  var length = string.length;
  var index = 0;
  var result = '';
  var named = [];
  var names = {};
  var brackets = false;
  var ncg = false;
  var groupid = 0;
  var groupname = '';
  var chr;
  for (; index <= length; index++) {
    chr = charAt(string, index);
    if (chr === '\\') {
      chr = chr + charAt(string, ++index);
    } else if (chr === ']') {
      brackets = false;
    } else if (!brackets) switch (true) {
      case chr === '[':
        brackets = true;
        break;
      case chr === '(':
        if (exec(IS_NCG, stringSlice(string, index + 1))) {
          index += 2;
          ncg = true;
        }
        result += chr;
        groupid++;
        continue;
      case chr === '>' && ncg:
        if (groupname === '' || hasOwn(names, groupname)) {
          throw new SyntaxError('Invalid capture group name');
        }
        names[groupname] = true;
        named[named.length] = [groupname, groupid];
        ncg = false;
        groupname = '';
        continue;
    }
    if (ncg) groupname += chr;
    else result += chr;
  } return [result, named];
};

// `RegExp` constructor
// https://tc39.es/ecma262/#sec-regexp-constructor
if (isForced('RegExp', BASE_FORCED)) {
  var RegExpWrapper = function RegExp(pattern, flags) {
    var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);
    var patternIsRegExp = isRegExp(pattern);
    var flagsAreUndefined = flags === undefined;
    var groups = [];
    var rawPattern = pattern;
    var rawFlags, dotAll, sticky, handled, result, state;

    if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {
      return pattern;
    }

    if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {
      pattern = pattern.source;
      if (flagsAreUndefined) flags = getRegExpFlags(rawPattern);
    }

    pattern = pattern === undefined ? '' : toString(pattern);
    flags = flags === undefined ? '' : toString(flags);
    rawPattern = pattern;

    if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {
      dotAll = !!flags && stringIndexOf(flags, 's') > -1;
      if (dotAll) flags = replace(flags, /s/g, '');
    }

    rawFlags = flags;

    if (MISSED_STICKY && 'sticky' in re1) {
      sticky = !!flags && stringIndexOf(flags, 'y') > -1;
      if (sticky && UNSUPPORTED_Y) flags = replace(flags, /y/g, '');
    }

    if (UNSUPPORTED_NCG) {
      handled = handleNCG(pattern);
      pattern = handled[0];
      groups = handled[1];
    }

    result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);

    if (dotAll || sticky || groups.length) {
      state = enforceInternalState(result);
      if (dotAll) {
        state.dotAll = true;
        state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);
      }
      if (sticky) state.sticky = true;
      if (groups.length) state.groups = groups;
    }

    if (pattern !== rawPattern) try {
      // fails in old engines, but we have no alternatives for unsupported regex syntax
      createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);
    } catch (error) { /* empty */ }

    return result;
  };

  for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {
    proxyAccessor(RegExpWrapper, NativeRegExp, keys[index++]);
  }

  RegExpPrototype.constructor = RegExpWrapper;
  RegExpWrapper.prototype = RegExpPrototype;
  defineBuiltIn(global, 'RegExp', RegExpWrapper, { constructor: true });
}

// https://tc39.es/ecma262/#sec-get-regexp-@@species
setSpecies('RegExp');


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.dot-all.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.dot-all.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var UNSUPPORTED_DOT_ALL = __webpack_require__(/*! ../internals/regexp-unsupported-dot-all */ "./node_modules/core-js/internals/regexp-unsupported-dot-all.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var defineBuiltInAccessor = __webpack_require__(/*! ../internals/define-built-in-accessor */ "./node_modules/core-js/internals/define-built-in-accessor.js");
var getInternalState = (__webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js").get);

var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;

// `RegExp.prototype.dotAll` getter
// https://tc39.es/ecma262/#sec-get-regexp.prototype.dotall
if (DESCRIPTORS && UNSUPPORTED_DOT_ALL) {
  defineBuiltInAccessor(RegExpPrototype, 'dotAll', {
    configurable: true,
    get: function dotAll() {
      if (this === RegExpPrototype) return undefined;
      // We can't use InternalStateModule.getterFor because
      // we don't add metadata for regexps created by a literal.
      if (classof(this) === 'RegExp') {
        return !!getInternalState(this).dotAll;
      }
      throw $TypeError('Incompatible receiver, RegExp required');
    }
  });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.exec.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.exec.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var exec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");

// `RegExp.prototype.exec` method
// https://tc39.es/ecma262/#sec-regexp.prototype.exec
$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
  exec: exec
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.sticky.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.sticky.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var MISSED_STICKY = (__webpack_require__(/*! ../internals/regexp-sticky-helpers */ "./node_modules/core-js/internals/regexp-sticky-helpers.js").MISSED_STICKY);
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var defineBuiltInAccessor = __webpack_require__(/*! ../internals/define-built-in-accessor */ "./node_modules/core-js/internals/define-built-in-accessor.js");
var getInternalState = (__webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js").get);

var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;

// `RegExp.prototype.sticky` getter
// https://tc39.es/ecma262/#sec-get-regexp.prototype.sticky
if (DESCRIPTORS && MISSED_STICKY) {
  defineBuiltInAccessor(RegExpPrototype, 'sticky', {
    configurable: true,
    get: function sticky() {
      if (this === RegExpPrototype) return undefined;
      // We can't use InternalStateModule.getterFor because
      // we don't add metadata for regexps created by a literal.
      if (classof(this) === 'RegExp') {
        return !!getInternalState(this).sticky;
      }
      throw $TypeError('Incompatible receiver, RegExp required');
    }
  });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.test.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.test.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

// TODO: Remove from `core-js@4` since it's moved to entry points
__webpack_require__(/*! ../modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");

var DELEGATES_TO_EXEC = function () {
  var execCalled = false;
  var re = /[ac]/;
  re.exec = function () {
    execCalled = true;
    return /./.exec.apply(this, arguments);
  };
  return re.test('abc') === true && execCalled;
}();

var nativeTest = /./.test;

// `RegExp.prototype.test` method
// https://tc39.es/ecma262/#sec-regexp.prototype.test
$({ target: 'RegExp', proto: true, forced: !DELEGATES_TO_EXEC }, {
  test: function (S) {
    var R = anObject(this);
    var string = toString(S);
    var exec = R.exec;
    if (!isCallable(exec)) return call(nativeTest, R, string);
    var result = call(exec, R, string);
    if (result === null) return false;
    anObject(result);
    return true;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.to-string.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.to-string.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var PROPER_FUNCTION_NAME = (__webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").PROPER);
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var getRegExpFlags = __webpack_require__(/*! ../internals/regexp-get-flags */ "./node_modules/core-js/internals/regexp-get-flags.js");

var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var nativeToString = RegExpPrototype[TO_STRING];

var NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });
// FF44- RegExp#toString has a wrong name
var INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name != TO_STRING;

// `RegExp.prototype.toString` method
// https://tc39.es/ecma262/#sec-regexp.prototype.tostring
if (NOT_GENERIC || INCORRECT_NAME) {
  defineBuiltIn(RegExp.prototype, TO_STRING, function toString() {
    var R = anObject(this);
    var pattern = $toString(R.source);
    var flags = $toString(getRegExpFlags(R));
    return '/' + pattern + '/' + flags;
  }, { unsafe: true });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.replace.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.replace.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fixRegExpWellKnownSymbolLogic = __webpack_require__(/*! ../internals/fix-regexp-well-known-symbol-logic */ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isNullOrUndefined = __webpack_require__(/*! ../internals/is-null-or-undefined */ "./node_modules/core-js/internals/is-null-or-undefined.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var advanceStringIndex = __webpack_require__(/*! ../internals/advance-string-index */ "./node_modules/core-js/internals/advance-string-index.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var getSubstitution = __webpack_require__(/*! ../internals/get-substitution */ "./node_modules/core-js/internals/get-substitution.js");
var regExpExec = __webpack_require__(/*! ../internals/regexp-exec-abstract */ "./node_modules/core-js/internals/regexp-exec-abstract.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var REPLACE = wellKnownSymbol('replace');
var max = Math.max;
var min = Math.min;
var concat = uncurryThis([].concat);
var push = uncurryThis([].push);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);

var maybeToString = function (it) {
  return it === undefined ? it : String(it);
};

// IE <= 11 replaces $0 with the whole match, as if it was $&
// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0
var REPLACE_KEEPS_$0 = (function () {
  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing
  return 'a'.replace(/./, '$0') === '$0';
})();

// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string
var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {
  if (/./[REPLACE]) {
    return /./[REPLACE]('a', '$0') === '';
  }
  return false;
})();

var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {
  var re = /./;
  re.exec = function () {
    var result = [];
    result.groups = { a: '7' };
    return result;
  };
  // eslint-disable-next-line regexp/no-useless-dollar-replacements -- false positive
  return ''.replace(re, '$<a>') !== '7';
});

// @@replace logic
fixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {
  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';

  return [
    // `String.prototype.replace` method
    // https://tc39.es/ecma262/#sec-string.prototype.replace
    function replace(searchValue, replaceValue) {
      var O = requireObjectCoercible(this);
      var replacer = isNullOrUndefined(searchValue) ? undefined : getMethod(searchValue, REPLACE);
      return replacer
        ? call(replacer, searchValue, O, replaceValue)
        : call(nativeReplace, toString(O), searchValue, replaceValue);
    },
    // `RegExp.prototype[@@replace]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace
    function (string, replaceValue) {
      var rx = anObject(this);
      var S = toString(string);

      if (
        typeof replaceValue == 'string' &&
        stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 &&
        stringIndexOf(replaceValue, '$<') === -1
      ) {
        var res = maybeCallNative(nativeReplace, rx, S, replaceValue);
        if (res.done) return res.value;
      }

      var functionalReplace = isCallable(replaceValue);
      if (!functionalReplace) replaceValue = toString(replaceValue);

      var global = rx.global;
      if (global) {
        var fullUnicode = rx.unicode;
        rx.lastIndex = 0;
      }
      var results = [];
      while (true) {
        var result = regExpExec(rx, S);
        if (result === null) break;

        push(results, result);
        if (!global) break;

        var matchStr = toString(result[0]);
        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
      }

      var accumulatedResult = '';
      var nextSourcePosition = 0;
      for (var i = 0; i < results.length; i++) {
        result = results[i];

        var matched = toString(result[0]);
        var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);
        var captures = [];
        // NOTE: This is equivalent to
        //   captures = result.slice(1).map(maybeToString)
        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in
        // the slice polyfill when slicing native arrays) "doesn't work" in safari 9 and
        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.
        for (var j = 1; j < result.length; j++) push(captures, maybeToString(result[j]));
        var namedCaptures = result.groups;
        if (functionalReplace) {
          var replacerArgs = concat([matched], captures, position, S);
          if (namedCaptures !== undefined) push(replacerArgs, namedCaptures);
          var replacement = toString(apply(replaceValue, undefined, replacerArgs));
        } else {
          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
        }
        if (position >= nextSourcePosition) {
          accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;
          nextSourcePosition = position + matched.length;
        }
      }
      return accumulatedResult + stringSlice(S, nextSourcePosition);
    }
  ];
}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.search.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.search.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var fixRegExpWellKnownSymbolLogic = __webpack_require__(/*! ../internals/fix-regexp-well-known-symbol-logic */ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isNullOrUndefined = __webpack_require__(/*! ../internals/is-null-or-undefined */ "./node_modules/core-js/internals/is-null-or-undefined.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var sameValue = __webpack_require__(/*! ../internals/same-value */ "./node_modules/core-js/internals/same-value.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var regExpExec = __webpack_require__(/*! ../internals/regexp-exec-abstract */ "./node_modules/core-js/internals/regexp-exec-abstract.js");

// @@search logic
fixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {
  return [
    // `String.prototype.search` method
    // https://tc39.es/ecma262/#sec-string.prototype.search
    function search(regexp) {
      var O = requireObjectCoercible(this);
      var searcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, SEARCH);
      return searcher ? call(searcher, regexp, O) : new RegExp(regexp)[SEARCH](toString(O));
    },
    // `RegExp.prototype[@@search]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search
    function (string) {
      var rx = anObject(this);
      var S = toString(string);
      var res = maybeCallNative(nativeSearch, rx, S);

      if (res.done) return res.value;

      var previousLastIndex = rx.lastIndex;
      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;
      var result = regExpExec(rx, S);
      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;
      return result === null ? -1 : result.index;
    }
  ];
});


/***/ }),

/***/ "./node_modules/hogan.js/lib/compiler.js":
/*!***********************************************!*\
  !*** ./node_modules/hogan.js/lib/compiler.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

(function (Hogan) {
  // Setup regex  assignments
  // remove whitespace according to Mustache spec
  var rIsWhitespace = /\S/,
      rQuot = /\"/g,
      rNewline =  /\n/g,
      rCr = /\r/g,
      rSlash = /\\/g,
      rLineSep = /\u2028/,
      rParagraphSep = /\u2029/;

  Hogan.tags = {
    '#': 1, '^': 2, '<': 3, '$': 4,
    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,
    '{': 10, '&': 11, '_t': 12
  };

  Hogan.scan = function scan(text, delimiters) {
    var len = text.length,
        IN_TEXT = 0,
        IN_TAG_TYPE = 1,
        IN_TAG = 2,
        state = IN_TEXT,
        tagType = null,
        tag = null,
        buf = '',
        tokens = [],
        seenTag = false,
        i = 0,
        lineStart = 0,
        otag = '{{',
        ctag = '}}';

    function addBuf() {
      if (buf.length > 0) {
        tokens.push({tag: '_t', text: new String(buf)});
        buf = '';
      }
    }

    function lineIsWhitespace() {
      var isAllWhitespace = true;
      for (var j = lineStart; j < tokens.length; j++) {
        isAllWhitespace =
          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||
          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);
        if (!isAllWhitespace) {
          return false;
        }
      }

      return isAllWhitespace;
    }

    function filterLine(haveSeenTag, noNewLine) {
      addBuf();

      if (haveSeenTag && lineIsWhitespace()) {
        for (var j = lineStart, next; j < tokens.length; j++) {
          if (tokens[j].text) {
            if ((next = tokens[j+1]) && next.tag == '>') {
              // set indent to token value
              next.indent = tokens[j].text.toString()
            }
            tokens.splice(j, 1);
          }
        }
      } else if (!noNewLine) {
        tokens.push({tag:'\n'});
      }

      seenTag = false;
      lineStart = tokens.length;
    }

    function changeDelimiters(text, index) {
      var close = '=' + ctag,
          closeIndex = text.indexOf(close, index),
          delimiters = trim(
            text.substring(text.indexOf('=', index) + 1, closeIndex)
          ).split(' ');

      otag = delimiters[0];
      ctag = delimiters[delimiters.length - 1];

      return closeIndex + close.length - 1;
    }

    if (delimiters) {
      delimiters = delimiters.split(' ');
      otag = delimiters[0];
      ctag = delimiters[1];
    }

    for (i = 0; i < len; i++) {
      if (state == IN_TEXT) {
        if (tagChange(otag, text, i)) {
          --i;
          addBuf();
          state = IN_TAG_TYPE;
        } else {
          if (text.charAt(i) == '\n') {
            filterLine(seenTag);
          } else {
            buf += text.charAt(i);
          }
        }
      } else if (state == IN_TAG_TYPE) {
        i += otag.length - 1;
        tag = Hogan.tags[text.charAt(i + 1)];
        tagType = tag ? text.charAt(i + 1) : '_v';
        if (tagType == '=') {
          i = changeDelimiters(text, i);
          state = IN_TEXT;
        } else {
          if (tag) {
            i++;
          }
          state = IN_TAG;
        }
        seenTag = i;
      } else {
        if (tagChange(ctag, text, i)) {
          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,
                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});
          buf = '';
          i += ctag.length - 1;
          state = IN_TEXT;
          if (tagType == '{') {
            if (ctag == '}}') {
              i++;
            } else {
              cleanTripleStache(tokens[tokens.length - 1]);
            }
          }
        } else {
          buf += text.charAt(i);
        }
      }
    }

    filterLine(seenTag, true);

    return tokens;
  }

  function cleanTripleStache(token) {
    if (token.n.substr(token.n.length - 1) === '}') {
      token.n = token.n.substring(0, token.n.length - 1);
    }
  }

  function trim(s) {
    if (s.trim) {
      return s.trim();
    }

    return s.replace(/^\s*|\s*$/g, '');
  }

  function tagChange(tag, text, index) {
    if (text.charAt(index) != tag.charAt(0)) {
      return false;
    }

    for (var i = 1, l = tag.length; i < l; i++) {
      if (text.charAt(index + i) != tag.charAt(i)) {
        return false;
      }
    }

    return true;
  }

  // the tags allowed inside super templates
  var allowedInSuper = {'_t': true, '\n': true, '$': true, '/': true};

  function buildTree(tokens, kind, stack, customTags) {
    var instructions = [],
        opener = null,
        tail = null,
        token = null;

    tail = stack[stack.length - 1];

    while (tokens.length > 0) {
      token = tokens.shift();

      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {
        throw new Error('Illegal content in < super tag.');
      }

      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {
        stack.push(token);
        token.nodes = buildTree(tokens, token.tag, stack, customTags);
      } else if (token.tag == '/') {
        if (stack.length === 0) {
          throw new Error('Closing tag without opener: /' + token.n);
        }
        opener = stack.pop();
        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {
          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);
        }
        opener.end = token.i;
        return instructions;
      } else if (token.tag == '\n') {
        token.last = (tokens.length == 0) || (tokens[0].tag == '\n');
      }

      instructions.push(token);
    }

    if (stack.length > 0) {
      throw new Error('missing closing tag: ' + stack.pop().n);
    }

    return instructions;
  }

  function isOpener(token, tags) {
    for (var i = 0, l = tags.length; i < l; i++) {
      if (tags[i].o == token.n) {
        token.tag = '#';
        return true;
      }
    }
  }

  function isCloser(close, open, tags) {
    for (var i = 0, l = tags.length; i < l; i++) {
      if (tags[i].c == close && tags[i].o == open) {
        return true;
      }
    }
  }

  function stringifySubstitutions(obj) {
    var items = [];
    for (var key in obj) {
      items.push('"' + esc(key) + '": function(c,p,t,i) {' + obj[key] + '}');
    }
    return "{ " + items.join(",") + " }";
  }

  function stringifyPartials(codeObj) {
    var partials = [];
    for (var key in codeObj.partials) {
      partials.push('"' + esc(key) + '":{name:"' + esc(codeObj.partials[key].name) + '", ' + stringifyPartials(codeObj.partials[key]) + "}");
    }
    return "partials: {" + partials.join(",") + "}, subs: " + stringifySubstitutions(codeObj.subs);
  }

  Hogan.stringify = function(codeObj, text, options) {
    return "{code: function (c,p,i) { " + Hogan.wrapMain(codeObj.code) + " }," + stringifyPartials(codeObj) +  "}";
  }

  var serialNo = 0;
  Hogan.generate = function(tree, text, options) {
    serialNo = 0;
    var context = { code: '', subs: {}, partials: {} };
    Hogan.walk(tree, context);

    if (options.asString) {
      return this.stringify(context, text, options);
    }

    return this.makeTemplate(context, text, options);
  }

  Hogan.wrapMain = function(code) {
    return 'var t=this;t.b(i=i||"");' + code + 'return t.fl();';
  }

  Hogan.template = Hogan.Template;

  Hogan.makeTemplate = function(codeObj, text, options) {
    var template = this.makePartials(codeObj);
    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));
    return new this.template(template, text, this, options);
  }

  Hogan.makePartials = function(codeObj) {
    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};
    for (key in template.partials) {
      template.partials[key] = this.makePartials(template.partials[key]);
    }
    for (key in codeObj.subs) {
      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);
    }
    return template;
  }

  function esc(s) {
    return s.replace(rSlash, '\\\\')
            .replace(rQuot, '\\\"')
            .replace(rNewline, '\\n')
            .replace(rCr, '\\r')
            .replace(rLineSep, '\\u2028')
            .replace(rParagraphSep, '\\u2029');
  }

  function chooseMethod(s) {
    return (~s.indexOf('.')) ? 'd' : 'f';
  }

  function createPartial(node, context) {
    var prefix = "<" + (context.prefix || "");
    var sym = prefix + node.n + serialNo++;
    context.partials[sym] = {name: node.n, partials: {}};
    context.code += 't.b(t.rp("' +  esc(sym) + '",c,p,"' + (node.indent || '') + '"));';
    return sym;
  }

  Hogan.codegen = {
    '#': function(node, context) {
      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '("' + esc(node.n) + '",c,p,1),' +
                      'c,p,0,' + node.i + ',' + node.end + ',"' + node.otag + " " + node.ctag + '")){' +
                      't.rs(c,p,' + 'function(c,p,t){';
      Hogan.walk(node.nodes, context);
      context.code += '});c.pop();}';
    },

    '^': function(node, context) {
      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '("' + esc(node.n) + '",c,p,1),c,p,1,0,0,"")){';
      Hogan.walk(node.nodes, context);
      context.code += '};';
    },

    '>': createPartial,
    '<': function(node, context) {
      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};
      Hogan.walk(node.nodes, ctx);
      var template = context.partials[createPartial(node, context)];
      template.subs = ctx.subs;
      template.partials = ctx.partials;
    },

    '$': function(node, context) {
      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};
      Hogan.walk(node.nodes, ctx);
      context.subs[node.n] = ctx.code;
      if (!context.inPartial) {
        context.code += 't.sub("' + esc(node.n) + '",c,p,i);';
      }
    },

    '\n': function(node, context) {
      context.code += write('"\\n"' + (node.last ? '' : ' + i'));
    },

    '_v': function(node, context) {
      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '("' + esc(node.n) + '",c,p,0)));';
    },

    '_t': function(node, context) {
      context.code += write('"' + esc(node.text) + '"');
    },

    '{': tripleStache,

    '&': tripleStache
  }

  function tripleStache(node, context) {
    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '("' + esc(node.n) + '",c,p,0)));';
  }

  function write(s) {
    return 't.b(' + s + ');';
  }

  Hogan.walk = function(nodelist, context) {
    var func;
    for (var i = 0, l = nodelist.length; i < l; i++) {
      func = Hogan.codegen[nodelist[i].tag];
      func && func(nodelist[i], context);
    }
    return context;
  }

  Hogan.parse = function(tokens, text, options) {
    options = options || {};
    return buildTree(tokens, '', [], options.sectionTags || []);
  }

  Hogan.cache = {};

  Hogan.cacheKey = function(text, options) {
    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');
  }

  Hogan.compile = function(text, options) {
    options = options || {};
    var key = Hogan.cacheKey(text, options);
    var template = this.cache[key];

    if (template) {
      var partials = template.partials;
      for (var name in partials) {
        delete partials[name].instance;
      }
      return template;
    }

    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);
    return this.cache[key] = template;
  }
})( true ? exports : 0);


/***/ }),

/***/ "./node_modules/hogan.js/lib/hogan.js":
/*!********************************************!*\
  !*** ./node_modules/hogan.js/lib/hogan.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

// This file is for use with Node.js. See dist/ for browser files.

var Hogan = __webpack_require__(/*! ./compiler */ "./node_modules/hogan.js/lib/compiler.js");
Hogan.Template = (__webpack_require__(/*! ./template */ "./node_modules/hogan.js/lib/template.js").Template);
Hogan.template = Hogan.Template;
module.exports = Hogan;


/***/ }),

/***/ "./node_modules/hogan.js/lib/template.js":
/*!***********************************************!*\
  !*** ./node_modules/hogan.js/lib/template.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

var Hogan = {};

(function (Hogan) {
  Hogan.Template = function (codeObj, text, compiler, options) {
    codeObj = codeObj || {};
    this.r = codeObj.code || this.r;
    this.c = compiler;
    this.options = options || {};
    this.text = text || '';
    this.partials = codeObj.partials || {};
    this.subs = codeObj.subs || {};
    this.buf = '';
  }

  Hogan.Template.prototype = {
    // render: replaced by generated code.
    r: function (context, partials, indent) { return ''; },

    // variable escaping
    v: hoganEscape,

    // triple stache
    t: coerceToString,

    render: function render(context, partials, indent) {
      return this.ri([context], partials || {}, indent);
    },

    // render internal -- a hook for overrides that catches partials too
    ri: function (context, partials, indent) {
      return this.r(context, partials, indent);
    },

    // ensurePartial
    ep: function(symbol, partials) {
      var partial = this.partials[symbol];

      // check to see that if we've instantiated this partial before
      var template = partials[partial.name];
      if (partial.instance && partial.base == template) {
        return partial.instance;
      }

      if (typeof template == 'string') {
        if (!this.c) {
          throw new Error("No compiler available.");
        }
        template = this.c.compile(template, this.options);
      }

      if (!template) {
        return null;
      }

      // We use this to check whether the partials dictionary has changed
      this.partials[symbol].base = template;

      if (partial.subs) {
        // Make sure we consider parent template now
        if (!partials.stackText) partials.stackText = {};
        for (key in partial.subs) {
          if (!partials.stackText[key]) {
            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;
          }
        }
        template = createSpecializedPartial(template, partial.subs, partial.partials,
          this.stackSubs, this.stackPartials, partials.stackText);
      }
      this.partials[symbol].instance = template;

      return template;
    },

    // tries to find a partial in the current scope and render it
    rp: function(symbol, context, partials, indent) {
      var partial = this.ep(symbol, partials);
      if (!partial) {
        return '';
      }

      return partial.ri(context, partials, indent);
    },

    // render a section
    rs: function(context, partials, section) {
      var tail = context[context.length - 1];

      if (!isArray(tail)) {
        section(context, partials, this);
        return;
      }

      for (var i = 0; i < tail.length; i++) {
        context.push(tail[i]);
        section(context, partials, this);
        context.pop();
      }
    },

    // maybe start a section
    s: function(val, ctx, partials, inverted, start, end, tags) {
      var pass;

      if (isArray(val) && val.length === 0) {
        return false;
      }

      if (typeof val == 'function') {
        val = this.ms(val, ctx, partials, inverted, start, end, tags);
      }

      pass = !!val;

      if (!inverted && pass && ctx) {
        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);
      }

      return pass;
    },

    // find values with dotted names
    d: function(key, ctx, partials, returnFound) {
      var found,
          names = key.split('.'),
          val = this.f(names[0], ctx, partials, returnFound),
          doModelGet = this.options.modelGet,
          cx = null;

      if (key === '.' && isArray(ctx[ctx.length - 2])) {
        val = ctx[ctx.length - 1];
      } else {
        for (var i = 1; i < names.length; i++) {
          found = findInScope(names[i], val, doModelGet);
          if (found !== undefined) {
            cx = val;
            val = found;
          } else {
            val = '';
          }
        }
      }

      if (returnFound && !val) {
        return false;
      }

      if (!returnFound && typeof val == 'function') {
        ctx.push(cx);
        val = this.mv(val, ctx, partials);
        ctx.pop();
      }

      return val;
    },

    // find values with normal names
    f: function(key, ctx, partials, returnFound) {
      var val = false,
          v = null,
          found = false,
          doModelGet = this.options.modelGet;

      for (var i = ctx.length - 1; i >= 0; i--) {
        v = ctx[i];
        val = findInScope(key, v, doModelGet);
        if (val !== undefined) {
          found = true;
          break;
        }
      }

      if (!found) {
        return (returnFound) ? false : "";
      }

      if (!returnFound && typeof val == 'function') {
        val = this.mv(val, ctx, partials);
      }

      return val;
    },

    // higher order templates
    ls: function(func, cx, partials, text, tags) {
      var oldTags = this.options.delimiters;

      this.options.delimiters = tags;
      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));
      this.options.delimiters = oldTags;

      return false;
    },

    // compile text
    ct: function(text, cx, partials) {
      if (this.options.disableLambda) {
        throw new Error('Lambda features disabled.');
      }
      return this.c.compile(text, this.options).render(cx, partials);
    },

    // template result buffering
    b: function(s) { this.buf += s; },

    fl: function() { var r = this.buf; this.buf = ''; return r; },

    // method replace section
    ms: function(func, ctx, partials, inverted, start, end, tags) {
      var textSource,
          cx = ctx[ctx.length - 1],
          result = func.call(cx);

      if (typeof result == 'function') {
        if (inverted) {
          return true;
        } else {
          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;
          return this.ls(result, cx, partials, textSource.substring(start, end), tags);
        }
      }

      return result;
    },

    // method replace variable
    mv: function(func, ctx, partials) {
      var cx = ctx[ctx.length - 1];
      var result = func.call(cx);

      if (typeof result == 'function') {
        return this.ct(coerceToString(result.call(cx)), cx, partials);
      }

      return result;
    },

    sub: function(name, context, partials, indent) {
      var f = this.subs[name];
      if (f) {
        this.activeSub = name;
        f(context, partials, this, indent);
        this.activeSub = false;
      }
    }

  };

  //Find a key in an object
  function findInScope(key, scope, doModelGet) {
    var val;

    if (scope && typeof scope == 'object') {

      if (scope[key] !== undefined) {
        val = scope[key];

      // try lookup with get for backbone or similar model data
      } else if (doModelGet && scope.get && typeof scope.get == 'function') {
        val = scope.get(key);
      }
    }

    return val;
  }

  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {
    function PartialTemplate() {};
    PartialTemplate.prototype = instance;
    function Substitutions() {};
    Substitutions.prototype = instance.subs;
    var key;
    var partial = new PartialTemplate();
    partial.subs = new Substitutions();
    partial.subsText = {};  //hehe. substext.
    partial.buf = '';

    stackSubs = stackSubs || {};
    partial.stackSubs = stackSubs;
    partial.subsText = stackText;
    for (key in subs) {
      if (!stackSubs[key]) stackSubs[key] = subs[key];
    }
    for (key in stackSubs) {
      partial.subs[key] = stackSubs[key];
    }

    stackPartials = stackPartials || {};
    partial.stackPartials = stackPartials;
    for (key in partials) {
      if (!stackPartials[key]) stackPartials[key] = partials[key];
    }
    for (key in stackPartials) {
      partial.partials[key] = stackPartials[key];
    }

    return partial;
  }

  var rAmp = /&/g,
      rLt = /</g,
      rGt = />/g,
      rApos = /\'/g,
      rQuot = /\"/g,
      hChars = /[&<>\"\']/;

  function coerceToString(val) {
    return String((val === null || val === undefined) ? '' : val);
  }

  function hoganEscape(str) {
    str = coerceToString(str);
    return hChars.test(str) ?
      str
        .replace(rAmp, '&amp;')
        .replace(rLt, '&lt;')
        .replace(rGt, '&gt;')
        .replace(rApos, '&#39;')
        .replace(rQuot, '&quot;') :
      str;
  }

  var isArray = Array.isArray || function(a) {
    return Object.prototype.toString.call(a) === '[object Array]';
  };

})( true ? exports : 0);


/***/ }),

/***/ "./node_modules/htm/dist/htm.module.js":
/*!*********************************************!*\
  !*** ./node_modules/htm/dist/htm.module.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+"":p?(u=t.apply(a,n(t,a,r,["",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e="",u="",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&"..."===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=""},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?"<"===t?(p(),h=[h],r=3):e+=t:4===r?"--"===e&&">"===t?(r=1,e=""):e=t+e[0]:u?t===u?u="":e+=t:'"'===t||"'"===t?u=t:">"===t?(p(),r=1):r&&("="===t?(r=5,s=e,e=""):"/"===t&&(r<5||">"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(p(),r=2):e+=t),3===r&&"!--"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}


/***/ }),

/***/ "./node_modules/htm/preact/index.module.js":
/*!*************************************************!*\
  !*** ./node_modules/htm/preact/index.module.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Component": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_0__.Component),
/* harmony export */   "h": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_0__.h),
/* harmony export */   "html": () => (/* binding */ m),
/* harmony export */   "render": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_0__.render)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var htm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! htm */ "./node_modules/htm/dist/htm.module.js");
var m=htm__WEBPACK_IMPORTED_MODULE_1__["default"].bind(preact__WEBPACK_IMPORTED_MODULE_0__.h);


/***/ }),

/***/ "./node_modules/instantsearch.js/node_modules/qs/lib/formats.js":
/*!**********************************************************************!*\
  !*** ./node_modules/instantsearch.js/node_modules/qs/lib/formats.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";


var replace = String.prototype.replace;
var percentTwenties = /%20/g;

var Format = {
    RFC1738: 'RFC1738',
    RFC3986: 'RFC3986'
};

module.exports = {
    'default': Format.RFC3986,
    formatters: {
        RFC1738: function (value) {
            return replace.call(value, percentTwenties, '+');
        },
        RFC3986: function (value) {
            return String(value);
        }
    },
    RFC1738: Format.RFC1738,
    RFC3986: Format.RFC3986
};


/***/ }),

/***/ "./node_modules/instantsearch.js/node_modules/qs/lib/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/instantsearch.js/node_modules/qs/lib/index.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var stringify = __webpack_require__(/*! ./stringify */ "./node_modules/instantsearch.js/node_modules/qs/lib/stringify.js");
var parse = __webpack_require__(/*! ./parse */ "./node_modules/instantsearch.js/node_modules/qs/lib/parse.js");
var formats = __webpack_require__(/*! ./formats */ "./node_modules/instantsearch.js/node_modules/qs/lib/formats.js");

module.exports = {
    formats: formats,
    parse: parse,
    stringify: stringify
};


/***/ }),

/***/ "./node_modules/instantsearch.js/node_modules/qs/lib/parse.js":
/*!********************************************************************!*\
  !*** ./node_modules/instantsearch.js/node_modules/qs/lib/parse.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "./node_modules/instantsearch.js/node_modules/qs/lib/utils.js");

var has = Object.prototype.hasOwnProperty;
var isArray = Array.isArray;

var defaults = {
    allowDots: false,
    allowPrototypes: false,
    arrayLimit: 20,
    charset: 'utf-8',
    charsetSentinel: false,
    comma: false,
    decoder: utils.decode,
    delimiter: '&',
    depth: 5,
    ignoreQueryPrefix: false,
    interpretNumericEntities: false,
    parameterLimit: 1000,
    parseArrays: true,
    plainObjects: false,
    strictNullHandling: false
};

var interpretNumericEntities = function (str) {
    return str.replace(/&#(\d+);/g, function ($0, numberStr) {
        return String.fromCharCode(parseInt(numberStr, 10));
    });
};

var parseArrayValue = function (val, options) {
    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {
        return val.split(',');
    }

    return val;
};

// This is what browsers will submit when the ✓ character occurs in an
// application/x-www-form-urlencoded body and the encoding of the page containing
// the form is iso-8859-1, or when the submitted form has an accept-charset
// attribute of iso-8859-1. Presumably also with other charsets that do not contain
// the ✓ character, such as us-ascii.
var isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')

// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.
var charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')

var parseValues = function parseQueryStringValues(str, options) {
    var obj = {};
    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\?/, '') : str;
    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;
    var parts = cleanStr.split(options.delimiter, limit);
    var skipIndex = -1; // Keep track of where the utf8 sentinel was found
    var i;

    var charset = options.charset;
    if (options.charsetSentinel) {
        for (i = 0; i < parts.length; ++i) {
            if (parts[i].indexOf('utf8=') === 0) {
                if (parts[i] === charsetSentinel) {
                    charset = 'utf-8';
                } else if (parts[i] === isoSentinel) {
                    charset = 'iso-8859-1';
                }
                skipIndex = i;
                i = parts.length; // The eslint settings do not allow break;
            }
        }
    }

    for (i = 0; i < parts.length; ++i) {
        if (i === skipIndex) {
            continue;
        }
        var part = parts[i];

        var bracketEqualsPos = part.indexOf(']=');
        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;

        var key, val;
        if (pos === -1) {
            key = options.decoder(part, defaults.decoder, charset, 'key');
            val = options.strictNullHandling ? null : '';
        } else {
            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');
            val = utils.maybeMap(
                parseArrayValue(part.slice(pos + 1), options),
                function (encodedVal) {
                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');
                }
            );
        }

        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {
            val = interpretNumericEntities(val);
        }

        if (part.indexOf('[]=') > -1) {
            val = isArray(val) ? [val] : val;
        }

        if (has.call(obj, key)) {
            obj[key] = utils.combine(obj[key], val);
        } else {
            obj[key] = val;
        }
    }

    return obj;
};

var parseObject = function (chain, val, options, valuesParsed) {
    var leaf = valuesParsed ? val : parseArrayValue(val, options);

    for (var i = chain.length - 1; i >= 0; --i) {
        var obj;
        var root = chain[i];

        if (root === '[]' && options.parseArrays) {
            obj = [].concat(leaf);
        } else {
            obj = options.plainObjects ? Object.create(null) : {};
            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;
            var index = parseInt(cleanRoot, 10);
            if (!options.parseArrays && cleanRoot === '') {
                obj = { 0: leaf };
            } else if (
                !isNaN(index)
                && root !== cleanRoot
                && String(index) === cleanRoot
                && index >= 0
                && (options.parseArrays && index <= options.arrayLimit)
            ) {
                obj = [];
                obj[index] = leaf;
            } else if (cleanRoot !== '__proto__') {
                obj[cleanRoot] = leaf;
            }
        }

        leaf = obj;
    }

    return leaf;
};

var parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {
    if (!givenKey) {
        return;
    }

    // Transform dot notation to bracket notation
    var key = options.allowDots ? givenKey.replace(/\.([^.[]+)/g, '[$1]') : givenKey;

    // The regex chunks

    var brackets = /(\[[^[\]]*])/;
    var child = /(\[[^[\]]*])/g;

    // Get the parent

    var segment = options.depth > 0 && brackets.exec(key);
    var parent = segment ? key.slice(0, segment.index) : key;

    // Stash the parent if it exists

    var keys = [];
    if (parent) {
        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties
        if (!options.plainObjects && has.call(Object.prototype, parent)) {
            if (!options.allowPrototypes) {
                return;
            }
        }

        keys.push(parent);
    }

    // Loop through children appending to the array until we hit depth

    var i = 0;
    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {
        i += 1;
        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {
            if (!options.allowPrototypes) {
                return;
            }
        }
        keys.push(segment[1]);
    }

    // If there's a remainder, just add whatever is left

    if (segment) {
        keys.push('[' + key.slice(segment.index) + ']');
    }

    return parseObject(keys, val, options, valuesParsed);
};

var normalizeParseOptions = function normalizeParseOptions(opts) {
    if (!opts) {
        return defaults;
    }

    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {
        throw new TypeError('Decoder has to be a function.');
    }

    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {
        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');
    }
    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;

    return {
        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,
        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,
        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,
        charset: charset,
        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,
        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,
        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,
        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,
        // eslint-disable-next-line no-implicit-coercion, no-extra-parens
        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,
        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,
        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,
        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,
        parseArrays: opts.parseArrays !== false,
        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,
        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling
    };
};

module.exports = function (str, opts) {
    var options = normalizeParseOptions(opts);

    if (str === '' || str === null || typeof str === 'undefined') {
        return options.plainObjects ? Object.create(null) : {};
    }

    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;
    var obj = options.plainObjects ? Object.create(null) : {};

    // Iterate over the keys and setup the new object

    var keys = Object.keys(tempObj);
    for (var i = 0; i < keys.length; ++i) {
        var key = keys[i];
        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');
        obj = utils.merge(obj, newObj, options);
    }

    return utils.compact(obj);
};


/***/ }),

/***/ "./node_modules/instantsearch.js/node_modules/qs/lib/stringify.js":
/*!************************************************************************!*\
  !*** ./node_modules/instantsearch.js/node_modules/qs/lib/stringify.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "./node_modules/instantsearch.js/node_modules/qs/lib/utils.js");
var formats = __webpack_require__(/*! ./formats */ "./node_modules/instantsearch.js/node_modules/qs/lib/formats.js");
var has = Object.prototype.hasOwnProperty;

var arrayPrefixGenerators = {
    brackets: function brackets(prefix) {
        return prefix + '[]';
    },
    comma: 'comma',
    indices: function indices(prefix, key) {
        return prefix + '[' + key + ']';
    },
    repeat: function repeat(prefix) {
        return prefix;
    }
};

var isArray = Array.isArray;
var split = String.prototype.split;
var push = Array.prototype.push;
var pushToArray = function (arr, valueOrArray) {
    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);
};

var toISO = Date.prototype.toISOString;

var defaultFormat = formats['default'];
var defaults = {
    addQueryPrefix: false,
    allowDots: false,
    charset: 'utf-8',
    charsetSentinel: false,
    delimiter: '&',
    encode: true,
    encoder: utils.encode,
    encodeValuesOnly: false,
    format: defaultFormat,
    formatter: formats.formatters[defaultFormat],
    // deprecated
    indices: false,
    serializeDate: function serializeDate(date) {
        return toISO.call(date);
    },
    skipNulls: false,
    strictNullHandling: false
};

var isNonNullishPrimitive = function isNonNullishPrimitive(v) {
    return typeof v === 'string'
        || typeof v === 'number'
        || typeof v === 'boolean'
        || typeof v === 'symbol'
        || typeof v === 'bigint';
};

var stringify = function stringify(
    object,
    prefix,
    generateArrayPrefix,
    strictNullHandling,
    skipNulls,
    encoder,
    filter,
    sort,
    allowDots,
    serializeDate,
    format,
    formatter,
    encodeValuesOnly,
    charset
) {
    var obj = object;
    if (typeof filter === 'function') {
        obj = filter(prefix, obj);
    } else if (obj instanceof Date) {
        obj = serializeDate(obj);
    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {
        obj = utils.maybeMap(obj, function (value) {
            if (value instanceof Date) {
                return serializeDate(value);
            }
            return value;
        });
    }

    if (obj === null) {
        if (strictNullHandling) {
            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;
        }

        obj = '';
    }

    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {
        if (encoder) {
            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);
            if (generateArrayPrefix === 'comma' && encodeValuesOnly) {
                var valuesArray = split.call(String(obj), ',');
                var valuesJoined = '';
                for (var i = 0; i < valuesArray.length; ++i) {
                    valuesJoined += (i === 0 ? '' : ',') + formatter(encoder(valuesArray[i], defaults.encoder, charset, 'value', format));
                }
                return [formatter(keyValue) + '=' + valuesJoined];
            }
            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];
        }
        return [formatter(prefix) + '=' + formatter(String(obj))];
    }

    var values = [];

    if (typeof obj === 'undefined') {
        return values;
    }

    var objKeys;
    if (generateArrayPrefix === 'comma' && isArray(obj)) {
        // we need to join elements in
        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];
    } else if (isArray(filter)) {
        objKeys = filter;
    } else {
        var keys = Object.keys(obj);
        objKeys = sort ? keys.sort(sort) : keys;
    }

    for (var j = 0; j < objKeys.length; ++j) {
        var key = objKeys[j];
        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];

        if (skipNulls && value === null) {
            continue;
        }

        var keyPrefix = isArray(obj)
            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix
            : prefix + (allowDots ? '.' + key : '[' + key + ']');

        pushToArray(values, stringify(
            value,
            keyPrefix,
            generateArrayPrefix,
            strictNullHandling,
            skipNulls,
            encoder,
            filter,
            sort,
            allowDots,
            serializeDate,
            format,
            formatter,
            encodeValuesOnly,
            charset
        ));
    }

    return values;
};

var normalizeStringifyOptions = function normalizeStringifyOptions(opts) {
    if (!opts) {
        return defaults;
    }

    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {
        throw new TypeError('Encoder has to be a function.');
    }

    var charset = opts.charset || defaults.charset;
    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {
        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');
    }

    var format = formats['default'];
    if (typeof opts.format !== 'undefined') {
        if (!has.call(formats.formatters, opts.format)) {
            throw new TypeError('Unknown format option provided.');
        }
        format = opts.format;
    }
    var formatter = formats.formatters[format];

    var filter = defaults.filter;
    if (typeof opts.filter === 'function' || isArray(opts.filter)) {
        filter = opts.filter;
    }

    return {
        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,
        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,
        charset: charset,
        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,
        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,
        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,
        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,
        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,
        filter: filter,
        format: format,
        formatter: formatter,
        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,
        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,
        sort: typeof opts.sort === 'function' ? opts.sort : null,
        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling
    };
};

module.exports = function (object, opts) {
    var obj = object;
    var options = normalizeStringifyOptions(opts);

    var objKeys;
    var filter;

    if (typeof options.filter === 'function') {
        filter = options.filter;
        obj = filter('', obj);
    } else if (isArray(options.filter)) {
        filter = options.filter;
        objKeys = filter;
    }

    var keys = [];

    if (typeof obj !== 'object' || obj === null) {
        return '';
    }

    var arrayFormat;
    if (opts && opts.arrayFormat in arrayPrefixGenerators) {
        arrayFormat = opts.arrayFormat;
    } else if (opts && 'indices' in opts) {
        arrayFormat = opts.indices ? 'indices' : 'repeat';
    } else {
        arrayFormat = 'indices';
    }

    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];

    if (!objKeys) {
        objKeys = Object.keys(obj);
    }

    if (options.sort) {
        objKeys.sort(options.sort);
    }

    for (var i = 0; i < objKeys.length; ++i) {
        var key = objKeys[i];

        if (options.skipNulls && obj[key] === null) {
            continue;
        }
        pushToArray(keys, stringify(
            obj[key],
            key,
            generateArrayPrefix,
            options.strictNullHandling,
            options.skipNulls,
            options.encode ? options.encoder : null,
            options.filter,
            options.sort,
            options.allowDots,
            options.serializeDate,
            options.format,
            options.formatter,
            options.encodeValuesOnly,
            options.charset
        ));
    }

    var joined = keys.join(options.delimiter);
    var prefix = options.addQueryPrefix === true ? '?' : '';

    if (options.charsetSentinel) {
        if (options.charset === 'iso-8859-1') {
            // encodeURIComponent('&#10003;'), the "numeric entity" representation of a checkmark
            prefix += 'utf8=%26%2310003%3B&';
        } else {
            // encodeURIComponent('✓')
            prefix += 'utf8=%E2%9C%93&';
        }
    }

    return joined.length > 0 ? prefix + joined : '';
};


/***/ }),

/***/ "./node_modules/instantsearch.js/node_modules/qs/lib/utils.js":
/*!********************************************************************!*\
  !*** ./node_modules/instantsearch.js/node_modules/qs/lib/utils.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var formats = __webpack_require__(/*! ./formats */ "./node_modules/instantsearch.js/node_modules/qs/lib/formats.js");

var has = Object.prototype.hasOwnProperty;
var isArray = Array.isArray;

var hexTable = (function () {
    var array = [];
    for (var i = 0; i < 256; ++i) {
        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());
    }

    return array;
}());

var compactQueue = function compactQueue(queue) {
    while (queue.length > 1) {
        var item = queue.pop();
        var obj = item.obj[item.prop];

        if (isArray(obj)) {
            var compacted = [];

            for (var j = 0; j < obj.length; ++j) {
                if (typeof obj[j] !== 'undefined') {
                    compacted.push(obj[j]);
                }
            }

            item.obj[item.prop] = compacted;
        }
    }
};

var arrayToObject = function arrayToObject(source, options) {
    var obj = options && options.plainObjects ? Object.create(null) : {};
    for (var i = 0; i < source.length; ++i) {
        if (typeof source[i] !== 'undefined') {
            obj[i] = source[i];
        }
    }

    return obj;
};

var merge = function merge(target, source, options) {
    /* eslint no-param-reassign: 0 */
    if (!source) {
        return target;
    }

    if (typeof source !== 'object') {
        if (isArray(target)) {
            target.push(source);
        } else if (target && typeof target === 'object') {
            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {
                target[source] = true;
            }
        } else {
            return [target, source];
        }

        return target;
    }

    if (!target || typeof target !== 'object') {
        return [target].concat(source);
    }

    var mergeTarget = target;
    if (isArray(target) && !isArray(source)) {
        mergeTarget = arrayToObject(target, options);
    }

    if (isArray(target) && isArray(source)) {
        source.forEach(function (item, i) {
            if (has.call(target, i)) {
                var targetItem = target[i];
                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {
                    target[i] = merge(targetItem, item, options);
                } else {
                    target.push(item);
                }
            } else {
                target[i] = item;
            }
        });
        return target;
    }

    return Object.keys(source).reduce(function (acc, key) {
        var value = source[key];

        if (has.call(acc, key)) {
            acc[key] = merge(acc[key], value, options);
        } else {
            acc[key] = value;
        }
        return acc;
    }, mergeTarget);
};

var assign = function assignSingleSource(target, source) {
    return Object.keys(source).reduce(function (acc, key) {
        acc[key] = source[key];
        return acc;
    }, target);
};

var decode = function (str, decoder, charset) {
    var strWithoutPlus = str.replace(/\+/g, ' ');
    if (charset === 'iso-8859-1') {
        // unescape never throws, no try...catch needed:
        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);
    }
    // utf-8
    try {
        return decodeURIComponent(strWithoutPlus);
    } catch (e) {
        return strWithoutPlus;
    }
};

var encode = function encode(str, defaultEncoder, charset, kind, format) {
    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.
    // It has been adapted here for stricter adherence to RFC 3986
    if (str.length === 0) {
        return str;
    }

    var string = str;
    if (typeof str === 'symbol') {
        string = Symbol.prototype.toString.call(str);
    } else if (typeof str !== 'string') {
        string = String(str);
    }

    if (charset === 'iso-8859-1') {
        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {
            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';
        });
    }

    var out = '';
    for (var i = 0; i < string.length; ++i) {
        var c = string.charCodeAt(i);

        if (
            c === 0x2D // -
            || c === 0x2E // .
            || c === 0x5F // _
            || c === 0x7E // ~
            || (c >= 0x30 && c <= 0x39) // 0-9
            || (c >= 0x41 && c <= 0x5A) // a-z
            || (c >= 0x61 && c <= 0x7A) // A-Z
            || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )
        ) {
            out += string.charAt(i);
            continue;
        }

        if (c < 0x80) {
            out = out + hexTable[c];
            continue;
        }

        if (c < 0x800) {
            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);
            continue;
        }

        if (c < 0xD800 || c >= 0xE000) {
            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);
            continue;
        }

        i += 1;
        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));
        /* eslint operator-linebreak: [2, "before"] */
        out += hexTable[0xF0 | (c >> 18)]
            + hexTable[0x80 | ((c >> 12) & 0x3F)]
            + hexTable[0x80 | ((c >> 6) & 0x3F)]
            + hexTable[0x80 | (c & 0x3F)];
    }

    return out;
};

var compact = function compact(value) {
    var queue = [{ obj: { o: value }, prop: 'o' }];
    var refs = [];

    for (var i = 0; i < queue.length; ++i) {
        var item = queue[i];
        var obj = item.obj[item.prop];

        var keys = Object.keys(obj);
        for (var j = 0; j < keys.length; ++j) {
            var key = keys[j];
            var val = obj[key];
            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {
                queue.push({ obj: obj, prop: key });
                refs.push(val);
            }
        }
    }

    compactQueue(queue);

    return value;
};

var isRegExp = function isRegExp(obj) {
    return Object.prototype.toString.call(obj) === '[object RegExp]';
};

var isBuffer = function isBuffer(obj) {
    if (!obj || typeof obj !== 'object') {
        return false;
    }

    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
};

var combine = function combine(a, b) {
    return [].concat(a, b);
};

var maybeMap = function maybeMap(val, fn) {
    if (isArray(val)) {
        var mapped = [];
        for (var i = 0; i < val.length; i += 1) {
            mapped.push(fn(val[i]));
        }
        return mapped;
    }
    return fn(val);
};

module.exports = {
    arrayToObject: arrayToObject,
    assign: assign,
    combine: combine,
    compact: compact,
    decode: decode,
    encode: encode,
    isBuffer: isBuffer,
    isRegExp: isRegExp,
    maybeMap: maybeMap,
    merge: merge
};


/***/ }),

/***/ "./node_modules/preact/dist/preact.module.js":
/*!***************************************************!*\
  !*** ./node_modules/preact/dist/preact.module.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Component": () => (/* binding */ d),
/* harmony export */   "Fragment": () => (/* binding */ p),
/* harmony export */   "cloneElement": () => (/* binding */ q),
/* harmony export */   "createContext": () => (/* binding */ B),
/* harmony export */   "createElement": () => (/* binding */ h),
/* harmony export */   "createRef": () => (/* binding */ y),
/* harmony export */   "h": () => (/* binding */ h),
/* harmony export */   "hydrate": () => (/* binding */ S),
/* harmony export */   "isValidElement": () => (/* binding */ i),
/* harmony export */   "options": () => (/* binding */ l),
/* harmony export */   "render": () => (/* binding */ P),
/* harmony export */   "toChildArray": () => (/* binding */ x)
/* harmony export */ });
var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function h(l,u,i){var t,o,r,f={};for(r in u)"key"==r?t=u[r]:"ref"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),"function"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return v(l,f,t,o,null)}function v(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return"function"==typeof n.type?_(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function b(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||setTimeout)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=s({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?_(t):o,t.__h),z(u,t),t.__e!=o&&k(t)))})}function w(n,l,u,i,t,o,r,c,s,a){var h,y,d,k,b,g,w,x=i&&i.__k||e,C=x.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(k=u.__k[h]=null==(k=l[h])||"boolean"==typeof k?null:"string"==typeof k||"number"==typeof k||"bigint"==typeof k?v(null,k,null,null,k):Array.isArray(k)?v(p,{children:k},null,null,null):k.__b>0?v(k.type,k.props,k.key,k.ref?k.ref:null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(d=x[h])||d&&k.key==d.key&&k.type===d.type)x[h]=void 0;else for(y=0;y<C;y++){if((d=x[y])&&k.key==d.key&&k.type===d.type){x[y]=void 0;break}d=null}j(n,k,d=d||f,t,o,r,c,s,a),b=k.__e,(y=k.ref)&&d.ref!=y&&(w||(w=[]),d.ref&&w.push(d.ref,null,k),w.push(y,k.__c||b,k)),null!=b?(null==g&&(g=b),"function"==typeof k.type&&k.__k===d.__k?k.__d=s=m(k,s,n):s=A(n,k,d,x,b,s),"function"==typeof u.type&&(u.__d=s)):s&&d.__e==s&&s.parentNode!=n&&(s=_(d))}for(u.__e=g,h=C;h--;)null!=x[h]&&N(x[h],x[h]);if(w)for(h=0;h<w.length;h++)M(w[h],w[++h],w[++h])}function m(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l="function"==typeof i.type?m(i,l,u):A(u,i,i,t,i.__e,l));return l}function x(n,l){return l=l||[],null==n||"boolean"==typeof n||(Array.isArray(n)?n.some(function(n){x(n,l)}):l.push(n)),l}function A(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)"children"===o||"key"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&"function"!=typeof l[o]||"children"===o||"key"===o||"value"===o||"checked"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){"-"===l[0]?n.setProperty(l,u):n[l]=null==u?"":"number"!=typeof u||c.test(l)?u:u+"px"}function H(n,l,u,i,t){var o;n:if("style"===l)if("string"==typeof u)n.style.cssText=u;else{if("string"==typeof i&&(n.style.cssText=i=""),i)for(l in i)u&&l in u||$(n.style,l,"");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if("o"===l[0]&&"n"===l[1])o=l!==(l=l.replace(/Capture$/,"")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if("dangerouslySetInnerHTML"!==l){if(t)l=l.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==l&&"list"!==l&&"form"!==l&&"tabIndex"!==l&&"download"!==l&&l in n)try{n[l]=null==u?"":u;break n}catch(n){}"function"==typeof u||(null==u||!1===u&&-1==l.indexOf("-")?n.removeAttribute(l):n.setAttribute(l,u))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var a,h,v,y,_,k,b,g,m,x,A,C,$,H,I,T=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=l.__b)&&a(u);try{n:if("function"==typeof T){if(g=u.props,m=(a=T.contextType)&&t[a.__c],x=a?m?m.props.value:a.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:("prototype"in T&&T.prototype.render?u.__c=h=new T(g,x):(u.__c=h=new d(g,x),h.constructor=T,h.render=O),m&&m.sub(h),h.props=g,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=T.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=s({},h.__s)),s(h.__s,T.getDerivedStateFromProps(g,h.__s))),y=h.props,_=h.state,v)null==T.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==T.getDerivedStateFromProps&&g!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(g,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(g,h.__s,x)||u.__v===i.__v){for(h.props=g,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[],h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(g,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,_,k)})}if(h.context=x,h.props=g,h.__v=u,h.__P=n,C=l.__r,$=0,"prototype"in T&&T.prototype.render){for(h.state=h.__s,h.__d=!1,C&&C(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,C&&C(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++$<25);h.state=h.__s,null!=h.getChildContext&&(t=s(s({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,_)),I=null!=a&&a.type===p&&null==a.key?a.props.children:a,w(n,Array.isArray(I)?I:[I],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(a=l.diffed)&&a(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,e,c){var s,h,v,y=i.props,p=u.props,d=u.type,k=0;if("svg"===d&&(o=!0),null!=r)for(;k<r.length;k++)if((s=r[k])&&"setAttribute"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[k]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),h=(y=i.props||f).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},k=0;k<l.attributes.length;k++)y[l.attributes[k].name]=l.attributes[k].value;(v||h)&&(v&&(h&&v.__html==h.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||""))}if(C(l,p,y,o,c),v)u.__k=[];else if(k=u.props.children,w(l,Array.isArray(k)?k:[k],u,i,t,o&&"foreignObject"!==d,r,e,r?r[0]:i.__k&&_(i,0),c),null!=r)for(k=r.length;k--;)null!=r[k]&&a(r[k]);c||("value"in p&&void 0!==(k=p.value)&&(k!==l.value||"progress"===d&&!k||"option"===d&&k!==y.value)&&H(l,"value",k,y.value,!1),"checked"in p&&void 0!==(k=p.checked)&&k!==l.checked&&H(l,"checked",k,y.checked,!1))}return l}function M(n,u,i){try{"function"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null,n.__c=void 0}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,i||"function"!=typeof n.type);i||null==n.__e||a(n.__e),n.__=n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function P(u,i,t){var o,r,e;l.__&&l.__(u,i),r=(o="function"==typeof t)?null:t&&t.__k||i.__k,e=[],j(i,u=(!o&&t||i).__k=h(p,null,[u]),r||f,f,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,e,!o&&t?t:r?r.__e:i.firstChild,o),z(e,u)}function S(n,l){P(n,l,S)}function q(l,u,i){var t,o,r,f=s({},l.props);for(r in u)"key"==r?t=u[r]:"ref"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),v(l.type,f,t||l.key,o||l.ref,null)}function B(n,l){var u={__c:l="__cC"+r++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(b)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=e.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),b(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),b(this))},d.prototype.render=p,t=[],g.__r=0,r=0;
//# sourceMappingURL=preact.module.js.map


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/extends.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _extends)
/* harmony export */ });
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _objectWithoutProperties)
/* harmony export */ });
/* harmony import */ var _objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./objectWithoutPropertiesLoose.js */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = (0,_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_0__["default"])(source, excluded);
  var key, i;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }
  return target;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _objectWithoutPropertiesLoose)
/* harmony export */ });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/Highlight/Highlight.js":
/*!****************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/Highlight/Highlight.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Highlight": () => (/* binding */ Highlight)
/* harmony export */ });
/* harmony import */ var _algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/ui-components-shared */ "./node_modules/@algolia/ui-components-shared/dist/esm/cx.js");
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../InternalHighlight/InternalHighlight.js */ "./node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function Highlight(_ref) {
  var _ref$classNames = _ref.classNames,
      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,
      props = _objectWithoutProperties(_ref, ["classNames"]);

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__.InternalHighlight, _extends({
    classNames: {
      root: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Highlight', classNames.root),
      highlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Highlight-highlighted', classNames.highlighted),
      nonHighlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Highlight-nonHighlighted', classNames.nonHighlighted),
      separator: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Highlight-separator', classNames.separator)
    }
  }, props));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/Hits/Hits.js":
/*!******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/Hits/Hits.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _Template_Template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Template/Template.js */ "./node_modules/instantsearch.js/es/components/Template/Template.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }





var Hits = function Hits(_ref) {
  var results = _ref.results,
      hits = _ref.hits,
      bindEvent = _ref.bindEvent,
      sendEvent = _ref.sendEvent,
      cssClasses = _ref.cssClasses,
      templateProps = _ref.templateProps;

  if (results.hits.length === 0) {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Template_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, templateProps, {
      templateKey: "empty",
      rootProps: {
        className: classnames__WEBPACK_IMPORTED_MODULE_1__(cssClasses.root, cssClasses.emptyRoot)
      },
      data: results
    }));
  }

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("div", {
    className: cssClasses.root
  }, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("ol", {
    className: cssClasses.list
  }, hits.map(function (hit, index) {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Template_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, templateProps, {
      templateKey: "item",
      rootTagName: "li",
      rootProps: {
        className: cssClasses.item
      },
      key: hit.objectID,
      data: _objectSpread(_objectSpread({}, hit), {}, {
        __hitIndex: index
      }),
      bindEvent: bindEvent,
      sendEvent: sendEvent
    }));
  })));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Hits);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InternalHighlight": () => (/* binding */ InternalHighlight)
/* harmony export */ });
/* harmony import */ var _algolia_ui_components_highlight_vdom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/ui-components-highlight-vdom */ "./node_modules/@algolia/ui-components-highlight-vdom/dist/esm/Highlight.js");
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");


var InternalHighlight = (0,_algolia_ui_components_highlight_vdom__WEBPACK_IMPORTED_MODULE_1__.createHighlightComponent)({
  createElement: preact__WEBPACK_IMPORTED_MODULE_0__.createElement,
  Fragment: preact__WEBPACK_IMPORTED_MODULE_0__.Fragment
});

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/Pagination/Pagination.js":
/*!******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/Pagination/Pagination.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/isSpecialClick.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





function Pagination(props) {
  function createClickHandler(pageNumber) {
    return function (event) {
      if ((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isSpecialClick)(event)) {
        // do not alter the default browser behavior
        // if one special key is down
        return;
      }

      event.preventDefault();
      props.setCurrentPage(pageNumber);
    };
  }

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_1__(props.cssClasses.root, _defineProperty({}, props.cssClasses.noRefinementRoot, props.nbPages <= 1))
  }, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("ul", {
    className: props.cssClasses.list
  }, props.showFirst && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(PaginationLink, {
    ariaLabel: "First",
    className: props.cssClasses.firstPageItem,
    isDisabled: props.isFirstPage,
    label: props.templates.first,
    pageNumber: 0,
    createURL: props.createURL,
    cssClasses: props.cssClasses,
    createClickHandler: createClickHandler
  }), props.showPrevious && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(PaginationLink, {
    ariaLabel: "Previous",
    className: props.cssClasses.previousPageItem,
    isDisabled: props.isFirstPage,
    label: props.templates.previous,
    pageNumber: props.currentPage - 1,
    createURL: props.createURL,
    cssClasses: props.cssClasses,
    createClickHandler: createClickHandler
  }), props.pages.map(function (pageNumber) {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(PaginationLink, {
      key: pageNumber,
      ariaLabel: "".concat(pageNumber + 1),
      className: props.cssClasses.pageItem,
      isSelected: pageNumber === props.currentPage,
      label: "".concat(pageNumber + 1),
      pageNumber: pageNumber,
      createURL: props.createURL,
      cssClasses: props.cssClasses,
      createClickHandler: createClickHandler
    });
  }), props.showNext && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(PaginationLink, {
    ariaLabel: "Next",
    className: props.cssClasses.nextPageItem,
    isDisabled: props.isLastPage,
    label: props.templates.next,
    pageNumber: props.currentPage + 1,
    createURL: props.createURL,
    cssClasses: props.cssClasses,
    createClickHandler: createClickHandler
  }), props.showLast && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(PaginationLink, {
    ariaLabel: "Last",
    className: props.cssClasses.lastPageItem,
    isDisabled: props.isLastPage,
    label: props.templates.last,
    pageNumber: props.nbPages - 1,
    createURL: props.createURL,
    cssClasses: props.cssClasses,
    createClickHandler: createClickHandler
  })));
}

function PaginationLink(_ref) {
  var label = _ref.label,
      ariaLabel = _ref.ariaLabel,
      pageNumber = _ref.pageNumber,
      className = _ref.className,
      _ref$isDisabled = _ref.isDisabled,
      isDisabled = _ref$isDisabled === void 0 ? false : _ref$isDisabled,
      _ref$isSelected = _ref.isSelected,
      isSelected = _ref$isSelected === void 0 ? false : _ref$isSelected,
      cssClasses = _ref.cssClasses,
      createURL = _ref.createURL,
      createClickHandler = _ref.createClickHandler;
  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("li", {
    className: classnames__WEBPACK_IMPORTED_MODULE_1__(cssClasses.item, className, isDisabled && cssClasses.disabledItem, isSelected && cssClasses.selectedItem)
  }, isDisabled ? (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("span", {
    className: cssClasses.link,
    dangerouslySetInnerHTML: {
      __html: label
    }
  }) : (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("a", {
    className: cssClasses.link,
    "aria-label": ariaLabel,
    href: createURL(pageNumber),
    onClick: createClickHandler(pageNumber),
    dangerouslySetInnerHTML: {
      __html: label
    }
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pagination);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/ReverseHighlight/ReverseHighlight.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/ReverseHighlight/ReverseHighlight.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ReverseHighlight": () => (/* binding */ ReverseHighlight)
/* harmony export */ });
/* harmony import */ var _algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/ui-components-shared */ "./node_modules/@algolia/ui-components-shared/dist/esm/cx.js");
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../InternalHighlight/InternalHighlight.js */ "./node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function ReverseHighlight(_ref) {
  var _ref$classNames = _ref.classNames,
      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,
      props = _objectWithoutProperties(_ref, ["classNames"]);

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__.InternalHighlight, _extends({
    classNames: {
      root: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseHighlight', classNames.root),
      highlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseHighlight-highlighted', classNames.highlighted),
      nonHighlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseHighlight-nonHighlighted', classNames.nonHighlighted),
      separator: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseHighlight-separator', classNames.separator)
    }
  }, props));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/ReverseSnippet/ReverseSnippet.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/ReverseSnippet/ReverseSnippet.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ReverseSnippet": () => (/* binding */ ReverseSnippet)
/* harmony export */ });
/* harmony import */ var _algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/ui-components-shared */ "./node_modules/@algolia/ui-components-shared/dist/esm/cx.js");
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../InternalHighlight/InternalHighlight.js */ "./node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function ReverseSnippet(_ref) {
  var _ref$classNames = _ref.classNames,
      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,
      props = _objectWithoutProperties(_ref, ["classNames"]);

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__.InternalHighlight, _extends({
    classNames: {
      root: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseSnippet', classNames.root),
      highlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseSnippet-highlighted', classNames.highlighted),
      nonHighlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseSnippet-nonHighlighted', classNames.nonHighlighted),
      separator: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-ReverseSnippet-separator', classNames.separator)
    }
  }, props));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/SearchBox/SearchBox.js":
/*!****************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/SearchBox/SearchBox.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _Template_Template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Template/Template.js */ "./node_modules/instantsearch.js/es/components/Template/Template.js");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var defaultProps = {
  query: '',
  showSubmit: true,
  showReset: true,
  showLoadingIndicator: true,
  autofocus: false,
  searchAsYouType: true,
  isSearchStalled: false,
  disabled: false,
  onChange: _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop,
  onSubmit: _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop,
  onReset: _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop,
  refine: _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop
};

var SearchBox = /*#__PURE__*/function (_Component) {
  _inherits(SearchBox, _Component);

  var _super = _createSuper(SearchBox);

  function SearchBox() {
    var _this;

    _classCallCheck(this, SearchBox);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _defineProperty(_assertThisInitialized(_this), "state", {
      query: _this.props.query,
      focused: false
    });

    _defineProperty(_assertThisInitialized(_this), "input", (0,preact__WEBPACK_IMPORTED_MODULE_0__.createRef)());

    _defineProperty(_assertThisInitialized(_this), "onInput", function (event) {
      var _this$props = _this.props,
          searchAsYouType = _this$props.searchAsYouType,
          refine = _this$props.refine,
          onChange = _this$props.onChange;
      var query = event.target.value;

      if (searchAsYouType) {
        refine(query);
      }

      _this.setState({
        query: query
      });

      onChange(event);
    });

    _defineProperty(_assertThisInitialized(_this), "onSubmit", function (event) {
      var _this$props2 = _this.props,
          searchAsYouType = _this$props2.searchAsYouType,
          refine = _this$props2.refine,
          onSubmit = _this$props2.onSubmit;
      event.preventDefault();
      event.stopPropagation();

      if (_this.input.current) {
        _this.input.current.blur();
      }

      if (!searchAsYouType) {
        refine(_this.state.query);
      }

      onSubmit(event);
      return false;
    });

    _defineProperty(_assertThisInitialized(_this), "onReset", function (event) {
      var _this$props3 = _this.props,
          refine = _this$props3.refine,
          onReset = _this$props3.onReset;
      var query = '';

      if (_this.input.current) {
        _this.input.current.focus();
      }

      refine(query);

      _this.setState({
        query: query
      });

      onReset(event);
    });

    _defineProperty(_assertThisInitialized(_this), "onBlur", function () {
      _this.setState({
        focused: false
      });
    });

    _defineProperty(_assertThisInitialized(_this), "onFocus", function () {
      _this.setState({
        focused: true
      });
    });

    return _this;
  }

  _createClass(SearchBox, [{
    key: "resetInput",
    value:
    /**
     * This public method is used in the RefinementList SFFV search box
     * to reset the input state when an item is selected.
     *
     * @see RefinementList#componentWillReceiveProps
     * @return {undefined}
     */
    function resetInput() {
      this.setState({
        query: ''
      });
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      /**
       * when the user is typing, we don't want to replace the query typed
       * by the user (state.query) with the query exposed by the connector (props.query)
       * see: https://github.com/algolia/instantsearch.js/issues/4141
       */
      if (!this.state.focused && nextProps.query !== this.state.query) {
        this.setState({
          query: nextProps.query
        });
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props4 = this.props,
          cssClasses = _this$props4.cssClasses,
          placeholder = _this$props4.placeholder,
          autofocus = _this$props4.autofocus,
          showSubmit = _this$props4.showSubmit,
          showReset = _this$props4.showReset,
          showLoadingIndicator = _this$props4.showLoadingIndicator,
          templates = _this$props4.templates,
          isSearchStalled = _this$props4.isSearchStalled;
      return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("div", {
        className: cssClasses.root
      }, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("form", {
        action: "",
        role: "search",
        className: cssClasses.form,
        noValidate: true,
        onSubmit: this.onSubmit,
        onReset: this.onReset
      }, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("input", {
        ref: this.input,
        value: this.state.query,
        disabled: this.props.disabled,
        className: cssClasses.input,
        type: "search",
        placeholder: placeholder,
        autoFocus: autofocus,
        autoComplete: "off",
        autoCorrect: "off",
        autoCapitalize: "off" // @ts-expect-error `spellCheck` attribute is missing in preact JSX types
        ,
        spellCheck: "false",
        maxLength: 512,
        onInput: this.onInput,
        onBlur: this.onBlur,
        onFocus: this.onFocus
      }), (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Template_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
        templateKey: "submit",
        rootTagName: "button",
        rootProps: {
          className: cssClasses.submit,
          type: 'submit',
          title: 'Submit the search query.',
          hidden: !showSubmit
        },
        templates: templates,
        data: {
          cssClasses: cssClasses
        }
      }), (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Template_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
        templateKey: "reset",
        rootTagName: "button",
        rootProps: {
          className: cssClasses.reset,
          type: 'reset',
          title: 'Clear the search query.',
          hidden: !(showReset && this.state.query.trim() && !isSearchStalled)
        },
        templates: templates,
        data: {
          cssClasses: cssClasses
        }
      }), showLoadingIndicator && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Template_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
        templateKey: "loadingIndicator",
        rootTagName: "span",
        rootProps: {
          className: cssClasses.loadingIndicator,
          hidden: !isSearchStalled
        },
        templates: templates,
        data: {
          cssClasses: cssClasses
        }
      })));
    }
  }]);

  return SearchBox;
}(preact__WEBPACK_IMPORTED_MODULE_0__.Component);

_defineProperty(SearchBox, "defaultProps", defaultProps);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SearchBox);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/Snippet/Snippet.js":
/*!************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/Snippet/Snippet.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Snippet": () => (/* binding */ Snippet)
/* harmony export */ });
/* harmony import */ var _algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/ui-components-shared */ "./node_modules/@algolia/ui-components-shared/dist/esm/cx.js");
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../InternalHighlight/InternalHighlight.js */ "./node_modules/instantsearch.js/es/components/InternalHighlight/InternalHighlight.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function Snippet(_ref) {
  var _ref$classNames = _ref.classNames,
      classNames = _ref$classNames === void 0 ? {} : _ref$classNames,
      props = _objectWithoutProperties(_ref, ["classNames"]);

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_InternalHighlight_InternalHighlight_js__WEBPACK_IMPORTED_MODULE_1__.InternalHighlight, _extends({
    classNames: {
      root: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Snippet', classNames.root),
      highlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Snippet-highlighted', classNames.highlighted),
      nonHighlighted: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Snippet-nonHighlighted', classNames.nonHighlighted),
      separator: (0,_algolia_ui_components_shared__WEBPACK_IMPORTED_MODULE_2__.cx)('ais-Snippet-separator', classNames.separator)
    }
  }, props));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/Stats/Stats.js":
/*!********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/Stats/Stats.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _Template_Template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Template/Template.js */ "./node_modules/instantsearch.js/es/components/Template/Template.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }





var Stats = function Stats(_ref) {
  var nbHits = _ref.nbHits,
      nbSortedHits = _ref.nbSortedHits,
      cssClasses = _ref.cssClasses,
      templateProps = _ref.templateProps,
      rest = _objectWithoutProperties(_ref, ["nbHits", "nbSortedHits", "cssClasses", "templateProps"]);

  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_1__(cssClasses.root)
  }, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Template_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, templateProps, {
    templateKey: "text",
    rootTagName: "span",
    rootProps: {
      className: cssClasses.text
    },
    data: _objectSpread({
      hasManySortedResults: nbSortedHits && nbSortedHits > 1,
      hasNoSortedResults: nbSortedHits === 0,
      hasOneSortedResults: nbSortedHits === 1,
      hasManyResults: nbHits > 1,
      hasNoResults: nbHits === 0,
      hasOneResult: nbHits === 1,
      nbHits: nbHits,
      nbSortedHits: nbSortedHits,
      cssClasses: cssClasses
    }, rest)
  })));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Stats);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/components/Template/Template.js":
/*!**************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/components/Template/Template.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/isEqual.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_templating_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/templating/index.js */ "./node_modules/instantsearch.js/es/lib/templating/renderTemplate.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var defaultProps = {
  data: {},
  rootTagName: 'div',
  useCustomCompileOptions: {},
  templates: {},
  templatesConfig: {}
};

// @TODO: Template should be a generic and receive TData to pass to Templates (to avoid TTemplateData to be set as `any`)
var Template = /*#__PURE__*/function (_Component) {
  _inherits(Template, _Component);

  var _super = _createSuper(Template);

  function Template() {
    _classCallCheck(this, Template);

    return _super.apply(this, arguments);
  }

  _createClass(Template, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      return !(0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.isEqual)(this.props.data, nextProps.data) || this.props.templateKey !== nextProps.templateKey || !(0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.isEqual)(this.props.rootProps, nextProps.rootProps);
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

       true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.warning)(Object.keys(this.props.templates).every(function (key) {
        return typeof _this.props.templates[key] === 'function';
      }), "Hogan.js and string-based templates are deprecated and will not be supported in InstantSearch.js 5.x.\n\nYou can replace them with function-form templates and use either the provided `html` function or JSX templates.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/upgrade-guides/js/#upgrade-templates") : 0;
      var RootTagName = this.props.rootTagName;
      var useCustomCompileOptions = this.props.useCustomCompileOptions[this.props.templateKey];
      var compileOptions = useCustomCompileOptions ? this.props.templatesConfig.compileOptions : {};
      var content = (0,_lib_templating_index_js__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({
        templates: this.props.templates,
        templateKey: this.props.templateKey,
        compileOptions: compileOptions,
        helpers: this.props.templatesConfig.helpers,
        data: this.props.data,
        bindEvent: this.props.bindEvent,
        sendEvent: this.props.sendEvent
      });

      if (content === null) {
        // Adds a noscript to the DOM but virtual DOM is null
        // See http://facebook.github.io/react/docs/component-specs.html#render
        return null;
      }

      if (_typeof(content) === 'object') {
        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(RootTagName, this.props.rootProps, content);
      }

      return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(RootTagName, _extends({}, this.props.rootProps, {
        dangerouslySetInnerHTML: {
          __html: content
        }
      }));
    }
  }]);

  return Template;
}(preact__WEBPACK_IMPORTED_MODULE_0__.Component);

_defineProperty(Template, "defaultProps", defaultProps);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Template);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/connectors/configure/connectConfigure.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/connectors/configure/connectConfigure.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! algoliasearch-helper */ "./node_modules/algoliasearch-helper/index.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



/**
 * Refine the given search parameters.
 */

var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.createDocumentationMessageGenerator)({
  name: 'configure',
  connector: true
});

function getInitialSearchParameters(state, widgetParams) {
  // We leverage the helper internals to remove the `widgetParams` from
  // the state. The function `setQueryParameters` omits the values that
  // are `undefined` on the next state.
  return state.setQueryParameters(Object.keys(widgetParams.searchParameters).reduce(function (acc, key) {
    return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, undefined));
  }, {}));
}

var connectConfigure = function connectConfigure() {
  var renderFn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.noop;
  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.noop;
  return function (widgetParams) {
    if (!widgetParams || !(0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.isPlainObject)(widgetParams.searchParameters)) {
      throw new Error(withUsage('The `searchParameters` option expects an object.'));
    }

    var connectorState = {};

    function refine(helper) {
      return function (searchParameters) {
        // Merge new `searchParameters` with the ones set from other widgets
        var actualState = getInitialSearchParameters(helper.state, widgetParams);
        var nextSearchParameters = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.mergeSearchParameters)(actualState, new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchParameters(searchParameters)); // Update original `widgetParams.searchParameters` to the new refined one

        widgetParams.searchParameters = searchParameters; // Trigger a search with the resolved search parameters

        helper.setState(nextSearchParameters).search();
      };
    }

    return {
      $$type: 'ais.configure',
      init: function init(initOptions) {
        var instantSearchInstance = initOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), true);
      },
      render: function render(renderOptions) {
        var instantSearchInstance = renderOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), false);
      },
      dispose: function dispose(_ref) {
        var state = _ref.state;
        unmountFn();
        return getInitialSearchParameters(state, widgetParams);
      },
      getRenderState: function getRenderState(renderState, renderOptions) {
        var _renderState$configur;

        var widgetRenderState = this.getWidgetRenderState(renderOptions);
        return _objectSpread(_objectSpread({}, renderState), {}, {
          configure: _objectSpread(_objectSpread({}, widgetRenderState), {}, {
            widgetParams: _objectSpread(_objectSpread({}, widgetRenderState.widgetParams), {}, {
              searchParameters: (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.mergeSearchParameters)(new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchParameters((_renderState$configur = renderState.configure) === null || _renderState$configur === void 0 ? void 0 : _renderState$configur.widgetParams.searchParameters), new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchParameters(widgetRenderState.widgetParams.searchParameters)).getQueryParams()
            })
          })
        });
      },
      getWidgetRenderState: function getWidgetRenderState(_ref2) {
        var helper = _ref2.helper;

        if (!connectorState.refine) {
          connectorState.refine = refine(helper);
        }

        return {
          refine: connectorState.refine,
          widgetParams: widgetParams
        };
      },
      getWidgetSearchParameters: function getWidgetSearchParameters(state, _ref3) {
        var uiState = _ref3.uiState;
        return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.mergeSearchParameters)(state, new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchParameters(_objectSpread(_objectSpread({}, uiState.configure), widgetParams.searchParameters)));
      },
      getWidgetUiState: function getWidgetUiState(uiState) {
        return _objectSpread(_objectSpread({}, uiState), {}, {
          configure: _objectSpread(_objectSpread({}, uiState.configure), widgetParams.searchParameters)
        });
      }
    };
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectConfigure);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/connectors/hits/connectHits.js":
/*!*************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/connectors/hits/connectHits.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/checkRendering.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/createSendEventForHits.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/hits-query-id.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.createDocumentationMessageGenerator)({
  name: 'hits',
  connector: true
});

var connectHits = function connectHits(renderFn) {
  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop;
  (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.checkRendering)(renderFn, withUsage());
  return function (widgetParams) {
    var _ref = widgetParams || {},
        _ref$escapeHTML = _ref.escapeHTML,
        escapeHTML = _ref$escapeHTML === void 0 ? true : _ref$escapeHTML,
        _ref$transformItems = _ref.transformItems,
        transformItems = _ref$transformItems === void 0 ? function (items) {
      return items;
    } : _ref$transformItems;

    var sendEvent;
    var bindEvent;
    return {
      $$type: 'ais.hits',
      init: function init(initOptions) {
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {
          instantSearchInstance: initOptions.instantSearchInstance
        }), true);
      },
      render: function render(renderOptions) {
        var renderState = this.getWidgetRenderState(renderOptions);
        renderFn(_objectSpread(_objectSpread({}, renderState), {}, {
          instantSearchInstance: renderOptions.instantSearchInstance
        }), false);
        renderState.sendEvent('view', renderState.hits);
      },
      getRenderState: function getRenderState(renderState, renderOptions) {
        return _objectSpread(_objectSpread({}, renderState), {}, {
          hits: this.getWidgetRenderState(renderOptions)
        });
      },
      getWidgetRenderState: function getWidgetRenderState(_ref2) {
        var results = _ref2.results,
            helper = _ref2.helper,
            instantSearchInstance = _ref2.instantSearchInstance;

        if (!sendEvent) {
          sendEvent = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createSendEventForHits)({
            instantSearchInstance: instantSearchInstance,
            index: helper.getIndex(),
            widgetType: this.$$type
          });
        }

        if (!bindEvent) {
          bindEvent = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createBindEventForHits)({
            index: helper.getIndex(),
            widgetType: this.$$type
          });
        }

        if (!results) {
          return {
            hits: [],
            results: undefined,
            sendEvent: sendEvent,
            bindEvent: bindEvent,
            widgetParams: widgetParams
          };
        }

        if (escapeHTML && results.hits.length > 0) {
          results.hits = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.escapeHits)(results.hits);
        }

        var hitsWithAbsolutePosition = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.addAbsolutePosition)(results.hits, results.page, results.hitsPerPage);
        var hitsWithAbsolutePositionAndQueryID = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.addQueryID)(hitsWithAbsolutePosition, results.queryID);
        var transformedHits = transformItems(hitsWithAbsolutePositionAndQueryID, {
          results: results
        });
        return {
          hits: transformedHits,
          results: results,
          sendEvent: sendEvent,
          bindEvent: bindEvent,
          widgetParams: widgetParams
        };
      },
      dispose: function dispose(_ref3) {
        var state = _ref3.state;
        unmountFn();

        if (!escapeHTML) {
          return state;
        }

        return state.setQueryParameters(Object.keys(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.TAG_PLACEHOLDER).reduce(function (acc, key) {
          return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, undefined));
        }, {}));
      },
      getWidgetSearchParameters: function getWidgetSearchParameters(state) {
        if (!escapeHTML) {
          return state;
        }

        return state.setQueryParameters(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.TAG_PLACEHOLDER);
      }
    };
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectHits);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/connectors/pagination/Paginator.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/connectors/pagination/Paginator.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/range.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var Paginator = /*#__PURE__*/function () {
  function Paginator(params) {
    _classCallCheck(this, Paginator);

    _defineProperty(this, "currentPage", void 0);

    _defineProperty(this, "total", void 0);

    _defineProperty(this, "padding", void 0);

    this.currentPage = params.currentPage;
    this.total = params.total;
    this.padding = params.padding;
  }

  _createClass(Paginator, [{
    key: "pages",
    value: function pages() {
      var total = this.total,
          currentPage = this.currentPage,
          padding = this.padding;
      if (total === 0) return [0];
      var totalDisplayedPages = this.nbPagesDisplayed(padding, total);

      if (totalDisplayedPages === total) {
        return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.range)({
          end: total
        });
      }

      var paddingLeft = this.calculatePaddingLeft(currentPage, padding, total, totalDisplayedPages);
      var paddingRight = totalDisplayedPages - paddingLeft;
      var first = currentPage - paddingLeft;
      var last = currentPage + paddingRight;
      return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.range)({
        start: first,
        end: last
      });
    }
  }, {
    key: "nbPagesDisplayed",
    value: function nbPagesDisplayed(padding, total) {
      return Math.min(2 * padding + 1, total);
    }
  }, {
    key: "calculatePaddingLeft",
    value: function calculatePaddingLeft(current, padding, total, totalDisplayedPages) {
      if (current <= padding) {
        return current;
      }

      if (current >= total - padding) {
        return totalDisplayedPages - (total - current);
      }

      return padding;
    }
  }, {
    key: "isLastPage",
    value: function isLastPage() {
      return this.currentPage === this.total - 1 || this.total === 0;
    }
  }, {
    key: "isFirstPage",
    value: function isFirstPage() {
      return this.currentPage === 0;
    }
  }]);

  return Paginator;
}();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Paginator);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/checkRendering.js");
/* harmony import */ var _Paginator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Paginator.js */ "./node_modules/instantsearch.js/es/connectors/pagination/Paginator.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.createDocumentationMessageGenerator)({
  name: 'pagination',
  connector: true
});

/**
 * **Pagination** connector provides the logic to build a widget that will let the user
 * choose the current page of the results.
 *
 * When using the pagination with Algolia, you should be aware that the engine won't provide you pages
 * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).
 */
var connectPagination = function connectPagination(renderFn) {
  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop;
  (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.checkRendering)(renderFn, withUsage());
  return function (widgetParams) {
    var _ref = widgetParams || {},
        totalPages = _ref.totalPages,
        _ref$padding = _ref.padding,
        padding = _ref$padding === void 0 ? 3 : _ref$padding;

    var pager = new _Paginator_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
      currentPage: 0,
      total: 0,
      padding: padding
    });
    var connectorState = {};

    function getMaxPage(_ref2) {
      var nbPages = _ref2.nbPages;
      return totalPages !== undefined ? Math.min(totalPages, nbPages) : nbPages;
    }

    return {
      $$type: 'ais.pagination',
      init: function init(initOptions) {
        var instantSearchInstance = initOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), true);
      },
      render: function render(renderOptions) {
        var instantSearchInstance = renderOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), false);
      },
      dispose: function dispose(_ref3) {
        var state = _ref3.state;
        unmountFn();
        return state.setQueryParameter('page', undefined);
      },
      getWidgetUiState: function getWidgetUiState(uiState, _ref4) {
        var searchParameters = _ref4.searchParameters;
        var page = searchParameters.page || 0;

        if (!page) {
          return uiState;
        }

        return _objectSpread(_objectSpread({}, uiState), {}, {
          page: page + 1
        });
      },
      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {
        var uiState = _ref5.uiState;
        var page = uiState.page ? uiState.page - 1 : 0;
        return searchParameters.setQueryParameter('page', page);
      },
      getWidgetRenderState: function getWidgetRenderState(_ref6) {
        var results = _ref6.results,
            helper = _ref6.helper,
            state = _ref6.state,
            createURL = _ref6.createURL;

        if (!connectorState.refine) {
          connectorState.refine = function (page) {
            helper.setPage(page);
            helper.search();
          };
        }

        if (!connectorState.createURL) {
          connectorState.createURL = function (helperState) {
            return function (page) {
              return createURL(helperState.setPage(page));
            };
          };
        }

        var page = state.page || 0;
        var nbPages = getMaxPage(results || {
          nbPages: 0
        });
        pager.currentPage = page;
        pager.total = nbPages;
        return {
          createURL: connectorState.createURL(state),
          refine: connectorState.refine,
          canRefine: nbPages > 1,
          currentRefinement: page,
          nbHits: (results === null || results === void 0 ? void 0 : results.nbHits) || 0,
          nbPages: nbPages,
          pages: results ? pager.pages() : [],
          isFirstPage: pager.isFirstPage(),
          isLastPage: pager.isLastPage(),
          widgetParams: widgetParams
        };
      },
      getRenderState: function getRenderState(renderState, renderOptions) {
        return _objectSpread(_objectSpread({}, renderState), {}, {
          pagination: this.getWidgetRenderState(renderOptions)
        });
      }
    };
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectPagination);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js":
/*!************************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/checkRendering.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.createDocumentationMessageGenerator)({
  name: 'search-box',
  connector: true
});

var defaultQueryHook = function defaultQueryHook(query, hook) {
  return hook(query);
};
/**
 * **SearchBox** connector provides the logic to build a widget that will let the user search for a query.
 *
 * The connector provides to the rendering: `refine()` to set the query. The behaviour of this function
 * may be impacted by the `queryHook` widget parameter.
 */


var connectSearchBox = function connectSearchBox(renderFn) {
  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop;
  (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.checkRendering)(renderFn, withUsage());
  return function (widgetParams) {
    var _ref = widgetParams || {},
        _ref$queryHook = _ref.queryHook,
        queryHook = _ref$queryHook === void 0 ? defaultQueryHook : _ref$queryHook;

    var _refine;

    var _clear;

    return {
      $$type: 'ais.searchBox',
      init: function init(initOptions) {
        var instantSearchInstance = initOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), true);
      },
      render: function render(renderOptions) {
        var instantSearchInstance = renderOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), false);
      },
      dispose: function dispose(_ref2) {
        var state = _ref2.state;
        unmountFn();
        return state.setQueryParameter('query', undefined);
      },
      getRenderState: function getRenderState(renderState, renderOptions) {
        return _objectSpread(_objectSpread({}, renderState), {}, {
          searchBox: this.getWidgetRenderState(renderOptions)
        });
      },
      getWidgetRenderState: function getWidgetRenderState(_ref3) {
        var helper = _ref3.helper,
            searchMetadata = _ref3.searchMetadata,
            state = _ref3.state;

        if (!_refine) {
          _refine = function _refine(query) {
            queryHook(query, function (q) {
              return helper.setQuery(q).search();
            });
          };

          _clear = function _clear() {
            helper.setQuery('').search();
          };
        }

        return {
          query: state.query || '',
          refine: _refine,
          clear: _clear,
          widgetParams: widgetParams,
          isSearchStalled: searchMetadata.isSearchStalled
        };
      },
      getWidgetUiState: function getWidgetUiState(uiState, _ref4) {
        var searchParameters = _ref4.searchParameters;
        var query = searchParameters.query || '';

        if (query === '' || uiState && uiState.query === query) {
          return uiState;
        }

        return _objectSpread(_objectSpread({}, uiState), {}, {
          query: query
        });
      },
      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {
        var uiState = _ref5.uiState;
        return searchParameters.setQueryParameter('query', uiState.query || '');
      }
    };
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectSearchBox);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/connectors/stats/connectStats.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/connectors/stats/connectStats.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/checkRendering.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.createDocumentationMessageGenerator)({
  name: 'stats',
  connector: true
});
/**
 * **Stats** connector provides the logic to build a custom widget that will displays
 * search statistics (hits number and processing time).
 */

var connectStats = function connectStats(renderFn) {
  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop;
  (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.checkRendering)(renderFn, withUsage());
  return function (widgetParams) {
    return {
      $$type: 'ais.stats',
      init: function init(initOptions) {
        var instantSearchInstance = initOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), true);
      },
      render: function render(renderOptions) {
        var instantSearchInstance = renderOptions.instantSearchInstance;
        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {
          instantSearchInstance: instantSearchInstance
        }), false);
      },
      dispose: function dispose() {
        unmountFn();
      },
      getRenderState: function getRenderState(renderState, renderOptions) {
        return _objectSpread(_objectSpread({}, renderState), {}, {
          stats: this.getWidgetRenderState(renderOptions)
        });
      },
      getWidgetRenderState: function getWidgetRenderState(_ref) {
        var results = _ref.results,
            state = _ref.state;

        if (!results) {
          return {
            hitsPerPage: state.hitsPerPage,
            nbHits: 0,
            nbSortedHits: undefined,
            areHitsSorted: false,
            nbPages: 0,
            page: state.page || 0,
            processingTimeMS: -1,
            query: state.query || '',
            widgetParams: widgetParams
          };
        }

        return {
          hitsPerPage: results.hitsPerPage,
          nbHits: results.nbHits,
          nbSortedHits: results.nbSortedHits,
          areHitsSorted: typeof results.appliedRelevancyStrictness !== 'undefined' && results.appliedRelevancyStrictness > 0 && results.nbSortedHits !== results.nbHits,
          nbPages: results.nbPages,
          page: results.page,
          processingTimeMS: results.processingTimeMS,
          query: results.query,
          widgetParams: widgetParams
        };
      }
    };
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectStats);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/components/Highlight.js":
/*!**************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/components/Highlight.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Highlight": () => (/* binding */ Highlight)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _components_Highlight_Highlight_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/Highlight/Highlight.js */ "./node_modules/instantsearch.js/es/components/Highlight/Highlight.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/toArray.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function Highlight(_ref) {
  var hit = _ref.hit,
      attribute = _ref.attribute,
      cssClasses = _ref.cssClasses,
      props = _objectWithoutProperties(_ref, ["hit", "attribute", "cssClasses"]);

  var property = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._highlightResult, attribute) || [];
  var properties = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.toArray)(property);
   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.warning)(Boolean(properties.length), "Could not enable highlight for \"".concat(attribute.toString(), "\", will display an empty string.\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\n\nSee: https://alg.li/highlighting\n")) : 0;
  var parts = properties.map(function (_ref2) {
    var value = _ref2.value;
    return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.getHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.unescape)(value || ''));
  });
  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Highlight_Highlight_js__WEBPACK_IMPORTED_MODULE_6__.Highlight, _extends({}, props, {
    parts: parts,
    classNames: cssClasses
  }));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/components/ReverseHighlight.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/components/ReverseHighlight.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ReverseHighlight": () => (/* binding */ ReverseHighlight)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _components_ReverseHighlight_ReverseHighlight_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/ReverseHighlight/ReverseHighlight.js */ "./node_modules/instantsearch.js/es/components/ReverseHighlight/ReverseHighlight.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/toArray.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function ReverseHighlight(_ref) {
  var hit = _ref.hit,
      attribute = _ref.attribute,
      cssClasses = _ref.cssClasses,
      props = _objectWithoutProperties(_ref, ["hit", "attribute", "cssClasses"]);

  var property = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._highlightResult, attribute) || [];
  var properties = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.toArray)(property);
   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.warning)(Boolean(properties.length), "Could not enable highlight for \"".concat(attribute.toString(), "\", will display an empty string.\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\n\nSee: https://alg.li/highlighting\n")) : 0;
  var parts = properties.map(function (_ref2) {
    var value = _ref2.value;
    return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.getHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.unescape)(value || '')).map(function (_ref3) {
      var isHighlighted = _ref3.isHighlighted,
          rest = _objectWithoutProperties(_ref3, ["isHighlighted"]);

      return _objectSpread(_objectSpread({}, rest), {}, {
        isHighlighted: !isHighlighted
      });
    });
  });
  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_ReverseHighlight_ReverseHighlight_js__WEBPACK_IMPORTED_MODULE_6__.ReverseHighlight, _extends({}, props, {
    parts: parts,
    classNames: cssClasses
  }));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/components/ReverseSnippet.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/components/ReverseSnippet.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ReverseSnippet": () => (/* binding */ ReverseSnippet)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _components_ReverseSnippet_ReverseSnippet_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/ReverseSnippet/ReverseSnippet.js */ "./node_modules/instantsearch.js/es/components/ReverseSnippet/ReverseSnippet.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/toArray.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function ReverseSnippet(_ref) {
  var hit = _ref.hit,
      attribute = _ref.attribute,
      cssClasses = _ref.cssClasses,
      props = _objectWithoutProperties(_ref, ["hit", "attribute", "cssClasses"]);

  var property = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._snippetResult, attribute) || [];
  var properties = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.toArray)(property);
   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.warning)(Boolean(properties.length), "Could not enable snippet for \"".concat(attribute.toString(), "\", will display an empty string.\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\n\nSee: https://alg.li/highlighting\n")) : 0;
  var parts = properties.map(function (_ref2) {
    var value = _ref2.value;
    return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.getHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.unescape)(value || '')).map(function (_ref3) {
      var isHighlighted = _ref3.isHighlighted,
          rest = _objectWithoutProperties(_ref3, ["isHighlighted"]);

      return _objectSpread(_objectSpread({}, rest), {}, {
        isHighlighted: !isHighlighted
      });
    });
  });
  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_ReverseSnippet_ReverseSnippet_js__WEBPACK_IMPORTED_MODULE_6__.ReverseSnippet, _extends({}, props, {
    parts: parts,
    classNames: cssClasses
  }));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/components/Snippet.js":
/*!************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/components/Snippet.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Snippet": () => (/* binding */ Snippet)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _components_Snippet_Snippet_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/Snippet/Snippet.js */ "./node_modules/instantsearch.js/es/components/Snippet/Snippet.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/toArray.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




function Snippet(_ref) {
  var hit = _ref.hit,
      attribute = _ref.attribute,
      cssClasses = _ref.cssClasses,
      props = _objectWithoutProperties(_ref, ["hit", "attribute", "cssClasses"]);

  var property = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._snippetResult, attribute) || [];
  var properties = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.toArray)(property);
   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.warning)(Boolean(properties.length), "Could not enable snippet for \"".concat(attribute.toString(), "\", will display an empty string.\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\n\nSee: https://alg.li/highlighting\n")) : 0;
  var parts = properties.map(function (_ref2) {
    var value = _ref2.value;
    return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.getHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.unescape)(value || ''));
  });
  return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Snippet_Snippet_js__WEBPACK_IMPORTED_MODULE_6__.Snippet, _extends({}, props, {
    parts: parts,
    classNames: cssClasses
  }));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/get-insights-anonymous-user-token.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/get-insights-anonymous-user-token.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ANONYMOUS_TOKEN_COOKIE_KEY": () => (/* binding */ ANONYMOUS_TOKEN_COOKIE_KEY),
/* harmony export */   "default": () => (/* binding */ getInsightsAnonymousUserToken),
/* harmony export */   "getInsightsAnonymousUserTokenInternal": () => (/* binding */ getInsightsAnonymousUserTokenInternal)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");

var ANONYMOUS_TOKEN_COOKIE_KEY = '_ALGOLIA';

function getCookie(name) {
  var prefix = "".concat(name, "=");
  var cookies = document.cookie.split(';');

  for (var i = 0; i < cookies.length; i++) {
    var cookie = cookies[i];

    while (cookie.charAt(0) === ' ') {
      cookie = cookie.substring(1);
    }

    if (cookie.indexOf(prefix) === 0) {
      return cookie.substring(prefix.length, cookie.length);
    }
  }

  return undefined;
}

function getInsightsAnonymousUserTokenInternal() {
  return getCookie(ANONYMOUS_TOKEN_COOKIE_KEY);
}
/**
 * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/
 */

function getInsightsAnonymousUserToken() {
   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.warning)(false, "`getInsightsAnonymousUserToken` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/") : 0;
  return getInsightsAnonymousUserTokenInternal();
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/highlight.js":
/*!***************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/highlight.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ highlight)
/* harmony export */ });
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");


var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_0__.component)('Highlight');
function highlight(_ref) {
  var attribute = _ref.attribute,
      _ref$highlightedTagNa = _ref.highlightedTagName,
      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,
      hit = _ref.hit,
      _ref$cssClasses = _ref.cssClasses,
      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;
  var highlightAttributeResult = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._highlightResult, attribute); // @MAJOR fallback to attribute value if highlight is not found

   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.warning)(highlightAttributeResult, "Could not enable highlight for \"".concat(attribute, "\", will display an empty string.\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\n\nSee: https://alg.li/highlighting\n")) : 0;

  var _ref2 = highlightAttributeResult || {},
      _ref2$value = _ref2.value,
      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular


  var className = suit({
    descendantName: 'highlighted'
  }) + (cssClasses.highlighted ? " ".concat(cssClasses.highlighted) : '');
  return attributeValue.replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.TAG_REPLACEMENT.highlightPreTag, 'g'), "<".concat(highlightedTagName, " class=\"").concat(className, "\">")).replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.TAG_REPLACEMENT.highlightPostTag, 'g'), "</".concat(highlightedTagName, ">"));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/insights.js":
/*!**************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/insights.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ insights),
/* harmony export */   "hasDataAttributes": () => (/* binding */ hasDataAttributes),
/* harmony export */   "readDataAttributes": () => (/* binding */ readDataAttributes),
/* harmony export */   "writeDataAttributes": () => (/* binding */ writeDataAttributes)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/serializer.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }


function readDataAttributes(domElement) {
  var method = domElement.getAttribute('data-insights-method');
  var serializedPayload = domElement.getAttribute('data-insights-payload');

  if (typeof serializedPayload !== 'string') {
    throw new Error('The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.');
  }

  try {
    var payload = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.deserializePayload)(serializedPayload);
    return {
      method: method,
      payload: payload
    };
  } catch (error) {
    throw new Error('The insights helper was unable to parse `data-insights-payload`.');
  }
}
function hasDataAttributes(domElement) {
  return domElement.hasAttribute('data-insights-method');
}
function writeDataAttributes(_ref) {
  var method = _ref.method,
      payload = _ref.payload;

  if (_typeof(payload) !== 'object') {
    throw new Error("The insights helper expects the payload to be an object.");
  }

  var serializedPayload;

  try {
    serializedPayload = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.serializePayload)(payload);
  } catch (error) {
    throw new Error("Could not JSON serialize the payload object.");
  }

  return "data-insights-method=\"".concat(method, "\" data-insights-payload=\"").concat(serializedPayload, "\"");
}
/**
 * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/
 */

function insights(method, payload) {
   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.warning)(false, "`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/") : 0;
  return writeDataAttributes({
    method: method,
    payload: payload
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/reverseHighlight.js":
/*!**********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/reverseHighlight.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ reverseHighlight)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/concatHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/reverseHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");


var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_0__.component)('ReverseHighlight');
function reverseHighlight(_ref) {
  var attribute = _ref.attribute,
      _ref$highlightedTagNa = _ref.highlightedTagName,
      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,
      hit = _ref.hit,
      _ref$cssClasses = _ref.cssClasses,
      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;
  var highlightAttributeResult = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._highlightResult, attribute); // @MAJOR fallback to attribute value if highlight is not found

   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.warning)(highlightAttributeResult, "Could not enable reverse highlight for \"".concat(attribute, "\", will display an empty string.\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\n\nSee: https://alg.li/highlighting\n")) : 0;

  var _ref2 = highlightAttributeResult || {},
      _ref2$value = _ref2.value,
      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular


  var className = suit({
    descendantName: 'highlighted'
  }) + (cssClasses.highlighted ? " ".concat(cssClasses.highlighted) : '');
  var reverseHighlightedValue = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.concatHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.reverseHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.getHighlightedParts)(attributeValue)));
  return reverseHighlightedValue.replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.TAG_REPLACEMENT.highlightPreTag, 'g'), "<".concat(highlightedTagName, " class=\"").concat(className, "\">")).replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.TAG_REPLACEMENT.highlightPostTag, 'g'), "</".concat(highlightedTagName, ">"));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/reverseSnippet.js":
/*!********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/reverseSnippet.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ reverseSnippet)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/concatHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/reverseHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");


var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_0__.component)('ReverseSnippet');
function reverseSnippet(_ref) {
  var attribute = _ref.attribute,
      _ref$highlightedTagNa = _ref.highlightedTagName,
      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,
      hit = _ref.hit,
      _ref$cssClasses = _ref.cssClasses,
      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;
  var snippetAttributeResult = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._snippetResult, attribute); // @MAJOR fallback to attribute value if snippet is not found

   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.warning)(snippetAttributeResult, "Could not enable reverse snippet for \"".concat(attribute, "\", will display an empty string.\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\n\nSee: https://alg.li/highlighting\n")) : 0;

  var _ref2 = snippetAttributeResult || {},
      _ref2$value = _ref2.value,
      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular


  var className = suit({
    descendantName: 'highlighted'
  }) + (cssClasses.highlighted ? " ".concat(cssClasses.highlighted) : '');
  var reverseHighlightedValue = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.concatHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.reverseHighlightedParts)((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.getHighlightedParts)(attributeValue)));
  return reverseHighlightedValue.replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.TAG_REPLACEMENT.highlightPreTag, 'g'), "<".concat(highlightedTagName, " class=\"").concat(className, "\">")).replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.TAG_REPLACEMENT.highlightPostTag, 'g'), "</".concat(highlightedTagName, ">"));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/helpers/snippet.js":
/*!*************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/helpers/snippet.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ snippet)
/* harmony export */ });
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");


var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_0__.component)('Snippet');
function snippet(_ref) {
  var attribute = _ref.attribute,
      _ref$highlightedTagNa = _ref.highlightedTagName,
      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,
      hit = _ref.hit,
      _ref$cssClasses = _ref.cssClasses,
      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;
  var snippetAttributeResult = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.getPropertyByPath)(hit._snippetResult, attribute); // @MAJOR fallback to attribute value if snippet is not found

   true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.warning)(snippetAttributeResult, "Could not enable snippet for \"".concat(attribute, "\", will display an empty string.\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\n\nSee: https://alg.li/highlighting\n")) : 0;

  var _ref2 = snippetAttributeResult || {},
      _ref2$value = _ref2.value,
      attributeValue = _ref2$value === void 0 ? '' : _ref2$value; // cx is not used, since it would be bundled as a dependency for Vue & Angular


  var className = suit({
    descendantName: 'highlighted'
  }) + (cssClasses.highlighted ? " ".concat(cssClasses.highlighted) : '');
  return attributeValue.replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.TAG_REPLACEMENT.highlightPreTag, 'g'), "<".concat(highlightedTagName, " class=\"").concat(className, "\">")).replace(new RegExp(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.TAG_REPLACEMENT.highlightPostTag, 'g'), "</".concat(highlightedTagName, ">"));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/index.js":
/*!***************************************************!*\
  !*** ./node_modules/instantsearch.js/es/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _lib_InstantSearch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/InstantSearch.js */ "./node_modules/instantsearch.js/es/lib/InstantSearch.js");
/* harmony import */ var _lib_version_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/version.js */ "./node_modules/instantsearch.js/es/lib/version.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/highlight.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/reverseHighlight.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/snippet.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/reverseSnippet.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/insights.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/get-insights-anonymous-user-token.js");
/* harmony import */ var _lib_infiniteHitsCache_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/infiniteHitsCache/index.js */ "./node_modules/instantsearch.js/es/lib/infiniteHitsCache/sessionStorage.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _types_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./types/index.js */ "./node_modules/instantsearch.js/es/types/index.js");
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types_index_js__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types_index_js__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);






/**
 * InstantSearch is the main component of InstantSearch.js. This object
 * manages the widget and lets you add new ones.
 *
 * Two parameters are required to get you started with InstantSearch.js:
 *  - `indexName`: the main index that you will use for your new search UI
 *  - `searchClient`: the search client to plug to InstantSearch.js
 *
 * The [search client provided by Algolia](algolia.com/doc/api-client/getting-started/what-is-the-api-client/javascript/)
 * needs an `appId` and an `apiKey`. Those parameters can be found in your
 * [Algolia dashboard](https://www.algolia.com/api-keys).
 *
 * If you want to get up and running quickly with InstantSearch.js, have a
 * look at the [getting started](https://www.algolia.com/doc/guides/building-search-ui/getting-started/js/).
 */
var instantsearch = function instantsearch(options) {
  return new _lib_InstantSearch_js__WEBPACK_IMPORTED_MODULE_0__["default"](options);
};

instantsearch.version = _lib_version_js__WEBPACK_IMPORTED_MODULE_1__["default"];
instantsearch.createInfiniteHitsSessionStorageCache = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.deprecate)(_lib_infiniteHitsCache_index_js__WEBPACK_IMPORTED_MODULE_3__["default"], "import { createInfiniteHitsSessionStorageCache } from 'instantsearch.js/es/lib/infiniteHitsCache'");
instantsearch.highlight = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.deprecate)(_helpers_index_js__WEBPACK_IMPORTED_MODULE_4__["default"], "import { highlight } from 'instantsearch.js/es/helpers'");
instantsearch.reverseHighlight = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.deprecate)(_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__["default"], "import { reverseHighlight } from 'instantsearch.js/es/helpers'");
instantsearch.snippet = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.deprecate)(_helpers_index_js__WEBPACK_IMPORTED_MODULE_6__["default"], "import { snippet } from 'instantsearch.js/es/helpers'");
instantsearch.reverseSnippet = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.deprecate)(_helpers_index_js__WEBPACK_IMPORTED_MODULE_7__["default"], "import { reverseSnippet } from 'instantsearch.js/es/helpers'");
instantsearch.insights = _helpers_index_js__WEBPACK_IMPORTED_MODULE_8__["default"];
instantsearch.getInsightsAnonymousUserToken = _helpers_index_js__WEBPACK_IMPORTED_MODULE_9__["default"];
Object.defineProperty(instantsearch, 'widgets', {
  get: function get() {
    throw new ReferenceError("\"instantsearch.widgets\" are not available from the ES build.\n\nTo import the widgets:\n\nimport { searchBox } from 'instantsearch.js/es/widgets'");
  }
});
Object.defineProperty(instantsearch, 'connectors', {
  get: function get() {
    throw new ReferenceError("\"instantsearch.connectors\" are not available from the ES build.\n\nTo import the connectors:\n\nimport { connectSearchBox } from 'instantsearch.js/es/connectors'");
  }
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (instantsearch);



/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/InstantSearch.js":
/*!***************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/InstantSearch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! algoliasearch-helper */ "./node_modules/algoliasearch-helper/index.js");
/* harmony import */ var _algolia_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/events */ "./node_modules/@algolia/events/events.js");
/* harmony import */ var _widgets_index_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../widgets/index/index.js */ "./node_modules/instantsearch.js/es/widgets/index/index.js");
/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./version.js */ "./node_modules/instantsearch.js/es/lib/version.js");
/* harmony import */ var _createHelpers_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./createHelpers.js */ "./node_modules/instantsearch.js/es/lib/createHelpers.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/defer.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/setIndexHelperState.js");
/* harmony import */ var _middlewares_createRouterMiddleware_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../middlewares/createRouterMiddleware.js */ "./node_modules/instantsearch.js/es/middlewares/createRouterMiddleware.js");
/* harmony import */ var _middlewares_createMetadataMiddleware_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../middlewares/createMetadataMiddleware.js */ "./node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }









var withUsage = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.createDocumentationMessageGenerator)({
  name: 'instantsearch'
});

function defaultCreateURL() {
  return '#';
} // this purposely breaks typescript's type inference to ensure it's not used
// as it's used for a default parameter for example
// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546


/**
 * The actual implementation of the InstantSearch. This is
 * created using the `instantsearch` factory function.
 * It emits the 'render' event every time a search is done
 */
var InstantSearch = /*#__PURE__*/function (_EventEmitter) {
  _inherits(InstantSearch, _EventEmitter);

  var _super = _createSuper(InstantSearch);

  function InstantSearch(options) {
    var _this;

    _classCallCheck(this, InstantSearch);

    _this = _super.call(this);

    _defineProperty(_assertThisInitialized(_this), "client", void 0);

    _defineProperty(_assertThisInitialized(_this), "indexName", void 0);

    _defineProperty(_assertThisInitialized(_this), "insightsClient", void 0);

    _defineProperty(_assertThisInitialized(_this), "onStateChange", null);

    _defineProperty(_assertThisInitialized(_this), "helper", void 0);

    _defineProperty(_assertThisInitialized(_this), "mainHelper", void 0);

    _defineProperty(_assertThisInitialized(_this), "mainIndex", void 0);

    _defineProperty(_assertThisInitialized(_this), "started", void 0);

    _defineProperty(_assertThisInitialized(_this), "templatesConfig", void 0);

    _defineProperty(_assertThisInitialized(_this), "renderState", {});

    _defineProperty(_assertThisInitialized(_this), "_stalledSearchDelay", void 0);

    _defineProperty(_assertThisInitialized(_this), "_searchStalledTimer", void 0);

    _defineProperty(_assertThisInitialized(_this), "_initialUiState", void 0);

    _defineProperty(_assertThisInitialized(_this), "_initialResults", void 0);

    _defineProperty(_assertThisInitialized(_this), "_createURL", void 0);

    _defineProperty(_assertThisInitialized(_this), "_searchFunction", void 0);

    _defineProperty(_assertThisInitialized(_this), "_mainHelperSearch", void 0);

    _defineProperty(_assertThisInitialized(_this), "middleware", []);

    _defineProperty(_assertThisInitialized(_this), "sendEventToInsights", void 0);

    _defineProperty(_assertThisInitialized(_this), "status", 'idle');

    _defineProperty(_assertThisInitialized(_this), "error", undefined);

    _defineProperty(_assertThisInitialized(_this), "scheduleSearch", (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.defer)(function () {
      if (_this.started) {
        _this.mainHelper.search();
      }
    }));

    _defineProperty(_assertThisInitialized(_this), "scheduleRender", (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.defer)(function () {
      var shouldResetStatus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

      if (!_this.mainHelper.hasPendingRequests()) {
        clearTimeout(_this._searchStalledTimer);
        _this._searchStalledTimer = null;

        if (shouldResetStatus) {
          _this.status = 'idle';
          _this.error = undefined;
        }
      }

      _this.mainIndex.render({
        instantSearchInstance: _assertThisInitialized(_this)
      });

      _this.emit('render');
    }));

    _defineProperty(_assertThisInitialized(_this), "onInternalStateChange", (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.defer)(function () {
      var nextUiState = _this.mainIndex.getWidgetUiState({});

      _this.middleware.forEach(function (_ref) {
        var instance = _ref.instance;
        instance.onStateChange({
          uiState: nextUiState
        });
      });
    }));

    var _options$indexName = options.indexName,
        indexName = _options$indexName === void 0 ? null : _options$indexName,
        numberLocale = options.numberLocale,
        _options$initialUiSta = options.initialUiState,
        initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,
        _options$routing = options.routing,
        routing = _options$routing === void 0 ? null : _options$routing,
        searchFunction = options.searchFunction,
        _options$stalledSearc = options.stalledSearchDelay,
        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,
        _options$searchClient = options.searchClient,
        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,
        _options$insightsClie = options.insightsClient,
        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,
        _options$onStateChang = options.onStateChange,
        onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;

    if (indexName === null) {
      throw new Error(withUsage('The `indexName` option is required.'));
    }

    if (searchClient === null) {
      throw new Error(withUsage('The `searchClient` option is required.'));
    }

    if (typeof searchClient.search !== 'function') {
      throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");
    }

    if (typeof searchClient.addAlgoliaAgent === 'function') {
      searchClient.addAlgoliaAgent("instantsearch.js (".concat(_version_js__WEBPACK_IMPORTED_MODULE_4__["default"], ")"));
    }

     true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.warning)(insightsClient === null, "`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/") : 0;

    if (insightsClient && typeof insightsClient !== 'function') {
      throw new Error(withUsage('The `insightsClient` option should be a function.'));
    }

     true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.warning)(!options.searchParameters, "The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\n\nYou can replace it with the `configure` widget:\n\n```\nsearch.addWidgets([\n  configure(".concat(JSON.stringify(options.searchParameters, null, 2), ")\n]);\n```\n\nSee ").concat((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.createDocumentationLink)({
      name: 'configure'
    }))) : 0;
    _this.client = searchClient;
    _this.insightsClient = insightsClient;
    _this.indexName = indexName;
    _this.helper = null;
    _this.mainHelper = null;
    _this.mainIndex = (0,_widgets_index_index_js__WEBPACK_IMPORTED_MODULE_6__["default"])({
      indexName: indexName
    });
    _this.onStateChange = onStateChange;
    _this.started = false;
    _this.templatesConfig = {
      helpers: (0,_createHelpers_js__WEBPACK_IMPORTED_MODULE_7__["default"])({
        numberLocale: numberLocale
      }),
      compileOptions: {}
    };
    _this._stalledSearchDelay = stalledSearchDelay;
    _this._searchStalledTimer = null;
    _this._createURL = defaultCreateURL;
    _this._initialUiState = initialUiState;
    _this._initialResults = null;

    if (searchFunction) {
      _this._searchFunction = searchFunction;
    }

    _this.sendEventToInsights = _utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop;

    if (routing) {
      var routerOptions = typeof routing === 'boolean' ? undefined : routing;

      _this.use((0,_middlewares_createRouterMiddleware_js__WEBPACK_IMPORTED_MODULE_9__.createRouterMiddleware)(routerOptions));
    }

    if ((0,_middlewares_createMetadataMiddleware_js__WEBPACK_IMPORTED_MODULE_10__.isMetadataEnabled)()) {
      _this.use((0,_middlewares_createMetadataMiddleware_js__WEBPACK_IMPORTED_MODULE_10__.createMetadataMiddleware)());
    }

    return _this;
  }
  /**
   * Hooks a middleware into the InstantSearch lifecycle.
   */


  _createClass(InstantSearch, [{
    key: "_isSearchStalled",
    get:
    /**
     * The status of the search. Can be "idle", "loading", "stalled", or "error".
     */

    /**
     * The last returned error from the Search API.
     * The error gets cleared when the next valid search response is rendered.
     */

    /**
     * @deprecated use `status === 'stalled'` instead
     */
    function get() {
       true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.warning)(false, "`InstantSearch._isSearchStalled` is deprecated and will be removed in InstantSearch.js 5.0.\n\nUse `InstantSearch.status === \"stalled\"` instead.") : 0;
      return this.status === 'stalled';
    }
  }, {
    key: "use",
    value: function use() {
      var _this2 = this;

      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {
        middleware[_key] = arguments[_key];
      }

      var newMiddlewareList = middleware.map(function (fn) {
        var newMiddleware = _objectSpread({
          subscribe: _utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop,
          started: _utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop,
          unsubscribe: _utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop,
          onStateChange: _utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop
        }, fn({
          instantSearchInstance: _this2
        }));

        _this2.middleware.push({
          creator: fn,
          instance: newMiddleware
        });

        return newMiddleware;
      }); // If the instance has already started, we directly subscribe the
      // middleware so they're notified of changes.

      if (this.started) {
        newMiddlewareList.forEach(function (m) {
          m.subscribe();
          m.started();
        });
      }

      return this;
    }
    /**
     * Removes a middleware from the InstantSearch lifecycle.
     */

  }, {
    key: "unuse",
    value: function unuse() {
      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        middlewareToUnuse[_key2] = arguments[_key2];
      }

      this.middleware.filter(function (m) {
        return middlewareToUnuse.includes(m.creator);
      }).forEach(function (m) {
        return m.instance.unsubscribe();
      });
      this.middleware = this.middleware.filter(function (m) {
        return !middlewareToUnuse.includes(m.creator);
      });
      return this;
    } // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now

  }, {
    key: "EXPERIMENTAL_use",
    value: function EXPERIMENTAL_use() {
       true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.warning)(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : 0;
      return this.use.apply(this, arguments);
    }
    /**
     * Adds a widget to the search instance.
     * A widget can be added either before or after InstantSearch has started.
     * @param widget The widget to add to InstantSearch.
     *
     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.
     */

  }, {
    key: "addWidget",
    value: function addWidget(widget) {
       true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.warning)(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : 0;
      return this.addWidgets([widget]);
    }
    /**
     * Adds multiple widgets to the search instance.
     * Widgets can be added either before or after InstantSearch has started.
     * @param widgets The array of widgets to add to InstantSearch.
     */

  }, {
    key: "addWidgets",
    value: function addWidgets(widgets) {
      if (!Array.isArray(widgets)) {
        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));
      }

      if (widgets.some(function (widget) {
        return typeof widget.init !== 'function' && typeof widget.render !== 'function';
      })) {
        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));
      }

      this.mainIndex.addWidgets(widgets);
      return this;
    }
    /**
     * Removes a widget from the search instance.
     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`
     * @param widget The widget instance to remove from InstantSearch.
     *
     * The widget must implement a `dispose()` method to clear its state.
     */

  }, {
    key: "removeWidget",
    value: function removeWidget(widget) {
       true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.warning)(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : 0;
      return this.removeWidgets([widget]);
    }
    /**
     * Removes multiple widgets from the search instance.
     * @param widgets Array of widgets instances to remove from InstantSearch.
     *
     * The widgets must implement a `dispose()` method to clear their states.
     */

  }, {
    key: "removeWidgets",
    value: function removeWidgets(widgets) {
      if (!Array.isArray(widgets)) {
        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));
      }

      if (widgets.some(function (widget) {
        return typeof widget.dispose !== 'function';
      })) {
        throw new Error(withUsage('The widget definition expects a `dispose` method.'));
      }

      this.mainIndex.removeWidgets(widgets);
      return this;
    }
    /**
     * Ends the initialization of InstantSearch.js and triggers the
     * first search. This method should be called after all widgets have been added
     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing
     * widgets after the start as an **EXPERIMENTAL** feature.
     */

  }, {
    key: "start",
    value: function start() {
      var _this3 = this;

      if (this.started) {
        throw new Error(withUsage('The `start` method has already been called once.'));
      } // This Helper is used for the queries, we don't care about its state. The
      // states are managed at the `index` level. We use this Helper to create
      // DerivedHelper scoped into the `index` widgets.
      // In Vue InstantSearch' hydrate, a main helper gets set before start, so
      // we need to respect this helper as a way to keep all listeners correct.


      var mainHelper = this.mainHelper || algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__(this.client, this.indexName);

      mainHelper.search = function () {
        _this3.status = 'loading'; // @MAJOR: use scheduleRender here
        // For now, widgets don't expect to be rendered at the start of `loading`,
        // so it would be a breaking change to add an extra render. We don't have
        // these guarantees about the render event, thus emitting it once more
        // isn't a breaking change.

        _this3.emit('render'); // This solution allows us to keep the exact same API for the users but
        // under the hood, we have a different implementation. It should be
        // completely transparent for the rest of the codebase. Only this module
        // is impacted.


        return mainHelper.searchOnlyWithDerivedHelpers();
      };

      if (this._searchFunction) {
        // this client isn't used to actually search, but required for the helper
        // to not throw errors
        var fakeClient = {
          search: function search() {
            return new Promise(_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop);
          }
        };
        this._mainHelperSearch = mainHelper.search.bind(mainHelper);

        mainHelper.search = function () {
          var mainIndexHelper = _this3.mainIndex.getHelper();

          var searchFunctionHelper = algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);
          searchFunctionHelper.once('search', function (_ref2) {
            var state = _ref2.state;
            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);

            _this3._mainHelperSearch();
          }); // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`

          searchFunctionHelper.on('change', function (_ref3) {
            var state = _ref3.state;
            mainIndexHelper.setState(state);
          });

          _this3._searchFunction(searchFunctionHelper);

          return mainHelper;
        };
      } // Only the "main" Helper emits the `error` event vs the one for `search`
      // and `results` that are also emitted on the derived one.


      mainHelper.on('error', function (_ref4) {
        var error = _ref4.error;

        if (!(error instanceof Error)) {
          // typescript lies here, error is in some cases { name: string, message: string }
          var err = error;
          error = Object.keys(err).reduce(function (acc, key) {
            acc[key] = err[key];
            return acc;
          }, new Error(err.message));
        } // If an error is emitted, it is re-thrown by events. In previous versions
        // we emitted {error}, which is thrown as:
        // "Uncaught, unspecified \"error\" event. ([object Object])"
        // To avoid breaking changes, we make the error available in both
        // `error` and `error.error`
        // @MAJOR emit only error


        error.error = error;
        _this3.error = error;
        _this3.status = 'error';

        _this3.scheduleRender(false); // This needs to execute last because it throws the error.


        _this3.emit('error', error);
      });
      this.mainHelper = mainHelper;
      this.middleware.forEach(function (_ref5) {
        var instance = _ref5.instance;
        instance.subscribe();
      });
      this.mainIndex.init({
        instantSearchInstance: this,
        parent: null,
        uiState: this._initialUiState
      });

      if (this._initialResults) {
        var originalScheduleSearch = this.scheduleSearch; // We don't schedule a first search when initial results are provided
        // because we already have the results to render. This skips the initial
        // network request on the browser on `start`.

        this.scheduleSearch = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.defer)(_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.noop); // We also skip the initial network request when widgets are dynamically
        // added in the first tick (that's the case in all the framework-based flavors).
        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely
        // on our `defer` util to restore the original `scheduleSearch` value once
        // widgets are added to hook back to the regular lifecycle.

        (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.defer)(function () {
          _this3.scheduleSearch = originalScheduleSearch;
        })();
      } // We only schedule a search when widgets have been added before `start()`
      // because there are listeners that can use these results.
      // This is especially useful in framework-based flavors that wait for
      // dynamically-added widgets to trigger a network request. It avoids
      // having to batch this initial network request with the one coming from
      // `addWidgets()`.
      // Later, we could also skip `index()` widgets and widgets that don't read
      // the results, but this is an optimization that has a very low impact for now.
      else if (this.mainIndex.getWidgets().length > 0) {
          this.scheduleSearch();
        } // Keep the previous reference for legacy purpose, some pattern use
      // the direct Helper access `search.helper` (e.g multi-index).


      this.helper = this.mainIndex.getHelper(); // track we started the search if we add more widgets,
      // to init them directly after add

      this.started = true;
      this.middleware.forEach(function (_ref6) {
        var instance = _ref6.instance;
        instance.started();
      });
    }
    /**
     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,
     * if you find an issue with it, please
     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).
     * @return {undefined} This method does not return anything
     */

  }, {
    key: "dispose",
    value: function dispose() {
      this.scheduleSearch.cancel();
      this.scheduleRender.cancel();
      clearTimeout(this._searchStalledTimer);
      this.removeWidgets(this.mainIndex.getWidgets());
      this.mainIndex.dispose(); // You can not start an instance two times, therefore a disposed instance
      // needs to set started as false otherwise this can not be restarted at a
      // later point.

      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.
      // If not reset, it would use the state stored before calling `dispose()`.

      this.removeAllListeners();
      this.mainHelper.removeAllListeners();
      this.mainHelper = null;
      this.helper = null;
      this.middleware.forEach(function (_ref7) {
        var instance = _ref7.instance;
        instance.unsubscribe();
      });
    }
  }, {
    key: "scheduleStalledRender",
    value: function scheduleStalledRender() {
      var _this4 = this;

      if (!this._searchStalledTimer) {
        this._searchStalledTimer = setTimeout(function () {
          _this4.status = 'stalled';

          _this4.scheduleRender();
        }, this._stalledSearchDelay);
      }
    }
    /**
     * Set the UI state and trigger a search.
     * @param uiState The next UI state or a function computing it from the current state
     * @param callOnStateChange private parameter used to know if the method is called from a state change
     */

  }, {
    key: "setUiState",
    value: function setUiState(uiState) {
      var _this5 = this;

      var callOnStateChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (!this.mainHelper) {
        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));
      } // We refresh the index UI state to update the local UI state that the
      // main index passes to the function form of `setUiState`.


      this.mainIndex.refreshUiState();
      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;

      if (this.onStateChange && callOnStateChange) {
        this.onStateChange({
          uiState: nextUiState,
          setUiState: function setUiState(finalUiState) {
            (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.setIndexHelperState)(typeof finalUiState === 'function' ? finalUiState(nextUiState) : finalUiState, _this5.mainIndex);

            _this5.scheduleSearch();

            _this5.onInternalStateChange();
          }
        });
      } else {
        (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.setIndexHelperState)(nextUiState, this.mainIndex);
        this.scheduleSearch();
        this.onInternalStateChange();
      }
    }
  }, {
    key: "getUiState",
    value: function getUiState() {
      if (this.started) {
        // We refresh the index UI state to make sure changes from `refine` are taken in account
        this.mainIndex.refreshUiState();
      }

      return this.mainIndex.getWidgetUiState({});
    }
  }, {
    key: "createURL",
    value: function createURL() {
      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      if (!this.started) {
        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));
      }

      return this._createURL(nextState);
    }
  }, {
    key: "refresh",
    value: function refresh() {
      if (!this.mainHelper) {
        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));
      }

      this.mainHelper.clearCache().search();
    }
  }]);

  return InstantSearch;
}(_algolia_events__WEBPACK_IMPORTED_MODULE_1__);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InstantSearch);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/createHelpers.js":
/*!***************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/createHelpers.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ hoganHelpers)
/* harmony export */ });
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/highlight.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/reverseHighlight.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/snippet.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/reverseSnippet.js");
/* harmony import */ var _helpers_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/index.js */ "./node_modules/instantsearch.js/es/helpers/insights.js");
/* harmony import */ var _formatNumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatNumber.js */ "./node_modules/instantsearch.js/es/lib/formatNumber.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



function hoganHelpers(_ref) {
  var numberLocale = _ref.numberLocale;
  return {
    formatNumber: function formatNumber(value, render) {
      return (0,_formatNumber_js__WEBPACK_IMPORTED_MODULE_0__.formatNumber)(Number(render(value)), numberLocale);
    },
    highlight: function highlight(options, render) {
      try {
        var highlightOptions = JSON.parse(options);
        return render((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(_objectSpread(_objectSpread({}, highlightOptions), {}, {
          hit: this
        })));
      } catch (error) {
        throw new Error("\nThe highlight helper expects a JSON object of the format:\n{ \"attribute\": \"name\", \"highlightedTagName\": \"mark\" }");
      }
    },
    reverseHighlight: function reverseHighlight(options, render) {
      try {
        var reverseHighlightOptions = JSON.parse(options);
        return render((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(_objectSpread(_objectSpread({}, reverseHighlightOptions), {}, {
          hit: this
        })));
      } catch (error) {
        throw new Error("\n  The reverseHighlight helper expects a JSON object of the format:\n  { \"attribute\": \"name\", \"highlightedTagName\": \"mark\" }");
      }
    },
    snippet: function snippet(options, render) {
      try {
        var snippetOptions = JSON.parse(options);
        return render((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(_objectSpread(_objectSpread({}, snippetOptions), {}, {
          hit: this
        })));
      } catch (error) {
        throw new Error("\nThe snippet helper expects a JSON object of the format:\n{ \"attribute\": \"name\", \"highlightedTagName\": \"mark\" }");
      }
    },
    reverseSnippet: function reverseSnippet(options, render) {
      try {
        var reverseSnippetOptions = JSON.parse(options);
        return render((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_4__["default"])(_objectSpread(_objectSpread({}, reverseSnippetOptions), {}, {
          hit: this
        })));
      } catch (error) {
        throw new Error("\n  The reverseSnippet helper expects a JSON object of the format:\n  { \"attribute\": \"name\", \"highlightedTagName\": \"mark\" }");
      }
    },
    insights: function insights(options, render) {
      try {
        var _JSON$parse = JSON.parse(options),
            method = _JSON$parse.method,
            payload = _JSON$parse.payload;

        return render((0,_helpers_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(method, _objectSpread({
          objectIDs: [this.objectID]
        }, payload)));
      } catch (error) {
        throw new Error("\nThe insights helper expects a JSON object of the format:\n{ \"method\": \"method-name\", \"payload\": { \"eventName\": \"name of the event\" } }");
      }
    }
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/formatNumber.js":
/*!**************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/formatNumber.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "formatNumber": () => (/* binding */ formatNumber)
/* harmony export */ });
function formatNumber(value, numberLocale) {
  return value.toLocaleString(numberLocale);
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/infiniteHitsCache/sessionStorage.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/infiniteHitsCache/sessionStorage.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ createInfiniteHitsSessionStorageCache)
/* harmony export */ });
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/isEqual.js");
function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



function getStateWithoutPage(state) {
  var _ref = state || {},
      page = _ref.page,
      rest = _objectWithoutProperties(_ref, ["page"]);

  return rest;
}

var KEY = 'ais.infiniteHits';
function createInfiniteHitsSessionStorageCache() {
  return {
    read: function read(_ref2) {
      var state = _ref2.state;
      var sessionStorage = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.safelyRunOnBrowser)(function (_ref3) {
        var window = _ref3.window;
        return window.sessionStorage;
      });

      if (!sessionStorage) {
        return null;
      }

      try {
        var cache = JSON.parse( // @ts-expect-error JSON.parse() requires a string, but it actually accepts null, too.
        sessionStorage.getItem(KEY));
        return cache && (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.isEqual)(cache.state, getStateWithoutPage(state)) ? cache.hits : null;
      } catch (error) {
        if (error instanceof SyntaxError) {
          try {
            sessionStorage.removeItem(KEY);
          } catch (err) {// do nothing
          }
        }

        return null;
      }
    },
    write: function write(_ref4) {
      var state = _ref4.state,
          hits = _ref4.hits;
      var sessionStorage = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.safelyRunOnBrowser)(function (_ref5) {
        var window = _ref5.window;
        return window.sessionStorage;
      });

      if (!sessionStorage) {
        return;
      }

      try {
        sessionStorage.setItem(KEY, JSON.stringify({
          state: getStateWithoutPage(state),
          hits: hits
        }));
      } catch (error) {// do nothing
      }
    }
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/insights/client.js":
/*!*****************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/insights/client.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ withInsights),
/* harmony export */   "inferPayload": () => (/* binding */ inferPayload)
/* harmony export */ });
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/find.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/uniq.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var getSelectedHits = function getSelectedHits(hits, selectedObjectIDs) {
  return selectedObjectIDs.map(function (objectID) {
    var hit = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.find)(hits, function (h) {
      return h.objectID === objectID;
    });

    if (typeof hit === 'undefined') {
      throw new Error("Could not find objectID \"".concat(objectID, "\" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID."));
    }

    return hit;
  });
};

var getQueryID = function getQueryID(selectedHits) {
  var queryIDs = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.uniq)(selectedHits.map(function (hit) {
    return hit.__queryID;
  }));

  if (queryIDs.length > 1) {
    throw new Error('Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.');
  }

  var queryID = queryIDs[0];

  if (typeof queryID !== 'string') {
    throw new Error("Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\n\nSee: https://alg.li/lNiZZ7");
  }

  return queryID;
};

var getPositions = function getPositions(selectedHits) {
  return selectedHits.map(function (hit) {
    return hit.__position;
  });
};

var inferPayload = function inferPayload(_ref) {
  var method = _ref.method,
      results = _ref.results,
      hits = _ref.hits,
      objectIDs = _ref.objectIDs;
  var index = results.index;
  var selectedHits = getSelectedHits(hits, objectIDs);
  var queryID = getQueryID(selectedHits);

  switch (method) {
    case 'clickedObjectIDsAfterSearch':
      {
        var positions = getPositions(selectedHits);
        return {
          index: index,
          queryID: queryID,
          objectIDs: objectIDs,
          positions: positions
        };
      }

    case 'convertedObjectIDsAfterSearch':
      return {
        index: index,
        queryID: queryID,
        objectIDs: objectIDs
      };

    default:
      throw new Error("Unsupported method passed to insights: \"".concat(method, "\"."));
  }
};

var wrapInsightsClient = function wrapInsightsClient(aa, results, hits) {
  return function (method) {
    for (var _len = arguments.length, payloads = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      payloads[_key - 1] = arguments[_key];
    }

    var payload = payloads[0];
     true ? (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.warning)(false, "`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/") : 0;

    if (!aa) {
      var withInstantSearchUsage = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createDocumentationMessageGenerator)({
        name: 'instantsearch'
      });
      throw new Error(withInstantSearchUsage('The `insightsClient` option has not been provided to `instantsearch`.'));
    }

    if (!Array.isArray(payload.objectIDs)) {
      throw new TypeError('Expected `objectIDs` to be an array.');
    }

    var inferredPayload = inferPayload({
      method: method,
      results: results,
      hits: hits,
      objectIDs: payload.objectIDs
    });
    aa(method, _objectSpread(_objectSpread({}, inferredPayload), payload));
  };
};
/**
 * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/
 * It passes `insights` to `HitsWithInsightsListener` and `InfiniteHitsWithInsightsListener`.
 */


function withInsights(connector) {
  return function (renderFn, unmountFn) {
    return connector(function (renderOptions, isFirstRender) {
      var results = renderOptions.results,
          hits = renderOptions.hits,
          instantSearchInstance = renderOptions.instantSearchInstance;

      if (results && hits && instantSearchInstance) {
        var insights = wrapInsightsClient(instantSearchInstance.insightsClient, results, hits);
        return renderFn(_objectSpread(_objectSpread({}, renderOptions), {}, {
          insights: insights
        }), isFirstRender);
      }

      return renderFn(renderOptions, isFirstRender);
    }, unmountFn);
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/insights/listener.js":
/*!*******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/insights/listener.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/serializer.js");
/* harmony import */ var _helpers_insights_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/insights.js */ "./node_modules/instantsearch.js/es/helpers/insights.js");




var findInsightsTarget = function findInsightsTarget(startElement, endElement, validator) {
  var element = startElement;

  while (element && !validator(element)) {
    if (element === endElement) {
      return null;
    }

    element = element.parentElement;
  }

  return element;
};

var parseInsightsEvent = function parseInsightsEvent(element) {
  var serializedPayload = element.getAttribute('data-insights-event');

  if (typeof serializedPayload !== 'string') {
    throw new Error('The insights middleware expects `data-insights-event` to be a base64-encoded JSON string.');
  }

  try {
    return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.deserializePayload)(serializedPayload);
  } catch (error) {
    throw new Error('The insights middleware was unable to parse `data-insights-event`.');
  }
};

var insightsListener = function insightsListener(BaseComponent) {
  function WithInsightsListener(props) {
    var handleClick = function handleClick(event) {
      if (props.sendEvent) {
        // new way with insights middleware
        var targetWithEvent = findInsightsTarget(event.target, event.currentTarget, function (element) {
          return element.hasAttribute('data-insights-event');
        });

        if (targetWithEvent) {
          var payload = parseInsightsEvent(targetWithEvent);
          payload.forEach(function (single) {
            return props.sendEvent(single);
          });
        }
      } // old way, e.g. instantsearch.insights("clickedObjectIDsAfterSearch", { .. })


      var insightsTarget = findInsightsTarget(event.target, event.currentTarget, function (element) {
        return (0,_helpers_insights_js__WEBPACK_IMPORTED_MODULE_2__.hasDataAttributes)(element);
      });

      if (insightsTarget) {
        var _readDataAttributes = (0,_helpers_insights_js__WEBPACK_IMPORTED_MODULE_2__.readDataAttributes)(insightsTarget),
            method = _readDataAttributes.method,
            _payload = _readDataAttributes.payload;

        props.insights(method, _payload);
      }
    };

    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("div", {
      onClick: handleClick
    }, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(BaseComponent, props));
  }

  return WithInsightsListener;
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (insightsListener);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/routers/history.js":
/*!*****************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/routers/history.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ historyRouter)
/* harmony export */ });
/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! qs */ "./node_modules/instantsearch.js/node_modules/qs/lib/index.js");
/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var setWindowTitle = function setWindowTitle(title) {
  if (title) {
    // This function is only executed on browsers so we can disable this check.
    // eslint-disable-next-line no-restricted-globals
    window.document.title = title;
  }
};

var BrowserHistory = /*#__PURE__*/function () {
  /**
   * Initializes a new storage provider that syncs the search state to the URL
   * using web APIs (`window.location.pushState` and `onpopstate` event).
   */
  function BrowserHistory(_ref) {
    var _this = this;

    var windowTitle = _ref.windowTitle,
        _ref$writeDelay = _ref.writeDelay,
        writeDelay = _ref$writeDelay === void 0 ? 400 : _ref$writeDelay,
        createURL = _ref.createURL,
        parseURL = _ref.parseURL,
        getLocation = _ref.getLocation;

    _classCallCheck(this, BrowserHistory);

    _defineProperty(this, "windowTitle", void 0);

    _defineProperty(this, "writeDelay", void 0);

    _defineProperty(this, "_createURL", void 0);

    _defineProperty(this, "parseURL", void 0);

    _defineProperty(this, "getLocation", void 0);

    _defineProperty(this, "writeTimer", void 0);

    _defineProperty(this, "inPopState", false);

    _defineProperty(this, "isDisposed", false);

    _defineProperty(this, "latestAcknowledgedHistory", 0);

    this.windowTitle = windowTitle;
    this.writeTimer = undefined;
    this.writeDelay = writeDelay;
    this._createURL = createURL;
    this.parseURL = parseURL;
    this.getLocation = getLocation;
    (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref2) {
      var window = _ref2.window;

      var title = _this.windowTitle && _this.windowTitle(_this.read());

      setWindowTitle(title);
      _this.latestAcknowledgedHistory = window.history.length;
    });
  }
  /**
   * Reads the URL and returns a syncable UI search state.
   */


  _createClass(BrowserHistory, [{
    key: "read",
    value: function read() {
      return this.parseURL({
        qsModule: qs__WEBPACK_IMPORTED_MODULE_0__,
        location: this.getLocation()
      });
    }
    /**
     * Pushes a search state into the URL.
     */

  }, {
    key: "write",
    value: function write(routeState) {
      var _this2 = this;

      (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref3) {
        var window = _ref3.window;

        var url = _this2.createURL(routeState);

        var title = _this2.windowTitle && _this2.windowTitle(routeState);

        if (_this2.writeTimer) {
          clearTimeout(_this2.writeTimer);
        }

        _this2.writeTimer = setTimeout(function () {
          setWindowTitle(title);

          if (_this2.shouldWrite(url)) {
            window.history.pushState(routeState, title || '', url);
            _this2.latestAcknowledgedHistory = window.history.length;
          }

          _this2.inPopState = false;
          _this2.writeTimer = undefined;
        }, _this2.writeDelay);
      });
    }
    /**
     * Sets a callback on the `onpopstate` event of the history API of the current page.
     * It enables the URL sync to keep track of the changes.
     */

  }, {
    key: "onUpdate",
    value: function onUpdate(callback) {
      var _this3 = this;

      this._onPopState = function (event) {
        if (_this3.writeTimer) {
          clearTimeout(_this3.writeTimer);
          _this3.writeTimer = undefined;
        }

        _this3.inPopState = true;
        var routeState = event.state; // At initial load, the state is read from the URL without update.
        // Therefore the state object is not available.
        // In this case, we fallback and read the URL.

        if (!routeState) {
          callback(_this3.read());
        } else {
          callback(routeState);
        }
      };

      (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref4) {
        var window = _ref4.window;
        window.addEventListener('popstate', _this3._onPopState);
      });
    }
    /**
     * Creates a complete URL from a given syncable UI state.
     *
     * It always generates the full URL, not a relative one.
     * This allows to handle cases like using a <base href>.
     * See: https://github.com/algolia/instantsearch.js/issues/790
     */

  }, {
    key: "createURL",
    value: function createURL(routeState) {
      return this._createURL({
        qsModule: qs__WEBPACK_IMPORTED_MODULE_0__,
        routeState: routeState,
        location: this.getLocation()
      });
    }
    /**
     * Removes the event listener and cleans up the URL.
     */

  }, {
    key: "dispose",
    value: function dispose() {
      var _this4 = this;

      this.isDisposed = true;
      (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref5) {
        var window = _ref5.window;

        if (_this4._onPopState) {
          window.removeEventListener('popstate', _this4._onPopState);
        }
      });

      if (this.writeTimer) {
        clearTimeout(this.writeTimer);
      }

      this.write({});
    }
  }, {
    key: "shouldWrite",
    value: function shouldWrite(url) {
      var _this5 = this;

      return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref6) {
        var window = _ref6.window;
        // We do want to `pushState` if:
        // - the router is not disposed, IS.js needs to update the URL
        // OR
        // - the last write was from InstantSearch.js
        // (unlike a SPA, where it would have last written)
        var lastPushWasByISAfterDispose = !(_this5.isDisposed && _this5.latestAcknowledgedHistory !== window.history.length);
        return (// When the last state change was through popstate, the IS.js state changes,
          // but that should not write the URL.
          !_this5.inPopState && // When the previous pushState after dispose was by IS.js, we want to write the URL.
          lastPushWasByISAfterDispose && // When the URL is the same as the current one, we do not want to write it.
          url !== window.location.href
        );
      });
    }
  }]);

  return BrowserHistory;
}();

function historyRouter() {
  var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      _ref7$createURL = _ref7.createURL,
      createURL = _ref7$createURL === void 0 ? function (_ref8) {
    var qsModule = _ref8.qsModule,
        routeState = _ref8.routeState,
        location = _ref8.location;
    var protocol = location.protocol,
        hostname = location.hostname,
        _location$port = location.port,
        port = _location$port === void 0 ? '' : _location$port,
        pathname = location.pathname,
        hash = location.hash;
    var queryString = qsModule.stringify(routeState);
    var portWithPrefix = port === '' ? '' : ":".concat(port); // IE <= 11 has no proper `location.origin` so we cannot rely on it.

    // IE <= 11 has no proper `location.origin` so we cannot rely on it.
    if (!queryString) {
      return "".concat(protocol, "//").concat(hostname).concat(portWithPrefix).concat(pathname).concat(hash);
    }

    return "".concat(protocol, "//").concat(hostname).concat(portWithPrefix).concat(pathname, "?").concat(queryString).concat(hash);
  } : _ref7$createURL,
      _ref7$parseURL = _ref7.parseURL,
      parseURL = _ref7$parseURL === void 0 ? function (_ref9) {
    var qsModule = _ref9.qsModule,
        location = _ref9.location;
    // `qs` by default converts arrays with more than 20 items to an object.
    // We want to avoid this because the data structure manipulated can therefore vary.
    // Setting the limit to `100` seems a good number because the engine's default is 100
    // (it can go up to 1000 but it is very unlikely to select more than 100 items in the UI).
    //
    // Using an `arrayLimit` of `n` allows `n + 1` items.
    //
    // See:
    //   - https://github.com/ljharb/qs#parsing-arrays
    //   - https://www.algolia.com/doc/api-reference/api-parameters/maxValuesPerFacet/
    return qsModule.parse(location.search.slice(1), {
      arrayLimit: 99
    });
  } : _ref7$parseURL,
      _ref7$writeDelay = _ref7.writeDelay,
      writeDelay = _ref7$writeDelay === void 0 ? 400 : _ref7$writeDelay,
      windowTitle = _ref7.windowTitle,
      _ref7$getLocation = _ref7.getLocation,
      getLocation = _ref7$getLocation === void 0 ? function () {
    return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref10) {
      var window = _ref10.window;
      return window.location;
    }, {
      fallback: function fallback() {
        throw new Error('You need to provide `getLocation` to the `history` router in environments where `window` does not exist.');
      }
    });
  } : _ref7$getLocation;

  return new BrowserHistory({
    createURL: createURL,
    parseURL: parseURL,
    writeDelay: writeDelay,
    windowTitle: windowTitle,
    getLocation: getLocation
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/stateMappings/simple.js":
/*!**********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/stateMappings/simple.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ simpleStateMapping)
/* harmony export */ });
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function getIndexStateWithoutConfigure(uiState) {
  var configure = uiState.configure,
      trackedUiState = _objectWithoutProperties(uiState, ["configure"]);

  return trackedUiState;
} // technically a URL could contain any key, since users provide it,
// which is why the input to this function is UiState, not something
// which excludes "configure" as this function does.


function simpleStateMapping() {
  return {
    stateToRoute: function stateToRoute(uiState) {
      return Object.keys(uiState).reduce(function (state, indexId) {
        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, getIndexStateWithoutConfigure(uiState[indexId])));
      }, {});
    },
    routeToState: function routeToState() {
      var routeState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return Object.keys(routeState).reduce(function (state, indexId) {
        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, getIndexStateWithoutConfigure(routeState[indexId])));
      }, {});
    }
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/suit.js":
/*!******************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/suit.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "component": () => (/* binding */ component)
/* harmony export */ });
var NAMESPACE = 'ais';
var component = function component(componentName) {
  return function () {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
        descendantName = _ref.descendantName,
        modifierName = _ref.modifierName;

    var descendent = descendantName ? "-".concat(descendantName) : '';
    var modifier = modifierName ? "--".concat(modifierName) : '';
    return "".concat(NAMESPACE, "-").concat(componentName).concat(descendent).concat(modifier);
  };
};

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/templating/prepareTemplateProps.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/templating/prepareTemplateProps.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "prepareTemplateProps": () => (/* binding */ prepareTemplateProps)
/* harmony export */ });
/* harmony import */ var _utils_uniq_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/uniq.js */ "./node_modules/instantsearch.js/es/lib/utils/uniq.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



function prepareTemplates( // can not use = {} here, since the template could have different constraints
defaultTemplates) {
  var templates = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var allKeys = (0,_utils_uniq_js__WEBPACK_IMPORTED_MODULE_0__.uniq)([].concat(_toConsumableArray(Object.keys(defaultTemplates || {})), _toConsumableArray(Object.keys(templates))));
  return allKeys.reduce(function (config, key) {
    var defaultTemplate = defaultTemplates ? defaultTemplates[key] : undefined;
    var customTemplate = templates[key];
    var isCustomTemplate = customTemplate !== undefined && customTemplate !== defaultTemplate;
    config.templates[key] = isCustomTemplate ? customTemplate // typescript doesn't recognize that this condition asserts customTemplate is defined
    : defaultTemplate;
    config.useCustomCompileOptions[key] = isCustomTemplate;
    return config;
  }, {
    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
    templates: {},
    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
    useCustomCompileOptions: {}
  });
}
/**
 * Prepares an object to be passed to the Template widget
 */


function prepareTemplateProps(_ref) {
  var defaultTemplates = _ref.defaultTemplates,
      templates = _ref.templates,
      templatesConfig = _ref.templatesConfig;
  var preparedTemplates = prepareTemplates(defaultTemplates, templates);
  return _objectSpread({
    templatesConfig: templatesConfig
  }, preparedTemplates);
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/templating/renderTemplate.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/templating/renderTemplate.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderTemplate": () => (/* binding */ renderTemplate)
/* harmony export */ });
/* harmony import */ var hogan_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hogan.js */ "./node_modules/hogan.js/lib/hogan.js");
/* harmony import */ var htm_preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! htm/preact */ "./node_modules/htm/preact/index.module.js");
/* harmony import */ var _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/components/index.js */ "./node_modules/instantsearch.js/es/helpers/components/Highlight.js");
/* harmony import */ var _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/components/index.js */ "./node_modules/instantsearch.js/es/helpers/components/ReverseHighlight.js");
/* harmony import */ var _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/components/index.js */ "./node_modules/instantsearch.js/es/helpers/components/Snippet.js");
/* harmony import */ var _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/components/index.js */ "./node_modules/instantsearch.js/es/helpers/components/ReverseSnippet.js");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





// We add all our template helper methods to the template as lambdas. Note
// that lambdas in Mustache are supposed to accept a second argument of
// `render` to get the rendered value, not the literal `{{value}}`. But
// this is currently broken (see https://github.com/twitter/hogan.js/issues/222).
function transformHelpersToHogan() {
  var helpers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var compileOptions = arguments.length > 1 ? arguments[1] : undefined;
  var data = arguments.length > 2 ? arguments[2] : undefined;
  return Object.keys(helpers).reduce(function (acc, helperKey) {
    return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, helperKey, function () {
      var _this = this;

      return function (text) {
        var render = function render(value) {
          return hogan_js__WEBPACK_IMPORTED_MODULE_0__.compile(value, compileOptions).render(_this);
        };

        return helpers[helperKey].call(data, text, render);
      };
    }));
  }, {});
}

function renderTemplate(_ref) {
  var templates = _ref.templates,
      templateKey = _ref.templateKey,
      compileOptions = _ref.compileOptions,
      helpers = _ref.helpers,
      data = _ref.data,
      bindEvent = _ref.bindEvent,
      sendEvent = _ref.sendEvent;
  var template = templates[templateKey];

  if (typeof template !== 'string' && typeof template !== 'function') {
    throw new Error("Template must be 'string' or 'function', was '".concat(_typeof(template), "' (key: ").concat(templateKey, ")"));
  }

  if (typeof template === 'function') {
    // @MAJOR no longer pass bindEvent when string templates are removed
    var params = bindEvent || {};
    params.html = htm_preact__WEBPACK_IMPORTED_MODULE_1__.html;
    params.sendEvent = sendEvent;
    params.components = {
      Highlight: _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_2__.Highlight,
      ReverseHighlight: _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_3__.ReverseHighlight,
      Snippet: _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_4__.Snippet,
      ReverseSnippet: _helpers_components_index_js__WEBPACK_IMPORTED_MODULE_5__.ReverseSnippet
    };
    return template(data, params);
  }

  var transformedHelpers = transformHelpersToHogan(helpers, compileOptions, data);
  return hogan_js__WEBPACK_IMPORTED_MODULE_0__.compile(template, compileOptions).render(_objectSpread(_objectSpread({}, data), {}, {
    helpers: transformedHelpers
  })).replace(/[ \n\r\t\f\xA0]+/g, function (spaces) {
    return spaces.replace(/(^|\xA0+)[^\xA0]+/g, '$1 ');
  }).trim();
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/capitalize.js":
/*!******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/capitalize.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "capitalize": () => (/* binding */ capitalize)
/* harmony export */ });
function capitalize(text) {
  return text.toString().charAt(0).toUpperCase() + text.toString().slice(1);
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/checkIndexUiState.js":
/*!*************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/checkIndexUiState.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkIndexUiState": () => (/* binding */ checkIndexUiState)
/* harmony export */ });
/* harmony import */ var _capitalize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./capitalize.js */ "./node_modules/instantsearch.js/es/lib/utils/capitalize.js");
/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logger.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
/* harmony import */ var _typedObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typedObject.js */ "./node_modules/instantsearch.js/es/lib/utils/typedObject.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }



 // Some connectors are responsible for multiple widgets so we need
// to map them.

function getWidgetNames(connectorName) {
  switch (connectorName) {
    case 'range':
      return [];

    case 'menu':
      return ['menu', 'menuSelect'];

    default:
      return [connectorName];
  }
}

var stateToWidgetsMap = {
  query: {
    connectors: ['connectSearchBox'],
    widgets: ['ais.searchBox', 'ais.autocomplete', 'ais.voiceSearch']
  },
  refinementList: {
    connectors: ['connectRefinementList'],
    widgets: ['ais.refinementList']
  },
  menu: {
    connectors: ['connectMenu'],
    widgets: ['ais.menu']
  },
  hierarchicalMenu: {
    connectors: ['connectHierarchicalMenu'],
    widgets: ['ais.hierarchicalMenu']
  },
  numericMenu: {
    connectors: ['connectNumericMenu'],
    widgets: ['ais.numericMenu']
  },
  ratingMenu: {
    connectors: ['connectRatingMenu'],
    widgets: ['ais.ratingMenu']
  },
  range: {
    connectors: ['connectRange'],
    widgets: ['ais.rangeInput', 'ais.rangeSlider', 'ais.range']
  },
  toggle: {
    connectors: ['connectToggleRefinement'],
    widgets: ['ais.toggleRefinement']
  },
  geoSearch: {
    connectors: ['connectGeoSearch'],
    widgets: ['ais.geoSearch']
  },
  sortBy: {
    connectors: ['connectSortBy'],
    widgets: ['ais.sortBy']
  },
  page: {
    connectors: ['connectPagination'],
    widgets: ['ais.pagination', 'ais.infiniteHits']
  },
  hitsPerPage: {
    connectors: ['connectHitsPerPage'],
    widgets: ['ais.hitsPerPage']
  },
  configure: {
    connectors: ['connectConfigure'],
    widgets: ['ais.configure']
  },
  places: {
    connectors: [],
    widgets: ['ais.places']
  }
};
function checkIndexUiState(_ref) {
  var index = _ref.index,
      indexUiState = _ref.indexUiState;
  var mountedWidgets = index.getWidgets().map(function (widget) {
    return widget.$$type;
  }).filter(Boolean);
  var missingWidgets = (0,_typedObject_js__WEBPACK_IMPORTED_MODULE_0__.keys)(indexUiState).reduce(function (acc, parameter) {
    var widgetUiState = stateToWidgetsMap[parameter];

    if (!widgetUiState) {
      return acc;
    }

    var requiredWidgets = widgetUiState.widgets;

    if (requiredWidgets && !requiredWidgets.some(function (requiredWidget) {
      return mountedWidgets.includes(requiredWidget);
    })) {
      acc.push([parameter, {
        connectors: widgetUiState.connectors,
        widgets: widgetUiState.widgets.map(function (widgetIdentifier) {
          return widgetIdentifier.split('ais.')[1];
        })
      }]);
    }

    return acc;
  }, []);
   true ? (0,_logger_js__WEBPACK_IMPORTED_MODULE_1__.warning)(missingWidgets.length === 0, "The UI state for the index \"".concat(index.getIndexId(), "\" is not consistent with the widgets mounted.\n\nThis can happen when the UI state is specified via `initialUiState`, `routing` or `setUiState` but that the widgets responsible for this state were not added. This results in those query parameters not being sent to the API.\n\nTo fully reflect the state, some widgets need to be added to the index \"").concat(index.getIndexId(), "\":\n\n").concat(missingWidgets.map(function (_ref2) {
    var _ref4;

    var _ref3 = _slicedToArray(_ref2, 2),
        stateParameter = _ref3[0],
        widgets = _ref3[1].widgets;

    return "- `".concat(stateParameter, "` needs one of these widgets: ").concat((_ref4 = []).concat.apply(_ref4, _toConsumableArray(widgets.map(function (name) {
      return getWidgetNames(name);
    }))).map(function (name) {
      return "\"".concat(name, "\"");
    }).join(', '));
  }).join('\n'), "\n\nIf you do not wish to display widgets but still want to support their search parameters, you can mount \"virtual widgets\" that don't render anything:\n\n```\n").concat(missingWidgets.filter(function (_ref5) {
    var _ref6 = _slicedToArray(_ref5, 2),
        _stateParameter = _ref6[0],
        connectors = _ref6[1].connectors;

    return connectors.length > 0;
  }).map(function (_ref7) {
    var _ref8 = _slicedToArray(_ref7, 2),
        _stateParameter = _ref8[0],
        _ref8$ = _ref8[1],
        connectors = _ref8$.connectors,
        widgets = _ref8$.widgets;

    var capitalizedWidget = (0,_capitalize_js__WEBPACK_IMPORTED_MODULE_2__.capitalize)(widgets[0]);
    var connectorName = connectors[0];
    return "const virtual".concat(capitalizedWidget, " = ").concat(connectorName, "(() => null);");
  }).join('\n'), "\n\nsearch.addWidgets([\n  ").concat(missingWidgets.filter(function (_ref9) {
    var _ref10 = _slicedToArray(_ref9, 2),
        _stateParameter = _ref10[0],
        connectors = _ref10[1].connectors;

    return connectors.length > 0;
  }).map(function (_ref11) {
    var _ref12 = _slicedToArray(_ref11, 2),
        _stateParameter = _ref12[0],
        widgets = _ref12[1].widgets;

    var capitalizedWidget = (0,_capitalize_js__WEBPACK_IMPORTED_MODULE_2__.capitalize)(widgets[0]);
    return "virtual".concat(capitalizedWidget, "({ /* ... */ })");
  }).join(',\n  '), "\n]);\n```\n\nIf you're using custom widgets that do set these query parameters, we recommend using connectors instead.\n\nSee https://www.algolia.com/doc/guides/building-search-ui/widgets/customize-an-existing-widget/js/#customize-the-complete-ui-of-the-widgets")) : 0;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/checkRendering.js":
/*!**********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/checkRendering.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkRendering": () => (/* binding */ checkRendering)
/* harmony export */ });
/* harmony import */ var _getObjectType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getObjectType.js */ "./node_modules/instantsearch.js/es/lib/utils/getObjectType.js");

function checkRendering(rendering, usage) {
  if (rendering === undefined || typeof rendering !== 'function') {
    throw new Error("The render function is not valid (received type ".concat((0,_getObjectType_js__WEBPACK_IMPORTED_MODULE_0__.getObjectType)(rendering), ").\n\n").concat(usage));
  }
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/concatHighlightedParts.js":
/*!******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/concatHighlightedParts.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "concatHighlightedParts": () => (/* binding */ concatHighlightedParts)
/* harmony export */ });
/* harmony import */ var _escape_highlight_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-highlight.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");

function concatHighlightedParts(parts) {
  var highlightPreTag = _escape_highlight_js__WEBPACK_IMPORTED_MODULE_0__.TAG_REPLACEMENT.highlightPreTag,
      highlightPostTag = _escape_highlight_js__WEBPACK_IMPORTED_MODULE_0__.TAG_REPLACEMENT.highlightPostTag;
  return parts.map(function (part) {
    return part.isHighlighted ? highlightPreTag + part.value + highlightPostTag : part.value;
  }).join('');
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/createSendEventForHits.js":
/*!******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/createSendEventForHits.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createBindEventForHits": () => (/* binding */ createBindEventForHits),
/* harmony export */   "createSendEventForHits": () => (/* binding */ createSendEventForHits)
/* harmony export */ });
/* harmony import */ var _serializer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serializer.js */ "./node_modules/instantsearch.js/es/lib/utils/serializer.js");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }



function chunk(arr) {
  var chunkSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;
  var chunks = [];

  for (var i = 0; i < Math.ceil(arr.length / chunkSize); i++) {
    chunks.push(arr.slice(i * chunkSize, (i + 1) * chunkSize));
  }

  return chunks;
}

var buildPayloads = function buildPayloads(_ref) {
  var index = _ref.index,
      widgetType = _ref.widgetType,
      methodName = _ref.methodName,
      args = _ref.args,
      isSearchStalled = _ref.isSearchStalled;

  // when there's only one argument, that means it's custom
  if (args.length === 1 && _typeof(args[0]) === 'object') {
    return [args[0]];
  }

  var eventType = args[0];
  var hits = args[1];
  var eventName = args[2];

  if (!hits) {
    if (true) {
      throw new Error("You need to pass hit or hits as the second argument like:\n  ".concat(methodName, "(eventType, hit);\n  "));
    } else {}
  }

  if ((eventType === 'click' || eventType === 'conversion') && !eventName) {
    if (true) {
      throw new Error("You need to pass eventName as the third argument for 'click' or 'conversion' events like:\n  ".concat(methodName, "('click', hit, 'Product Purchased');\n\n  To learn more about event naming: https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/in-depth/clicks-conversions-best-practices/\n  "));
    } else {}
  }

  var hitsArray = Array.isArray(hits) ? removeEscapedFromHits(hits) : [hits];

  if (hitsArray.length === 0) {
    return [];
  }

  var queryID = hitsArray[0].__queryID;
  var hitsChunks = chunk(hitsArray);
  var objectIDsByChunk = hitsChunks.map(function (batch) {
    return batch.map(function (hit) {
      return hit.objectID;
    });
  });
  var positionsByChunk = hitsChunks.map(function (batch) {
    return batch.map(function (hit) {
      return hit.__position;
    });
  });

  if (eventType === 'view') {
    if (isSearchStalled) {
      return [];
    }

    return hitsChunks.map(function (batch, i) {
      return {
        insightsMethod: 'viewedObjectIDs',
        widgetType: widgetType,
        eventType: eventType,
        payload: {
          eventName: eventName || 'Hits Viewed',
          index: index,
          objectIDs: objectIDsByChunk[i]
        },
        hits: batch
      };
    });
  } else if (eventType === 'click') {
    return hitsChunks.map(function (batch, i) {
      return {
        insightsMethod: 'clickedObjectIDsAfterSearch',
        widgetType: widgetType,
        eventType: eventType,
        payload: {
          eventName: eventName,
          index: index,
          queryID: queryID,
          objectIDs: objectIDsByChunk[i],
          positions: positionsByChunk[i]
        },
        hits: batch
      };
    });
  } else if (eventType === 'conversion') {
    return hitsChunks.map(function (batch, i) {
      return {
        insightsMethod: 'convertedObjectIDsAfterSearch',
        widgetType: widgetType,
        eventType: eventType,
        payload: {
          eventName: eventName,
          index: index,
          queryID: queryID,
          objectIDs: objectIDsByChunk[i]
        },
        hits: batch
      };
    });
  } else if (true) {
    throw new Error("eventType(\"".concat(eventType, "\") is not supported.\n    If you want to send a custom payload, you can pass one object: ").concat(methodName, "(customPayload);\n    "));
  } else {}
};

function removeEscapedFromHits(hits) {
  // remove `hits.__escaped` without mutating
  return hits.slice();
}

function createSendEventForHits(_ref2) {
  var instantSearchInstance = _ref2.instantSearchInstance,
      index = _ref2.index,
      widgetType = _ref2.widgetType;

  var sendEventForHits = function sendEventForHits() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var payloads = buildPayloads({
      widgetType: widgetType,
      index: index,
      methodName: 'sendEvent',
      args: args,
      isSearchStalled: instantSearchInstance.status === 'stalled'
    });
    payloads.forEach(function (payload) {
      return instantSearchInstance.sendEventToInsights(payload);
    });
  };

  return sendEventForHits;
}
function createBindEventForHits(_ref3) {
  var index = _ref3.index,
      widgetType = _ref3.widgetType;

  var bindEventForHits = function bindEventForHits() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    var payloads = buildPayloads({
      widgetType: widgetType,
      index: index,
      methodName: 'bindEvent',
      args: args,
      isSearchStalled: false
    });
    return payloads.length ? "data-insights-event=".concat((0,_serializer_js__WEBPACK_IMPORTED_MODULE_0__.serializePayload)(payloads)) : '';
  };

  return bindEventForHits;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/defer.js":
/*!*************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/defer.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "defer": () => (/* binding */ defer)
/* harmony export */ });
var nextMicroTask = Promise.resolve();
function defer(callback) {
  var progress = null;
  var cancelled = false;

  var fn = function fn() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    if (progress !== null) {
      return;
    }

    progress = nextMicroTask.then(function () {
      progress = null;

      if (cancelled) {
        cancelled = false;
        return;
      }

      callback.apply(void 0, args);
    });
  };

  fn.wait = function () {
    if (progress === null) {
      throw new Error('The deferred function should be called before calling `wait()`');
    }

    return progress;
  };

  fn.cancel = function () {
    if (progress === null) {
      return;
    }

    cancelled = true;
  };

  return fn;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/documentation.js":
/*!*********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/documentation.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createDocumentationLink": () => (/* binding */ createDocumentationLink),
/* harmony export */   "createDocumentationMessageGenerator": () => (/* binding */ createDocumentationMessageGenerator)
/* harmony export */ });
function createDocumentationLink(_ref) {
  var name = _ref.name,
      _ref$connector = _ref.connector,
      connector = _ref$connector === void 0 ? false : _ref$connector;
  return ['https://www.algolia.com/doc/api-reference/widgets/', name, '/js/', connector ? '#connector' : ''].join('');
}
function createDocumentationMessageGenerator() {
  for (var _len = arguments.length, widgets = new Array(_len), _key = 0; _key < _len; _key++) {
    widgets[_key] = arguments[_key];
  }

  var links = widgets.map(function (widget) {
    return createDocumentationLink(widget);
  }).join(', ');
  return function (message) {
    return [message, "See documentation: ".concat(links)].filter(Boolean).join('\n\n');
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js":
/*!************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TAG_PLACEHOLDER": () => (/* binding */ TAG_PLACEHOLDER),
/* harmony export */   "TAG_REPLACEMENT": () => (/* binding */ TAG_REPLACEMENT),
/* harmony export */   "escapeFacets": () => (/* binding */ escapeFacets),
/* harmony export */   "escapeHits": () => (/* binding */ escapeHits)
/* harmony export */ });
/* harmony import */ var _escape_html_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-html.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js");
/* harmony import */ var _isPlainObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isPlainObject.js */ "./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var TAG_PLACEHOLDER = {
  highlightPreTag: '__ais-highlight__',
  highlightPostTag: '__/ais-highlight__'
};
var TAG_REPLACEMENT = {
  highlightPreTag: '<mark>',
  highlightPostTag: '</mark>'
};

function replaceTagsAndEscape(value) {
  return (0,_escape_html_js__WEBPACK_IMPORTED_MODULE_0__.escape)(value).replace(new RegExp(TAG_PLACEHOLDER.highlightPreTag, 'g'), TAG_REPLACEMENT.highlightPreTag).replace(new RegExp(TAG_PLACEHOLDER.highlightPostTag, 'g'), TAG_REPLACEMENT.highlightPostTag);
}

function recursiveEscape(input) {
  if ((0,_isPlainObject_js__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(input) && typeof input.value !== 'string') {
    return Object.keys(input).reduce(function (acc, key) {
      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, recursiveEscape(input[key])));
    }, {});
  }

  if (Array.isArray(input)) {
    return input.map(recursiveEscape);
  }

  return _objectSpread(_objectSpread({}, input), {}, {
    value: replaceTagsAndEscape(input.value)
  });
}

function escapeHits(hits) {
  if (hits.__escaped === undefined) {
    // We don't override the value on hit because it will mutate the raw results
    // instead we make a shallow copy and we assign the escaped values on it.
    hits = hits.map(function (_ref) {
      var hit = _extends({}, _ref);

      if (hit._highlightResult) {
        hit._highlightResult = recursiveEscape(hit._highlightResult);
      }

      if (hit._snippetResult) {
        hit._snippetResult = recursiveEscape(hit._snippetResult);
      }

      return hit;
    });
    hits.__escaped = true;
  }

  return hits;
}
function escapeFacets(facetHits) {
  return facetHits.map(function (h) {
    return _objectSpread(_objectSpread({}, h), {}, {
      highlighted: replaceTagsAndEscape(h.highlighted)
    });
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js":
/*!*******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/escape-html.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "escape": () => (/* binding */ escape),
/* harmony export */   "unescape": () => (/* binding */ unescape)
/* harmony export */ });
/**
 * This implementation is taken from Lodash implementation.
 * See: https://github.com/lodash/lodash/blob/4.17.11-npm/escape.js
 */
// Used to map characters to HTML entities.
var htmlEntities = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;'
}; // Used to match HTML entities and HTML characters.

var regexUnescapedHtml = /[&<>"']/g;
var regexHasUnescapedHtml = RegExp(regexUnescapedHtml.source);
/**
 * Converts the characters "&", "<", ">", '"', and "'" in `string` to their
 * corresponding HTML entities.
 */

function escape(value) {
  return value && regexHasUnescapedHtml.test(value) ? value.replace(regexUnescapedHtml, function (character) {
    return htmlEntities[character];
  }) : value;
}
/**
 * This implementation is taken from Lodash implementation.
 * See: https://github.com/lodash/lodash/blob/4.17.11-npm/unescape.js
 */
// Used to map HTML entities to characters.

var htmlCharacters = {
  '&amp;': '&',
  '&lt;': '<',
  '&gt;': '>',
  '&quot;': '"',
  '&#39;': "'"
}; // Used to match HTML entities and HTML characters.

var regexEscapedHtml = /&(amp|quot|lt|gt|#39);/g;
var regexHasEscapedHtml = RegExp(regexEscapedHtml.source);
/**
 * Converts the HTML entities "&", "<", ">", '"', and "'" in `string` to their
 * characters.
 */

function unescape(value) {
  return value && regexHasEscapedHtml.test(value) ? value.replace(regexEscapedHtml, function (character) {
    return htmlCharacters[character];
  }) : value;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/find.js":
/*!************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/find.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "find": () => (/* binding */ find)
/* harmony export */ });
// We aren't using the native `Array.prototype.find` because the refactor away from Lodash is not
// published as a major version.
// Relying on the `find` polyfill on user-land, which before was only required for niche use-cases,
// was decided as too risky.
// @MAJOR Replace with the native `Array.prototype.find` method
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find
function find(items, predicate) {
  var value;

  for (var i = 0; i < items.length; i++) {
    value = items[i]; // inlined for performance: if (Call(predicate, thisArg, [value, i, list])) {

    if (predicate(value, i, items)) {
      return value;
    }
  }

  return undefined;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/findIndex.js":
/*!*****************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/findIndex.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "findIndex": () => (/* binding */ findIndex)
/* harmony export */ });
// We aren't using the native `Array.prototype.findIndex` because the refactor away from Lodash is not
// published as a major version.
// Relying on the `findIndex` polyfill on user-land, which before was only required for niche use-cases,
// was decided as too risky.
// @MAJOR Replace with the native `Array.prototype.findIndex` method
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex
function findIndex(array, comparator) {
  if (!Array.isArray(array)) {
    return -1;
  }

  for (var i = 0; i < array.length; i++) {
    if (comparator(array[i])) {
      return i;
    }
  }

  return -1;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js":
/*!************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getContainerNode": () => (/* binding */ getContainerNode)
/* harmony export */ });
/* harmony import */ var _isDomElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isDomElement.js */ "./node_modules/instantsearch.js/es/lib/utils/isDomElement.js");

/**
 * Return the container. If it's a string, it is considered a
 * css selector and retrieves the first matching element. Otherwise
 * test if it validates that it's a correct DOMElement.
 *
 * @param {string|HTMLElement} selectorOrHTMLElement CSS Selector or container node.
 * @return {HTMLElement} Container node
 * @throws Error when the type is not correct
 */

function getContainerNode(selectorOrHTMLElement) {
  var isSelectorString = typeof selectorOrHTMLElement === 'string';
  var domElement = isSelectorString ? document.querySelector(selectorOrHTMLElement) : selectorOrHTMLElement;

  if (!(0,_isDomElement_js__WEBPACK_IMPORTED_MODULE_0__.isDomElement)(domElement)) {
    var errorMessage = 'Container must be `string` or `HTMLElement`.';

    if (isSelectorString) {
      errorMessage += " Unable to find ".concat(selectorOrHTMLElement);
    }

    throw new Error(errorMessage);
  }

  return domElement;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/getHighlightFromSiblings.js":
/*!********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/getHighlightFromSiblings.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getHighlightFromSiblings": () => (/* binding */ getHighlightFromSiblings)
/* harmony export */ });
/* harmony import */ var _escape_html_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-html.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-html.js");

var hasAlphanumeric = new RegExp(/\w/i);
function getHighlightFromSiblings(parts, i) {
  var _parts, _parts2;

  var current = parts[i];
  var isNextHighlighted = ((_parts = parts[i + 1]) === null || _parts === void 0 ? void 0 : _parts.isHighlighted) || true;
  var isPreviousHighlighted = ((_parts2 = parts[i - 1]) === null || _parts2 === void 0 ? void 0 : _parts2.isHighlighted) || true;

  if (!hasAlphanumeric.test((0,_escape_html_js__WEBPACK_IMPORTED_MODULE_0__.unescape)(current.value)) && isPreviousHighlighted === isNextHighlighted) {
    return isPreviousHighlighted;
  }

  return current.isHighlighted;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getHighlightedParts": () => (/* binding */ getHighlightedParts)
/* harmony export */ });
/* harmony import */ var _escape_highlight_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-highlight.js */ "./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js");

function getHighlightedParts(highlightedValue) {
  var highlightPostTag = _escape_highlight_js__WEBPACK_IMPORTED_MODULE_0__.TAG_REPLACEMENT.highlightPostTag,
      highlightPreTag = _escape_highlight_js__WEBPACK_IMPORTED_MODULE_0__.TAG_REPLACEMENT.highlightPreTag;
  var splitByPreTag = highlightedValue.split(highlightPreTag);
  var firstValue = splitByPreTag.shift();
  var elements = !firstValue ? [] : [{
    value: firstValue,
    isHighlighted: false
  }];
  splitByPreTag.forEach(function (split) {
    var splitByPostTag = split.split(highlightPostTag);
    elements.push({
      value: splitByPostTag[0],
      isHighlighted: true
    });

    if (splitByPostTag[1] !== '') {
      elements.push({
        value: splitByPostTag[1],
        isHighlighted: false
      });
    }
  });
  return elements;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/getObjectType.js":
/*!*********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/getObjectType.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getObjectType": () => (/* binding */ getObjectType)
/* harmony export */ });
function getObjectType(object) {
  return Object.prototype.toString.call(object).slice(8, -1);
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js":
/*!*************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getPropertyByPath": () => (/* binding */ getPropertyByPath)
/* harmony export */ });
function getPropertyByPath(object, path) {
  var parts = Array.isArray(path) ? path : path.split('.');
  return parts.reduce(function (current, key) {
    return current && current[key];
  }, object);
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js":
/*!******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addAbsolutePosition": () => (/* binding */ addAbsolutePosition)
/* harmony export */ });
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function addAbsolutePosition(hits, page, hitsPerPage) {
  return hits.map(function (hit, idx) {
    return _objectSpread(_objectSpread({}, hit), {}, {
      __position: hitsPerPage * page + idx + 1
    });
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/hits-query-id.js":
/*!*********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/hits-query-id.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addQueryID": () => (/* binding */ addQueryID)
/* harmony export */ });
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function addQueryID(hits, queryID) {
  if (!queryID) {
    return hits;
  }

  return hits.map(function (hit) {
    return _objectSpread(_objectSpread({}, hit), {}, {
      __queryID: queryID
    });
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/isDomElement.js":
/*!********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/isDomElement.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isDomElement": () => (/* binding */ isDomElement)
/* harmony export */ });
function isDomElement(object) {
  return object instanceof HTMLElement || Boolean(object) && object.nodeType > 0;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/isEqual.js":
/*!***************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/isEqual.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isEqual": () => (/* binding */ isEqual)
/* harmony export */ });
function isPrimitive(obj) {
  return obj !== Object(obj);
}

function isEqual(first, second) {
  if (first === second) {
    return true;
  }

  if (isPrimitive(first) || isPrimitive(second) || typeof first === 'function' || typeof second === 'function') {
    return first === second;
  }

  if (Object.keys(first).length !== Object.keys(second).length) {
    return false;
  }

  for (var _i = 0, _Object$keys = Object.keys(first); _i < _Object$keys.length; _i++) {
    var key = _Object$keys[_i];

    if (!(key in second)) {
      return false;
    }

    if (!isEqual(first[key], second[key])) {
      return false;
    }
  }

  return true;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/isIndexWidget.js":
/*!*********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/isIndexWidget.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isIndexWidget": () => (/* binding */ isIndexWidget)
/* harmony export */ });
function isIndexWidget(widget) {
  return widget.$$type === 'ais.index';
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js":
/*!*********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isPlainObject": () => (/* binding */ isPlainObject)
/* harmony export */ });
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/**
 * This implementation is taken from Lodash implementation.
 * See: https://github.com/lodash/lodash/blob/master/isPlainObject.js
 */
function getTag(value) {
  if (value === null) {
    return value === undefined ? '[object Undefined]' : '[object Null]';
  }

  return Object.prototype.toString.call(value);
}

function isObjectLike(value) {
  return _typeof(value) === 'object' && value !== null;
}
/**
 * Checks if `value` is a plain object.
 *
 * A plain object is an object created by the `Object`
 * constructor or with a `[[Prototype]]` of `null`.
 */


function isPlainObject(value) {
  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {
    return false;
  }

  if (Object.getPrototypeOf(value) === null) {
    return true;
  }

  var proto = value;

  while (Object.getPrototypeOf(proto) !== null) {
    proto = Object.getPrototypeOf(proto);
  }

  return Object.getPrototypeOf(value) === proto;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/isSpecialClick.js":
/*!**********************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/isSpecialClick.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isSpecialClick": () => (/* binding */ isSpecialClick)
/* harmony export */ });
function isSpecialClick(event) {
  var isMiddleClick = event.button === 1;
  return isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/logger.js":
/*!**************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/logger.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deprecate": () => (/* binding */ deprecate),
/* harmony export */   "warn": () => (/* binding */ warn),
/* harmony export */   "warning": () => (/* binding */ _warning)
/* harmony export */ });
/* harmony import */ var _noop_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./noop.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");


/**
 * Logs a warning when this function is called, in development environment only.
 */
var deprecate = function deprecate(fn, message) {
  return fn;
};
/**
 * Logs a warning
 * This is used to log issues in development environment only.
 */


var warn = _noop_js__WEBPACK_IMPORTED_MODULE_0__.noop;
/**
 * Logs a warning if the condition is not met.
 * This is used to log issues in development environment only.
 */

var _warning = _noop_js__WEBPACK_IMPORTED_MODULE_0__.noop;

if (true) {
  warn = function warn(message) {
    // eslint-disable-next-line no-console
    console.warn("[InstantSearch.js]: ".concat(message.trim()));
  };

  deprecate = function deprecate(fn, message) {
    var hasAlreadyPrinted = false;
    return function () {
      if (!hasAlreadyPrinted) {
        hasAlreadyPrinted = true;
        warn(message);
      }

      return fn.apply(void 0, arguments);
    };
  };

  _warning = function warning(condition, message) {
    if (condition) {
      return;
    }

    var hasAlreadyPrinted = _warning.cache[message];

    if (!hasAlreadyPrinted) {
      _warning.cache[message] = true;
      warn(message);
    }
  };

  _warning.cache = {};
}



/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "mergeSearchParameters": () => (/* binding */ mergeSearchParameters)
/* harmony export */ });
/* harmony import */ var _findIndex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./findIndex.js */ "./node_modules/instantsearch.js/es/lib/utils/findIndex.js");
/* harmony import */ var _uniq_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./uniq.js */ "./node_modules/instantsearch.js/es/lib/utils/uniq.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }




var mergeWithRest = function mergeWithRest(left, right) {
  var facets = right.facets,
      disjunctiveFacets = right.disjunctiveFacets,
      facetsRefinements = right.facetsRefinements,
      facetsExcludes = right.facetsExcludes,
      disjunctiveFacetsRefinements = right.disjunctiveFacetsRefinements,
      numericRefinements = right.numericRefinements,
      tagRefinements = right.tagRefinements,
      hierarchicalFacets = right.hierarchicalFacets,
      hierarchicalFacetsRefinements = right.hierarchicalFacetsRefinements,
      ruleContexts = right.ruleContexts,
      rest = _objectWithoutProperties(right, ["facets", "disjunctiveFacets", "facetsRefinements", "facetsExcludes", "disjunctiveFacetsRefinements", "numericRefinements", "tagRefinements", "hierarchicalFacets", "hierarchicalFacetsRefinements", "ruleContexts"]);

  return left.setQueryParameters(rest);
}; // Merge facets


var mergeFacets = function mergeFacets(left, right) {
  return right.facets.reduce(function (_, name) {
    return _.addFacet(name);
  }, left);
};

var mergeDisjunctiveFacets = function mergeDisjunctiveFacets(left, right) {
  return right.disjunctiveFacets.reduce(function (_, name) {
    return _.addDisjunctiveFacet(name);
  }, left);
};

var mergeHierarchicalFacets = function mergeHierarchicalFacets(left, right) {
  return left.setQueryParameters({
    hierarchicalFacets: right.hierarchicalFacets.reduce(function (facets, facet) {
      var index = (0,_findIndex_js__WEBPACK_IMPORTED_MODULE_0__.findIndex)(facets, function (_) {
        return _.name === facet.name;
      });

      if (index === -1) {
        return facets.concat(facet);
      }

      var nextFacets = facets.slice();
      nextFacets.splice(index, 1, facet);
      return nextFacets;
    }, left.hierarchicalFacets)
  });
}; // Merge facet refinements


var mergeTagRefinements = function mergeTagRefinements(left, right) {
  return right.tagRefinements.reduce(function (_, value) {
    return _.addTagRefinement(value);
  }, left);
};

var mergeFacetRefinements = function mergeFacetRefinements(left, right) {
  return left.setQueryParameters({
    facetsRefinements: _objectSpread(_objectSpread({}, left.facetsRefinements), right.facetsRefinements)
  });
};

var mergeFacetsExcludes = function mergeFacetsExcludes(left, right) {
  return left.setQueryParameters({
    facetsExcludes: _objectSpread(_objectSpread({}, left.facetsExcludes), right.facetsExcludes)
  });
};

var mergeDisjunctiveFacetsRefinements = function mergeDisjunctiveFacetsRefinements(left, right) {
  return left.setQueryParameters({
    disjunctiveFacetsRefinements: _objectSpread(_objectSpread({}, left.disjunctiveFacetsRefinements), right.disjunctiveFacetsRefinements)
  });
};

var mergeNumericRefinements = function mergeNumericRefinements(left, right) {
  return left.setQueryParameters({
    numericRefinements: _objectSpread(_objectSpread({}, left.numericRefinements), right.numericRefinements)
  });
};

var mergeHierarchicalFacetsRefinements = function mergeHierarchicalFacetsRefinements(left, right) {
  return left.setQueryParameters({
    hierarchicalFacetsRefinements: _objectSpread(_objectSpread({}, left.hierarchicalFacetsRefinements), right.hierarchicalFacetsRefinements)
  });
};

var mergeRuleContexts = function mergeRuleContexts(left, right) {
  var ruleContexts = (0,_uniq_js__WEBPACK_IMPORTED_MODULE_1__.uniq)([].concat(left.ruleContexts).concat(right.ruleContexts).filter(Boolean));

  if (ruleContexts.length > 0) {
    return left.setQueryParameters({
      ruleContexts: ruleContexts
    });
  }

  return left;
};

var mergeSearchParameters = function mergeSearchParameters() {
  for (var _len = arguments.length, parameters = new Array(_len), _key = 0; _key < _len; _key++) {
    parameters[_key] = arguments[_key];
  }

  return parameters.reduce(function (left, right) {
    var hierarchicalFacetsRefinementsMerged = mergeHierarchicalFacetsRefinements(left, right);
    var hierarchicalFacetsMerged = mergeHierarchicalFacets(hierarchicalFacetsRefinementsMerged, right);
    var tagRefinementsMerged = mergeTagRefinements(hierarchicalFacetsMerged, right);
    var numericRefinementsMerged = mergeNumericRefinements(tagRefinementsMerged, right);
    var disjunctiveFacetsRefinementsMerged = mergeDisjunctiveFacetsRefinements(numericRefinementsMerged, right);
    var facetsExcludesMerged = mergeFacetsExcludes(disjunctiveFacetsRefinementsMerged, right);
    var facetRefinementsMerged = mergeFacetRefinements(facetsExcludesMerged, right);
    var disjunctiveFacetsMerged = mergeDisjunctiveFacets(facetRefinementsMerged, right);
    var ruleContextsMerged = mergeRuleContexts(disjunctiveFacetsMerged, right);
    var facetsMerged = mergeFacets(ruleContextsMerged, right);
    return mergeWithRest(facetsMerged, right);
  });
};

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/noop.js":
/*!************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/noop.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "noop": () => (/* binding */ noop)
/* harmony export */ });
function noop() {}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/range.js":
/*!*************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/range.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "range": () => (/* binding */ range)
/* harmony export */ });
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function range(_ref) {
  var _ref$start = _ref.start,
      start = _ref$start === void 0 ? 0 : _ref$start,
      end = _ref.end,
      _ref$step = _ref.step,
      step = _ref$step === void 0 ? 1 : _ref$step;
  // We can't divide by 0 so we re-assign the step to 1 if it happens.
  var limitStep = step === 0 ? 1 : step; // In some cases the array to create has a decimal length.
  // We therefore need to round the value.
  // Example:
  //   { start: 1, end: 5000, step: 500 }
  //   => Array length = (5000 - 1) / 500 = 9.998

  var arrayLength = Math.round((end - start) / limitStep);
  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {
    return start + current * limitStep;
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/render-args.js":
/*!*******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/render-args.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createInitArgs": () => (/* binding */ createInitArgs),
/* harmony export */   "createRenderArgs": () => (/* binding */ createRenderArgs)
/* harmony export */ });
function createInitArgs(instantSearchInstance, parent, uiState) {
  var helper = parent.getHelper();
  return {
    uiState: uiState,
    helper: helper,
    parent: parent,
    instantSearchInstance: instantSearchInstance,
    state: helper.state,
    renderState: instantSearchInstance.renderState,
    templatesConfig: instantSearchInstance.templatesConfig,
    createURL: parent.createURL,
    scopedResults: [],
    searchMetadata: {
      isSearchStalled: instantSearchInstance.status === 'stalled'
    },
    status: instantSearchInstance.status,
    error: instantSearchInstance.error
  };
}
function createRenderArgs(instantSearchInstance, parent) {
  var results = parent.getResults();
  return {
    helper: parent.getHelper(),
    parent: parent,
    instantSearchInstance: instantSearchInstance,
    results: results,
    scopedResults: parent.getScopedResults(),
    state: results._state,
    renderState: instantSearchInstance.renderState,
    templatesConfig: instantSearchInstance.templatesConfig,
    createURL: parent.createURL,
    searchMetadata: {
      isSearchStalled: instantSearchInstance.status === 'stalled'
    },
    status: instantSearchInstance.status,
    error: instantSearchInstance.error
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "resolveSearchParameters": () => (/* binding */ resolveSearchParameters)
/* harmony export */ });
function resolveSearchParameters(current) {
  var parent = current.getParent();
  var states = [current.getHelper().state];

  while (parent !== null) {
    states = [parent.getHelper().state].concat(states);
    parent = parent.getParent();
  }

  return states;
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/reverseHighlightedParts.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/reverseHighlightedParts.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "reverseHighlightedParts": () => (/* binding */ reverseHighlightedParts)
/* harmony export */ });
/* harmony import */ var _getHighlightFromSiblings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getHighlightFromSiblings.js */ "./node_modules/instantsearch.js/es/lib/utils/getHighlightFromSiblings.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


function reverseHighlightedParts(parts) {
  if (!parts.some(function (part) {
    return part.isHighlighted;
  })) {
    return parts.map(function (part) {
      return _objectSpread(_objectSpread({}, part), {}, {
        isHighlighted: false
      });
    });
  }

  return parts.map(function (part, i) {
    return _objectSpread(_objectSpread({}, part), {}, {
      isHighlighted: !(0,_getHighlightFromSiblings_js__WEBPACK_IMPORTED_MODULE_0__.getHighlightFromSiblings)(parts, i)
    });
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js":
/*!**************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "safelyRunOnBrowser": () => (/* binding */ safelyRunOnBrowser)
/* harmony export */ });
// eslint-disable-next-line no-restricted-globals

/**
 * Runs code on browser environments safely.
 */
function safelyRunOnBrowser(callback) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
    fallback: function fallback() {
      return undefined;
    }
  },
      fallback = _ref.fallback;

  // eslint-disable-next-line no-restricted-globals
  if (typeof window === 'undefined') {
    return fallback();
  } // eslint-disable-next-line no-restricted-globals


  return callback({
    window: window
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/serializer.js":
/*!******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/serializer.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deserializePayload": () => (/* binding */ deserializePayload),
/* harmony export */   "serializePayload": () => (/* binding */ serializePayload)
/* harmony export */ });
function serializePayload(payload) {
  return btoa(encodeURIComponent(JSON.stringify(payload)));
}
function deserializePayload(serialized) {
  return JSON.parse(decodeURIComponent(atob(serialized)));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/setIndexHelperState.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/setIndexHelperState.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setIndexHelperState": () => (/* binding */ setIndexHelperState)
/* harmony export */ });
/* harmony import */ var _isIndexWidget_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isIndexWidget.js */ "./node_modules/instantsearch.js/es/lib/utils/isIndexWidget.js");
/* harmony import */ var _checkIndexUiState_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checkIndexUiState.js */ "./node_modules/instantsearch.js/es/lib/utils/checkIndexUiState.js");


function setIndexHelperState(finalUiState, indexWidget) {
  var nextIndexUiState = finalUiState[indexWidget.getIndexId()] || {};

  if (true) {
    (0,_checkIndexUiState_js__WEBPACK_IMPORTED_MODULE_0__.checkIndexUiState)({
      index: indexWidget,
      indexUiState: nextIndexUiState
    });
  }

  indexWidget.getHelper().setState(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {
    uiState: nextIndexUiState
  }));
  indexWidget.getWidgets().filter(_isIndexWidget_js__WEBPACK_IMPORTED_MODULE_1__.isIndexWidget).forEach(function (widget) {
    return setIndexHelperState(finalUiState, widget);
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/toArray.js":
/*!***************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/toArray.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "toArray": () => (/* binding */ toArray)
/* harmony export */ });
function toArray(value) {
  return Array.isArray(value) ? value : [value];
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/typedObject.js":
/*!*******************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/typedObject.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "keys": () => (/* binding */ keys)
/* harmony export */ });
/**
 * A typed version of Object.keys, to use when looping over a static object
 * inspired from https://stackoverflow.com/a/65117465/3185307
 */
var keys = Object.keys;

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/utils/uniq.js":
/*!************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/utils/uniq.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "uniq": () => (/* binding */ uniq)
/* harmony export */ });
function uniq(array) {
  return array.filter(function (value, index, self) {
    return self.indexOf(value) === index;
  });
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/lib/version.js":
/*!*********************************************************!*\
  !*** ./node_modules/instantsearch.js/es/lib/version.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ('4.47.0');

/***/ }),

/***/ "./node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createMetadataMiddleware": () => (/* binding */ createMetadataMiddleware),
/* harmony export */   "isMetadataEnabled": () => (/* binding */ isMetadataEnabled)
/* harmony export */ });
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/render-args.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js");


function extractPayload(widgets, instantSearchInstance, payload) {
  var initOptions = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_0__.createInitArgs)(instantSearchInstance, instantSearchInstance.mainIndex, instantSearchInstance._initialUiState);
  widgets.forEach(function (widget) {
    var widgetParams = {};

    if (widget.getWidgetRenderState) {
      var renderState = widget.getWidgetRenderState(initOptions);

      if (renderState && renderState.widgetParams) {
        // casting, as we just earlier checked widgetParams exists, and thus an object
        widgetParams = renderState.widgetParams;
      }
    } // since we destructure in all widgets, the parameters with defaults are set to "undefined"


    var params = Object.keys(widgetParams).filter(function (key) {
      return widgetParams[key] !== undefined;
    });
    payload.widgets.push({
      type: widget.$$type,
      widgetType: widget.$$widgetType,
      params: params
    });

    if (widget.$$type === 'ais.index') {
      extractPayload(widget.getWidgets(), instantSearchInstance, payload);
    }
  });
}

function isMetadataEnabled() {
  return (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.safelyRunOnBrowser)(function (_ref) {
    var _window$navigator, _window$navigator$use;

    var window = _ref.window;
    return ((_window$navigator = window.navigator) === null || _window$navigator === void 0 ? void 0 : (_window$navigator$use = _window$navigator.userAgent) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.indexOf('Algolia Crawler')) > -1;
  }, {
    fallback: function fallback() {
      return false;
    }
  });
}
/**
 * Exposes the metadata of mounted widgets in a custom
 * `<meta name="instantsearch:widgets" />` tag. The metadata per widget is:
 * - applied parameters
 * - widget name
 * - connector name
 */

function createMetadataMiddleware() {
  return function (_ref2) {
    var instantSearchInstance = _ref2.instantSearchInstance;
    var payload = {
      widgets: []
    };
    var payloadContainer = document.createElement('meta');
    var refNode = document.querySelector('head');
    payloadContainer.name = 'instantsearch:widgets';
    return {
      onStateChange: function onStateChange() {},
      subscribe: function subscribe() {
        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)
        setTimeout(function () {
          var client = instantSearchInstance.client;
          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;
          extractPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);
          payloadContainer.content = JSON.stringify(payload);
          refNode.appendChild(payloadContainer);
        }, 0);
      },
      started: function started() {},
      unsubscribe: function unsubscribe() {
        payloadContainer.remove();
      }
    };
  };
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/middlewares/createRouterMiddleware.js":
/*!********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/middlewares/createRouterMiddleware.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createRouterMiddleware": () => (/* binding */ createRouterMiddleware)
/* harmony export */ });
/* harmony import */ var _lib_stateMappings_simple_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/stateMappings/simple.js */ "./node_modules/instantsearch.js/es/lib/stateMappings/simple.js");
/* harmony import */ var _lib_routers_history_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/routers/history.js */ "./node_modules/instantsearch.js/es/lib/routers/history.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/isEqual.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var createRouterMiddleware = function createRouterMiddleware() {
  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var _props$router = props.router,
      router = _props$router === void 0 ? (0,_lib_routers_history_js__WEBPACK_IMPORTED_MODULE_0__["default"])() : _props$router,
      _props$stateMapping = props.stateMapping,
      stateMapping = _props$stateMapping === void 0 ? (0,_lib_stateMappings_simple_js__WEBPACK_IMPORTED_MODULE_1__["default"])() : _props$stateMapping;
  return function (_ref) {
    var instantSearchInstance = _ref.instantSearchInstance;

    function topLevelCreateURL(nextState) {
      var uiState = Object.keys(nextState).reduce(function (acc, indexId) {
        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, indexId, nextState[indexId]));
      }, instantSearchInstance.mainIndex.getWidgetUiState({}));
      var route = stateMapping.stateToRoute(uiState);
      return router.createURL(route);
    } // casting to UiState here to keep createURL unaware of custom UiState
    // (as long as it's an object, it's ok)


    instantSearchInstance._createURL = topLevelCreateURL;
    var lastRouteState = undefined;
    var initialUiState = instantSearchInstance._initialUiState;
    return {
      onStateChange: function onStateChange(_ref2) {
        var uiState = _ref2.uiState;
        var routeState = stateMapping.stateToRoute(uiState);

        if (lastRouteState === undefined || !(0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isEqual)(lastRouteState, routeState)) {
          router.write(routeState);
          lastRouteState = routeState;
        }
      },
      subscribe: function subscribe() {
        instantSearchInstance._initialUiState = _objectSpread(_objectSpread({}, initialUiState), stateMapping.routeToState(router.read()));
        router.onUpdate(function (route) {
          instantSearchInstance.setUiState(stateMapping.routeToState(route));
        });
      },
      started: function started() {},
      unsubscribe: function unsubscribe() {
        router.dispose();
      }
    };
  };
};

/***/ }),

/***/ "./node_modules/instantsearch.js/es/types/algoliasearch.js":
/*!*****************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/types/algoliasearch.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var algoliasearch_helper_types_algoliasearch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! algoliasearch-helper/types/algoliasearch.js */ "./node_modules/algoliasearch-helper/types/algoliasearch.js");
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in algoliasearch_helper_types_algoliasearch_js__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => algoliasearch_helper_types_algoliasearch_js__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);



/***/ }),

/***/ "./node_modules/instantsearch.js/es/types/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/instantsearch.js/es/types/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _algoliasearch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./algoliasearch.js */ "./node_modules/instantsearch.js/es/types/algoliasearch.js");
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _algoliasearch_js__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _algoliasearch_js__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
// internal
 // Algolia-related
// eslint-disable-next-line import/export


 // component-related

 // instantsearch-related




 // widget-related








/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/configure/configure.js":
/*!*************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/configure/configure.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _connectors_configure_connectConfigure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../connectors/configure/connectConfigure.js */ "./node_modules/instantsearch.js/es/connectors/configure/connectConfigure.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/noop.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



/**
 * A list of [search parameters](https://www.algolia.com/doc/api-reference/search-api-parameters/)
 * to enable when the widget mounts.
 */

var configure = function configure(widgetParams) {
  // This is a renderless widget that falls back to the connector's
  // noop render and unmount functions.
  var makeWidget = (0,_connectors_configure_connectConfigure_js__WEBPACK_IMPORTED_MODULE_0__["default"])(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.noop);
  return _objectSpread(_objectSpread({}, makeWidget({
    searchParameters: widgetParams
  })), {}, {
    $$widgetType: 'ais.configure'
  });
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (configure);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/hits/defaultTemplates.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/hits/defaultTemplates.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var defaultTemplates = {
  empty: function empty() {
    return 'No results';
  },
  item: function item(data) {
    return JSON.stringify(data, null, 2);
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (defaultTemplates);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/hits/hits.js":
/*!***************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/hits/hits.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _connectors_hits_connectHits_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../connectors/hits/connectHits.js */ "./node_modules/instantsearch.js/es/connectors/hits/connectHits.js");
/* harmony import */ var _components_Hits_Hits_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/Hits/Hits.js */ "./node_modules/instantsearch.js/es/components/Hits/Hits.js");
/* harmony import */ var _defaultTemplates_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./defaultTemplates.js */ "./node_modules/instantsearch.js/es/widgets/hits/defaultTemplates.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js");
/* harmony import */ var _lib_templating_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/templating/index.js */ "./node_modules/instantsearch.js/es/lib/templating/prepareTemplateProps.js");
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");
/* harmony import */ var _lib_insights_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/insights/index.js */ "./node_modules/instantsearch.js/es/lib/insights/listener.js");
/* harmony import */ var _lib_insights_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../lib/insights/index.js */ "./node_modules/instantsearch.js/es/lib/insights/client.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }










var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.createDocumentationMessageGenerator)({
  name: 'hits'
});
var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_3__.component)('Hits');
var HitsWithInsightsListener = (0,_lib_insights_index_js__WEBPACK_IMPORTED_MODULE_4__["default"])(_components_Hits_Hits_js__WEBPACK_IMPORTED_MODULE_5__["default"]);

var renderer = function renderer(_ref) {
  var renderState = _ref.renderState,
      cssClasses = _ref.cssClasses,
      containerNode = _ref.containerNode,
      templates = _ref.templates;
  return function (_ref2, isFirstRendering) {
    var receivedHits = _ref2.hits,
        results = _ref2.results,
        instantSearchInstance = _ref2.instantSearchInstance,
        insights = _ref2.insights,
        bindEvent = _ref2.bindEvent;

    if (isFirstRendering) {
      renderState.templateProps = (0,_lib_templating_index_js__WEBPACK_IMPORTED_MODULE_6__.prepareTemplateProps)({
        defaultTemplates: _defaultTemplates_js__WEBPACK_IMPORTED_MODULE_7__["default"],
        templatesConfig: instantSearchInstance.templatesConfig,
        templates: templates
      });
      return;
    }

    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)((0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(HitsWithInsightsListener, {
      cssClasses: cssClasses,
      hits: receivedHits,
      results: results,
      templateProps: renderState.templateProps,
      insights: insights,
      sendEvent: function sendEvent(event) {
        instantSearchInstance.sendEventToInsights(event);
      },
      bindEvent: bindEvent
    }), containerNode);
  };
};

var hits = function hits(widgetParams) {
  var _ref3 = widgetParams || {},
      container = _ref3.container,
      escapeHTML = _ref3.escapeHTML,
      transformItems = _ref3.transformItems,
      _ref3$templates = _ref3.templates,
      templates = _ref3$templates === void 0 ? {} : _ref3$templates,
      _ref3$cssClasses = _ref3.cssClasses,
      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses;

  if (!container) {
    throw new Error(withUsage('The `container` option is required.'));
  }

  var containerNode = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.getContainerNode)(container);
  var cssClasses = {
    root: classnames__WEBPACK_IMPORTED_MODULE_1__(suit(), userCssClasses.root),
    emptyRoot: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      modifierName: 'empty'
    }), userCssClasses.emptyRoot),
    list: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'list'
    }), userCssClasses.list),
    item: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item'
    }), userCssClasses.item)
  };
  var specializedRenderer = renderer({
    containerNode: containerNode,
    cssClasses: cssClasses,
    renderState: {},
    templates: templates
  });
  var makeWidget = (0,_lib_insights_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])(_connectors_hits_connectHits_js__WEBPACK_IMPORTED_MODULE_10__["default"])(specializedRenderer, function () {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(null, containerNode);
  });
  return _objectSpread(_objectSpread({}, makeWidget({
    escapeHTML: escapeHTML,
    transformItems: transformItems
  })), {}, {
    $$widgetType: 'ais.hits'
  });
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (hits);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/index/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/index/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! algoliasearch-helper */ "./node_modules/algoliasearch-helper/index.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/isIndexWidget.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/render-args.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/checkIndexUiState.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/logger.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.createDocumentationMessageGenerator)({
  name: 'index-widget'
});

/**
 * This is the same content as helper._change / setState, but allowing for extra
 * UiState to be synchronized.
 * see: https://github.com/algolia/algoliasearch-helper-js/blob/6b835ffd07742f2d6b314022cce6848f5cfecd4a/src/algoliasearch.helper.js#L1311-L1324
 */
function privateHelperSetState(helper, _ref) {
  var state = _ref.state,
      isPageReset = _ref.isPageReset,
      _uiState = _ref._uiState;

  if (state !== helper.state) {
    helper.state = state;
    helper.emit('change', {
      state: helper.state,
      results: helper.lastResults,
      isPageReset: isPageReset,
      _uiState: _uiState
    });
  }
}

function getLocalWidgetsUiState(widgets, widgetStateOptions) {
  var initialUiState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  return widgets.reduce(function (uiState, widget) {
    if ((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isIndexWidget)(widget)) {
      return uiState;
    }

    if (!widget.getWidgetUiState && !widget.getWidgetState) {
      return uiState;
    }

    if (widget.getWidgetUiState) {
      return widget.getWidgetUiState(uiState, widgetStateOptions);
    }

    return widget.getWidgetState(uiState, widgetStateOptions);
  }, initialUiState);
}

function getLocalWidgetsSearchParameters(widgets, widgetSearchParametersOptions) {
  var initialSearchParameters = widgetSearchParametersOptions.initialSearchParameters,
      rest = _objectWithoutProperties(widgetSearchParametersOptions, ["initialSearchParameters"]);

  return widgets.filter(function (widget) {
    return !(0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isIndexWidget)(widget);
  }).reduce(function (state, widget) {
    if (!widget.getWidgetSearchParameters) {
      return state;
    }

    return widget.getWidgetSearchParameters(state, rest);
  }, initialSearchParameters);
}

function resetPageFromWidgets(widgets) {
  var indexWidgets = widgets.filter(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isIndexWidget);

  if (indexWidgets.length === 0) {
    return;
  }

  indexWidgets.forEach(function (widget) {
    var widgetHelper = widget.getHelper();
    privateHelperSetState(widgetHelper, {
      state: widgetHelper.state.resetPage(),
      isPageReset: true
    });
    resetPageFromWidgets(widget.getWidgets());
  });
}

function resolveScopedResultsFromWidgets(widgets) {
  var indexWidgets = widgets.filter(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isIndexWidget);
  return indexWidgets.reduce(function (scopedResults, current) {
    return scopedResults.concat.apply(scopedResults, [{
      indexId: current.getIndexId(),
      results: current.getResults(),
      helper: current.getHelper()
    }].concat(_toConsumableArray(resolveScopedResultsFromWidgets(current.getWidgets()))));
  }, []);
}

var index = function index(widgetParams) {
  if (widgetParams === undefined || widgetParams.indexName === undefined) {
    throw new Error(withUsage('The `indexName` option is required.'));
  }

  var indexName = widgetParams.indexName,
      _widgetParams$indexId = widgetParams.indexId,
      indexId = _widgetParams$indexId === void 0 ? indexName : _widgetParams$indexId;
  var localWidgets = [];
  var localUiState = {};
  var localInstantSearchInstance = null;
  var localParent = null;
  var helper = null;
  var derivedHelper = null;
  return {
    $$type: 'ais.index',
    $$widgetType: 'ais.index',
    getIndexName: function getIndexName() {
      return indexName;
    },
    getIndexId: function getIndexId() {
      return indexId;
    },
    getHelper: function getHelper() {
      return helper;
    },
    getResults: function getResults() {
      return derivedHelper && derivedHelper.lastResults;
    },
    getScopedResults: function getScopedResults() {
      var widgetParent = this.getParent(); // If the widget is the root, we consider itself as the only sibling.

      var widgetSiblings = widgetParent ? widgetParent.getWidgets() : [this];
      return resolveScopedResultsFromWidgets(widgetSiblings);
    },
    getParent: function getParent() {
      return localParent;
    },
    createURL: function createURL(nextState) {
      return localInstantSearchInstance._createURL(_defineProperty({}, indexId, getLocalWidgetsUiState(localWidgets, {
        searchParameters: nextState,
        helper: helper
      })));
    },
    getWidgets: function getWidgets() {
      return localWidgets;
    },
    addWidgets: function addWidgets(widgets) {
      var _this = this;

      if (!Array.isArray(widgets)) {
        throw new Error(withUsage('The `addWidgets` method expects an array of widgets.'));
      }

      if (widgets.some(function (widget) {
        return typeof widget.init !== 'function' && typeof widget.render !== 'function';
      })) {
        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));
      }

      localWidgets = localWidgets.concat(widgets);

      if (localInstantSearchInstance && Boolean(widgets.length)) {
        privateHelperSetState(helper, {
          state: getLocalWidgetsSearchParameters(localWidgets, {
            uiState: localUiState,
            initialSearchParameters: helper.state
          }),
          _uiState: localUiState
        }); // We compute the render state before calling `init` in a separate loop
        // to construct the whole render state object that is then passed to
        // `init`.

        widgets.forEach(function (widget) {
          if (widget.getRenderState) {
            var renderState = widget.getRenderState(localInstantSearchInstance.renderState[_this.getIndexId()] || {}, (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createInitArgs)(localInstantSearchInstance, _this, localInstantSearchInstance._initialUiState));
            storeRenderState({
              renderState: renderState,
              instantSearchInstance: localInstantSearchInstance,
              parent: _this
            });
          }
        });
        widgets.forEach(function (widget) {
          if (widget.init) {
            widget.init((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createInitArgs)(localInstantSearchInstance, _this, localInstantSearchInstance._initialUiState));
          }
        });
        localInstantSearchInstance.scheduleSearch();
      }

      return this;
    },
    removeWidgets: function removeWidgets(widgets) {
      var _this2 = this;

      if (!Array.isArray(widgets)) {
        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets.'));
      }

      if (widgets.some(function (widget) {
        return typeof widget.dispose !== 'function';
      })) {
        throw new Error(withUsage('The widget definition expects a `dispose` method.'));
      }

      localWidgets = localWidgets.filter(function (widget) {
        return widgets.indexOf(widget) === -1;
      });

      if (localInstantSearchInstance && Boolean(widgets.length)) {
        var nextState = widgets.reduce(function (state, widget) {
          // the `dispose` method exists at this point we already assert it
          var next = widget.dispose({
            helper: helper,
            state: state,
            parent: _this2
          });
          return next || state;
        }, helper.state);
        localUiState = getLocalWidgetsUiState(localWidgets, {
          searchParameters: nextState,
          helper: helper
        });
        helper.setState(getLocalWidgetsSearchParameters(localWidgets, {
          uiState: localUiState,
          initialSearchParameters: nextState
        }));

        if (localWidgets.length) {
          localInstantSearchInstance.scheduleSearch();
        }
      }

      return this;
    },
    init: function init(_ref2) {
      var _this3 = this,
          _instantSearchInstanc;

      var instantSearchInstance = _ref2.instantSearchInstance,
          parent = _ref2.parent,
          uiState = _ref2.uiState;

      if (helper !== null) {
        // helper is already initialized, therefore we do not need to set up
        // any listeners
        return;
      }

      localInstantSearchInstance = instantSearchInstance;
      localParent = parent;
      localUiState = uiState[indexId] || {}; // The `mainHelper` is already defined at this point. The instance is created
      // inside InstantSearch at the `start` method, which occurs before the `init`
      // step.

      var mainHelper = instantSearchInstance.mainHelper;
      var parameters = getLocalWidgetsSearchParameters(localWidgets, {
        uiState: localUiState,
        initialSearchParameters: new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchParameters({
          index: indexName
        })
      }); // This Helper is only used for state management we do not care about the
      // `searchClient`. Only the "main" Helper created at the `InstantSearch`
      // level is aware of the client.

      helper = algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__({}, parameters.index, parameters); // We forward the call to `search` to the "main" instance of the Helper
      // which is responsible for managing the queries (it's the only one that is
      // aware of the `searchClient`).

      helper.search = function () {
        if (instantSearchInstance.onStateChange) {
          instantSearchInstance.onStateChange({
            uiState: instantSearchInstance.mainIndex.getWidgetUiState({}),
            setUiState: function setUiState(nextState) {
              return instantSearchInstance.setUiState(nextState, false);
            }
          }); // We don't trigger a search when controlled because it becomes the
          // responsibility of `setUiState`.

          return mainHelper;
        }

        return mainHelper.search();
      };

      helper.searchWithoutTriggeringOnStateChange = function () {
        return mainHelper.search();
      }; // We use the same pattern for the `searchForFacetValues`.


      helper.searchForFacetValues = function (facetName, facetValue, maxFacetHits, userState) {
        var state = helper.state.setQueryParameters(userState);
        return mainHelper.searchForFacetValues(facetName, facetValue, maxFacetHits, state);
      };

      derivedHelper = mainHelper.derive(function () {
        return _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.mergeSearchParameters.apply(void 0, _toConsumableArray((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.resolveSearchParameters)(_this3)));
      });
      var indexInitialResults = (_instantSearchInstanc = instantSearchInstance._initialResults) === null || _instantSearchInstanc === void 0 ? void 0 : _instantSearchInstanc[this.getIndexId()];

      if (indexInitialResults) {
        // We restore the shape of the results provided to the instance to respect
        // the helper's structure.
        var results = new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchResults(new algoliasearch_helper__WEBPACK_IMPORTED_MODULE_0__.SearchParameters(indexInitialResults.state), indexInitialResults.results);
        derivedHelper.lastResults = results;
        helper.lastResults = results;
      } // Subscribe to the Helper state changes for the page before widgets
      // are initialized. This behavior mimics the original one of the Helper.
      // It makes sense to replicate it at the `init` step. We have another
      // listener on `change` below, once `init` is done.


      helper.on('change', function (_ref3) {
        var isPageReset = _ref3.isPageReset;

        if (isPageReset) {
          resetPageFromWidgets(localWidgets);
        }
      });
      derivedHelper.on('search', function () {
        // The index does not manage the "staleness" of the search. This is the
        // responsibility of the main instance. It does not make sense to manage
        // it at the index level because it's either: all of them or none of them
        // that are stalled. The queries are performed into a single network request.
        instantSearchInstance.scheduleStalledRender();

        if (true) {
          (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.checkIndexUiState)({
            index: _this3,
            indexUiState: localUiState
          });
        }
      });
      derivedHelper.on('result', function (_ref4) {
        var results = _ref4.results;
        // The index does not render the results it schedules a new render
        // to let all the other indices emit their own results. It allows us to
        // run the render process in one pass.
        instantSearchInstance.scheduleRender(); // the derived helper is the one which actually searches, but the helper
        // which is exposed e.g. via instance.helper, doesn't search, and thus
        // does not have access to lastResults, which it used to in pre-federated
        // search behavior.

        helper.lastResults = results;
      }); // We compute the render state before calling `init` in a separate loop
      // to construct the whole render state object that is then passed to
      // `init`.

      localWidgets.forEach(function (widget) {
        if (widget.getRenderState) {
          var renderState = widget.getRenderState(instantSearchInstance.renderState[_this3.getIndexId()] || {}, (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createInitArgs)(instantSearchInstance, _this3, uiState));
          storeRenderState({
            renderState: renderState,
            instantSearchInstance: instantSearchInstance,
            parent: _this3
          });
        }
      });
      localWidgets.forEach(function (widget) {
         true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.warning)( // if it has NO getWidgetState or if it has getWidgetUiState, we don't warn
        // aka we warn if there's _only_ getWidgetState
        !widget.getWidgetState || Boolean(widget.getWidgetUiState), 'The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead.') : 0;

        if (widget.init) {
          widget.init((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createInitArgs)(instantSearchInstance, _this3, uiState));
        }
      }); // Subscribe to the Helper state changes for the `uiState` once widgets
      // are initialized. Until the first render, state changes are part of the
      // configuration step. This is mainly for backward compatibility with custom
      // widgets. When the subscription happens before the `init` step, the (static)
      // configuration of the widget is pushed in the URL. That's what we want to avoid.
      // https://github.com/algolia/instantsearch.js/pull/994/commits/4a672ae3fd78809e213de0368549ef12e9dc9454

      helper.on('change', function (event) {
        var state = event.state;
        var _uiState = event._uiState;
        localUiState = getLocalWidgetsUiState(localWidgets, {
          searchParameters: state,
          helper: helper
        }, _uiState || {}); // We don't trigger an internal change when controlled because it
        // becomes the responsibility of `setUiState`.

        if (!instantSearchInstance.onStateChange) {
          instantSearchInstance.onInternalStateChange();
        }
      });

      if (indexInitialResults) {
        // If there are initial results, we're not notified of the next results
        // because we don't trigger an initial search. We therefore need to directly
        // schedule a render that will render the results injected on the helper.
        instantSearchInstance.scheduleRender();
      }
    },
    render: function render(_ref5) {
      var _this4 = this;

      var instantSearchInstance = _ref5.instantSearchInstance;

      if (!this.getResults()) {
        return;
      }

      localWidgets.forEach(function (widget) {
        if (widget.getRenderState) {
          var renderState = widget.getRenderState(instantSearchInstance.renderState[_this4.getIndexId()] || {}, (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createRenderArgs)(instantSearchInstance, _this4));
          storeRenderState({
            renderState: renderState,
            instantSearchInstance: instantSearchInstance,
            parent: _this4
          });
        }
      });
      localWidgets.forEach(function (widget) {
        // At this point, all the variables used below are set. Both `helper`
        // and `derivedHelper` have been created at the `init` step. The attribute
        // `lastResults` might be `null` though. It's possible that a stalled render
        // happens before the result e.g with a dynamically added index the request might
        // be delayed. The render is triggered for the complete tree but some parts do
        // not have results yet.
        if (widget.render) {
          widget.render((0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createRenderArgs)(instantSearchInstance, _this4));
        }
      });
    },
    dispose: function dispose() {
      var _this5 = this;

      localWidgets.forEach(function (widget) {
        if (widget.dispose) {
          // The dispose function is always called once the instance is started
          // (it's an effect of `removeWidgets`). The index is initialized and
          // the Helper is available. We don't care about the return value of
          // `dispose` because the index is removed. We can't call `removeWidgets`
          // because we want to keep the widgets on the instance, to allow idempotent
          // operations on `add` & `remove`.
          widget.dispose({
            helper: helper,
            state: helper.state,
            parent: _this5
          });
        }
      });
      localInstantSearchInstance = null;
      localParent = null;
      helper.removeAllListeners();
      helper = null;
      derivedHelper.detach();
      derivedHelper = null;
    },
    getWidgetUiState: function getWidgetUiState(uiState) {
      return localWidgets.filter(_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.isIndexWidget).reduce(function (previousUiState, innerIndex) {
        return innerIndex.getWidgetUiState(previousUiState);
      }, _objectSpread(_objectSpread({}, uiState), {}, _defineProperty({}, this.getIndexId(), localUiState)));
    },
    getWidgetState: function getWidgetState(uiState) {
       true ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.warning)(false, 'The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead.') : 0;
      return this.getWidgetUiState(uiState);
    },
    getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {
      var uiState = _ref6.uiState;
      return getLocalWidgetsSearchParameters(localWidgets, {
        uiState: uiState,
        initialSearchParameters: searchParameters
      });
    },
    refreshUiState: function refreshUiState() {
      localUiState = getLocalWidgetsUiState(localWidgets, {
        searchParameters: this.getHelper().state,
        helper: this.getHelper()
      }, localUiState);
    }
  };
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (index);

function storeRenderState(_ref7) {
  var renderState = _ref7.renderState,
      instantSearchInstance = _ref7.instantSearchInstance,
      parent = _ref7.parent;
  var parentIndexName = parent ? parent.getIndexId() : instantSearchInstance.mainIndex.getIndexId();
  instantSearchInstance.renderState = _objectSpread(_objectSpread({}, instantSearchInstance.renderState), {}, _defineProperty({}, parentIndexName, _objectSpread(_objectSpread({}, instantSearchInstance.renderState[parentIndexName]), renderState)));
}

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/pagination/pagination.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/pagination/pagination.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _components_Pagination_Pagination_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/Pagination/Pagination.js */ "./node_modules/instantsearch.js/es/components/Pagination/Pagination.js");
/* harmony import */ var _connectors_pagination_connectPagination_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../connectors/pagination/connectPagination.js */ "./node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js");
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_2__.component)('Pagination');
var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.createDocumentationMessageGenerator)({
  name: 'pagination'
});
var defaultTemplates = {
  previous: '‹',
  next: '›',
  first: '«',
  last: '»'
};

var renderer = function renderer(_ref) {
  var containerNode = _ref.containerNode,
      cssClasses = _ref.cssClasses,
      templates = _ref.templates,
      showFirst = _ref.showFirst,
      showLast = _ref.showLast,
      showPrevious = _ref.showPrevious,
      showNext = _ref.showNext,
      scrollToNode = _ref.scrollToNode;
  return function (_ref2, isFirstRendering) {
    var createURL = _ref2.createURL,
        currentRefinement = _ref2.currentRefinement,
        nbPages = _ref2.nbPages,
        pages = _ref2.pages,
        isFirstPage = _ref2.isFirstPage,
        isLastPage = _ref2.isLastPage,
        refine = _ref2.refine;
    if (isFirstRendering) return;

    var setCurrentPage = function setCurrentPage(pageNumber) {
      refine(pageNumber);

      if (scrollToNode !== false) {
        scrollToNode.scrollIntoView();
      }
    };

    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)((0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Pagination_Pagination_js__WEBPACK_IMPORTED_MODULE_4__["default"], {
      createURL: createURL,
      cssClasses: cssClasses,
      currentPage: currentRefinement,
      templates: templates,
      nbPages: nbPages,
      pages: pages,
      isFirstPage: isFirstPage,
      isLastPage: isLastPage,
      setCurrentPage: setCurrentPage,
      showFirst: showFirst,
      showLast: showLast,
      showPrevious: showPrevious,
      showNext: showNext
    }), containerNode);
  };
};

var pagination = function pagination(widgetParams) {
  var _ref3 = widgetParams || {},
      container = _ref3.container,
      _ref3$templates = _ref3.templates,
      userTemplates = _ref3$templates === void 0 ? {} : _ref3$templates,
      _ref3$cssClasses = _ref3.cssClasses,
      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,
      totalPages = _ref3.totalPages,
      padding = _ref3.padding,
      _ref3$showFirst = _ref3.showFirst,
      showFirst = _ref3$showFirst === void 0 ? true : _ref3$showFirst,
      _ref3$showLast = _ref3.showLast,
      showLast = _ref3$showLast === void 0 ? true : _ref3$showLast,
      _ref3$showPrevious = _ref3.showPrevious,
      showPrevious = _ref3$showPrevious === void 0 ? true : _ref3$showPrevious,
      _ref3$showNext = _ref3.showNext,
      showNext = _ref3$showNext === void 0 ? true : _ref3$showNext,
      _ref3$scrollTo = _ref3.scrollTo,
      userScrollTo = _ref3$scrollTo === void 0 ? 'body' : _ref3$scrollTo;

  if (!container) {
    throw new Error(withUsage('The `container` option is required.'));
  }

  var containerNode = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.getContainerNode)(container);
  var scrollTo = userScrollTo === true ? 'body' : userScrollTo;
  var scrollToNode = scrollTo !== false ? (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.getContainerNode)(scrollTo) : false;
  var cssClasses = {
    root: classnames__WEBPACK_IMPORTED_MODULE_1__(suit(), userCssClasses.root),
    noRefinementRoot: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      modifierName: 'noRefinement'
    }), userCssClasses.noRefinementRoot),
    list: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'list'
    }), userCssClasses.list),
    item: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item'
    }), userCssClasses.item),
    firstPageItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'firstPage'
    }), userCssClasses.firstPageItem),
    lastPageItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'lastPage'
    }), userCssClasses.lastPageItem),
    previousPageItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'previousPage'
    }), userCssClasses.previousPageItem),
    nextPageItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'nextPage'
    }), userCssClasses.nextPageItem),
    pageItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'page'
    }), userCssClasses.pageItem),
    selectedItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'selected'
    }), userCssClasses.selectedItem),
    disabledItem: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'item',
      modifierName: 'disabled'
    }), userCssClasses.disabledItem),
    link: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'link'
    }), userCssClasses.link)
  };

  var templates = _objectSpread(_objectSpread({}, defaultTemplates), userTemplates);

  var specializedRenderer = renderer({
    containerNode: containerNode,
    cssClasses: cssClasses,
    templates: templates,
    showFirst: showFirst,
    showLast: showLast,
    showPrevious: showPrevious,
    showNext: showNext,
    scrollToNode: scrollToNode
  });
  var makeWidget = (0,_connectors_pagination_connectPagination_js__WEBPACK_IMPORTED_MODULE_6__["default"])(specializedRenderer, function () {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(null, containerNode);
  });
  return _objectSpread(_objectSpread({}, makeWidget({
    totalPages: totalPages,
    padding: padding
  })), {}, {
    $$widgetType: 'ais.pagination'
  });
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pagination);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/search-box/defaultTemplates.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/search-box/defaultTemplates.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");


var _ref2 = (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("path", {
  d: "M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"
});

var _ref4 = (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("path", {
  d: "M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"
});

var _ref6 = (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("g", {
  fill: "none",
  fillRule: "evenodd"
}, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("g", {
  transform: "translate(1 1)",
  strokeWidth: "2"
}, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("circle", {
  strokeOpacity: ".5",
  cx: "18",
  cy: "18",
  r: "18"
}), (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("path", {
  d: "M36 18c0-9.94-8.06-18-18-18"
}, (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("animateTransform", {
  attributeName: "transform",
  type: "rotate",
  from: "0 18 18",
  to: "360 18 18",
  dur: "1s",
  repeatCount: "indefinite"
}))));

var defaultTemplate = {
  reset: function reset(_ref) {
    var cssClasses = _ref.cssClasses;
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("svg", {
      className: cssClasses.resetIcon,
      viewBox: "0 0 20 20",
      width: "10",
      height: "10"
    }, _ref2);
  },
  submit: function submit(_ref3) {
    var cssClasses = _ref3.cssClasses;
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("svg", {
      className: cssClasses.submitIcon,
      width: "10",
      height: "10",
      viewBox: "0 0 40 40"
    }, _ref4);
  },
  loadingIndicator: function loadingIndicator(_ref5) {
    var cssClasses = _ref5.cssClasses;
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)("svg", {
      className: cssClasses.loadingIcon,
      width: "16",
      height: "16",
      viewBox: "0 0 38 38",
      stroke: "#444"
    }, _ref6);
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (defaultTemplate);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/search-box/search-box.js":
/*!***************************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/search-box/search-box.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js");
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");
/* harmony import */ var _connectors_search_box_connectSearchBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../connectors/search-box/connectSearchBox.js */ "./node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js");
/* harmony import */ var _components_SearchBox_SearchBox_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/SearchBox/SearchBox.js */ "./node_modules/instantsearch.js/es/components/SearchBox/SearchBox.js");
/* harmony import */ var _defaultTemplates_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./defaultTemplates.js */ "./node_modules/instantsearch.js/es/widgets/search-box/defaultTemplates.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }








var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.createDocumentationMessageGenerator)({
  name: 'search-box'
});
var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_3__.component)('SearchBox');

var renderer = function renderer(_ref) {
  var containerNode = _ref.containerNode,
      cssClasses = _ref.cssClasses,
      placeholder = _ref.placeholder,
      templates = _ref.templates,
      autofocus = _ref.autofocus,
      searchAsYouType = _ref.searchAsYouType,
      showReset = _ref.showReset,
      showSubmit = _ref.showSubmit,
      showLoadingIndicator = _ref.showLoadingIndicator;
  return function (_ref2) {
    var refine = _ref2.refine,
        query = _ref2.query,
        isSearchStalled = _ref2.isSearchStalled;
    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)((0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_SearchBox_SearchBox_js__WEBPACK_IMPORTED_MODULE_4__["default"], {
      query: query,
      placeholder: placeholder,
      autofocus: autofocus,
      refine: refine,
      searchAsYouType: searchAsYouType,
      templates: templates,
      showSubmit: showSubmit,
      showReset: showReset,
      showLoadingIndicator: showLoadingIndicator,
      isSearchStalled: isSearchStalled,
      cssClasses: cssClasses
    }), containerNode);
  };
};
/**
 * The searchbox widget is used to let the user set a text based query.
 *
 * This is usually the  main entry point to start the search in an instantsearch context. For that
 * reason is usually placed on top, and not hidden so that the user can start searching right
 * away.
 *
 */


var searchBox = function searchBox(widgetParams) {
  var _ref3 = widgetParams || {},
      container = _ref3.container,
      _ref3$placeholder = _ref3.placeholder,
      placeholder = _ref3$placeholder === void 0 ? '' : _ref3$placeholder,
      _ref3$cssClasses = _ref3.cssClasses,
      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,
      _ref3$autofocus = _ref3.autofocus,
      autofocus = _ref3$autofocus === void 0 ? false : _ref3$autofocus,
      _ref3$searchAsYouType = _ref3.searchAsYouType,
      searchAsYouType = _ref3$searchAsYouType === void 0 ? true : _ref3$searchAsYouType,
      _ref3$showReset = _ref3.showReset,
      showReset = _ref3$showReset === void 0 ? true : _ref3$showReset,
      _ref3$showSubmit = _ref3.showSubmit,
      showSubmit = _ref3$showSubmit === void 0 ? true : _ref3$showSubmit,
      _ref3$showLoadingIndi = _ref3.showLoadingIndicator,
      showLoadingIndicator = _ref3$showLoadingIndi === void 0 ? true : _ref3$showLoadingIndi,
      queryHook = _ref3.queryHook,
      _ref3$templates = _ref3.templates,
      userTemplates = _ref3$templates === void 0 ? {} : _ref3$templates;

  if (!container) {
    throw new Error(withUsage('The `container` option is required.'));
  }

  var containerNode = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_5__.getContainerNode)(container);
  var cssClasses = {
    root: classnames__WEBPACK_IMPORTED_MODULE_1__(suit(), userCssClasses.root),
    form: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'form'
    }), userCssClasses.form),
    input: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'input'
    }), userCssClasses.input),
    submit: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'submit'
    }), userCssClasses.submit),
    submitIcon: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'submitIcon'
    }), userCssClasses.submitIcon),
    reset: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'reset'
    }), userCssClasses.reset),
    resetIcon: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'resetIcon'
    }), userCssClasses.resetIcon),
    loadingIndicator: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'loadingIndicator'
    }), userCssClasses.loadingIndicator),
    loadingIcon: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'loadingIcon'
    }), userCssClasses.loadingIcon)
  };

  var templates = _objectSpread(_objectSpread({}, _defaultTemplates_js__WEBPACK_IMPORTED_MODULE_6__["default"]), userTemplates);

  var specializedRenderer = renderer({
    containerNode: containerNode,
    cssClasses: cssClasses,
    placeholder: placeholder,
    templates: templates,
    autofocus: autofocus,
    searchAsYouType: searchAsYouType,
    showReset: showReset,
    showSubmit: showSubmit,
    showLoadingIndicator: showLoadingIndicator
  });
  var makeWidget = (0,_connectors_search_box_connectSearchBox_js__WEBPACK_IMPORTED_MODULE_7__["default"])(specializedRenderer, function () {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(null, containerNode);
  });
  return _objectSpread(_objectSpread({}, makeWidget({
    queryHook: queryHook
  })), {}, {
    $$widgetType: 'ais.searchBox'
  });
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (searchBox);

/***/ }),

/***/ "./node_modules/instantsearch.js/es/widgets/stats/stats.js":
/*!*****************************************************************!*\
  !*** ./node_modules/instantsearch.js/es/widgets/stats/stats.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "defaultTemplates": () => (/* binding */ defaultTemplates)
/* harmony export */ });
/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ "./node_modules/preact/dist/preact.module.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var _components_Stats_Stats_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/Stats/Stats.js */ "./node_modules/instantsearch.js/es/components/Stats/Stats.js");
/* harmony import */ var _connectors_stats_connectStats_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../connectors/stats/connectStats.js */ "./node_modules/instantsearch.js/es/connectors/stats/connectStats.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/documentation.js");
/* harmony import */ var _lib_utils_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/utils/index.js */ "./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js");
/* harmony import */ var _lib_templating_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../lib/templating/index.js */ "./node_modules/instantsearch.js/es/lib/templating/prepareTemplateProps.js");
/* harmony import */ var _lib_suit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/suit.js */ "./node_modules/instantsearch.js/es/lib/suit.js");
/* harmony import */ var _lib_formatNumber_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/formatNumber.js */ "./node_modules/instantsearch.js/es/lib/formatNumber.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }









var withUsage = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.createDocumentationMessageGenerator)({
  name: 'stats'
});
var suit = (0,_lib_suit_js__WEBPACK_IMPORTED_MODULE_3__.component)('Stats');
var defaultTemplates = {
  text: function text(props) {
    return "".concat(props.areHitsSorted ? getSortedResultsSentence(props) : getResultsSentence(props), " found in ").concat(props.processingTimeMS, "ms");
  }
};

function getSortedResultsSentence(_ref) {
  var nbHits = _ref.nbHits,
      hasNoSortedResults = _ref.hasNoSortedResults,
      hasOneSortedResults = _ref.hasOneSortedResults,
      hasManySortedResults = _ref.hasManySortedResults,
      nbSortedHits = _ref.nbSortedHits;
  var suffix = "sorted out of ".concat((0,_lib_formatNumber_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(nbHits));

  if (hasNoSortedResults) {
    return "No relevant results ".concat(suffix);
  }

  if (hasOneSortedResults) {
    return "1 relevant result ".concat(suffix);
  }

  if (hasManySortedResults) {
    return "".concat((0,_lib_formatNumber_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(nbSortedHits || 0), " relevant results ").concat(suffix);
  }

  return '';
}

function getResultsSentence(_ref2) {
  var nbHits = _ref2.nbHits,
      hasNoResults = _ref2.hasNoResults,
      hasOneResult = _ref2.hasOneResult,
      hasManyResults = _ref2.hasManyResults;

  if (hasNoResults) {
    return 'No results';
  }

  if (hasOneResult) {
    return '1 result';
  }

  if (hasManyResults) {
    return "".concat((0,_lib_formatNumber_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(nbHits), " results");
  }

  return '';
}

var renderer = function renderer(_ref3) {
  var renderState = _ref3.renderState,
      cssClasses = _ref3.cssClasses,
      containerNode = _ref3.containerNode,
      templates = _ref3.templates;
  return function (_ref4, isFirstRendering) {
    var hitsPerPage = _ref4.hitsPerPage,
        nbHits = _ref4.nbHits,
        nbSortedHits = _ref4.nbSortedHits,
        areHitsSorted = _ref4.areHitsSorted,
        nbPages = _ref4.nbPages,
        page = _ref4.page,
        processingTimeMS = _ref4.processingTimeMS,
        query = _ref4.query,
        instantSearchInstance = _ref4.instantSearchInstance;

    if (isFirstRendering) {
      renderState.templateProps = (0,_lib_templating_index_js__WEBPACK_IMPORTED_MODULE_5__.prepareTemplateProps)({
        defaultTemplates: defaultTemplates,
        templatesConfig: instantSearchInstance.templatesConfig,
        templates: templates
      });
      return;
    }

    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)((0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Stats_Stats_js__WEBPACK_IMPORTED_MODULE_6__["default"], {
      cssClasses: cssClasses,
      hitsPerPage: hitsPerPage,
      nbHits: nbHits,
      nbSortedHits: nbSortedHits,
      areHitsSorted: areHitsSorted,
      nbPages: nbPages,
      page: page,
      processingTimeMS: processingTimeMS,
      query: query,
      templateProps: renderState.templateProps
    }), containerNode);
  };
};
/**
 * The `stats` widget is used to display useful insights about the current results.
 *
 * By default, it will display the **number of hits** and the time taken to compute the
 * results inside the engine.
 */


var stats = function stats(widgetParams) {
  var _ref5 = widgetParams || {},
      container = _ref5.container,
      _ref5$cssClasses = _ref5.cssClasses,
      userCssClasses = _ref5$cssClasses === void 0 ? {} : _ref5$cssClasses,
      _ref5$templates = _ref5.templates,
      templates = _ref5$templates === void 0 ? {} : _ref5$templates;

  if (!container) {
    throw new Error(withUsage('The `container` option is required.'));
  }

  var containerNode = (0,_lib_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.getContainerNode)(container);
  var cssClasses = {
    root: classnames__WEBPACK_IMPORTED_MODULE_1__(suit(), userCssClasses.root),
    text: classnames__WEBPACK_IMPORTED_MODULE_1__(suit({
      descendantName: 'text'
    }), userCssClasses.text)
  };
  var specializedRenderer = renderer({
    containerNode: containerNode,
    cssClasses: cssClasses,
    templates: templates,
    renderState: {}
  });
  var makeWidget = (0,_connectors_stats_connectStats_js__WEBPACK_IMPORTED_MODULE_8__["default"])(specializedRenderer, function () {
    return (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(null, containerNode);
  });
  return _objectSpread(_objectSpread({}, makeWidget({})), {}, {
    $$widgetType: 'ais.stats'
  });
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stats);

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**************************!*\
  !*** ./src/js/search.js ***!
  \**************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "./node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var algoliasearch_lite__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! algoliasearch/lite */ "./node_modules/algoliasearch/dist/algoliasearch-lite.umd.js");
/* harmony import */ var algoliasearch_lite__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(algoliasearch_lite__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var instantsearch_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! instantsearch.js */ "./node_modules/instantsearch.js/es/index.js");
/* harmony import */ var instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! instantsearch.js/es/widgets */ "./node_modules/instantsearch.js/es/widgets/configure/configure.js");
/* harmony import */ var instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! instantsearch.js/es/widgets */ "./node_modules/instantsearch.js/es/widgets/search-box/search-box.js");
/* harmony import */ var instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! instantsearch.js/es/widgets */ "./node_modules/instantsearch.js/es/widgets/hits/hits.js");
/* harmony import */ var instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! instantsearch.js/es/widgets */ "./node_modules/instantsearch.js/es/widgets/stats/stats.js");
/* harmony import */ var instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! instantsearch.js/es/widgets */ "./node_modules/instantsearch.js/es/widgets/pagination/pagination.js");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util */ "./src/js/util.js");





// special thanks to https://blog.naaln.com/2016/07/hexo-with-algolia/




var initAlgolia = function initAlgolia() {
  $(document).ready(function () {
    var algoliaSettings = algolia;
    var isAlgoliaSettingsValid = algoliaSettings.applicationID && algoliaSettings.apiKey && algoliaSettings.indexName;
    if (!isAlgoliaSettingsValid) {
      window.console.error('Algolia Settings are invalid. Check docs: https://github.com/fi3ework/hexo-theme-archer/wiki/%E5%90%AF%E7%94%A8-Algolia-%E6%90%9C%E7%B4%A2#%E8%8E%B7%E5%8F%96-keys');
      return;
    }
    var searchClient = algoliasearch_lite__WEBPACK_IMPORTED_MODULE_6___default()(algoliaSettings.applicationID, algoliaSettings.apiKey);
    var search = (0,instantsearch_js__WEBPACK_IMPORTED_MODULE_7__["default"])({
      indexName: algoliaSettings.indexName,
      searchClient: searchClient,
      searchFunction: function searchFunction(helper) {
        var searchInput = $('#algolia-search-input').find('input');
        var container = document.querySelector('.algolia-results');
        container.style.display = helper.state.query === '' ? 'none' : '';
        if (searchInput.val()) {
          helper.search();
        }
      },
      stalledSearchDelay: 500
    });

    // Registering Widgets
    search.addWidgets([(0,instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_8__["default"])({
      hitsPerPage: algoliaSettings.hits.per_page || 10
    }), (0,instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_9__["default"])({
      container: '#algolia-search-input',
      placeholder: algoliaSettings.labels.input_placeholder,
      showSubmit: false,
      showReset: false,
      showLoadingIndicator: false
    }), (0,instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_10__["default"])({
      container: '#algolia-hits',
      templates: {
        item: function item(data) {
          var link = data.permalink ? data.permalink : siteMeta.root + data.path;
          return '<a href="' + link + '" class="algolia-hit-item-link">' + instantsearch_js__WEBPACK_IMPORTED_MODULE_7__["default"].highlight({
            attribute: 'title',
            hit: data,
            highlightedTagName: 'em'
          }) + '</a>';
        },
        empty: function empty(data) {
          return '<i class="fas fa-drafting-compass fa-10x"></i>' + '<div class="algolia-hit-empty-label">' + algoliaSettings.labels.hits_empty.replace(/\$\{query\}/, data.query) + '</div>';
        }
      },
      cssClasses: {
        item: 'algolia-hit-item',
        list: 'algolia-hit-list',
        root: 'algolia-hit',
        emptyRoot: 'algolia-hit-empty'
      }
    }), (0,instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_11__["default"])({
      container: '#algolia-stats',
      templates: {
        text: function text(data) {
          var stats = algoliaSettings.labels.hits_stats.replace(/\$\{hits\}/, data.nbHits).replace(/\$\{time\}/, data.processingTimeMS);
          return stats + '<span class="algolia-powered">' + '  <img src="' + siteMeta.root + 'assets/algolia_logo.svg" alt="Algolia" />' + '</span>' + '<hr />';
        }
      },
      cssClasses: {
        root: 'algolia-stat-root'
      }
    }), (0,instantsearch_js_es_widgets__WEBPACK_IMPORTED_MODULE_12__["default"])({
      container: '#algolia-pagination',
      scrollTo: false,
      templates: {
        first: '<i class="fa fa-angle-double-left"></i>',
        last: '<i class="fa fa-angle-double-right"></i>',
        previous: '<i class="fa fa-angle-left"></i>',
        next: '<i class="fa fa-angle-right"></i>'
      }
    })]);
    search.start();
    $('.popup-trigger').on('click', function (e) {
      e.stopPropagation();
      $('body').prepend('<div class="search-popup-overlay algolia-pop-overlay"></div>').css('overflow', 'hidden');
      $('.popup').toggle();
      $('#algolia-search-input').find('input').focus();
      _util__WEBPACK_IMPORTED_MODULE_5__["default"].stopBodyScroll(true);
    });
    var hidePopup = function hidePopup() {
      $('.ais-SearchBox-form').trigger('reset');
      $('.popup').hide();
      $('.algolia-pop-overlay').remove();
      $('body').css('overflow', '');
      _util__WEBPACK_IMPORTED_MODULE_5__["default"].stopBodyScroll(false);
    };
    $('.popup-btn-close').click(function () {
      hidePopup();
    });
    $(document).on('keydown', '.ais-SearchBox-form', function (event) {
      if (event.key === 'Escape') {
        hidePopup();
      }
    });
    $('.site-search').removeClass('site-search-loading');
  });
};
initAlgolia();
})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJO0FBQ0oscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3U3NEO0FBQ2dDO0FBQ3RGOztBQUVBO0FBQ21EOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3RELGdCQUFnQiwwRkFBd0I7O0FBRXhDLGlDQUFpQywwRUFBUSxHQUFHO0FBQzVDLGlCQUFpQixpRUFBRTtBQUNuQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQzdETztBQUNQLDRFQUE0RSxhQUFhO0FBQ3pGO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7QUNOYTs7QUFFYiwwQkFBMEIsbUJBQU8sQ0FBQyxtR0FBNEI7O0FBRTlELHVCQUF1QixtQkFBTyxDQUFDLGlHQUF3QjtBQUN2RCxvQkFBb0IsbUJBQU8sQ0FBQywyRkFBcUI7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCLFlBQVksUUFBUTtBQUNwQixZQUFZLHlCQUF5QixtRkFBbUYsaUJBQWlCO0FBQ3pJLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSw4QkFBOEIsbUJBQU8sQ0FBQyw0RUFBa0I7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUN0RWE7O0FBRWIsbUJBQW1CLG1CQUFPLENBQUMsaUVBQWlCO0FBQzVDLGVBQWUsbUJBQU8sQ0FBQyw0RkFBdUI7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFCQUFxQjtBQUNsRCxPQUFPLHdCQUF3QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUNyQ2E7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QixhQUFhLDhEQUE4RDtBQUMzRTs7QUFFQSxtQkFBbUIsbUJBQU8sQ0FBQyxvR0FBMkI7QUFDdEQsV0FBVyxtQkFBTyxDQUFDLG9GQUFtQjtBQUN0QyxvQkFBb0IsbUJBQU8sQ0FBQyxzR0FBNEI7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsMEJBQTBCO0FBQzFCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU8sSUFBSTs7QUFFWDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUNsSmE7O0FBRWIsWUFBWSxtQkFBTyxDQUFDLHNGQUFvQjtBQUN4QyxtQkFBbUIsbUJBQU8sQ0FBQyxvR0FBMkI7QUFDdEQsbUJBQW1CLG1CQUFPLENBQUMsb0dBQTJCO0FBQ3RELFdBQVcsbUJBQU8sQ0FBQyxvRkFBbUI7QUFDdEMsa0JBQWtCLG1CQUFPLENBQUMsa0dBQTBCO0FBQ3BELFdBQVcsbUJBQU8sQ0FBQyxvRkFBbUI7QUFDdEMsb0JBQW9CLG1CQUFPLENBQUMsc0dBQTRCO0FBQ3hELHVCQUF1QixtQkFBTyxDQUFDLG9HQUEyQjs7QUFFMUQscUJBQXFCLG1CQUFPLENBQUMsb0dBQWtCOztBQUUvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLEtBQUs7QUFDaEIsWUFBWSxLQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBDQUEwQztBQUN2RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMEJBQTBCO0FBQ2xFLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRJQUE0SSxLQUFLO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFT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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7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O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoUWE7O0FBRWIsWUFBWSxtQkFBTyxDQUFDLDZFQUFTO0FBQzdCLGNBQWMsbUJBQU8sQ0FBQyxpRkFBVztBQUNqQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx3QkFBd0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdFQUFnRTtBQUNyRixNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0Isb0JBQW9CO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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bEcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDd0csV0FBVyxDQUFDLHFCQUFxQixDQUFDO0VBQ3RELENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRHJFLFdBQVcsRUFBRSxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS91aS1jb21wb25lbnRzLWhpZ2hsaWdodC12ZG9tL2Rpc3QvZXNtL0hpZ2hsaWdodC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS91aS1jb21wb25lbnRzLXNoYXJlZC9kaXN0L2VzbS9jeC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvRGVyaXZlZEhlbHBlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvU2VhcmNoUGFyYW1ldGVycy9SZWZpbmVtZW50TGlzdC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvU2VhcmNoUGFyYW1ldGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvU2VhcmNoUmVzdWx0cy9nZW5lcmF0ZS1oaWVyYXJjaGljYWwtdHJlZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvU2VhcmNoUmVzdWx0cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvYWxnb2xpYXNlYXJjaC5oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvYWxnb2xpYXNlYXJjaC1oZWxwZXIvc3JjL2Z1bmN0aW9ucy9jb21wYWN0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2FsZ29saWFzZWFyY2gtaGVscGVyL3NyYy9mdW5jdGlvbnMvZGVmYXVsdHNQdXJlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2FsZ29saWFzZWFyY2gtaGVscGVyL3NyYy9mdW5jdGlvbnMvZXNjYXBlRmFjZXRWYWx1ZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvZnVuY3Rpb25zL2ZpbmQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvYWxnb2xpYXNlYXJjaC1oZWxwZXIvc3JjL2Z1bmN0aW9ucy9maW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvYWxnb2xpYXNlYXJjaC1oZWxwZXIvc3JjL2Z1bmN0aW9ucy9mb3JtYXRTb3J0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2FsZ29saWFzZWFyY2gtaGVscGVyL3NyYy9mdW5jdGlvbnMvaW5oZXJpdHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvYWxnb2xpYXNlYXJjaC1oZWxwZXIvc3JjL2Z1bmN0aW9ucy9pbnRlcnNlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvYWxnb2xpYXNlYXJjaC1oZWxwZXIvc3JjL2Z1bmN0aW9ucy9tZXJnZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvZnVuY3Rpb25zL29iamVjdEhhc0tleXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvYWxnb2xpYXNlYXJjaC1oZWxwZXIvc3JjL2Z1bmN0aW9ucy9vbWl0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2FsZ29saWFzZWFyY2gtaGVscGVyL3NyYy9mdW5jdGlvbnMvb3JkZXJCeS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvZnVuY3Rpb25zL3ZhbFRvTnVtYmVyLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2FsZ29saWFzZWFyY2gtaGVscGVyL3NyYy9yZXF1ZXN0QnVpbGRlci5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvdXRpbHMvaXNWYWxpZFVzZXJUb2tlbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci9zcmMvdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9hbGdvbGlhc2VhcmNoLWhlbHBlci90eXBlcy9hbGdvbGlhc2VhcmNoLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2FsZ29saWFzZWFyY2gvZGlzdC9hbGdvbGlhc2VhcmNoLWxpdGUudW1kLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vc3JjL2pzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hLWNhbGxhYmxlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2EtcG9zc2libGUtcHJvdG90eXBlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hZHZhbmNlLXN0cmluZy1pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hbi1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktc3BlY2llcy1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY2xhc3NvZi1yYXcuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY2xhc3NvZi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jb3B5LWNvbnN0cnVjdG9yLXByb3BlcnRpZXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbi1hY2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kZWZpbmUtYnVpbHQtaW4uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVmaW5lLWdsb2JhbC1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kZXNjcmlwdG9ycy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kb2N1bWVudC1hbGwuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZG9jdW1lbnQtY3JlYXRlLWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZW5naW5lLXVzZXItYWdlbnQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZW5naW5lLXY4LXZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZW51bS1idWcta2V5cy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9leHBvcnQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZmFpbHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZml4LXJlZ2V4cC13ZWxsLWtub3duLXN5bWJvbC1sb2dpYy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi1hcHBseS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi1uYW1lLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcy1yYXcuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2dldC1idWlsdC1pbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtbWV0aG9kLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2dldC1zdWJzdGl0dXRpb24uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZ2xvYmFsLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaGlkZGVuLWtleXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaHRtbC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pZTgtZG9tLWRlZmluZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pbmRleGVkLW9iamVjdC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pbmhlcml0LWlmLXJlcXVpcmVkLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2luc3BlY3Qtc291cmNlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWFycmF5LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWNhbGxhYmxlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWNvbnN0cnVjdG9yLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWZvcmNlZC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1udWxsLW9yLXVuZGVmaW5lZC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtcHVyZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtc3ltYm9sLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2xlbmd0aC1vZi1hcnJheS1saWtlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL21ha2UtYnVpbHQtaW4uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvbWF0aC10cnVuYy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9udW1iZXItcGFyc2UtaW50LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0aWVzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1zeW1ib2xzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1pcy1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWtleXMtaW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWtleXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LXByb3BlcnR5LWlzLWVudW1lcmFibGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LXNldC1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LXRvLXN0cmluZy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vcmRpbmFyeS10by1wcmltaXRpdmUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb3duLWtleXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcHJveHktYWNjZXNzb3IuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMtYWJzdHJhY3QuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVnZXhwLWZsYWdzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC1nZXQtZmxhZ3MuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVnZXhwLXN0aWNreS1oZWxwZXJzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC11bnN1cHBvcnRlZC1kb3QtYWxsLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC11bnN1cHBvcnRlZC1uY2cuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NhbWUtdmFsdWUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2V0LXNwZWNpZXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2hhcmVkLWtleS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zaGFyZWQtc3RvcmUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2hhcmVkLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3N0cmluZy1tdWx0aWJ5dGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3RyaW5nLXRyaW0uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3ltYm9sLWNvbnN0cnVjdG9yLWRldGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1hYnNvbHV0ZS1pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1pbmRleGVkLW9iamVjdC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1pbnRlZ2VyLW9yLWluZmluaXR5LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWxlbmd0aC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tcHJpbWl0aXZlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXByb3BlcnR5LWtleS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1zdHJpbmctdGFnLXN1cHBvcnQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tc3RyaW5nLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RyeS10by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdWlkLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3VzZS1zeW1ib2wtYXMtdWlkLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3Y4LXByb3RvdHlwZS1kZWZpbmUtYnVnLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3dlYWstbWFwLWJhc2ljLWRldGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy93aGl0ZXNwYWNlcy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5kb3QtYWxsLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2hvZ2FuLmpzL2xpYi9jb21waWxlci5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9ob2dhbi5qcy9saWIvaG9nYW4uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaG9nYW4uanMvbGliL3RlbXBsYXRlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2h0bS9kaXN0L2h0bS5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaHRtL3ByZWFjdC9pbmRleC5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9ub2RlX21vZHVsZXMvcXMvbGliL2Zvcm1hdHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9ub2RlX21vZHVsZXMvcXMvbGliL2luZGV4LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvbm9kZV9tb2R1bGVzL3FzL2xpYi9wYXJzZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL25vZGVfbW9kdWxlcy9xcy9saWIvc3RyaW5naWZ5LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvbm9kZV9tb2R1bGVzL3FzL2xpYi91dGlscy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9wcmVhY3QvZGlzdC9wcmVhY3QubW9kdWxlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2NvbXBvbmVudHMvSGlnaGxpZ2h0L0hpZ2hsaWdodC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2NvbXBvbmVudHMvSGl0cy9IaXRzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29tcG9uZW50cy9JbnRlcm5hbEhpZ2hsaWdodC9JbnRlcm5hbEhpZ2hsaWdodC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2NvbXBvbmVudHMvUGFnaW5hdGlvbi9QYWdpbmF0aW9uLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29tcG9uZW50cy9SZXZlcnNlSGlnaGxpZ2h0L1JldmVyc2VIaWdobGlnaHQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9jb21wb25lbnRzL1JldmVyc2VTbmlwcGV0L1JldmVyc2VTbmlwcGV0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29tcG9uZW50cy9TZWFyY2hCb3gvU2VhcmNoQm94LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29tcG9uZW50cy9TbmlwcGV0L1NuaXBwZXQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9jb21wb25lbnRzL1N0YXRzL1N0YXRzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29tcG9uZW50cy9UZW1wbGF0ZS9UZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2Nvbm5lY3RvcnMvY29uZmlndXJlL2Nvbm5lY3RDb25maWd1cmUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9jb25uZWN0b3JzL2hpdHMvY29ubmVjdEhpdHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9jb25uZWN0b3JzL3BhZ2luYXRpb24vUGFnaW5hdG9yLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29ubmVjdG9ycy9wYWdpbmF0aW9uL2Nvbm5lY3RQYWdpbmF0aW9uLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvY29ubmVjdG9ycy9zZWFyY2gtYm94L2Nvbm5lY3RTZWFyY2hCb3guanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9jb25uZWN0b3JzL3N0YXRzL2Nvbm5lY3RTdGF0cy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2hlbHBlcnMvY29tcG9uZW50cy9IaWdobGlnaHQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9oZWxwZXJzL2NvbXBvbmVudHMvUmV2ZXJzZUhpZ2hsaWdodC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2hlbHBlcnMvY29tcG9uZW50cy9SZXZlcnNlU25pcHBldC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2hlbHBlcnMvY29tcG9uZW50cy9TbmlwcGV0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvaGVscGVycy9nZXQtaW5zaWdodHMtYW5vbnltb3VzLXVzZXItdG9rZW4uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9oZWxwZXJzL2hpZ2hsaWdodC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2hlbHBlcnMvaW5zaWdodHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9oZWxwZXJzL3JldmVyc2VIaWdobGlnaHQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9oZWxwZXJzL3JldmVyc2VTbmlwcGV0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvaGVscGVycy9zbmlwcGV0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvSW5zdGFudFNlYXJjaC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi9jcmVhdGVIZWxwZXJzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL2Zvcm1hdE51bWJlci5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi9pbmZpbml0ZUhpdHNDYWNoZS9zZXNzaW9uU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi9pbnNpZ2h0cy9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvaW5zaWdodHMvbGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvcm91dGVycy9oaXN0b3J5LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3N0YXRlTWFwcGluZ3Mvc2ltcGxlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3N1aXQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdGVtcGxhdGluZy9wcmVwYXJlVGVtcGxhdGVQcm9wcy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi90ZW1wbGF0aW5nL3JlbmRlclRlbXBsYXRlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2NhcGl0YWxpemUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvY2hlY2tJbmRleFVpU3RhdGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvY2hlY2tSZW5kZXJpbmcuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvY29uY2F0SGlnaGxpZ2h0ZWRQYXJ0cy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9jcmVhdGVTZW5kRXZlbnRGb3JIaXRzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2RlZmVyLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2RvY3VtZW50YXRpb24uanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvZXNjYXBlLWhpZ2hsaWdodC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9lc2NhcGUtaHRtbC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9maW5kLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2ZpbmRJbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9nZXRDb250YWluZXJOb2RlLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2dldEhpZ2hsaWdodEZyb21TaWJsaW5ncy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9nZXRIaWdobGlnaHRlZFBhcnRzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2dldE9iamVjdFR5cGUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvZ2V0UHJvcGVydHlCeVBhdGguanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvaGl0cy1hYnNvbHV0ZS1wb3NpdGlvbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9oaXRzLXF1ZXJ5LWlkLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2lzRG9tRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9pc0VxdWFsLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL2lzSW5kZXhXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvaXNQbGFpbk9iamVjdC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9pc1NwZWNpYWxDbGljay5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy9sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvbWVyZ2VTZWFyY2hQYXJhbWV0ZXJzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL25vb3AuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvcmFuZ2UuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvcmVuZGVyLWFyZ3MuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvcmVzb2x2ZVNlYXJjaFBhcmFtZXRlcnMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvcmV2ZXJzZUhpZ2hsaWdodGVkUGFydHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvc2FmZWx5UnVuT25Ccm93c2VyLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL3NlcmlhbGl6ZXIuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdXRpbHMvc2V0SW5kZXhIZWxwZXJTdGF0ZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL2xpYi91dGlscy90b0FycmF5LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL3R5cGVkT2JqZWN0LmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvbGliL3V0aWxzL3VuaXEuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy9saWIvdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL21pZGRsZXdhcmVzL2NyZWF0ZU1ldGFkYXRhTWlkZGxld2FyZS5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL21pZGRsZXdhcmVzL2NyZWF0ZVJvdXRlck1pZGRsZXdhcmUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy90eXBlcy9hbGdvbGlhc2VhcmNoLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvdHlwZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy93aWRnZXRzL2NvbmZpZ3VyZS9jb25maWd1cmUuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy93aWRnZXRzL2hpdHMvZGVmYXVsdFRlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL3dpZGdldHMvaGl0cy9oaXRzLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvd2lkZ2V0cy9pbmRleC9pbmRleC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL3dpZGdldHMvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmpzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vbm9kZV9tb2R1bGVzL2luc3RhbnRzZWFyY2guanMvZXMvd2lkZ2V0cy9zZWFyY2gtYm94L2RlZmF1bHRUZW1wbGF0ZXMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvLi9ub2RlX21vZHVsZXMvaW5zdGFudHNlYXJjaC5qcy9lcy93aWRnZXRzL3NlYXJjaC1ib3gvc2VhcmNoLWJveC5qcyIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci8uL25vZGVfbW9kdWxlcy9pbnN0YW50c2VhcmNoLmpzL2VzL3dpZGdldHMvc3RhdHMvc3RhdHMuanMiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vaGV4by10aGVtZS1hcmNoZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9oZXhvLXRoZW1lLWFyY2hlci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2hleG8tdGhlbWUtYXJjaGVyLy4vc3JjL2pzL3NlYXJjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG4vLyBFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG4iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xudmFyIF9leGNsdWRlZCA9IFtcInBhcnRzXCIsIFwiaGlnaGxpZ2h0ZWRUYWdOYW1lXCIsIFwibm9uSGlnaGxpZ2h0ZWRUYWdOYW1lXCIsIFwic2VwYXJhdG9yXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2xhc3NOYW1lc1wiXTtcblxuLyoqIEBqc3ggY3JlYXRlRWxlbWVudCAqL1xuaW1wb3J0IHsgY3ggfSBmcm9tICdAYWxnb2xpYS91aS1jb21wb25lbnRzLXNoYXJlZCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUhpZ2hsaWdodFBhcnRDb21wb25lbnQoX3JlZikge1xuICB2YXIgY3JlYXRlRWxlbWVudCA9IF9yZWYuY3JlYXRlRWxlbWVudDtcbiAgcmV0dXJuIGZ1bmN0aW9uIEhpZ2hsaWdodFBhcnQoX3JlZjIpIHtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IF9yZWYyLmNsYXNzTmFtZXMsXG4gICAgICAgIGNoaWxkcmVuID0gX3JlZjIuY2hpbGRyZW4sXG4gICAgICAgIGhpZ2hsaWdodGVkVGFnTmFtZSA9IF9yZWYyLmhpZ2hsaWdodGVkVGFnTmFtZSxcbiAgICAgICAgaXNIaWdobGlnaHRlZCA9IF9yZWYyLmlzSGlnaGxpZ2h0ZWQsXG4gICAgICAgIG5vbkhpZ2hsaWdodGVkVGFnTmFtZSA9IF9yZWYyLm5vbkhpZ2hsaWdodGVkVGFnTmFtZTtcbiAgICB2YXIgVGFnTmFtZSA9IGlzSGlnaGxpZ2h0ZWQgPyBoaWdobGlnaHRlZFRhZ05hbWUgOiBub25IaWdobGlnaHRlZFRhZ05hbWU7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoVGFnTmFtZSwge1xuICAgICAgY2xhc3NOYW1lOiBpc0hpZ2hsaWdodGVkID8gY2xhc3NOYW1lcy5oaWdobGlnaHRlZCA6IGNsYXNzTmFtZXMubm9uSGlnaGxpZ2h0ZWRcbiAgICB9LCBjaGlsZHJlbik7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIaWdobGlnaHRDb21wb25lbnQoX3JlZjMpIHtcbiAgdmFyIGNyZWF0ZUVsZW1lbnQgPSBfcmVmMy5jcmVhdGVFbGVtZW50LFxuICAgICAgRnJhZ21lbnQgPSBfcmVmMy5GcmFnbWVudDtcbiAgdmFyIEhpZ2hsaWdodFBhcnQgPSBjcmVhdGVIaWdobGlnaHRQYXJ0Q29tcG9uZW50KHtcbiAgICBjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50LFxuICAgIEZyYWdtZW50OiBGcmFnbWVudFxuICB9KTtcbiAgcmV0dXJuIGZ1bmN0aW9uIEhpZ2hsaWdodChfcmVmNCkge1xuICAgIHZhciBwYXJ0cyA9IF9yZWY0LnBhcnRzLFxuICAgICAgICBfcmVmNCRoaWdobGlnaHRlZFRhZ04gPSBfcmVmNC5oaWdobGlnaHRlZFRhZ05hbWUsXG4gICAgICAgIGhpZ2hsaWdodGVkVGFnTmFtZSA9IF9yZWY0JGhpZ2hsaWdodGVkVGFnTiA9PT0gdm9pZCAwID8gJ21hcmsnIDogX3JlZjQkaGlnaGxpZ2h0ZWRUYWdOLFxuICAgICAgICBfcmVmNCRub25IaWdobGlnaHRlZFQgPSBfcmVmNC5ub25IaWdobGlnaHRlZFRhZ05hbWUsXG4gICAgICAgIG5vbkhpZ2hsaWdodGVkVGFnTmFtZSA9IF9yZWY0JG5vbkhpZ2hsaWdodGVkVCA9PT0gdm9pZCAwID8gJ3NwYW4nIDogX3JlZjQkbm9uSGlnaGxpZ2h0ZWRULFxuICAgICAgICBfcmVmNCRzZXBhcmF0b3IgPSBfcmVmNC5zZXBhcmF0b3IsXG4gICAgICAgIHNlcGFyYXRvciA9IF9yZWY0JHNlcGFyYXRvciA9PT0gdm9pZCAwID8gJywgJyA6IF9yZWY0JHNlcGFyYXRvcixcbiAgICAgICAgY2xhc3NOYW1lID0gX3JlZjQuY2xhc3NOYW1lLFxuICAgICAgICBfcmVmNCRjbGFzc05hbWVzID0gX3JlZjQuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWY0JGNsYXNzTmFtZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjQkY2xhc3NOYW1lcyxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjQsIF9leGNsdWRlZCk7XG5cbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgICBjbGFzc05hbWU6IGN4KGNsYXNzTmFtZXMucm9vdCwgY2xhc3NOYW1lKVxuICAgIH0pLCBwYXJ0cy5tYXAoZnVuY3Rpb24gKHBhcnQsIHBhcnRJbmRleCkge1xuICAgICAgdmFyIGlzTGFzdFBhcnQgPSBwYXJ0SW5kZXggPT09IHBhcnRzLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChGcmFnbWVudCwge1xuICAgICAgICBrZXk6IHBhcnRJbmRleFxuICAgICAgfSwgcGFydC5tYXAoZnVuY3Rpb24gKHN1YlBhcnQsIHN1YlBhcnRJbmRleCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChIaWdobGlnaHRQYXJ0LCB7XG4gICAgICAgICAga2V5OiBzdWJQYXJ0SW5kZXgsXG4gICAgICAgICAgY2xhc3NOYW1lczogY2xhc3NOYW1lcyxcbiAgICAgICAgICBoaWdobGlnaHRlZFRhZ05hbWU6IGhpZ2hsaWdodGVkVGFnTmFtZSxcbiAgICAgICAgICBub25IaWdobGlnaHRlZFRhZ05hbWU6IG5vbkhpZ2hsaWdodGVkVGFnTmFtZSxcbiAgICAgICAgICBpc0hpZ2hsaWdodGVkOiBzdWJQYXJ0LmlzSGlnaGxpZ2h0ZWRcbiAgICAgICAgfSwgc3ViUGFydC52YWx1ZSk7XG4gICAgICB9KSwgIWlzTGFzdFBhcnQgJiYgY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMuc2VwYXJhdG9yXG4gICAgICB9LCBzZXBhcmF0b3IpKTtcbiAgICB9KSk7XG4gIH07XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGN4KCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NOYW1lcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBjbGFzc05hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzTmFtZXMuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAnKSB8fCB1bmRlZmluZWQ7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQWxnb2xpYVNlYXJjaEhlbHBlciA9IHJlcXVpcmUoJy4vc3JjL2FsZ29saWFzZWFyY2guaGVscGVyJyk7XG5cbnZhciBTZWFyY2hQYXJhbWV0ZXJzID0gcmVxdWlyZSgnLi9zcmMvU2VhcmNoUGFyYW1ldGVycycpO1xudmFyIFNlYXJjaFJlc3VsdHMgPSByZXF1aXJlKCcuL3NyYy9TZWFyY2hSZXN1bHRzJyk7XG5cbi8qKlxuICogVGhlIGFsZ29saWFzZWFyY2hIZWxwZXIgbW9kdWxlIGlzIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgbGV0IGl0c1xuICogY29udGFpbnMgZXZlcnl0aGluZyBuZWVkZWQgdG8gdXNlIHRoZSBBbGdvbGlhc2VhcmNoXG4gKiBIZWxwZXIuIEl0IGlzIGEgYWxzbyBhIGZ1bmN0aW9uIHRoYXQgaW5zdGFuY2lhdGUgdGhlIGhlbHBlci5cbiAqIFRvIHVzZSB0aGUgaGVscGVyLCB5b3UgYWxzbyBuZWVkIHRoZSBBbGdvbGlhIEpTIGNsaWVudCB2My5cbiAqIEBleGFtcGxlXG4gKiAvL3VzaW5nIHRoZSBVTUQgYnVpbGRcbiAqIHZhciBjbGllbnQgPSBhbGdvbGlhc2VhcmNoKCdsYXRlbmN5JywgJzZiZTA1NzZmZjYxYzA1M2Q1ZjlhMzIyNWUyYTkwZjc2Jyk7XG4gKiB2YXIgaGVscGVyID0gYWxnb2xpYXNlYXJjaEhlbHBlcihjbGllbnQsICdiZXN0YnV5Jywge1xuICogICBmYWNldHM6IFsnc2hpcHBpbmcnXSxcbiAqICAgZGlzanVuY3RpdmVGYWNldHM6IFsnY2F0ZWdvcnknXVxuICogfSk7XG4gKiBoZWxwZXIub24oJ3Jlc3VsdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgIGNvbnNvbGUubG9nKGV2ZW50LnJlc3VsdHMpO1xuICogfSk7XG4gKiBoZWxwZXJcbiAqICAgLnRvZ2dsZUZhY2V0UmVmaW5lbWVudCgnY2F0ZWdvcnknLCAnTW92aWVzICYgVFYgU2hvd3MnKVxuICogICAudG9nZ2xlRmFjZXRSZWZpbmVtZW50KCdzaGlwcGluZycsICdGcmVlIHNoaXBwaW5nJylcbiAqICAgLnNlYXJjaCgpO1xuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBoZWxwZXIgaXMgYW4gZXZlbnQgZW1pdHRlciB1c2luZyB0aGUgbm9kZSBBUElcbiAqIGhlbHBlci5vbigncmVzdWx0JywgdXBkYXRlVGhlUmVzdWx0cyk7XG4gKiBoZWxwZXIub25jZSgncmVzdWx0JywgdXBkYXRlVGhlUmVzdWx0cyk7XG4gKiBoZWxwZXIucmVtb3ZlTGlzdGVuZXIoJ3Jlc3VsdCcsIHVwZGF0ZVRoZVJlc3VsdHMpO1xuICogaGVscGVyLnJlbW92ZUFsbExpc3RlbmVycygncmVzdWx0Jyk7XG4gKiBAbW9kdWxlIGFsZ29saWFzZWFyY2hIZWxwZXJcbiAqIEBwYXJhbSAge0FsZ29saWFTZWFyY2h9IGNsaWVudCBhbiBBbGdvbGlhU2VhcmNoIGNsaWVudFxuICogQHBhcmFtICB7c3RyaW5nfSBpbmRleCB0aGUgbmFtZSBvZiB0aGUgaW5kZXggdG8gcXVlcnlcbiAqIEBwYXJhbSAge1NlYXJjaFBhcmFtZXRlcnN8b2JqZWN0fSBvcHRzIGFuIG9iamVjdCBkZWZpbmluZyB0aGUgaW5pdGlhbCBjb25maWcgb2YgdGhlIHNlYXJjaC4gSXQgZG9lc24ndCBoYXZlIHRvIGJlIGEge1NlYXJjaFBhcmFtZXRlcnN9LCBqdXN0IGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBwcm9wZXJ0aWVzIHlvdSBuZWVkIGZyb20gaXQuXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICovXG5mdW5jdGlvbiBhbGdvbGlhc2VhcmNoSGVscGVyKGNsaWVudCwgaW5kZXgsIG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBBbGdvbGlhU2VhcmNoSGVscGVyKGNsaWVudCwgaW5kZXgsIG9wdHMpO1xufVxuXG4vKipcbiAqIFRoZSB2ZXJzaW9uIGN1cnJlbnRseSB1c2VkXG4gKiBAbWVtYmVyIG1vZHVsZTphbGdvbGlhc2VhcmNoSGVscGVyLnZlcnNpb25cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmFsZ29saWFzZWFyY2hIZWxwZXIudmVyc2lvbiA9IHJlcXVpcmUoJy4vc3JjL3ZlcnNpb24uanMnKTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RvciBmb3IgdGhlIEhlbHBlci5cbiAqIEBtZW1iZXIgbW9kdWxlOmFsZ29saWFzZWFyY2hIZWxwZXIuQWxnb2xpYVNlYXJjaEhlbHBlclxuICogQHR5cGUge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKi9cbmFsZ29saWFzZWFyY2hIZWxwZXIuQWxnb2xpYVNlYXJjaEhlbHBlciA9IEFsZ29saWFTZWFyY2hIZWxwZXI7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgZm9yIHRoZSBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIHNlYXJjaC5cbiAqIEBtZW1iZXIgbW9kdWxlOmFsZ29saWFzZWFyY2hIZWxwZXIuU2VhcmNoUGFyYW1ldGVyc1xuICogQHR5cGUge1NlYXJjaFBhcmFtZXRlcnN9XG4gKi9cbmFsZ29saWFzZWFyY2hIZWxwZXIuU2VhcmNoUGFyYW1ldGVycyA9IFNlYXJjaFBhcmFtZXRlcnM7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgZm9yIHRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgcmVzdWx0cyBvZiB0aGUgc2VhcmNoLlxuICogQG1lbWJlciBtb2R1bGU6YWxnb2xpYXNlYXJjaEhlbHBlci5TZWFyY2hSZXN1bHRzXG4gKiBAdHlwZSB7U2VhcmNoUmVzdWx0c31cbiAqL1xuYWxnb2xpYXNlYXJjaEhlbHBlci5TZWFyY2hSZXN1bHRzID0gU2VhcmNoUmVzdWx0cztcblxubW9kdWxlLmV4cG9ydHMgPSBhbGdvbGlhc2VhcmNoSGVscGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnQGFsZ29saWEvZXZlbnRzJyk7XG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvaW5oZXJpdHMnKTtcblxuLyoqXG4gKiBBIERlcml2ZWRIZWxwZXIgaXMgYSB3YXkgdG8gY3JlYXRlIHN1YiByZXF1ZXN0cyB0b1xuICogQWxnb2xpYSBmcm9tIGEgbWFpbiBoZWxwZXIuXG4gKiBAY2xhc3NcbiAqIEBjbGFzc2Rlc2MgVGhlIERlcml2ZWRIZWxwZXIgcHJvdmlkZXMgYW4gZXZlbnQgYmFzZWQgaW50ZXJmYWNlIGZvciBzZWFyY2ggY2FsbGJhY2tzOlxuICogIC0gc2VhcmNoOiB3aGVuIGEgc2VhcmNoIGlzIHRyaWdnZXJlZCB1c2luZyB0aGUgYHNlYXJjaCgpYCBtZXRob2QuXG4gKiAgLSByZXN1bHQ6IHdoZW4gdGhlIHJlc3BvbnNlIGlzIHJldHJpZXZlZCBmcm9tIEFsZ29saWEgYW5kIGlzIHByb2Nlc3NlZC5cbiAqICAgIFRoaXMgZXZlbnQgY29udGFpbnMgYSB7QGxpbmsgU2VhcmNoUmVzdWx0c30gb2JqZWN0IGFuZCB0aGVcbiAqICAgIHtAbGluayBTZWFyY2hQYXJhbWV0ZXJzfSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYW5zd2VyLlxuICovXG5mdW5jdGlvbiBEZXJpdmVkSGVscGVyKG1haW5IZWxwZXIsIGZuKSB7XG4gIHRoaXMubWFpbiA9IG1haW5IZWxwZXI7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5sYXN0UmVzdWx0cyA9IG51bGw7XG59XG5cbmluaGVyaXRzKERlcml2ZWRIZWxwZXIsIEV2ZW50RW1pdHRlcik7XG5cbi8qKlxuICogRGV0YWNoIHRoaXMgaGVscGVyIGZyb20gdGhlIG1haW4gaGVscGVyXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9XG4gKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBkZXJpdmVkIGhlbHBlciBpcyBhbHJlYWR5IGRldGFjaGVkXG4gKi9cbkRlcml2ZWRIZWxwZXIucHJvdG90eXBlLmRldGFjaCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB0aGlzLm1haW4uZGV0YWNoRGVyaXZlZEhlbHBlcih0aGlzKTtcbn07XG5cbkRlcml2ZWRIZWxwZXIucHJvdG90eXBlLmdldE1vZGlmaWVkU3RhdGUgPSBmdW5jdGlvbihwYXJhbWV0ZXJzKSB7XG4gIHJldHVybiB0aGlzLmZuKHBhcmFtZXRlcnMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZXJpdmVkSGVscGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEZ1bmN0aW9ucyB0byBtYW5pcHVsYXRlIHJlZmluZW1lbnQgbGlzdHNcbiAqXG4gKiBUaGUgUmVmaW5lbWVudExpc3QgaXMgbm90IGZvcm1hbGx5IGRlZmluZWQgdGhyb3VnaCBhIHByb3RvdHlwZSBidXQgaXMgYmFzZWRcbiAqIG9uIGEgc3BlY2lmaWMgc3RydWN0dXJlLlxuICpcbiAqIEBtb2R1bGUgU2VhcmNoUGFyYW1ldGVycy5yZWZpbmVtZW50TGlzdFxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmdbXX0gU2VhcmNoUGFyYW1ldGVycy5yZWZpbmVtZW50TGlzdC5SZWZpbmVtZW50c1xuICogQHR5cGVkZWYge09iamVjdC48c3RyaW5nLCBTZWFyY2hQYXJhbWV0ZXJzLnJlZmluZW1lbnRMaXN0LlJlZmluZW1lbnRzPn0gU2VhcmNoUGFyYW1ldGVycy5yZWZpbmVtZW50TGlzdC5SZWZpbmVtZW50TGlzdFxuICovXG5cbnZhciBkZWZhdWx0c1B1cmUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZGVmYXVsdHNQdXJlJyk7XG52YXIgb21pdCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9vbWl0Jyk7XG52YXIgb2JqZWN0SGFzS2V5cyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9vYmplY3RIYXNLZXlzJyk7XG5cbnZhciBsaWIgPSB7XG4gIC8qKlxuICAgKiBBZGRzIGEgcmVmaW5lbWVudCB0byBhIFJlZmluZW1lbnRMaXN0XG4gICAqIEBwYXJhbSB7UmVmaW5lbWVudExpc3R9IHJlZmluZW1lbnRMaXN0IHRoZSBpbml0aWFsIGxpc3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSB0aGUgYXR0cmlidXRlIHRvIHJlZmluZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSByZWZpbmVtZW50LCBpZiB0aGUgdmFsdWUgaXMgbm90IGEgc3RyaW5nIGl0IHdpbGwgYmUgY29udmVydGVkXG4gICAqIEByZXR1cm4ge1JlZmluZW1lbnRMaXN0fSBhIG5ldyBhbmQgdXBkYXRlZCByZWZpbmVtZW50IGxpc3RcbiAgICovXG4gIGFkZFJlZmluZW1lbnQ6IGZ1bmN0aW9uIGFkZFJlZmluZW1lbnQocmVmaW5lbWVudExpc3QsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAobGliLmlzUmVmaW5lZChyZWZpbmVtZW50TGlzdCwgYXR0cmlidXRlLCB2YWx1ZSkpIHtcbiAgICAgIHJldHVybiByZWZpbmVtZW50TGlzdDtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVBc1N0cmluZyA9ICcnICsgdmFsdWU7XG5cbiAgICB2YXIgZmFjZXRSZWZpbmVtZW50ID0gIXJlZmluZW1lbnRMaXN0W2F0dHJpYnV0ZV0gP1xuICAgICAgW3ZhbHVlQXNTdHJpbmddIDpcbiAgICAgIHJlZmluZW1lbnRMaXN0W2F0dHJpYnV0ZV0uY29uY2F0KHZhbHVlQXNTdHJpbmcpO1xuXG4gICAgdmFyIG1vZCA9IHt9O1xuXG4gICAgbW9kW2F0dHJpYnV0ZV0gPSBmYWNldFJlZmluZW1lbnQ7XG5cbiAgICByZXR1cm4gZGVmYXVsdHNQdXJlKHt9LCBtb2QsIHJlZmluZW1lbnRMaXN0KTtcbiAgfSxcbiAgLyoqXG4gICAqIFJlbW92ZXMgcmVmaW5lbWVudChzKSBmb3IgYW4gYXR0cmlidXRlOlxuICAgKiAgLSBpZiB0aGUgdmFsdWUgaXMgc3BlY2lmaWVkIHJlbW92ZXMgdGhlIHJlZmluZW1lbnQgZm9yIHRoZSB2YWx1ZSBvbiB0aGUgYXR0cmlidXRlXG4gICAqICAtIGlmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCByZW1vdmVzIGFsbCB0aGUgcmVmaW5lbWVudHMgZm9yIHRoaXMgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7UmVmaW5lbWVudExpc3R9IHJlZmluZW1lbnRMaXN0IHRoZSBpbml0aWFsIGxpc3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSB0aGUgYXR0cmlidXRlIHRvIHJlZmluZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhbHVlXSB0aGUgdmFsdWUgb2YgdGhlIHJlZmluZW1lbnRcbiAgICogQHJldHVybiB7UmVmaW5lbWVudExpc3R9IGEgbmV3IGFuZCB1cGRhdGVkIHJlZmluZW1lbnQgbHN0XG4gICAqL1xuICByZW1vdmVSZWZpbmVtZW50OiBmdW5jdGlvbiByZW1vdmVSZWZpbmVtZW50KHJlZmluZW1lbnRMaXN0LCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIHdlIHVzZSB0aGUgXCJmaWx0ZXJcIiBmb3JtIG9mIGNsZWFyUmVmaW5lbWVudCwgc2luY2UgaXQgbGVhdmVzIGVtcHR5IHZhbHVlcyBhcy1pc1xuICAgICAgLy8gdGhlIGZvcm0gd2l0aCBhIHN0cmluZyB3aWxsIHJlbW92ZSB0aGUgYXR0cmlidXRlIGNvbXBsZXRlbHlcbiAgICAgIHJldHVybiBsaWIuY2xlYXJSZWZpbmVtZW50KHJlZmluZW1lbnRMaXN0LCBmdW5jdGlvbih2LCBmKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUgPT09IGY7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVBc1N0cmluZyA9ICcnICsgdmFsdWU7XG5cbiAgICByZXR1cm4gbGliLmNsZWFyUmVmaW5lbWVudChyZWZpbmVtZW50TGlzdCwgZnVuY3Rpb24odiwgZikge1xuICAgICAgcmV0dXJuIGF0dHJpYnV0ZSA9PT0gZiAmJiB2YWx1ZUFzU3RyaW5nID09PSB2O1xuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogVG9nZ2xlcyB0aGUgcmVmaW5lbWVudCB2YWx1ZSBmb3IgYW4gYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge1JlZmluZW1lbnRMaXN0fSByZWZpbmVtZW50TGlzdCB0aGUgaW5pdGlhbCBsaXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgdGhlIGF0dHJpYnV0ZSB0byByZWZpbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgcmVmaW5lbWVudFxuICAgKiBAcmV0dXJuIHtSZWZpbmVtZW50TGlzdH0gYSBuZXcgYW5kIHVwZGF0ZWQgbGlzdFxuICAgKi9cbiAgdG9nZ2xlUmVmaW5lbWVudDogZnVuY3Rpb24gdG9nZ2xlUmVmaW5lbWVudChyZWZpbmVtZW50TGlzdCwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ3RvZ2dsZVJlZmluZW1lbnQgc2hvdWxkIGJlIHVzZWQgd2l0aCBhIHZhbHVlJyk7XG5cbiAgICBpZiAobGliLmlzUmVmaW5lZChyZWZpbmVtZW50TGlzdCwgYXR0cmlidXRlLCB2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBsaWIucmVtb3ZlUmVmaW5lbWVudChyZWZpbmVtZW50TGlzdCwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpYi5hZGRSZWZpbmVtZW50KHJlZmluZW1lbnRMaXN0LCBhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgfSxcbiAgLyoqXG4gICAqIENsZWFyIGFsbCBvciBwYXJ0cyBvZiBhIFJlZmluZW1lbnRMaXN0LiBEZXBlbmRpbmcgb24gdGhlIGFyZ3VtZW50cywgdGhyZWVcbiAgICoga2luZHMgb2YgYmVoYXZpb3IgY2FuIGhhcHBlbjpcbiAgICogIC0gaWYgbm8gYXR0cmlidXRlIGlzIHByb3ZpZGVkOiBjbGVhcnMgdGhlIHdob2xlIGxpc3RcbiAgICogIC0gaWYgYW4gYXR0cmlidXRlIGlzIHByb3ZpZGVkIGFzIGEgc3RyaW5nOiBjbGVhcnMgdGhlIGxpc3QgZm9yIHRoZSBzcGVjaWZpYyBhdHRyaWJ1dGVcbiAgICogIC0gaWYgYW4gYXR0cmlidXRlIGlzIHByb3ZpZGVkIGFzIGEgZnVuY3Rpb246IGRpc2NhcmRzIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZVxuICAgKiBAcGFyYW0ge1JlZmluZW1lbnRMaXN0fSByZWZpbmVtZW50TGlzdCB0aGUgaW5pdGlhbCBsaXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbYXR0cmlidXRlXSB0aGUgYXR0cmlidXRlIG9yIGZ1bmN0aW9uIHRvIGRpc2NhcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtyZWZpbmVtZW50VHlwZV0gb3B0aW9uYWwgcGFyYW1ldGVyIHRvIGdpdmUgbW9yZSBjb250ZXh0IHRvIHRoZSBhdHRyaWJ1dGUgZnVuY3Rpb25cbiAgICogQHJldHVybiB7UmVmaW5lbWVudExpc3R9IGEgbmV3IGFuZCB1cGRhdGVkIHJlZmluZW1lbnQgbGlzdFxuICAgKi9cbiAgY2xlYXJSZWZpbmVtZW50OiBmdW5jdGlvbiBjbGVhclJlZmluZW1lbnQocmVmaW5lbWVudExpc3QsIGF0dHJpYnV0ZSwgcmVmaW5lbWVudFR5cGUpIHtcbiAgICBpZiAoYXR0cmlidXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghb2JqZWN0SGFzS2V5cyhyZWZpbmVtZW50TGlzdCkpIHtcbiAgICAgICAgcmV0dXJuIHJlZmluZW1lbnRMaXN0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHt9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBvbWl0KHJlZmluZW1lbnRMaXN0LCBbYXR0cmlidXRlXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXR0cmlidXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICB2YXIgbmV3UmVmaW5lbWVudExpc3QgPSBPYmplY3Qua2V5cyhyZWZpbmVtZW50TGlzdCkucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIGtleSkge1xuICAgICAgICB2YXIgdmFsdWVzID0gcmVmaW5lbWVudExpc3Rba2V5XSB8fCBbXTtcbiAgICAgICAgdmFyIGZhY2V0TGlzdCA9IHZhbHVlcy5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gIWF0dHJpYnV0ZSh2YWx1ZSwga2V5LCByZWZpbmVtZW50VHlwZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChmYWNldExpc3QubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbWVtb1trZXldID0gZmFjZXRMaXN0O1xuXG4gICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgfSwge30pO1xuXG4gICAgICBpZiAoaGFzQ2hhbmdlZCkgcmV0dXJuIG5ld1JlZmluZW1lbnRMaXN0O1xuICAgICAgcmV0dXJuIHJlZmluZW1lbnRMaXN0O1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIFRlc3QgaWYgdGhlIHJlZmluZW1lbnQgdmFsdWUgaXMgdXNlZCBmb3IgdGhlIGF0dHJpYnV0ZS4gSWYgbm8gcmVmaW5lbWVudCB2YWx1ZVxuICAgKiBpcyBwcm92aWRlZCwgdGVzdCBpZiB0aGUgcmVmaW5lbWVudExpc3QgY29udGFpbnMgYW55IHJlZmluZW1lbnQgZm9yIHRoZVxuICAgKiBnaXZlbiBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7UmVmaW5lbWVudExpc3R9IHJlZmluZW1lbnRMaXN0IHRoZSBsaXN0IG9mIHJlZmluZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtyZWZpbmVtZW50VmFsdWVdIHZhbHVlIG9mIHRoZSBmaWx0ZXIvcmVmaW5lbWVudFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNSZWZpbmVkOiBmdW5jdGlvbiBpc1JlZmluZWQocmVmaW5lbWVudExpc3QsIGF0dHJpYnV0ZSwgcmVmaW5lbWVudFZhbHVlKSB7XG4gICAgdmFyIGNvbnRhaW5zUmVmaW5lbWVudHMgPSAhIXJlZmluZW1lbnRMaXN0W2F0dHJpYnV0ZV0gJiZcbiAgICAgIHJlZmluZW1lbnRMaXN0W2F0dHJpYnV0ZV0ubGVuZ3RoID4gMDtcblxuICAgIGlmIChyZWZpbmVtZW50VmFsdWUgPT09IHVuZGVmaW5lZCB8fCAhY29udGFpbnNSZWZpbmVtZW50cykge1xuICAgICAgcmV0dXJuIGNvbnRhaW5zUmVmaW5lbWVudHM7XG4gICAgfVxuXG4gICAgdmFyIHJlZmluZW1lbnRWYWx1ZUFzU3RyaW5nID0gJycgKyByZWZpbmVtZW50VmFsdWU7XG5cbiAgICByZXR1cm4gcmVmaW5lbWVudExpc3RbYXR0cmlidXRlXS5pbmRleE9mKHJlZmluZW1lbnRWYWx1ZUFzU3RyaW5nKSAhPT0gLTE7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbGliO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbWVyZ2UgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvbWVyZ2UnKTtcbnZhciBkZWZhdWx0c1B1cmUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZGVmYXVsdHNQdXJlJyk7XG52YXIgaW50ZXJzZWN0aW9uID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2ludGVyc2VjdGlvbicpO1xudmFyIGZpbmQgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZmluZCcpO1xudmFyIHZhbFRvTnVtYmVyID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL3ZhbFRvTnVtYmVyJyk7XG52YXIgb21pdCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9vbWl0Jyk7XG52YXIgb2JqZWN0SGFzS2V5cyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9vYmplY3RIYXNLZXlzJyk7XG52YXIgaXNWYWxpZFVzZXJUb2tlbiA9IHJlcXVpcmUoJy4uL3V0aWxzL2lzVmFsaWRVc2VyVG9rZW4nKTtcblxudmFyIFJlZmluZW1lbnRMaXN0ID0gcmVxdWlyZSgnLi9SZWZpbmVtZW50TGlzdCcpO1xuXG4vKipcbiAqIGlzRXF1YWwsIGJ1dCBvbmx5IGZvciBudW1lcmljIHJlZmluZW1lbnQgdmFsdWVzLCBwb3NzaWJsZSB2YWx1ZXM6XG4gKiAtIDVcbiAqIC0gWzVdXG4gKiAtIFtbNV1dXG4gKiAtIFtbNSw1XSxbNF1dXG4gKi9cbmZ1bmN0aW9uIGlzRXF1YWxOdW1lcmljUmVmaW5lbWVudChhLCBiKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICByZXR1cm4gKFxuICAgICAgYS5sZW5ndGggPT09IGIubGVuZ3RoICYmXG4gICAgICBhLmV2ZXJ5KGZ1bmN0aW9uKGVsLCBpKSB7XG4gICAgICAgIHJldHVybiBpc0VxdWFsTnVtZXJpY1JlZmluZW1lbnQoYltpXSwgZWwpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG4gIHJldHVybiBhID09PSBiO1xufVxuXG4vKipcbiAqIGxpa2UgXy5maW5kIGJ1dCB1c2luZyBkZWVwIGVxdWFsaXR5IHRvIGJlIGFibGUgdG8gdXNlIGl0XG4gKiB0byBmaW5kIGFycmF5cy5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2FueVtdfSBhcnJheSBhcnJheSB0byBzZWFyY2ggaW50byAoZWxlbWVudHMgYXJlIGJhc2Ugb3IgYXJyYXkgb2YgYmFzZSlcbiAqIEBwYXJhbSB7YW55fSBzZWFyY2hlZFZhbHVlIHRoZSB2YWx1ZSB3ZSdyZSBsb29raW5nIGZvciAoYmFzZSBvciBhcnJheSBvZiBiYXNlKVxuICogQHJldHVybiB7YW55fSB0aGUgc2VhcmNoZWQgdmFsdWUgb3IgdW5kZWZpbmVkXG4gKi9cbmZ1bmN0aW9uIGZpbmRBcnJheShhcnJheSwgc2VhcmNoZWRWYWx1ZSkge1xuICByZXR1cm4gZmluZChhcnJheSwgZnVuY3Rpb24oY3VycmVudFZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRXF1YWxOdW1lcmljUmVmaW5lbWVudChjdXJyZW50VmFsdWUsIHNlYXJjaGVkVmFsdWUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaGUgZmFjZXQgbGlzdCBpcyB0aGUgc3RydWN0dXJlIHVzZWQgdG8gc3RvcmUgdGhlIGxpc3Qgb2YgdmFsdWVzIHVzZWQgdG9cbiAqIGZpbHRlciBhIHNpbmdsZSBhdHRyaWJ1dGUuXG4gKiBAdHlwZWRlZiB7c3RyaW5nW119IFNlYXJjaFBhcmFtZXRlcnMuRmFjZXRMaXN0XG4gKi9cblxuLyoqXG4gKiBTdHJ1Y3R1cmUgdG8gc3RvcmUgbnVtZXJpYyBmaWx0ZXJzIHdpdGggdGhlIG9wZXJhdG9yIGFzIHRoZSBrZXkuIFRoZSBzdXBwb3J0ZWQgb3BlcmF0b3JzXG4gKiBhcmUgYD1gLCBgPmAsIGA8YCwgYD49YCwgYDw9YCBhbmQgYCE9YC5cbiAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZywgQXJyYXkuPG51bWJlcnxudW1iZXJbXT4+fSBTZWFyY2hQYXJhbWV0ZXJzLk9wZXJhdG9yTGlzdFxuICovXG5cbi8qKlxuICogU2VhcmNoUGFyYW1ldGVycyBpcyB0aGUgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBjb250YWlucyBhbGwgdGhlIGluZm9ybWF0aW9uXG4gKiB1c2FibGUgZm9yIG1ha2luZyBhIHNlYXJjaCB0byBBbGdvbGlhIEFQSS4gSXQgZG9lc24ndCBkbyB0aGUgc2VhcmNoIGl0c2VsZixcbiAqIG5vciBkb2VzIGl0IGNvbnRhaW5zIGxvZ2ljIGFib3V0IHRoZSBwYXJhbWV0ZXJzLlxuICogSXQgaXMgYW4gaW1tdXRhYmxlIG9iamVjdCwgdGhlcmVmb3JlIGl0IGhhcyBiZWVuIGNyZWF0ZWQgaW4gYSB3YXkgdGhhdCBlYWNoXG4gKiBjaGFuZ2VzIGRvZXMgbm90IGNoYW5nZSB0aGUgb2JqZWN0IGl0c2VsZiBidXQgcmV0dXJucyBhIGNvcHkgd2l0aCB0aGVcbiAqIG1vZGlmaWNhdGlvbi5cbiAqIFRoaXMgb2JqZWN0IHNob3VsZCBwcm9iYWJseSBub3QgYmUgaW5zdGFudGlhdGVkIG91dHNpZGUgb2YgdGhlIGhlbHBlci4gSXQgd2lsbFxuICogYmUgcHJvdmlkZWQgd2hlbiBuZWVkZWQuIFRoaXMgb2JqZWN0IGlzIGRvY3VtZW50ZWQgZm9yIHJlZmVyZW5jZSBhcyB5b3UnbGxcbiAqIGdldCBpdCBmcm9tIGV2ZW50cyBnZW5lcmF0ZWQgYnkgdGhlIHtAbGluayBBbGdvbGlhU2VhcmNoSGVscGVyfS5cbiAqIElmIG5lZWQgYmUsIGluc3RhbnRpYXRlIHRoZSBIZWxwZXIgZnJvbSB0aGUgZmFjdG9yeSBmdW5jdGlvbiB7QGxpbmsgU2VhcmNoUGFyYW1ldGVycy5tYWtlfVxuICogQGNvbnN0cnVjdG9yXG4gKiBAY2xhc3NkZXNjIGNvbnRhaW5zIGFsbCB0aGUgcGFyYW1ldGVycyBvZiBhIHNlYXJjaFxuICogQHBhcmFtIHtvYmplY3R8U2VhcmNoUGFyYW1ldGVyc30gbmV3UGFyYW1ldGVycyBleGlzdGluZyBwYXJhbWV0ZXJzIG9yIHBhcnRpYWwgb2JqZWN0XG4gKiBmb3IgdGhlIHByb3BlcnRpZXMgb2YgYSBuZXcgU2VhcmNoUGFyYW1ldGVyc1xuICogQHNlZSBTZWFyY2hQYXJhbWV0ZXJzLm1ha2VcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlNlYXJjaFBhcmFtZXRlcnMgb2YgdGhlIGZpcnN0IHF1ZXJ5IGluXG4gKiAgIDxhIGhyZWY9XCJodHRwOi8vZGVtb3MuYWxnb2xpYS5jb20vaW5zdGFudC1zZWFyY2gtZGVtby9cIj50aGUgaW5zdGFudCBzZWFyY2ggZGVtbzwvYT48L2NhcHRpb24+XG57XG4gICBcInF1ZXJ5XCI6IFwiXCIsXG4gICBcImRpc2p1bmN0aXZlRmFjZXRzXCI6IFtcbiAgICAgIFwiY3VzdG9tZXJSZXZpZXdDb3VudFwiLFxuICAgICAgXCJjYXRlZ29yeVwiLFxuICAgICAgXCJzYWxlUHJpY2VfcmFuZ2VcIixcbiAgICAgIFwibWFudWZhY3R1cmVyXCJcbiAgXSxcbiAgIFwibWF4VmFsdWVzUGVyRmFjZXRcIjogMzAsXG4gICBcInBhZ2VcIjogMCxcbiAgIFwiaGl0c1BlclBhZ2VcIjogMTAsXG4gICBcImZhY2V0c1wiOiBbXG4gICAgICBcInR5cGVcIixcbiAgICAgIFwic2hpcHBpbmdcIlxuICBdXG59XG4gKi9cbmZ1bmN0aW9uIFNlYXJjaFBhcmFtZXRlcnMobmV3UGFyYW1ldGVycykge1xuICB2YXIgcGFyYW1zID0gbmV3UGFyYW1ldGVycyA/IFNlYXJjaFBhcmFtZXRlcnMuX3BhcnNlTnVtYmVycyhuZXdQYXJhbWV0ZXJzKSA6IHt9O1xuXG4gIGlmIChwYXJhbXMudXNlclRva2VuICE9PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRVc2VyVG9rZW4ocGFyYW1zLnVzZXJUb2tlbikpIHtcbiAgICBjb25zb2xlLndhcm4oJ1thbGdvbGlhc2VhcmNoLWhlbHBlcl0gVGhlIGB1c2VyVG9rZW5gIHBhcmFtZXRlciBpcyBpbnZhbGlkLiBUaGlzIGNhbiBsZWFkIHRvIHdyb25nIGFuYWx5dGljcy5cXG4gIC0gRm9ybWF0OiBbYS16QS1aMC05Xy1dezEsNjR9Jyk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgYXR0cmlidXRlIGNvbnRhaW5zIHRoZSBsaXN0IG9mIGFsbCB0aGUgY29uanVuY3RpdmUgZmFjZXRzXG4gICAqIHVzZWQuIFRoaXMgbGlzdCB3aWxsIGJlIGFkZGVkIHRvIHJlcXVlc3RlZCBmYWNldHMgaW4gdGhlXG4gICAqIFtmYWNldHMgYXR0cmlidXRlXShodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvcmVzdC1hcGkvc2VhcmNoI3BhcmFtLWZhY2V0cykgc2VudCB0byBhbGdvbGlhLlxuICAgKiBAbWVtYmVyIHtzdHJpbmdbXX1cbiAgICovXG4gIHRoaXMuZmFjZXRzID0gcGFyYW1zLmZhY2V0cyB8fCBbXTtcbiAgLyoqXG4gICAqIFRoaXMgYXR0cmlidXRlIGNvbnRhaW5zIHRoZSBsaXN0IG9mIGFsbCB0aGUgZGlzanVuY3RpdmUgZmFjZXRzXG4gICAqIHVzZWQuIFRoaXMgbGlzdCB3aWxsIGJlIGFkZGVkIHRvIHJlcXVlc3RlZCBmYWNldHMgaW4gdGhlXG4gICAqIFtmYWNldHMgYXR0cmlidXRlXShodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvcmVzdC1hcGkvc2VhcmNoI3BhcmFtLWZhY2V0cykgc2VudCB0byBhbGdvbGlhLlxuICAgKiBAbWVtYmVyIHtzdHJpbmdbXX1cbiAgICovXG4gIHRoaXMuZGlzanVuY3RpdmVGYWNldHMgPSBwYXJhbXMuZGlzanVuY3RpdmVGYWNldHMgfHwgW107XG4gIC8qKlxuICAgKiBUaGlzIGF0dHJpYnV0ZSBjb250YWlucyB0aGUgbGlzdCBvZiBhbGwgdGhlIGhpZXJhcmNoaWNhbCBmYWNldHNcbiAgICogdXNlZC4gVGhpcyBsaXN0IHdpbGwgYmUgYWRkZWQgdG8gcmVxdWVzdGVkIGZhY2V0cyBpbiB0aGVcbiAgICogW2ZhY2V0cyBhdHRyaWJ1dGVdKGh0dHBzOi8vd3d3LmFsZ29saWEuY29tL2RvYy9yZXN0LWFwaS9zZWFyY2gjcGFyYW0tZmFjZXRzKSBzZW50IHRvIGFsZ29saWEuXG4gICAqIEhpZXJhcmNoaWNhbCBmYWNldHMgYXJlIGEgc3ViIHR5cGUgb2YgZGlzanVuY3RpdmUgZmFjZXRzIHRoYXRcbiAgICogbGV0IHlvdSBmaWx0ZXIgZmFjZXRlZCBhdHRyaWJ1dGVzIGhpZXJhcmNoaWNhbGx5LlxuICAgKiBAbWVtYmVyIHtzdHJpbmdbXXxvYmplY3RbXX1cbiAgICovXG4gIHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzID0gcGFyYW1zLmhpZXJhcmNoaWNhbEZhY2V0cyB8fCBbXTtcblxuICAvLyBSZWZpbmVtZW50c1xuICAvKipcbiAgICogVGhpcyBhdHRyaWJ1dGUgY29udGFpbnMgYWxsIHRoZSBmaWx0ZXJzIHRoYXQgbmVlZCB0byBiZVxuICAgKiBhcHBsaWVkIG9uIHRoZSBjb25qdW5jdGl2ZSBmYWNldHMuIEVhY2ggZmFjZXQgbXVzdCBiZSBwcm9wZXJseVxuICAgKiBkZWZpbmVkIGluIHRoZSBgZmFjZXRzYCBhdHRyaWJ1dGUuXG4gICAqXG4gICAqIFRoZSBrZXkgaXMgdGhlIG5hbWUgb2YgdGhlIGZhY2V0LCBhbmQgdGhlIGBGYWNldExpc3RgIGNvbnRhaW5zIGFsbFxuICAgKiBmaWx0ZXJzIHNlbGVjdGVkIGZvciB0aGUgYXNzb2NpYXRlZCBmYWNldCBuYW1lLlxuICAgKlxuICAgKiBXaGVuIHF1ZXJ5aW5nIGFsZ29saWEsIHRoZSB2YWx1ZXMgc3RvcmVkIGluIHRoaXMgYXR0cmlidXRlIHdpbGxcbiAgICogYmUgdHJhbnNsYXRlZCBpbnRvIHRoZSBgZmFjZXRGaWx0ZXJzYCBhdHRyaWJ1dGUuXG4gICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLCBTZWFyY2hQYXJhbWV0ZXJzLkZhY2V0TGlzdD59XG4gICAqL1xuICB0aGlzLmZhY2V0c1JlZmluZW1lbnRzID0gcGFyYW1zLmZhY2V0c1JlZmluZW1lbnRzIHx8IHt9O1xuICAvKipcbiAgICogVGhpcyBhdHRyaWJ1dGUgY29udGFpbnMgYWxsIHRoZSBmaWx0ZXJzIHRoYXQgbmVlZCB0byBiZVxuICAgKiBleGNsdWRlZCBmcm9tIHRoZSBjb25qdW5jdGl2ZSBmYWNldHMuIEVhY2ggZmFjZXQgbXVzdCBiZSBwcm9wZXJseVxuICAgKiBkZWZpbmVkIGluIHRoZSBgZmFjZXRzYCBhdHRyaWJ1dGUuXG4gICAqXG4gICAqIFRoZSBrZXkgaXMgdGhlIG5hbWUgb2YgdGhlIGZhY2V0LCBhbmQgdGhlIGBGYWNldExpc3RgIGNvbnRhaW5zIGFsbFxuICAgKiBmaWx0ZXJzIGV4Y2x1ZGVkIGZvciB0aGUgYXNzb2NpYXRlZCBmYWNldCBuYW1lLlxuICAgKlxuICAgKiBXaGVuIHF1ZXJ5aW5nIGFsZ29saWEsIHRoZSB2YWx1ZXMgc3RvcmVkIGluIHRoaXMgYXR0cmlidXRlIHdpbGxcbiAgICogYmUgdHJhbnNsYXRlZCBpbnRvIHRoZSBgZmFjZXRGaWx0ZXJzYCBhdHRyaWJ1dGUuXG4gICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLCBTZWFyY2hQYXJhbWV0ZXJzLkZhY2V0TGlzdD59XG4gICAqL1xuICB0aGlzLmZhY2V0c0V4Y2x1ZGVzID0gcGFyYW1zLmZhY2V0c0V4Y2x1ZGVzIHx8IHt9O1xuICAvKipcbiAgICogVGhpcyBhdHRyaWJ1dGUgY29udGFpbnMgYWxsIHRoZSBmaWx0ZXJzIHRoYXQgbmVlZCB0byBiZVxuICAgKiBhcHBsaWVkIG9uIHRoZSBkaXNqdW5jdGl2ZSBmYWNldHMuIEVhY2ggZmFjZXQgbXVzdCBiZSBwcm9wZXJseVxuICAgKiBkZWZpbmVkIGluIHRoZSBgZGlzanVuY3RpdmVGYWNldHNgIGF0dHJpYnV0ZS5cbiAgICpcbiAgICogVGhlIGtleSBpcyB0aGUgbmFtZSBvZiB0aGUgZmFjZXQsIGFuZCB0aGUgYEZhY2V0TGlzdGAgY29udGFpbnMgYWxsXG4gICAqIGZpbHRlcnMgc2VsZWN0ZWQgZm9yIHRoZSBhc3NvY2lhdGVkIGZhY2V0IG5hbWUuXG4gICAqXG4gICAqIFdoZW4gcXVlcnlpbmcgYWxnb2xpYSwgdGhlIHZhbHVlcyBzdG9yZWQgaW4gdGhpcyBhdHRyaWJ1dGUgd2lsbFxuICAgKiBiZSB0cmFuc2xhdGVkIGludG8gdGhlIGBmYWNldEZpbHRlcnNgIGF0dHJpYnV0ZS5cbiAgICogQG1lbWJlciB7T2JqZWN0LjxzdHJpbmcsIFNlYXJjaFBhcmFtZXRlcnMuRmFjZXRMaXN0Pn1cbiAgICovXG4gIHRoaXMuZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50cyA9IHBhcmFtcy5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzIHx8IHt9O1xuICAvKipcbiAgICogVGhpcyBhdHRyaWJ1dGUgY29udGFpbnMgYWxsIHRoZSBmaWx0ZXJzIHRoYXQgbmVlZCB0byBiZVxuICAgKiBhcHBsaWVkIG9uIHRoZSBudW1lcmljIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIFRoZSBrZXkgaXMgdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSwgYW5kIHRoZSB2YWx1ZSBpcyB0aGVcbiAgICogZmlsdGVycyB0byBhcHBseSB0byB0aGlzIGF0dHJpYnV0ZS5cbiAgICpcbiAgICogV2hlbiBxdWVyeWluZyBhbGdvbGlhLCB0aGUgdmFsdWVzIHN0b3JlZCBpbiB0aGlzIGF0dHJpYnV0ZSB3aWxsXG4gICAqIGJlIHRyYW5zbGF0ZWQgaW50byB0aGUgYG51bWVyaWNGaWx0ZXJzYCBhdHRyaWJ1dGUuXG4gICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLCBTZWFyY2hQYXJhbWV0ZXJzLk9wZXJhdG9yTGlzdD59XG4gICAqL1xuICB0aGlzLm51bWVyaWNSZWZpbmVtZW50cyA9IHBhcmFtcy5udW1lcmljUmVmaW5lbWVudHMgfHwge307XG4gIC8qKlxuICAgKiBUaGlzIGF0dHJpYnV0ZSBjb250YWlucyBhbGwgdGhlIHRhZ3MgdXNlZCB0byByZWZpbmUgdGhlIHF1ZXJ5LlxuICAgKlxuICAgKiBXaGVuIHF1ZXJ5aW5nIGFsZ29saWEsIHRoZSB2YWx1ZXMgc3RvcmVkIGluIHRoaXMgYXR0cmlidXRlIHdpbGxcbiAgICogYmUgdHJhbnNsYXRlZCBpbnRvIHRoZSBgdGFnRmlsdGVyc2AgYXR0cmlidXRlLlxuICAgKiBAbWVtYmVyIHtzdHJpbmdbXX1cbiAgICovXG4gIHRoaXMudGFnUmVmaW5lbWVudHMgPSBwYXJhbXMudGFnUmVmaW5lbWVudHMgfHwgW107XG4gIC8qKlxuICAgKiBUaGlzIGF0dHJpYnV0ZSBjb250YWlucyBhbGwgdGhlIGZpbHRlcnMgdGhhdCBuZWVkIHRvIGJlXG4gICAqIGFwcGxpZWQgb24gdGhlIGhpZXJhcmNoaWNhbCBmYWNldHMuIEVhY2ggZmFjZXQgbXVzdCBiZSBwcm9wZXJseVxuICAgKiBkZWZpbmVkIGluIHRoZSBgaGllcmFyY2hpY2FsRmFjZXRzYCBhdHRyaWJ1dGUuXG4gICAqXG4gICAqIFRoZSBrZXkgaXMgdGhlIG5hbWUgb2YgdGhlIGZhY2V0LCBhbmQgdGhlIGBGYWNldExpc3RgIGNvbnRhaW5zIGFsbFxuICAgKiBmaWx0ZXJzIHNlbGVjdGVkIGZvciB0aGUgYXNzb2NpYXRlZCBmYWNldCBuYW1lLiBUaGUgRmFjZXRMaXN0IHZhbHVlc1xuICAgKiBhcmUgc3RydWN0dXJlZCBhcyBhIHN0cmluZyB0aGF0IGNvbnRhaW4gdGhlIHZhbHVlcyBmb3IgZWFjaCBsZXZlbFxuICAgKiBzZXBhcmF0ZWQgYnkgdGhlIGNvbmZpZ3VyZWQgc2VwYXJhdG9yLlxuICAgKlxuICAgKiBXaGVuIHF1ZXJ5aW5nIGFsZ29saWEsIHRoZSB2YWx1ZXMgc3RvcmVkIGluIHRoaXMgYXR0cmlidXRlIHdpbGxcbiAgICogYmUgdHJhbnNsYXRlZCBpbnRvIHRoZSBgZmFjZXRGaWx0ZXJzYCBhdHRyaWJ1dGUuXG4gICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLCBTZWFyY2hQYXJhbWV0ZXJzLkZhY2V0TGlzdD59XG4gICAqL1xuICB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzID0gcGFyYW1zLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzIHx8IHt9O1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtTmFtZSkge1xuICAgIHZhciBpc0tleUtub3duID0gU2VhcmNoUGFyYW1ldGVycy5QQVJBTUVURVJTLmluZGV4T2YocGFyYW1OYW1lKSAhPT0gLTE7XG4gICAgdmFyIGlzVmFsdWVEZWZpbmVkID0gcGFyYW1zW3BhcmFtTmFtZV0gIT09IHVuZGVmaW5lZDtcblxuICAgIGlmICghaXNLZXlLbm93biAmJiBpc1ZhbHVlRGVmaW5lZCkge1xuICAgICAgc2VsZltwYXJhbU5hbWVdID0gcGFyYW1zW3BhcmFtTmFtZV07XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBMaXN0IGFsbCB0aGUgcHJvcGVydGllcyBpbiBTZWFyY2hQYXJhbWV0ZXJzIGFuZCB0aGVyZWZvcmUgYWxsIHRoZSBrbm93biBBbGdvbGlhIHByb3BlcnRpZXNcbiAqIFRoaXMgZG9lc24ndCBjb250YWluIGFueSBiZXRhL2hpZGRlbiBmZWF0dXJlcy5cbiAqIEBwcml2YXRlXG4gKi9cblNlYXJjaFBhcmFtZXRlcnMuUEFSQU1FVEVSUyA9IE9iamVjdC5rZXlzKG5ldyBTZWFyY2hQYXJhbWV0ZXJzKCkpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFN0YXRlIGZ1bGwgb3IgcGFydCBvZiBhIHN0YXRlXG4gKiBAcmV0dXJuIHtvYmplY3R9IGEgbmV3IG9iamVjdCB3aXRoIHRoZSBudW1iZXIga2V5cyBhcyBudW1iZXJcbiAqL1xuU2VhcmNoUGFyYW1ldGVycy5fcGFyc2VOdW1iZXJzID0gZnVuY3Rpb24ocGFydGlhbFN0YXRlKSB7XG4gIC8vIERvIG5vdCByZXBhcnNlIG51bWJlcnMgaW4gU2VhcmNoUGFyYW1ldGVycywgdGhleSBvdWdodCB0byBiZSBwYXJzZWQgYWxyZWFkeVxuICBpZiAocGFydGlhbFN0YXRlIGluc3RhbmNlb2YgU2VhcmNoUGFyYW1ldGVycykgcmV0dXJuIHBhcnRpYWxTdGF0ZTtcblxuICB2YXIgbnVtYmVycyA9IHt9O1xuXG4gIHZhciBudW1iZXJLZXlzID0gW1xuICAgICdhcm91bmRQcmVjaXNpb24nLFxuICAgICdhcm91bmRSYWRpdXMnLFxuICAgICdnZXRSYW5raW5nSW5mbycsXG4gICAgJ21pbldvcmRTaXplZm9yMlR5cG9zJyxcbiAgICAnbWluV29yZFNpemVmb3IxVHlwbycsXG4gICAgJ3BhZ2UnLFxuICAgICdtYXhWYWx1ZXNQZXJGYWNldCcsXG4gICAgJ2Rpc3RpbmN0JyxcbiAgICAnbWluaW11bUFyb3VuZFJhZGl1cycsXG4gICAgJ2hpdHNQZXJQYWdlJyxcbiAgICAnbWluUHJveGltaXR5J1xuICBdO1xuXG4gIG51bWJlcktleXMuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgdmFyIHZhbHVlID0gcGFydGlhbFN0YXRlW2tdO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgcGFyc2VkVmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgIC8vIGdsb2JhbCBpc05hTiBpcyBvayB0byB1c2UgaGVyZSwgdmFsdWUgaXMgb25seSBudW1iZXIgb3IgTmFOXG4gICAgICBudW1iZXJzW2tdID0gaXNOYU4ocGFyc2VkVmFsdWUpID8gdmFsdWUgOiBwYXJzZWRWYWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHRoZXJlJ3MgdHdvIGZvcm1hdHMgb2YgaW5zaWRlQm91bmRpbmdCb3gsIHdlIG5lZWQgdG8gcGFyc2VcbiAgLy8gdGhlIG9uZSB3aGljaCBpcyBhbiBhcnJheSBvZiBmbG9hdCBnZW8gcmVjdGFuZ2xlc1xuICBpZiAoQXJyYXkuaXNBcnJheShwYXJ0aWFsU3RhdGUuaW5zaWRlQm91bmRpbmdCb3gpKSB7XG4gICAgbnVtYmVycy5pbnNpZGVCb3VuZGluZ0JveCA9IHBhcnRpYWxTdGF0ZS5pbnNpZGVCb3VuZGluZ0JveC5tYXAoZnVuY3Rpb24oZ2VvUmVjdCkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ2VvUmVjdCkpIHtcbiAgICAgICAgcmV0dXJuIGdlb1JlY3QubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZW9SZWN0O1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKHBhcnRpYWxTdGF0ZS5udW1lcmljUmVmaW5lbWVudHMpIHtcbiAgICB2YXIgbnVtZXJpY1JlZmluZW1lbnRzID0ge307XG4gICAgT2JqZWN0LmtleXMocGFydGlhbFN0YXRlLm51bWVyaWNSZWZpbmVtZW50cykuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBvcGVyYXRvcnMgPSBwYXJ0aWFsU3RhdGUubnVtZXJpY1JlZmluZW1lbnRzW2F0dHJpYnV0ZV0gfHwge307XG4gICAgICBudW1lcmljUmVmaW5lbWVudHNbYXR0cmlidXRlXSA9IHt9O1xuICAgICAgT2JqZWN0LmtleXMob3BlcmF0b3JzKS5mb3JFYWNoKGZ1bmN0aW9uKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBvcGVyYXRvcnNbb3BlcmF0b3JdO1xuICAgICAgICB2YXIgcGFyc2VkVmFsdWVzID0gdmFsdWVzLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIHJldHVybiB2Lm1hcChmdW5jdGlvbih2UHJpbWUpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2UHJpbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodlByaW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdlByaW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgfSk7XG4gICAgICAgIG51bWVyaWNSZWZpbmVtZW50c1thdHRyaWJ1dGVdW29wZXJhdG9yXSA9IHBhcnNlZFZhbHVlcztcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIG51bWJlcnMubnVtZXJpY1JlZmluZW1lbnRzID0gbnVtZXJpY1JlZmluZW1lbnRzO1xuICB9XG5cbiAgcmV0dXJuIG1lcmdlKHt9LCBwYXJ0aWFsU3RhdGUsIG51bWJlcnMpO1xufTtcblxuLyoqXG4gKiBGYWN0b3J5IGZvciBTZWFyY2hQYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge29iamVjdHxTZWFyY2hQYXJhbWV0ZXJzfSBuZXdQYXJhbWV0ZXJzIGV4aXN0aW5nIHBhcmFtZXRlcnMgb3IgcGFydGlhbFxuICogb2JqZWN0IGZvciB0aGUgcHJvcGVydGllcyBvZiBhIG5ldyBTZWFyY2hQYXJhbWV0ZXJzXG4gKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfSBmcm96ZW4gaW5zdGFuY2Ugb2YgU2VhcmNoUGFyYW1ldGVyc1xuICovXG5TZWFyY2hQYXJhbWV0ZXJzLm1ha2UgPSBmdW5jdGlvbiBtYWtlU2VhcmNoUGFyYW1ldGVycyhuZXdQYXJhbWV0ZXJzKSB7XG4gIHZhciBpbnN0YW5jZSA9IG5ldyBTZWFyY2hQYXJhbWV0ZXJzKG5ld1BhcmFtZXRlcnMpO1xuXG4gIHZhciBoaWVyYXJjaGljYWxGYWNldHMgPSBuZXdQYXJhbWV0ZXJzLmhpZXJhcmNoaWNhbEZhY2V0cyB8fCBbXTtcbiAgaGllcmFyY2hpY2FsRmFjZXRzLmZvckVhY2goZnVuY3Rpb24oZmFjZXQpIHtcbiAgICBpZiAoZmFjZXQucm9vdFBhdGgpIHtcbiAgICAgIHZhciBjdXJyZW50UmVmaW5lbWVudCA9IGluc3RhbmNlLmdldEhpZXJhcmNoaWNhbFJlZmluZW1lbnQoZmFjZXQubmFtZSk7XG5cbiAgICAgIGlmIChjdXJyZW50UmVmaW5lbWVudC5sZW5ndGggPiAwICYmIGN1cnJlbnRSZWZpbmVtZW50WzBdLmluZGV4T2YoZmFjZXQucm9vdFBhdGgpICE9PSAwKSB7XG4gICAgICAgIGluc3RhbmNlID0gaW5zdGFuY2UuY2xlYXJSZWZpbmVtZW50cyhmYWNldC5uYW1lKTtcbiAgICAgIH1cblxuICAgICAgLy8gZ2V0IGl0IGFnYWluIGluIGNhc2UgaXQgaGFzIGJlZW4gY2xlYXJlZFxuICAgICAgY3VycmVudFJlZmluZW1lbnQgPSBpbnN0YW5jZS5nZXRIaWVyYXJjaGljYWxSZWZpbmVtZW50KGZhY2V0Lm5hbWUpO1xuICAgICAgaWYgKGN1cnJlbnRSZWZpbmVtZW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlLnRvZ2dsZUhpZXJhcmNoaWNhbEZhY2V0UmVmaW5lbWVudChmYWNldC5uYW1lLCBmYWNldC5yb290UGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59O1xuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGUgbmV3IHBhcmFtZXRlcnMgYmFzZWQgb24gdGhlIHByZXZpb3VzIHN0YXRlXG4gKiBAcGFyYW0ge1NlYXJjaFBhcmFtZXRlcnN9IGN1cnJlbnRTdGF0ZSB0aGUgY3VycmVudCBzdGF0ZVxuICogQHBhcmFtIHtvYmplY3R8U2VhcmNoUGFyYW1ldGVyc30gcGFyYW1ldGVycyB0aGUgbmV3IHBhcmFtZXRlcnMgdG8gc2V0XG4gKiBAcmV0dXJuIHtFcnJvcnxudWxsfSBFcnJvciBpZiB0aGUgbW9kaWZpY2F0aW9uIGlzIGludmFsaWQsIG51bGwgb3RoZXJ3aXNlXG4gKi9cblNlYXJjaFBhcmFtZXRlcnMudmFsaWRhdGUgPSBmdW5jdGlvbihjdXJyZW50U3RhdGUsIHBhcmFtZXRlcnMpIHtcbiAgdmFyIHBhcmFtcyA9IHBhcmFtZXRlcnMgfHwge307XG5cbiAgaWYgKGN1cnJlbnRTdGF0ZS50YWdGaWx0ZXJzICYmIHBhcmFtcy50YWdSZWZpbmVtZW50cyAmJiBwYXJhbXMudGFnUmVmaW5lbWVudHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoXG4gICAgICAnW1RhZ3NdIENhbm5vdCBzd2l0Y2ggZnJvbSB0aGUgbWFuYWdlZCB0YWcgQVBJIHRvIHRoZSBhZHZhbmNlZCBBUEkuIEl0IGlzIHByb2JhYmx5ICcgK1xuICAgICAgJ2FuIGVycm9yLCBpZiBpdCBpcyByZWFsbHkgd2hhdCB5b3Ugd2FudCwgeW91IHNob3VsZCBmaXJzdCBjbGVhciB0aGUgdGFncyB3aXRoIGNsZWFyVGFncyBtZXRob2QuJyk7XG4gIH1cblxuICBpZiAoY3VycmVudFN0YXRlLnRhZ1JlZmluZW1lbnRzLmxlbmd0aCA+IDAgJiYgcGFyYW1zLnRhZ0ZpbHRlcnMpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKFxuICAgICAgJ1tUYWdzXSBDYW5ub3Qgc3dpdGNoIGZyb20gdGhlIGFkdmFuY2VkIHRhZyBBUEkgdG8gdGhlIG1hbmFnZWQgQVBJLiBJdCBpcyBwcm9iYWJseSAnICtcbiAgICAgICdhbiBlcnJvciwgaWYgaXQgaXMgbm90LCB5b3Ugc2hvdWxkIGZpcnN0IGNsZWFyIHRoZSB0YWdzIHdpdGggY2xlYXJUYWdzIG1ldGhvZC4nKTtcbiAgfVxuXG4gIGlmIChcbiAgICBjdXJyZW50U3RhdGUubnVtZXJpY0ZpbHRlcnMgJiZcbiAgICBwYXJhbXMubnVtZXJpY1JlZmluZW1lbnRzICYmXG4gICAgb2JqZWN0SGFzS2V5cyhwYXJhbXMubnVtZXJpY1JlZmluZW1lbnRzKVxuICApIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKFxuICAgICAgXCJbTnVtZXJpYyBmaWx0ZXJzXSBDYW4ndCBzd2l0Y2ggZnJvbSB0aGUgYWR2YW5jZWQgdG8gdGhlIG1hbmFnZWQgQVBJLiBJdFwiICtcbiAgICAgICAgJyBpcyBwcm9iYWJseSBhbiBlcnJvciwgaWYgdGhpcyBpcyByZWFsbHkgd2hhdCB5b3Ugd2FudCwgeW91IGhhdmUgdG8gZmlyc3QnICtcbiAgICAgICAgJyBjbGVhciB0aGUgbnVtZXJpYyBmaWx0ZXJzLidcbiAgICApO1xuICB9XG5cbiAgaWYgKG9iamVjdEhhc0tleXMoY3VycmVudFN0YXRlLm51bWVyaWNSZWZpbmVtZW50cykgJiYgcGFyYW1zLm51bWVyaWNGaWx0ZXJzKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihcbiAgICAgIFwiW051bWVyaWMgZmlsdGVyc10gQ2FuJ3Qgc3dpdGNoIGZyb20gdGhlIG1hbmFnZWQgQVBJIHRvIHRoZSBhZHZhbmNlZC4gSXRcIiArXG4gICAgICAnIGlzIHByb2JhYmx5IGFuIGVycm9yLCBpZiB0aGlzIGlzIHJlYWxseSB3aGF0IHlvdSB3YW50LCB5b3UgaGF2ZSB0byBmaXJzdCcgK1xuICAgICAgJyBjbGVhciB0aGUgbnVtZXJpYyBmaWx0ZXJzLicpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5TZWFyY2hQYXJhbWV0ZXJzLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFNlYXJjaFBhcmFtZXRlcnMsXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgcmVmaW5lbWVudHMgKGRpc2p1bmN0aXZlICsgY29uanVuY3RpdmUgKyBleGNsdWRlcyArIG51bWVyaWMgZmlsdGVycylcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3VuZGVmaW5lZHxzdHJpbmd8U2VhcmNoUGFyYW1ldGVycy5jbGVhckNhbGxiYWNrfSBbYXR0cmlidXRlXSBvcHRpb25hbCBzdHJpbmcgb3IgZnVuY3Rpb25cbiAgICogLSBJZiBub3QgZ2l2ZW4sIG1lYW5zIHRvIGNsZWFyIGFsbCB0aGUgZmlsdGVycy5cbiAgICogLSBJZiBgc3RyaW5nYCwgbWVhbnMgdG8gY2xlYXIgYWxsIHJlZmluZW1lbnRzIGZvciB0aGUgYGF0dHJpYnV0ZWAgbmFtZWQgZmlsdGVyLlxuICAgKiAtIElmIGBmdW5jdGlvbmAsIG1lYW5zIHRvIGNsZWFyIGFsbCB0aGUgcmVmaW5lbWVudHMgdGhhdCByZXR1cm4gdHJ1dGh5IHZhbHVlcy5cbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIGNsZWFyUmVmaW5lbWVudHM6IGZ1bmN0aW9uIGNsZWFyUmVmaW5lbWVudHMoYXR0cmlidXRlKSB7XG4gICAgdmFyIHBhdGNoID0ge1xuICAgICAgbnVtZXJpY1JlZmluZW1lbnRzOiB0aGlzLl9jbGVhck51bWVyaWNSZWZpbmVtZW50cyhhdHRyaWJ1dGUpLFxuICAgICAgZmFjZXRzUmVmaW5lbWVudHM6IFJlZmluZW1lbnRMaXN0LmNsZWFyUmVmaW5lbWVudChcbiAgICAgICAgdGhpcy5mYWNldHNSZWZpbmVtZW50cyxcbiAgICAgICAgYXR0cmlidXRlLFxuICAgICAgICAnY29uanVuY3RpdmVGYWNldCdcbiAgICAgICksXG4gICAgICBmYWNldHNFeGNsdWRlczogUmVmaW5lbWVudExpc3QuY2xlYXJSZWZpbmVtZW50KFxuICAgICAgICB0aGlzLmZhY2V0c0V4Y2x1ZGVzLFxuICAgICAgICBhdHRyaWJ1dGUsXG4gICAgICAgICdleGNsdWRlJ1xuICAgICAgKSxcbiAgICAgIGRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHM6IFJlZmluZW1lbnRMaXN0LmNsZWFyUmVmaW5lbWVudChcbiAgICAgICAgdGhpcy5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzLFxuICAgICAgICBhdHRyaWJ1dGUsXG4gICAgICAgICdkaXNqdW5jdGl2ZUZhY2V0J1xuICAgICAgKSxcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzOiBSZWZpbmVtZW50TGlzdC5jbGVhclJlZmluZW1lbnQoXG4gICAgICAgIHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMsXG4gICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgJ2hpZXJhcmNoaWNhbEZhY2V0J1xuICAgICAgKVxuICAgIH07XG4gICAgaWYgKFxuICAgICAgcGF0Y2gubnVtZXJpY1JlZmluZW1lbnRzID09PSB0aGlzLm51bWVyaWNSZWZpbmVtZW50cyAmJlxuICAgICAgcGF0Y2guZmFjZXRzUmVmaW5lbWVudHMgPT09IHRoaXMuZmFjZXRzUmVmaW5lbWVudHMgJiZcbiAgICAgIHBhdGNoLmZhY2V0c0V4Y2x1ZGVzID09PSB0aGlzLmZhY2V0c0V4Y2x1ZGVzICYmXG4gICAgICBwYXRjaC5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzID09PSB0aGlzLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMgJiZcbiAgICAgIHBhdGNoLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzID09PSB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHBhdGNoKTtcbiAgfSxcbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgdGhlIHJlZmluZWQgdGFncyBmcm9tIHRoZSBTZWFyY2hQYXJhbWV0ZXJzXG4gICAqIEBtZXRob2RcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIGNsZWFyVGFnczogZnVuY3Rpb24gY2xlYXJUYWdzKCkge1xuICAgIGlmICh0aGlzLnRhZ0ZpbHRlcnMgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnRhZ1JlZmluZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgdGFnRmlsdGVyczogdW5kZWZpbmVkLFxuICAgICAgdGFnUmVmaW5lbWVudHM6IFtdXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBTZXQgdGhlIGluZGV4LlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpbmRleCB0aGUgaW5kZXggbmFtZVxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgc2V0SW5kZXg6IGZ1bmN0aW9uIHNldEluZGV4KGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSB0aGlzLmluZGV4KSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBpbmRleDogaW5kZXhcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFF1ZXJ5IHNldHRlclxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdRdWVyeSB2YWx1ZSBmb3IgdGhlIG5ldyBxdWVyeVxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgc2V0UXVlcnk6IGZ1bmN0aW9uIHNldFF1ZXJ5KG5ld1F1ZXJ5KSB7XG4gICAgaWYgKG5ld1F1ZXJ5ID09PSB0aGlzLnF1ZXJ5KSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBxdWVyeTogbmV3UXVlcnlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFBhZ2Ugc2V0dGVyXG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtudW1iZXJ9IG5ld1BhZ2UgbmV3IHBhZ2UgbnVtYmVyXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICBzZXRQYWdlOiBmdW5jdGlvbiBzZXRQYWdlKG5ld1BhZ2UpIHtcbiAgICBpZiAobmV3UGFnZSA9PT0gdGhpcy5wYWdlKSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBwYWdlOiBuZXdQYWdlXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBGYWNldHMgc2V0dGVyXG4gICAqIFRoZSBmYWNldHMgYXJlIHRoZSBzaW1wbGUgZmFjZXRzLCB1c2VkIGZvciBjb25qdW5jdGl2ZSAoYW5kKSBmYWNldGluZy5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBmYWNldHMgYWxsIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBhbGdvbGlhIHJlY29yZHMgdXNlZCBmb3IgY29uanVuY3RpdmUgZmFjZXRpbmdcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIHNldEZhY2V0czogZnVuY3Rpb24gc2V0RmFjZXRzKGZhY2V0cykge1xuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBmYWNldHM6IGZhY2V0c1xuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogRGlzanVuY3RpdmUgZmFjZXRzIHNldHRlclxuICAgKiBDaGFuZ2UgdGhlIGxpc3Qgb2YgZGlzanVuY3RpdmUgKG9yKSBmYWNldHMgdGhlIGhlbHBlciBjaGFuIGhhbmRsZS5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBmYWNldHMgYWxsIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBhbGdvbGlhIHJlY29yZHMgdXNlZCBmb3IgZGlzanVuY3RpdmUgZmFjZXRpbmdcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIHNldERpc2p1bmN0aXZlRmFjZXRzOiBmdW5jdGlvbiBzZXREaXNqdW5jdGl2ZUZhY2V0cyhmYWNldHMpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgZGlzanVuY3RpdmVGYWNldHM6IGZhY2V0c1xuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogSGl0c1BlclBhZ2Ugc2V0dGVyXG4gICAqIEhpdHMgcGVyIHBhZ2UgcmVwcmVzZW50cyB0aGUgbnVtYmVyIG9mIGhpdHMgcmV0cmlldmVkIGZvciB0aGlzIHF1ZXJ5XG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtudW1iZXJ9IG4gbnVtYmVyIG9mIGhpdHMgcmV0cmlldmVkIHBlciBwYWdlIG9mIHJlc3VsdHNcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIHNldEhpdHNQZXJQYWdlOiBmdW5jdGlvbiBzZXRIaXRzUGVyUGFnZShuKSB7XG4gICAgaWYgKHRoaXMuaGl0c1BlclBhZ2UgPT09IG4pIHJldHVybiB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGhpdHNQZXJQYWdlOiBuXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiB0eXBvVG9sZXJhbmNlIHNldHRlclxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIHR5cG9Ub2xlcmFuY2VcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwb1RvbGVyYW5jZSBuZXcgdmFsdWUgb2YgdHlwb1RvbGVyYW5jZSAoXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJtaW5cIiBvciBcInN0cmljdFwiKVxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgc2V0VHlwb1RvbGVyYW5jZTogZnVuY3Rpb24gc2V0VHlwb1RvbGVyYW5jZSh0eXBvVG9sZXJhbmNlKSB7XG4gICAgaWYgKHRoaXMudHlwb1RvbGVyYW5jZSA9PT0gdHlwb1RvbGVyYW5jZSkgcmV0dXJuIHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgdHlwb1RvbGVyYW5jZTogdHlwb1RvbGVyYW5jZVxuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogQWRkIGEgbnVtZXJpYyBmaWx0ZXIgZm9yIGEgZ2l2ZW4gYXR0cmlidXRlXG4gICAqIFdoZW4gdmFsdWUgaXMgYW4gYXJyYXksIHRoZXkgYXJlIGNvbWJpbmVkIHdpdGggT1JcbiAgICogV2hlbiB2YWx1ZSBpcyBhIHNpbmdsZSB2YWx1ZSwgaXQgd2lsbCBjb21iaW5lZCB3aXRoIEFORFxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgYXR0cmlidXRlIHRvIHNldCB0aGUgZmlsdGVyIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRvciBvcGVyYXRvciBvZiB0aGUgZmlsdGVyIChwb3NzaWJsZSB2YWx1ZXM6ID0sID4sID49LCA8LCA8PSwgIT0pXG4gICAqIEBwYXJhbSB7bnVtYmVyIHwgbnVtYmVyW119IHZhbHVlIHZhbHVlIG9mIHRoZSBmaWx0ZXJcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICogQGV4YW1wbGVcbiAgICogLy8gZm9yIHByaWNlID0gNTAgb3IgNDBcbiAgICogc2VhcmNocGFyYW1ldGVyLmFkZE51bWVyaWNSZWZpbmVtZW50KCdwcmljZScsICc9JywgWzUwLCA0MF0pO1xuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBmb3Igc2l6ZSA9IDM4IGFuZCA0MFxuICAgKiBzZWFyY2hwYXJhbWV0ZXIuYWRkTnVtZXJpY1JlZmluZW1lbnQoJ3NpemUnLCAnPScsIDM4KTtcbiAgICogc2VhcmNocGFyYW1ldGVyLmFkZE51bWVyaWNSZWZpbmVtZW50KCdzaXplJywgJz0nLCA0MCk7XG4gICAqL1xuICBhZGROdW1lcmljUmVmaW5lbWVudDogZnVuY3Rpb24oYXR0cmlidXRlLCBvcGVyYXRvciwgdikge1xuICAgIHZhciB2YWx1ZSA9IHZhbFRvTnVtYmVyKHYpO1xuXG4gICAgaWYgKHRoaXMuaXNOdW1lcmljUmVmaW5lZChhdHRyaWJ1dGUsIG9wZXJhdG9yLCB2YWx1ZSkpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIG1vZCA9IG1lcmdlKHt9LCB0aGlzLm51bWVyaWNSZWZpbmVtZW50cyk7XG5cbiAgICBtb2RbYXR0cmlidXRlXSA9IG1lcmdlKHt9LCBtb2RbYXR0cmlidXRlXSk7XG5cbiAgICBpZiAobW9kW2F0dHJpYnV0ZV1bb3BlcmF0b3JdKSB7XG4gICAgICAvLyBBcnJheSBjb3B5XG4gICAgICBtb2RbYXR0cmlidXRlXVtvcGVyYXRvcl0gPSBtb2RbYXR0cmlidXRlXVtvcGVyYXRvcl0uc2xpY2UoKTtcbiAgICAgIC8vIEFkZCB0aGUgZWxlbWVudC4gQ29uY2F0IGNhbid0IGJlIHVzZWQgaGVyZSBiZWNhdXNlIHZhbHVlIGNhbiBiZSBhbiBhcnJheS5cbiAgICAgIG1vZFthdHRyaWJ1dGVdW29wZXJhdG9yXS5wdXNoKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kW2F0dHJpYnV0ZV1bb3BlcmF0b3JdID0gW3ZhbHVlXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgbnVtZXJpY1JlZmluZW1lbnRzOiBtb2RcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIEdldCB0aGUgbGlzdCBvZiBjb25qdW5jdGl2ZSByZWZpbmVtZW50cyBmb3IgYSBzaW5nbGUgZmFjZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0TmFtZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHJldHVybiB7c3RyaW5nW119IGxpc3Qgb2YgcmVmaW5lbWVudHNcbiAgICovXG4gIGdldENvbmp1bmN0aXZlUmVmaW5lbWVudHM6IGZ1bmN0aW9uKGZhY2V0TmFtZSkge1xuICAgIGlmICghdGhpcy5pc0Nvbmp1bmN0aXZlRmFjZXQoZmFjZXROYW1lKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mYWNldHNSZWZpbmVtZW50c1tmYWNldE5hbWVdIHx8IFtdO1xuICB9LFxuICAvKipcbiAgICogR2V0IHRoZSBsaXN0IG9mIGRpc2p1bmN0aXZlIHJlZmluZW1lbnRzIGZvciBhIHNpbmdsZSBmYWNldFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXROYW1lIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB1c2VkIGZvciBmYWNldGluZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmdbXX0gbGlzdCBvZiByZWZpbmVtZW50c1xuICAgKi9cbiAgZ2V0RGlzanVuY3RpdmVSZWZpbmVtZW50czogZnVuY3Rpb24oZmFjZXROYW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzanVuY3RpdmVGYWNldChmYWNldE5hbWUpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHNbZmFjZXROYW1lXSB8fCBbXTtcbiAgfSxcbiAgLyoqXG4gICAqIEdldCB0aGUgbGlzdCBvZiBoaWVyYXJjaGljYWwgcmVmaW5lbWVudHMgZm9yIGEgc2luZ2xlIGZhY2V0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldE5hbWUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHVzZWQgZm9yIGZhY2V0aW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ1tdfSBsaXN0IG9mIHJlZmluZW1lbnRzXG4gICAqL1xuICBnZXRIaWVyYXJjaGljYWxSZWZpbmVtZW50OiBmdW5jdGlvbihmYWNldE5hbWUpIHtcbiAgICAvLyB3ZSBzZW5kIGFuIGFycmF5IGJ1dCB3ZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgbXVsdGlwbGVcbiAgICAvLyBoaWVyYXJjaGljYWxSZWZpbmVtZW50cyBmb3IgYSBoaWVyYXJjaGljYWxGYWNldFxuICAgIHJldHVybiB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzW2ZhY2V0TmFtZV0gfHwgW107XG4gIH0sXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgZXhjbHVkZSByZWZpbmVtZW50cyBmb3IgYSBzaW5nbGUgZmFjZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0TmFtZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHJldHVybiB7c3RyaW5nW119IGxpc3Qgb2YgcmVmaW5lbWVudHNcbiAgICovXG4gIGdldEV4Y2x1ZGVSZWZpbmVtZW50czogZnVuY3Rpb24oZmFjZXROYW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzQ29uanVuY3RpdmVGYWNldChmYWNldE5hbWUpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZhY2V0c0V4Y2x1ZGVzW2ZhY2V0TmFtZV0gfHwgW107XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgdGhlIG51bWVyaWMgZmlsdGVyIGZvciBhIGdpdmVuIChhdHRyaWJ1dGUsIG9wZXJhdG9yKVxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgYXR0cmlidXRlIHRvIHNldCB0aGUgZmlsdGVyIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3BlcmF0b3JdIG9wZXJhdG9yIG9mIHRoZSBmaWx0ZXIgKHBvc3NpYmxlIHZhbHVlczogPSwgPiwgPj0sIDwsIDw9LCAhPSlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtudW1iZXJdIHRoZSB2YWx1ZSB0byBiZSByZW1vdmVkXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICByZW1vdmVOdW1lcmljUmVmaW5lbWVudDogZnVuY3Rpb24oYXR0cmlidXRlLCBvcGVyYXRvciwgcGFyYW1WYWx1ZSkge1xuICAgIGlmIChwYXJhbVZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5pc051bWVyaWNSZWZpbmVkKGF0dHJpYnV0ZSwgb3BlcmF0b3IsIHBhcmFtVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgICAgbnVtZXJpY1JlZmluZW1lbnRzOiB0aGlzLl9jbGVhck51bWVyaWNSZWZpbmVtZW50cyhmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGtleSA9PT0gYXR0cmlidXRlICYmXG4gICAgICAgICAgICB2YWx1ZS5vcCA9PT0gb3BlcmF0b3IgJiZcbiAgICAgICAgICAgIGlzRXF1YWxOdW1lcmljUmVmaW5lbWVudCh2YWx1ZS52YWwsIHZhbFRvTnVtYmVyKHBhcmFtVmFsdWUpKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5pc051bWVyaWNSZWZpbmVkKGF0dHJpYnV0ZSwgb3BlcmF0b3IpKSByZXR1cm4gdGhpcztcbiAgICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICAgIG51bWVyaWNSZWZpbmVtZW50czogdGhpcy5fY2xlYXJOdW1lcmljUmVmaW5lbWVudHMoZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgIHJldHVybiBrZXkgPT09IGF0dHJpYnV0ZSAmJiB2YWx1ZS5vcCA9PT0gb3BlcmF0b3I7XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNOdW1lcmljUmVmaW5lZChhdHRyaWJ1dGUpKSByZXR1cm4gdGhpcztcbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgbnVtZXJpY1JlZmluZW1lbnRzOiB0aGlzLl9jbGVhck51bWVyaWNSZWZpbmVtZW50cyhmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgPT09IGF0dHJpYnV0ZTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgbnVtZXJpYyByZWZpbmVtZW50cyBmb3IgYSBzaW5nbGUgZmFjZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0TmFtZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVycy5PcGVyYXRvckxpc3R9IGxpc3Qgb2YgcmVmaW5lbWVudHNcbiAgICovXG4gIGdldE51bWVyaWNSZWZpbmVtZW50czogZnVuY3Rpb24oZmFjZXROYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubnVtZXJpY1JlZmluZW1lbnRzW2ZhY2V0TmFtZV0gfHwge307XG4gIH0sXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgcmVmaW5lbWVudCBmb3IgdGhlIChhdHRyaWJ1dGUsIG9wZXJhdG9yKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIGF0dHJpYnV0ZSBpbiB0aGUgcmVjb3JkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRvciBvcGVyYXRvciBhcHBsaWVkIG9uIHRoZSByZWZpbmVkIHZhbHVlc1xuICAgKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyfG51bWJlcltdPn0gcmVmaW5lZCB2YWx1ZXNcbiAgICovXG4gIGdldE51bWVyaWNSZWZpbmVtZW50OiBmdW5jdGlvbihhdHRyaWJ1dGUsIG9wZXJhdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubnVtZXJpY1JlZmluZW1lbnRzW2F0dHJpYnV0ZV0gJiYgdGhpcy5udW1lcmljUmVmaW5lbWVudHNbYXR0cmlidXRlXVtvcGVyYXRvcl07XG4gIH0sXG4gIC8qKlxuICAgKiBDbGVhciBudW1lcmljIGZpbHRlcnMuXG4gICAqIEBtZXRob2RcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd8U2VhcmNoUGFyYW1ldGVycy5jbGVhckNhbGxiYWNrfSBbYXR0cmlidXRlXSBvcHRpb25hbCBzdHJpbmcgb3IgZnVuY3Rpb25cbiAgICogLSBJZiBub3QgZ2l2ZW4sIG1lYW5zIHRvIGNsZWFyIGFsbCB0aGUgZmlsdGVycy5cbiAgICogLSBJZiBgc3RyaW5nYCwgbWVhbnMgdG8gY2xlYXIgYWxsIHJlZmluZW1lbnRzIGZvciB0aGUgYGF0dHJpYnV0ZWAgbmFtZWQgZmlsdGVyLlxuICAgKiAtIElmIGBmdW5jdGlvbmAsIG1lYW5zIHRvIGNsZWFyIGFsbCB0aGUgcmVmaW5lbWVudHMgdGhhdCByZXR1cm4gdHJ1dGh5IHZhbHVlcy5cbiAgICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIE9wZXJhdG9yTGlzdD59XG4gICAqL1xuICBfY2xlYXJOdW1lcmljUmVmaW5lbWVudHM6IGZ1bmN0aW9uIF9jbGVhck51bWVyaWNSZWZpbmVtZW50cyhhdHRyaWJ1dGUpIHtcbiAgICBpZiAoYXR0cmlidXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghb2JqZWN0SGFzS2V5cyh0aGlzLm51bWVyaWNSZWZpbmVtZW50cykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtZXJpY1JlZmluZW1lbnRzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHt9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBvbWl0KHRoaXMubnVtZXJpY1JlZmluZW1lbnRzLCBbYXR0cmlidXRlXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXR0cmlidXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdmFyIG51bWVyaWNSZWZpbmVtZW50cyA9IHRoaXMubnVtZXJpY1JlZmluZW1lbnRzO1xuICAgICAgdmFyIG5ld051bWVyaWNSZWZpbmVtZW50cyA9IE9iamVjdC5rZXlzKG51bWVyaWNSZWZpbmVtZW50cykucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIGtleSkge1xuICAgICAgICB2YXIgb3BlcmF0b3JzID0gbnVtZXJpY1JlZmluZW1lbnRzW2tleV07XG4gICAgICAgIHZhciBvcGVyYXRvckxpc3QgPSB7fTtcblxuICAgICAgICBvcGVyYXRvcnMgPSBvcGVyYXRvcnMgfHwge307XG4gICAgICAgIE9iamVjdC5rZXlzKG9wZXJhdG9ycykuZm9yRWFjaChmdW5jdGlvbihvcGVyYXRvcikge1xuICAgICAgICAgIHZhciB2YWx1ZXMgPSBvcGVyYXRvcnNbb3BlcmF0b3JdIHx8IFtdO1xuICAgICAgICAgIHZhciBvdXRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZVJlc3VsdCA9IGF0dHJpYnV0ZSh7dmFsOiB2YWx1ZSwgb3A6IG9wZXJhdG9yfSwga2V5LCAnbnVtZXJpYycpO1xuICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGVSZXN1bHQpIG91dFZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAob3V0VmFsdWVzLmxlbmd0aCAhPT0gdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wZXJhdG9yTGlzdFtvcGVyYXRvcl0gPSBvdXRWYWx1ZXM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lbW9ba2V5XSA9IG9wZXJhdG9yTGlzdDtcblxuICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgIH0sIHt9KTtcblxuICAgICAgaWYgKGhhc0NoYW5nZWQpIHJldHVybiBuZXdOdW1lcmljUmVmaW5lbWVudHM7XG4gICAgICByZXR1cm4gdGhpcy5udW1lcmljUmVmaW5lbWVudHM7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogQWRkIGEgZmFjZXQgdG8gdGhlIGZhY2V0cyBhdHRyaWJ1dGUgb2YgdGhlIGhlbHBlciBjb25maWd1cmF0aW9uLCBpZiBpdFxuICAgKiBpc24ndCBhbHJlYWR5IHByZXNlbnQuXG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IGZhY2V0IG5hbWUgdG8gYWRkXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICBhZGRGYWNldDogZnVuY3Rpb24gYWRkRmFjZXQoZmFjZXQpIHtcbiAgICBpZiAodGhpcy5pc0Nvbmp1bmN0aXZlRmFjZXQoZmFjZXQpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgZmFjZXRzOiB0aGlzLmZhY2V0cy5jb25jYXQoW2ZhY2V0XSlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIEFkZCBhIGRpc2p1bmN0aXZlIGZhY2V0IHRvIHRoZSBkaXNqdW5jdGl2ZUZhY2V0cyBhdHRyaWJ1dGUgb2YgdGhlIGhlbHBlclxuICAgKiBjb25maWd1cmF0aW9uLCBpZiBpdCBpc24ndCBhbHJlYWR5IHByZXNlbnQuXG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IGRpc2p1bmN0aXZlIGZhY2V0IG5hbWUgdG8gYWRkXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICBhZGREaXNqdW5jdGl2ZUZhY2V0OiBmdW5jdGlvbiBhZGREaXNqdW5jdGl2ZUZhY2V0KGZhY2V0KSB7XG4gICAgaWYgKHRoaXMuaXNEaXNqdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGRpc2p1bmN0aXZlRmFjZXRzOiB0aGlzLmRpc2p1bmN0aXZlRmFjZXRzLmNvbmNhdChbZmFjZXRdKVxuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogQWRkIGEgaGllcmFyY2hpY2FsIGZhY2V0IHRvIHRoZSBoaWVyYXJjaGljYWxGYWNldHMgYXR0cmlidXRlIG9mIHRoZSBoZWxwZXJcbiAgICogY29uZmlndXJhdGlvbi5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge29iamVjdH0gaGllcmFyY2hpY2FsRmFjZXQgaGllcmFyY2hpY2FsIGZhY2V0IHRvIGFkZFxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKiBAdGhyb3dzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgYSBoaWVyYXJjaGljYWwgZmFjZXQgd2l0aCB0aGUgc2FtZSBuYW1lIHdhcyBhbHJlYWR5IGRlY2xhcmVkXG4gICAqL1xuICBhZGRIaWVyYXJjaGljYWxGYWNldDogZnVuY3Rpb24gYWRkSGllcmFyY2hpY2FsRmFjZXQoaGllcmFyY2hpY2FsRmFjZXQpIHtcbiAgICBpZiAodGhpcy5pc0hpZXJhcmNoaWNhbEZhY2V0KGhpZXJhcmNoaWNhbEZhY2V0Lm5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdDYW5ub3QgZGVjbGFyZSB0d28gaGllcmFyY2hpY2FsIGZhY2V0cyB3aXRoIHRoZSBzYW1lIG5hbWU6IGAnICsgaGllcmFyY2hpY2FsRmFjZXQubmFtZSArICdgJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0czogdGhpcy5oaWVyYXJjaGljYWxGYWNldHMuY29uY2F0KFtoaWVyYXJjaGljYWxGYWNldF0pXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBBZGQgYSByZWZpbmVtZW50IG9uIGEgXCJub3JtYWxcIiBmYWNldFxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBhdHRyaWJ1dGUgdG8gYXBwbHkgdGhlIGZhY2V0aW5nIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlICh3aWxsIGJlIGNvbnZlcnRlZCB0byBzdHJpbmcpXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICBhZGRGYWNldFJlZmluZW1lbnQ6IGZ1bmN0aW9uIGFkZEZhY2V0UmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNDb25qdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZhY2V0ICsgJyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgZmFjZXRzIGF0dHJpYnV0ZSBvZiB0aGUgaGVscGVyIGNvbmZpZ3VyYXRpb24nKTtcbiAgICB9XG4gICAgaWYgKFJlZmluZW1lbnRMaXN0LmlzUmVmaW5lZCh0aGlzLmZhY2V0c1JlZmluZW1lbnRzLCBmYWNldCwgdmFsdWUpKSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBmYWNldHNSZWZpbmVtZW50czogUmVmaW5lbWVudExpc3QuYWRkUmVmaW5lbWVudCh0aGlzLmZhY2V0c1JlZmluZW1lbnRzLCBmYWNldCwgdmFsdWUpXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBFeGNsdWRlIGEgdmFsdWUgZnJvbSBhIFwibm9ybWFsXCIgZmFjZXRcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgYXR0cmlidXRlIHRvIGFwcGx5IHRoZSBleGNsdXNpb24gb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgKHdpbGwgYmUgY29udmVydGVkIHRvIHN0cmluZylcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIGFkZEV4Y2x1ZGVSZWZpbmVtZW50OiBmdW5jdGlvbiBhZGRFeGNsdWRlUmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNDb25qdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZhY2V0ICsgJyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgZmFjZXRzIGF0dHJpYnV0ZSBvZiB0aGUgaGVscGVyIGNvbmZpZ3VyYXRpb24nKTtcbiAgICB9XG4gICAgaWYgKFJlZmluZW1lbnRMaXN0LmlzUmVmaW5lZCh0aGlzLmZhY2V0c0V4Y2x1ZGVzLCBmYWNldCwgdmFsdWUpKSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBmYWNldHNFeGNsdWRlczogUmVmaW5lbWVudExpc3QuYWRkUmVmaW5lbWVudCh0aGlzLmZhY2V0c0V4Y2x1ZGVzLCBmYWNldCwgdmFsdWUpXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBBZGRzIGEgcmVmaW5lbWVudCBvbiBhIGRpc2p1bmN0aXZlIGZhY2V0LlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBhdHRyaWJ1dGUgdG8gYXBwbHkgdGhlIGZhY2V0aW5nIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlICh3aWxsIGJlIGNvbnZlcnRlZCB0byBzdHJpbmcpXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICBhZGREaXNqdW5jdGl2ZUZhY2V0UmVmaW5lbWVudDogZnVuY3Rpb24gYWRkRGlzanVuY3RpdmVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzanVuY3RpdmVGYWNldChmYWNldCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgZmFjZXQgKyAnIGlzIG5vdCBkZWZpbmVkIGluIHRoZSBkaXNqdW5jdGl2ZUZhY2V0cyBhdHRyaWJ1dGUgb2YgdGhlIGhlbHBlciBjb25maWd1cmF0aW9uJyk7XG4gICAgfVxuXG4gICAgaWYgKFJlZmluZW1lbnRMaXN0LmlzUmVmaW5lZCh0aGlzLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMsIGZhY2V0LCB2YWx1ZSkpIHJldHVybiB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHM6IFJlZmluZW1lbnRMaXN0LmFkZFJlZmluZW1lbnQoXG4gICAgICAgIHRoaXMuZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50cywgZmFjZXQsIHZhbHVlKVxuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogYWRkVGFnUmVmaW5lbWVudCBhZGRzIGEgdGFnIHRvIHRoZSBsaXN0IHVzZWQgdG8gZmlsdGVyIHRoZSByZXN1bHRzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgdGFnIHRvIGJlIGFkZGVkXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICBhZGRUYWdSZWZpbmVtZW50OiBmdW5jdGlvbiBhZGRUYWdSZWZpbmVtZW50KHRhZykge1xuICAgIGlmICh0aGlzLmlzVGFnUmVmaW5lZCh0YWcpKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBtb2RpZmljYXRpb24gPSB7XG4gICAgICB0YWdSZWZpbmVtZW50czogdGhpcy50YWdSZWZpbmVtZW50cy5jb25jYXQodGFnKVxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMobW9kaWZpY2F0aW9uKTtcbiAgfSxcbiAgLyoqXG4gICAqIFJlbW92ZSBhIGZhY2V0IGZyb20gdGhlIGZhY2V0cyBhdHRyaWJ1dGUgb2YgdGhlIGhlbHBlciBjb25maWd1cmF0aW9uLCBpZiBpdFxuICAgKiBpcyBwcmVzZW50LlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBmYWNldCBuYW1lIHRvIHJlbW92ZVxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgcmVtb3ZlRmFjZXQ6IGZ1bmN0aW9uIHJlbW92ZUZhY2V0KGZhY2V0KSB7XG4gICAgaWYgKCF0aGlzLmlzQ29uanVuY3RpdmVGYWNldChmYWNldCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNsZWFyUmVmaW5lbWVudHMoZmFjZXQpLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBmYWNldHM6IHRoaXMuZmFjZXRzLmZpbHRlcihmdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiBmICE9PSBmYWNldDtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBkaXNqdW5jdGl2ZSBmYWNldCBmcm9tIHRoZSBkaXNqdW5jdGl2ZUZhY2V0cyBhdHRyaWJ1dGUgb2YgdGhlXG4gICAqIGhlbHBlciBjb25maWd1cmF0aW9uLCBpZiBpdCBpcyBwcmVzZW50LlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBkaXNqdW5jdGl2ZSBmYWNldCBuYW1lIHRvIHJlbW92ZVxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgcmVtb3ZlRGlzanVuY3RpdmVGYWNldDogZnVuY3Rpb24gcmVtb3ZlRGlzanVuY3RpdmVGYWNldChmYWNldCkge1xuICAgIGlmICghdGhpcy5pc0Rpc2p1bmN0aXZlRmFjZXQoZmFjZXQpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jbGVhclJlZmluZW1lbnRzKGZhY2V0KS5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgZGlzanVuY3RpdmVGYWNldHM6IHRoaXMuZGlzanVuY3RpdmVGYWNldHMuZmlsdGVyKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgcmV0dXJuIGYgIT09IGZhY2V0O1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFJlbW92ZSBhIGhpZXJhcmNoaWNhbCBmYWNldCBmcm9tIHRoZSBoaWVyYXJjaGljYWxGYWNldHMgYXR0cmlidXRlIG9mIHRoZVxuICAgKiBoZWxwZXIgY29uZmlndXJhdGlvbiwgaWYgaXQgaXMgcHJlc2VudC5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgaGllcmFyY2hpY2FsIGZhY2V0IG5hbWUgdG8gcmVtb3ZlXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICByZW1vdmVIaWVyYXJjaGljYWxGYWNldDogZnVuY3Rpb24gcmVtb3ZlSGllcmFyY2hpY2FsRmFjZXQoZmFjZXQpIHtcbiAgICBpZiAoIXRoaXMuaXNIaWVyYXJjaGljYWxGYWNldChmYWNldCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNsZWFyUmVmaW5lbWVudHMoZmFjZXQpLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBoaWVyYXJjaGljYWxGYWNldHM6IHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzLmZpbHRlcihmdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiBmLm5hbWUgIT09IGZhY2V0O1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFJlbW92ZSBhIHJlZmluZW1lbnQgc2V0IG9uIGZhY2V0LiBJZiBhIHZhbHVlIGlzIHByb3ZpZGVkLCBpdCB3aWxsIGNsZWFyIHRoZVxuICAgKiByZWZpbmVtZW50IGZvciB0aGUgZ2l2ZW4gdmFsdWUsIG90aGVyd2lzZSBpdCB3aWxsIGNsZWFyIGFsbCB0aGUgcmVmaW5lbWVudFxuICAgKiB2YWx1ZXMgZm9yIHRoZSBmYWNldGVkIGF0dHJpYnV0ZS5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHVzZWQgZm9yIGZhY2V0aW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIHZhbHVlIHVzZWQgdG8gZmlsdGVyXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICByZW1vdmVGYWNldFJlZmluZW1lbnQ6IGZ1bmN0aW9uIHJlbW92ZUZhY2V0UmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNDb25qdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZhY2V0ICsgJyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgZmFjZXRzIGF0dHJpYnV0ZSBvZiB0aGUgaGVscGVyIGNvbmZpZ3VyYXRpb24nKTtcbiAgICB9XG4gICAgaWYgKCFSZWZpbmVtZW50TGlzdC5pc1JlZmluZWQodGhpcy5mYWNldHNSZWZpbmVtZW50cywgZmFjZXQsIHZhbHVlKSkgcmV0dXJuIHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgZmFjZXRzUmVmaW5lbWVudHM6IFJlZmluZW1lbnRMaXN0LnJlbW92ZVJlZmluZW1lbnQodGhpcy5mYWNldHNSZWZpbmVtZW50cywgZmFjZXQsIHZhbHVlKVxuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogUmVtb3ZlIGEgbmVnYXRpdmUgcmVmaW5lbWVudCBvbiBhIGZhY2V0XG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB1c2VkIGZvciBmYWNldGluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgdmFsdWUgdXNlZCB0byBmaWx0ZXJcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIHJlbW92ZUV4Y2x1ZGVSZWZpbmVtZW50OiBmdW5jdGlvbiByZW1vdmVFeGNsdWRlUmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNDb25qdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZhY2V0ICsgJyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgZmFjZXRzIGF0dHJpYnV0ZSBvZiB0aGUgaGVscGVyIGNvbmZpZ3VyYXRpb24nKTtcbiAgICB9XG4gICAgaWYgKCFSZWZpbmVtZW50TGlzdC5pc1JlZmluZWQodGhpcy5mYWNldHNFeGNsdWRlcywgZmFjZXQsIHZhbHVlKSkgcmV0dXJuIHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgZmFjZXRzRXhjbHVkZXM6IFJlZmluZW1lbnRMaXN0LnJlbW92ZVJlZmluZW1lbnQodGhpcy5mYWNldHNFeGNsdWRlcywgZmFjZXQsIHZhbHVlKVxuICAgIH0pO1xuICB9LFxuICAvKipcbiAgICogUmVtb3ZlIGEgcmVmaW5lbWVudCBvbiBhIGRpc2p1bmN0aXZlIGZhY2V0XG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB1c2VkIGZvciBmYWNldGluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgdmFsdWUgdXNlZCB0byBmaWx0ZXJcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIHJlbW92ZURpc2p1bmN0aXZlRmFjZXRSZWZpbmVtZW50OiBmdW5jdGlvbiByZW1vdmVEaXNqdW5jdGl2ZUZhY2V0UmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNqdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBmYWNldCArICcgaXMgbm90IGRlZmluZWQgaW4gdGhlIGRpc2p1bmN0aXZlRmFjZXRzIGF0dHJpYnV0ZSBvZiB0aGUgaGVscGVyIGNvbmZpZ3VyYXRpb24nKTtcbiAgICB9XG4gICAgaWYgKCFSZWZpbmVtZW50TGlzdC5pc1JlZmluZWQodGhpcy5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzLCBmYWNldCwgdmFsdWUpKSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBkaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzOiBSZWZpbmVtZW50TGlzdC5yZW1vdmVSZWZpbmVtZW50KFxuICAgICAgICB0aGlzLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMsIGZhY2V0LCB2YWx1ZSlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFJlbW92ZSBhIHRhZyBmcm9tIHRoZSBsaXN0IG9mIHRhZyByZWZpbmVtZW50c1xuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgdGhlIHRhZyB0byByZW1vdmVcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICovXG4gIHJlbW92ZVRhZ1JlZmluZW1lbnQ6IGZ1bmN0aW9uIHJlbW92ZVRhZ1JlZmluZW1lbnQodGFnKSB7XG4gICAgaWYgKCF0aGlzLmlzVGFnUmVmaW5lZCh0YWcpKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBtb2RpZmljYXRpb24gPSB7XG4gICAgICB0YWdSZWZpbmVtZW50czogdGhpcy50YWdSZWZpbmVtZW50cy5maWx0ZXIoZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdCAhPT0gdGFnO1xuICAgICAgfSlcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKG1vZGlmaWNhdGlvbik7XG4gIH0sXG4gIC8qKlxuICAgKiBHZW5lcmljIHRvZ2dsZSByZWZpbmVtZW50IG1ldGhvZCB0byB1c2Ugd2l0aCBmYWNldCwgZGlzanVuY3RpdmUgZmFjZXRzXG4gICAqIGFuZCBoaWVyYXJjaGljYWwgZmFjZXRzXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZmFjZXQgdGhlIGZhY2V0IHRvIHJlZmluZVxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZhbHVlIHRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqIEB0aHJvd3Mgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgZmFjZXQgaXMgbm90IGRlY2xhcmVkIGluIHRoZSBzZXR0aW5ncyBvZiB0aGUgaGVscGVyXG4gICAqIEBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gMi4xOS4wLCBzZWUge0BsaW5rIFNlYXJjaFBhcmFtZXRlcnMjdG9nZ2xlRmFjZXRSZWZpbmVtZW50fVxuICAgKi9cbiAgdG9nZ2xlUmVmaW5lbWVudDogZnVuY3Rpb24gdG9nZ2xlUmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy50b2dnbGVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKTtcbiAgfSxcbiAgLyoqXG4gICAqIEdlbmVyaWMgdG9nZ2xlIHJlZmluZW1lbnQgbWV0aG9kIHRvIHVzZSB3aXRoIGZhY2V0LCBkaXNqdW5jdGl2ZSBmYWNldHNcbiAgICogYW5kIGhpZXJhcmNoaWNhbCBmYWNldHNcbiAgICogQHBhcmFtICB7c3RyaW5nfSBmYWNldCB0aGUgZmFjZXQgdG8gcmVmaW5lXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWUgdGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc31cbiAgICogQHRocm93cyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBmYWNldCBpcyBub3QgZGVjbGFyZWQgaW4gdGhlIHNldHRpbmdzIG9mIHRoZSBoZWxwZXJcbiAgICovXG4gIHRvZ2dsZUZhY2V0UmVmaW5lbWVudDogZnVuY3Rpb24gdG9nZ2xlRmFjZXRSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLmlzSGllcmFyY2hpY2FsRmFjZXQoZmFjZXQpKSB7XG4gICAgICByZXR1cm4gdGhpcy50b2dnbGVIaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNDb25qdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlQ29uanVuY3RpdmVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNEaXNqdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlRGlzanVuY3RpdmVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCByZWZpbmUgdGhlIHVuZGVjbGFyZWQgZmFjZXQgJyArIGZhY2V0ICtcbiAgICAgICc7IGl0IHNob3VsZCBiZSBhZGRlZCB0byB0aGUgaGVscGVyIG9wdGlvbnMgZmFjZXRzLCBkaXNqdW5jdGl2ZUZhY2V0cyBvciBoaWVyYXJjaGljYWxGYWNldHMnKTtcbiAgfSxcbiAgLyoqXG4gICAqIFN3aXRjaCB0aGUgcmVmaW5lbWVudCBhcHBsaWVkIG92ZXIgYSBmYWNldC92YWx1ZVxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHBhcmFtIHt2YWx1ZX0gdmFsdWUgdmFsdWUgdXNlZCBmb3IgZmlsdGVyaW5nXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICB0b2dnbGVDb25qdW5jdGl2ZUZhY2V0UmVmaW5lbWVudDogZnVuY3Rpb24gdG9nZ2xlQ29uanVuY3RpdmVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmlzQ29uanVuY3RpdmVGYWNldChmYWNldCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihmYWNldCArICcgaXMgbm90IGRlZmluZWQgaW4gdGhlIGZhY2V0cyBhdHRyaWJ1dGUgb2YgdGhlIGhlbHBlciBjb25maWd1cmF0aW9uJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGZhY2V0c1JlZmluZW1lbnRzOiBSZWZpbmVtZW50TGlzdC50b2dnbGVSZWZpbmVtZW50KHRoaXMuZmFjZXRzUmVmaW5lbWVudHMsIGZhY2V0LCB2YWx1ZSlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFN3aXRjaCB0aGUgcmVmaW5lbWVudCBhcHBsaWVkIG92ZXIgYSBmYWNldC92YWx1ZVxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHBhcmFtIHt2YWx1ZX0gdmFsdWUgdmFsdWUgdXNlZCBmb3IgZmlsdGVyaW5nXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICB0b2dnbGVFeGNsdWRlRmFjZXRSZWZpbmVtZW50OiBmdW5jdGlvbiB0b2dnbGVFeGNsdWRlRmFjZXRSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc0Nvbmp1bmN0aXZlRmFjZXQoZmFjZXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmFjZXQgKyAnIGlzIG5vdCBkZWZpbmVkIGluIHRoZSBmYWNldHMgYXR0cmlidXRlIG9mIHRoZSBoZWxwZXIgY29uZmlndXJhdGlvbicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBmYWNldHNFeGNsdWRlczogUmVmaW5lbWVudExpc3QudG9nZ2xlUmVmaW5lbWVudCh0aGlzLmZhY2V0c0V4Y2x1ZGVzLCBmYWNldCwgdmFsdWUpXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBTd2l0Y2ggdGhlIHJlZmluZW1lbnQgYXBwbGllZCBvdmVyIGEgZmFjZXQvdmFsdWVcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHVzZWQgZm9yIGZhY2V0aW5nXG4gICAqIEBwYXJhbSB7dmFsdWV9IHZhbHVlIHZhbHVlIHVzZWQgZm9yIGZpbHRlcmluZ1xuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgdG9nZ2xlRGlzanVuY3RpdmVGYWNldFJlZmluZW1lbnQ6IGZ1bmN0aW9uIHRvZ2dsZURpc2p1bmN0aXZlRmFjZXRSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc0Rpc2p1bmN0aXZlRmFjZXQoZmFjZXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGZhY2V0ICsgJyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgZGlzanVuY3RpdmVGYWNldHMgYXR0cmlidXRlIG9mIHRoZSBoZWxwZXIgY29uZmlndXJhdGlvbicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICBkaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzOiBSZWZpbmVtZW50TGlzdC50b2dnbGVSZWZpbmVtZW50KFxuICAgICAgICB0aGlzLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMsIGZhY2V0LCB2YWx1ZSlcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFN3aXRjaCB0aGUgcmVmaW5lbWVudCBhcHBsaWVkIG92ZXIgYSBmYWNldC92YWx1ZVxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHBhcmFtIHt2YWx1ZX0gdmFsdWUgdmFsdWUgdXNlZCBmb3IgZmlsdGVyaW5nXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9XG4gICAqL1xuICB0b2dnbGVIaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQ6IGZ1bmN0aW9uIHRvZ2dsZUhpZXJhcmNoaWNhbEZhY2V0UmVmaW5lbWVudChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNIaWVyYXJjaGljYWxGYWNldChmYWNldCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgZmFjZXQgKyAnIGlzIG5vdCBkZWZpbmVkIGluIHRoZSBoaWVyYXJjaGljYWxGYWNldHMgYXR0cmlidXRlIG9mIHRoZSBoZWxwZXIgY29uZmlndXJhdGlvbicpO1xuICAgIH1cblxuICAgIHZhciBzZXBhcmF0b3IgPSB0aGlzLl9nZXRIaWVyYXJjaGljYWxGYWNldFNlcGFyYXRvcih0aGlzLmdldEhpZXJhcmNoaWNhbEZhY2V0QnlOYW1lKGZhY2V0KSk7XG5cbiAgICB2YXIgbW9kID0ge307XG5cbiAgICB2YXIgdXBPbmVPck11bHRpcGxlTGV2ZWwgPSB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzW2ZhY2V0XSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzW2ZhY2V0XS5sZW5ndGggPiAwICYmIChcbiAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHJlZmluZW1lbnQ6XG4gICAgICAvLyByZWZpbmVtZW50IHdhcyAnYmVlciA+IElQQScsIGNhbGwgaXMgdG9nZ2xlUmVmaW5lKCdiZWVyID4gSVBBJyksIHJlZmluZW1lbnQgc2hvdWxkIGJlIGBiZWVyYFxuICAgICAgdGhpcy5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c1tmYWNldF1bMF0gPT09IHZhbHVlIHx8XG4gICAgICAvLyByZW1vdmUgYSBwYXJlbnQgcmVmaW5lbWVudCBvZiB0aGUgY3VycmVudCByZWZpbmVtZW50OlxuICAgICAgLy8gIC0gcmVmaW5lbWVudCB3YXMgJ2JlZXIgPiBJUEEgPiBGbHlpbmcgZG9nJ1xuICAgICAgLy8gIC0gY2FsbCBpcyB0b2dnbGVSZWZpbmUoJ2JlZXIgPiBJUEEnKVxuICAgICAgLy8gIC0gcmVmaW5lbWVudCBzaG91bGQgYmUgYGJlZXJgXG4gICAgICB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzW2ZhY2V0XVswXS5pbmRleE9mKHZhbHVlICsgc2VwYXJhdG9yKSA9PT0gMFxuICAgICk7XG5cbiAgICBpZiAodXBPbmVPck11bHRpcGxlTGV2ZWwpIHtcbiAgICAgIGlmICh2YWx1ZS5pbmRleE9mKHNlcGFyYXRvcikgPT09IC0xKSB7XG4gICAgICAgIC8vIGdvIGJhY2sgdG8gcm9vdCBsZXZlbFxuICAgICAgICBtb2RbZmFjZXRdID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RbZmFjZXRdID0gW3ZhbHVlLnNsaWNlKDAsIHZhbHVlLmxhc3RJbmRleE9mKHNlcGFyYXRvcikpXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbW9kW2ZhY2V0XSA9IFt2YWx1ZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzOiBkZWZhdWx0c1B1cmUoe30sIG1vZCwgdGhpcy5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50cylcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQWRkcyBhIHJlZmluZW1lbnQgb24gYSBoaWVyYXJjaGljYWwgZmFjZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCB0aGUgZmFjZXQgbmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCB0aGUgaGllcmFyY2hpY2FsIGZhY2V0IHBhdGhcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyfSB0aGUgbmV3IHN0YXRlXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGZhY2V0IGlzIG5vdCBkZWZpbmVkIG9yIGlmIHRoZSBmYWNldCBpcyByZWZpbmVkXG4gICAqL1xuICBhZGRIaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQ6IGZ1bmN0aW9uKGZhY2V0LCBwYXRoKSB7XG4gICAgaWYgKHRoaXMuaXNIaWVyYXJjaGljYWxGYWNldFJlZmluZWQoZmFjZXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmFjZXQgKyAnIGlzIGFscmVhZHkgcmVmaW5lZC4nKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmlzSGllcmFyY2hpY2FsRmFjZXQoZmFjZXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmFjZXQgKyAnIGlzIG5vdCBkZWZpbmVkIGluIHRoZSBoaWVyYXJjaGljYWxGYWNldHMgYXR0cmlidXRlIG9mIHRoZSBoZWxwZXIgY29uZmlndXJhdGlvbi4nKTtcbiAgICB9XG4gICAgdmFyIG1vZCA9IHt9O1xuICAgIG1vZFtmYWNldF0gPSBbcGF0aF07XG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzOiBkZWZhdWx0c1B1cmUoe30sIG1vZCwgdGhpcy5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50cylcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgcmVmaW5lbWVudCBzZXQgb24gYSBoaWVyYXJjaGljYWwgZmFjZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCB0aGUgZmFjZXQgbmFtZVxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJ9IHRoZSBuZXcgc3RhdGVcbiAgICogQHRocm93cyBFcnJvciBpZiB0aGUgZmFjZXQgaXMgbm90IGRlZmluZWQgb3IgaWYgdGhlIGZhY2V0IGlzIG5vdCByZWZpbmVkXG4gICAqL1xuICByZW1vdmVIaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQ6IGZ1bmN0aW9uKGZhY2V0KSB7XG4gICAgaWYgKCF0aGlzLmlzSGllcmFyY2hpY2FsRmFjZXRSZWZpbmVkKGZhY2V0KSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHZhciBtb2QgPSB7fTtcbiAgICBtb2RbZmFjZXRdID0gW107XG4gICAgcmV0dXJuIHRoaXMuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzOiBkZWZhdWx0c1B1cmUoe30sIG1vZCwgdGhpcy5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50cylcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFN3aXRjaCB0aGUgdGFnIHJlZmluZW1lbnRcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIHRoZSB0YWcgdG8gcmVtb3ZlIG9yIGFkZFxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfVxuICAgKi9cbiAgdG9nZ2xlVGFnUmVmaW5lbWVudDogZnVuY3Rpb24gdG9nZ2xlVGFnUmVmaW5lbWVudCh0YWcpIHtcbiAgICBpZiAodGhpcy5pc1RhZ1JlZmluZWQodGFnKSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlVGFnUmVmaW5lbWVudCh0YWcpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmFkZFRhZ1JlZmluZW1lbnQodGFnKTtcbiAgfSxcbiAgLyoqXG4gICAqIFRlc3QgaWYgdGhlIGZhY2V0IG5hbWUgaXMgZnJvbSBvbmUgb2YgdGhlIGRpc2p1bmN0aXZlIGZhY2V0c1xuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBmYWNldCBuYW1lIHRvIHRlc3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRGlzanVuY3RpdmVGYWNldDogZnVuY3Rpb24oZmFjZXQpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNqdW5jdGl2ZUZhY2V0cy5pbmRleE9mKGZhY2V0KSA+IC0xO1xuICB9LFxuICAvKipcbiAgICogVGVzdCBpZiB0aGUgZmFjZXQgbmFtZSBpcyBmcm9tIG9uZSBvZiB0aGUgaGllcmFyY2hpY2FsIGZhY2V0c1xuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldE5hbWUgZmFjZXQgbmFtZSB0byB0ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0hpZXJhcmNoaWNhbEZhY2V0OiBmdW5jdGlvbihmYWNldE5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRIaWVyYXJjaGljYWxGYWNldEJ5TmFtZShmYWNldE5hbWUpICE9PSB1bmRlZmluZWQ7XG4gIH0sXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBmYWNldCBuYW1lIGlzIGZyb20gb25lIG9mIHRoZSBjb25qdW5jdGl2ZS9ub3JtYWwgZmFjZXRzXG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IGZhY2V0IG5hbWUgdG8gdGVzdFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25qdW5jdGl2ZUZhY2V0OiBmdW5jdGlvbihmYWNldCkge1xuICAgIHJldHVybiB0aGlzLmZhY2V0cy5pbmRleE9mKGZhY2V0KSA+IC0xO1xuICB9LFxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBmYWNldCBpcyByZWZpbmVkLCBlaXRoZXIgZm9yIGEgc3BlY2lmaWMgdmFsdWUgb3IgaW5cbiAgICogZ2VuZXJhbC5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgbmFtZSBvZiB0aGUgYXR0cmlidXRlIGZvciB1c2VkIGZvciBmYWNldGluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUsIG9wdGlvbmFsIHZhbHVlLiBJZiBwYXNzZWQgd2lsbCB0ZXN0IHRoYXQgdGhpcyB2YWx1ZVxuICAgKiBpcyBmaWx0ZXJpbmcgdGhlIGdpdmVuIGZhY2V0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSByZXR1cm5zIHRydWUgaWYgcmVmaW5lZFxuICAgKi9cbiAgaXNGYWNldFJlZmluZWQ6IGZ1bmN0aW9uIGlzRmFjZXRSZWZpbmVkKGZhY2V0LCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc0Nvbmp1bmN0aXZlRmFjZXQoZmFjZXQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBSZWZpbmVtZW50TGlzdC5pc1JlZmluZWQodGhpcy5mYWNldHNSZWZpbmVtZW50cywgZmFjZXQsIHZhbHVlKTtcbiAgfSxcbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZmFjZXQgY29udGFpbnMgZXhjbHVzaW9ucyBvciBpZiBhIHNwZWNpZmljIHZhbHVlIGlzXG4gICAqIGV4Y2x1ZGVkLlxuICAgKlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgZm9yIHVzZWQgZm9yIGZhY2V0aW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlLiBJZiBwYXNzZWQgd2lsbCB0ZXN0IHRoYXQgdGhpcyB2YWx1ZVxuICAgKiBpcyBmaWx0ZXJpbmcgdGhlIGdpdmVuIGZhY2V0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSByZXR1cm5zIHRydWUgaWYgcmVmaW5lZFxuICAgKi9cbiAgaXNFeGNsdWRlUmVmaW5lZDogZnVuY3Rpb24gaXNFeGNsdWRlUmVmaW5lZChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNDb25qdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gUmVmaW5lbWVudExpc3QuaXNSZWZpbmVkKHRoaXMuZmFjZXRzRXhjbHVkZXMsIGZhY2V0LCB2YWx1ZSk7XG4gIH0sXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZhY2V0IGNvbnRhaW5zIGEgcmVmaW5lbWVudCwgb3IgaWYgYSB2YWx1ZSBwYXNzZWQgaXMgYVxuICAgKiByZWZpbmVtZW50IGZvciB0aGUgZmFjZXQuXG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSBmb3IgdXNlZCBmb3IgZmFjZXRpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIG9wdGlvbmFsLCB3aWxsIHRlc3QgaWYgdGhlIHZhbHVlIGlzIHVzZWQgZm9yIHJlZmluZW1lbnRcbiAgICogaWYgdGhlcmUgaXMgb25lLCBvdGhlcndpc2Ugd2lsbCB0ZXN0IGlmIHRoZSBmYWNldCBjb250YWlucyBhbnkgcmVmaW5lbWVudFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNEaXNqdW5jdGl2ZUZhY2V0UmVmaW5lZDogZnVuY3Rpb24gaXNEaXNqdW5jdGl2ZUZhY2V0UmVmaW5lZChmYWNldCwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNqdW5jdGl2ZUZhY2V0KGZhY2V0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gUmVmaW5lbWVudExpc3QuaXNSZWZpbmVkKHRoaXMuZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50cywgZmFjZXQsIHZhbHVlKTtcbiAgfSxcbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZmFjZXQgY29udGFpbnMgYSByZWZpbmVtZW50LCBvciBpZiBhIHZhbHVlIHBhc3NlZCBpcyBhXG4gICAqIHJlZmluZW1lbnQgZm9yIHRoZSBmYWNldC5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgbmFtZSBvZiB0aGUgYXR0cmlidXRlIGZvciB1c2VkIGZvciBmYWNldGluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgb3B0aW9uYWwsIHdpbGwgdGVzdCBpZiB0aGUgdmFsdWUgaXMgdXNlZCBmb3IgcmVmaW5lbWVudFxuICAgKiBpZiB0aGVyZSBpcyBvbmUsIG90aGVyd2lzZSB3aWxsIHRlc3QgaWYgdGhlIGZhY2V0IGNvbnRhaW5zIGFueSByZWZpbmVtZW50XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0hpZXJhcmNoaWNhbEZhY2V0UmVmaW5lZDogZnVuY3Rpb24gaXNIaWVyYXJjaGljYWxGYWNldFJlZmluZWQoZmFjZXQsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmlzSGllcmFyY2hpY2FsRmFjZXQoZmFjZXQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHJlZmluZW1lbnRzID0gdGhpcy5nZXRIaWVyYXJjaGljYWxSZWZpbmVtZW50KGZhY2V0KTtcblxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiByZWZpbmVtZW50cy5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIHJldHVybiByZWZpbmVtZW50cy5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XG4gIH0sXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSB0cmlwbGUgKGF0dHJpYnV0ZSwgb3BlcmF0b3IsIHZhbHVlKSBpcyBhbHJlYWR5IHJlZmluZWQuXG4gICAqIElmIG9ubHkgdGhlIGF0dHJpYnV0ZSBhbmQgdGhlIG9wZXJhdG9yIGFyZSBwcm92aWRlZCwgaXQgdGVzdHMgaWYgdGhlXG4gICAqIGNvbnRhaW5zIGFueSByZWZpbmVtZW50IHZhbHVlLlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgYXR0cmlidXRlIGZvciB3aGljaCB0aGUgcmVmaW5lbWVudCBpcyBhcHBsaWVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3BlcmF0b3JdIG9wZXJhdG9yIG9mIHRoZSByZWZpbmVtZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIHZhbHVlIG9mIHRoZSByZWZpbmVtZW50XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgaXQgaXMgcmVmaW5lZFxuICAgKi9cbiAgaXNOdW1lcmljUmVmaW5lZDogZnVuY3Rpb24gaXNOdW1lcmljUmVmaW5lZChhdHRyaWJ1dGUsIG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIG9wZXJhdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAhIXRoaXMubnVtZXJpY1JlZmluZW1lbnRzW2F0dHJpYnV0ZV07XG4gICAgfVxuXG4gICAgdmFyIGlzT3BlcmF0b3JEZWZpbmVkID1cbiAgICAgIHRoaXMubnVtZXJpY1JlZmluZW1lbnRzW2F0dHJpYnV0ZV0gJiZcbiAgICAgIHRoaXMubnVtZXJpY1JlZmluZW1lbnRzW2F0dHJpYnV0ZV1bb3BlcmF0b3JdICE9PSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCAhaXNPcGVyYXRvckRlZmluZWQpIHtcbiAgICAgIHJldHVybiBpc09wZXJhdG9yRGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgcGFyc2VkVmFsdWUgPSB2YWxUb051bWJlcih2YWx1ZSk7XG4gICAgdmFyIGlzQXR0cmlidXRlVmFsdWVEZWZpbmVkID1cbiAgICAgIGZpbmRBcnJheSh0aGlzLm51bWVyaWNSZWZpbmVtZW50c1thdHRyaWJ1dGVdW29wZXJhdG9yXSwgcGFyc2VkVmFsdWUpICE9PVxuICAgICAgdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGlzT3BlcmF0b3JEZWZpbmVkICYmIGlzQXR0cmlidXRlVmFsdWVEZWZpbmVkO1xuICB9LFxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0YWcgcmVmaW5lZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqIEBtZXRob2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyB0aGUgdGFnIHRvIGNoZWNrXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1RhZ1JlZmluZWQ6IGZ1bmN0aW9uIGlzVGFnUmVmaW5lZCh0YWcpIHtcbiAgICByZXR1cm4gdGhpcy50YWdSZWZpbmVtZW50cy5pbmRleE9mKHRhZykgIT09IC0xO1xuICB9LFxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgZGlzanVuY3RpdmUgZmFjZXRzIHJlZmluZWRcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHVzZWQgZm9yIGZhY2V0aW5nXG4gICAqIEBwYXJhbSB7dmFsdWV9IHZhbHVlIHZhbHVlIHVzZWQgZm9yIGZpbHRlcmluZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmdbXX1cbiAgICovXG4gIGdldFJlZmluZWREaXNqdW5jdGl2ZUZhY2V0czogZnVuY3Rpb24gZ2V0UmVmaW5lZERpc2p1bmN0aXZlRmFjZXRzKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIGF0dHJpYnV0ZXMgdXNlZCBmb3IgbnVtZXJpYyBmaWx0ZXIgY2FuIGFsc28gYmUgZGlzanVuY3RpdmVcbiAgICB2YXIgZGlzanVuY3RpdmVOdW1lcmljUmVmaW5lZEZhY2V0cyA9IGludGVyc2VjdGlvbihcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMubnVtZXJpY1JlZmluZW1lbnRzKS5maWx0ZXIoZnVuY3Rpb24oZmFjZXQpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHNlbGYubnVtZXJpY1JlZmluZW1lbnRzW2ZhY2V0XSkubGVuZ3RoID4gMDtcbiAgICAgIH0pLFxuICAgICAgdGhpcy5kaXNqdW5jdGl2ZUZhY2V0c1xuICAgICk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzKS5maWx0ZXIoZnVuY3Rpb24oZmFjZXQpIHtcbiAgICAgIHJldHVybiBzZWxmLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHNbZmFjZXRdLmxlbmd0aCA+IDA7XG4gICAgfSlcbiAgICAgIC5jb25jYXQoZGlzanVuY3RpdmVOdW1lcmljUmVmaW5lZEZhY2V0cylcbiAgICAgIC5jb25jYXQodGhpcy5nZXRSZWZpbmVkSGllcmFyY2hpY2FsRmFjZXRzKCkpO1xuICB9LFxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgZGlzanVuY3RpdmUgZmFjZXRzIHJlZmluZWRcbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHVzZWQgZm9yIGZhY2V0aW5nXG4gICAqIEBwYXJhbSB7dmFsdWV9IHZhbHVlIHZhbHVlIHVzZWQgZm9yIGZpbHRlcmluZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmdbXX1cbiAgICovXG4gIGdldFJlZmluZWRIaWVyYXJjaGljYWxGYWNldHM6IGZ1bmN0aW9uIGdldFJlZmluZWRIaWVyYXJjaGljYWxGYWNldHMoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBpbnRlcnNlY3Rpb24oXG4gICAgICAvLyBlbmZvcmNlIHRoZSBvcmRlciBiZXR3ZWVuIHRoZSB0d28gYXJyYXlzLFxuICAgICAgLy8gc28gdGhhdCByZWZpbmVtZW50IG5hbWUgaW5kZXggPT09IGhpZXJhcmNoaWNhbCBmYWNldCBpbmRleFxuICAgICAgdGhpcy5oaWVyYXJjaGljYWxGYWNldHMubWFwKGZ1bmN0aW9uKGZhY2V0KSB7IHJldHVybiBmYWNldC5uYW1lOyB9KSxcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMpLmZpbHRlcihmdW5jdGlvbihmYWNldCkge1xuICAgICAgICByZXR1cm4gc2VsZi5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c1tmYWNldF0ubGVuZ3RoID4gMDtcbiAgICAgIH0pXG4gICAgKTtcbiAgfSxcbiAgLyoqXG4gICAqIFJldHVybmVkIHRoZSBsaXN0IG9mIGFsbCBkaXNqdW5jdGl2ZSBmYWNldHMgbm90IHJlZmluZWRcbiAgICogQG1ldGhvZFxuICAgKiBAcmV0dXJuIHtzdHJpbmdbXX1cbiAgICovXG4gIGdldFVucmVmaW5lZERpc2p1bmN0aXZlRmFjZXRzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmaW5lZEZhY2V0cyA9IHRoaXMuZ2V0UmVmaW5lZERpc2p1bmN0aXZlRmFjZXRzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5kaXNqdW5jdGl2ZUZhY2V0cy5maWx0ZXIoZnVuY3Rpb24oZikge1xuICAgICAgcmV0dXJuIHJlZmluZWRGYWNldHMuaW5kZXhPZihmKSA9PT0gLTE7XG4gICAgfSk7XG4gIH0sXG5cbiAgbWFuYWdlZFBhcmFtZXRlcnM6IFtcbiAgICAnaW5kZXgnLFxuXG4gICAgJ2ZhY2V0cycsXG4gICAgJ2Rpc2p1bmN0aXZlRmFjZXRzJyxcbiAgICAnZmFjZXRzUmVmaW5lbWVudHMnLFxuICAgICdoaWVyYXJjaGljYWxGYWNldHMnLFxuICAgICdmYWNldHNFeGNsdWRlcycsXG5cbiAgICAnZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50cycsXG4gICAgJ251bWVyaWNSZWZpbmVtZW50cycsXG4gICAgJ3RhZ1JlZmluZW1lbnRzJyxcbiAgICAnaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMnXG4gIF0sXG4gIGdldFF1ZXJ5UGFyYW1zOiBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtcygpIHtcbiAgICB2YXIgbWFuYWdlZFBhcmFtZXRlcnMgPSB0aGlzLm1hbmFnZWRQYXJhbWV0ZXJzO1xuXG4gICAgdmFyIHF1ZXJ5UGFyYW1zID0ge307XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgT2JqZWN0LmtleXModGhpcykuZm9yRWFjaChmdW5jdGlvbihwYXJhbU5hbWUpIHtcbiAgICAgIHZhciBwYXJhbVZhbHVlID0gc2VsZltwYXJhbU5hbWVdO1xuICAgICAgaWYgKG1hbmFnZWRQYXJhbWV0ZXJzLmluZGV4T2YocGFyYW1OYW1lKSA9PT0gLTEgJiYgcGFyYW1WYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHF1ZXJ5UGFyYW1zW3BhcmFtTmFtZV0gPSBwYXJhbVZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHF1ZXJ5UGFyYW1zO1xuICB9LFxuICAvKipcbiAgICogTGV0IHRoZSB1c2VyIHNldCBhIHNwZWNpZmljIHZhbHVlIGZvciBhIGdpdmVuIHBhcmFtZXRlci4gV2lsbCByZXR1cm4gdGhlXG4gICAqIHNhbWUgaW5zdGFuY2UgaWYgdGhlIHBhcmFtZXRlciBpcyBpbnZhbGlkIG9yIGlmIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSBhcyB0aGVcbiAgICogcHJldmlvdXMgb25lLlxuICAgKiBAbWV0aG9kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbWV0ZXIgdGhlIHBhcmFtZXRlciBuYW1lXG4gICAqIEBwYXJhbSB7YW55fSB2YWx1ZSB0aGUgdmFsdWUgdG8gYmUgc2V0LCBtdXN0IGJlIGNvbXBsaWFudCB3aXRoIHRoZSBkZWZpbml0aW9uXG4gICAqIG9mIHRoZSBhdHRyaWJ1dGUgb24gdGhlIG9iamVjdFxuICAgKiBAcmV0dXJuIHtTZWFyY2hQYXJhbWV0ZXJzfSB0aGUgdXBkYXRlZCBzdGF0ZVxuICAgKi9cbiAgc2V0UXVlcnlQYXJhbWV0ZXI6IGZ1bmN0aW9uIHNldFBhcmFtZXRlcihwYXJhbWV0ZXIsIHZhbHVlKSB7XG4gICAgaWYgKHRoaXNbcGFyYW1ldGVyXSA9PT0gdmFsdWUpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIG1vZGlmaWNhdGlvbiA9IHt9O1xuXG4gICAgbW9kaWZpY2F0aW9uW3BhcmFtZXRlcl0gPSB2YWx1ZTtcblxuICAgIHJldHVybiB0aGlzLnNldFF1ZXJ5UGFyYW1ldGVycyhtb2RpZmljYXRpb24pO1xuICB9LFxuICAvKipcbiAgICogTGV0IHRoZSB1c2VyIHNldCBhbnkgb2YgdGhlIHBhcmFtZXRlcnMgd2l0aCBhIHBsYWluIG9iamVjdC5cbiAgICogQG1ldGhvZFxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zIGFsbCB0aGUga2V5cyBhbmQgdGhlIHZhbHVlcyB0byBiZSB1cGRhdGVkXG4gICAqIEByZXR1cm4ge1NlYXJjaFBhcmFtZXRlcnN9IGEgbmV3IHVwZGF0ZWQgaW5zdGFuY2VcbiAgICovXG4gIHNldFF1ZXJ5UGFyYW1ldGVyczogZnVuY3Rpb24gc2V0UXVlcnlQYXJhbWV0ZXJzKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBlcnJvciA9IFNlYXJjaFBhcmFtZXRlcnMudmFsaWRhdGUodGhpcywgcGFyYW1zKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBuZXh0V2l0aE51bWJlcnMgPSBTZWFyY2hQYXJhbWV0ZXJzLl9wYXJzZU51bWJlcnMocGFyYW1zKTtcbiAgICB2YXIgcHJldmlvdXNQbGFpbk9iamVjdCA9IE9iamVjdC5rZXlzKHRoaXMpLnJlZHVjZShmdW5jdGlvbihhY2MsIGtleSkge1xuICAgICAgYWNjW2tleV0gPSBzZWxmW2tleV07XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcblxuICAgIHZhciBuZXh0UGxhaW5PYmplY3QgPSBPYmplY3Qua2V5cyhuZXh0V2l0aE51bWJlcnMpLnJlZHVjZShcbiAgICAgIGZ1bmN0aW9uKHByZXZpb3VzLCBrZXkpIHtcbiAgICAgICAgdmFyIGlzUHJldmlvdXNWYWx1ZURlZmluZWQgPSBwcmV2aW91c1trZXldICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBpc05leHRWYWx1ZURlZmluZWQgPSBuZXh0V2l0aE51bWJlcnNba2V5XSAhPT0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChpc1ByZXZpb3VzVmFsdWVEZWZpbmVkICYmICFpc05leHRWYWx1ZURlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gb21pdChwcmV2aW91cywgW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTmV4dFZhbHVlRGVmaW5lZCkge1xuICAgICAgICAgIHByZXZpb3VzW2tleV0gPSBuZXh0V2l0aE51bWJlcnNba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcmV2aW91cztcbiAgICAgIH0sXG4gICAgICBwcmV2aW91c1BsYWluT2JqZWN0XG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihuZXh0UGxhaW5PYmplY3QpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IGluc3RhbmNlIHdpdGggdGhlIHBhZ2UgcmVzZXQuIFR3byBzY2VuYXJpb3MgcG9zc2libGU6XG4gICAqIHRoZSBwYWdlIGlzIG9taXR0ZWQgLT4gcmV0dXJuIHRoZSBnaXZlbiBpbnN0YW5jZVxuICAgKiB0aGUgcGFnZSBpcyBzZXQgLT4gcmV0dXJuIGEgbmV3IGluc3RhbmNlIHdpdGggYSBwYWdlIG9mIDBcbiAgICogQHJldHVybiB7U2VhcmNoUGFyYW1ldGVyc30gYSBuZXcgdXBkYXRlZCBpbnN0YW5jZVxuICAgKi9cbiAgcmVzZXRQYWdlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldFBhZ2UoMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGhpZXJhcmNoaWNhbEZhY2V0IHNlcGFyYXRvciBvciB0aGUgZGVmYXVsdCBvbmUgKGA+YClcbiAgICogQHBhcmFtICB7b2JqZWN0fSBoaWVyYXJjaGljYWxGYWNldFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHJldHVybnMgdGhlIGhpZXJhcmNoaWNhbEZhY2V0LnNlcGFyYXRvciBvciBgPmAgYXMgZGVmYXVsdFxuICAgKi9cbiAgX2dldEhpZXJhcmNoaWNhbEZhY2V0U29ydEJ5OiBmdW5jdGlvbihoaWVyYXJjaGljYWxGYWNldCkge1xuICAgIHJldHVybiBoaWVyYXJjaGljYWxGYWNldC5zb3J0QnkgfHwgWydpc1JlZmluZWQ6ZGVzYycsICduYW1lOmFzYyddO1xuICB9LFxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBoaWVyYXJjaGljYWxGYWNldCBzZXBhcmF0b3Igb3IgdGhlIGRlZmF1bHQgb25lIChgPmApXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge29iamVjdH0gaGllcmFyY2hpY2FsRmFjZXRcbiAgICogQHJldHVybiB7c3RyaW5nfSByZXR1cm5zIHRoZSBoaWVyYXJjaGljYWxGYWNldC5zZXBhcmF0b3Igb3IgYD5gIGFzIGRlZmF1bHRcbiAgICovXG4gIF9nZXRIaWVyYXJjaGljYWxGYWNldFNlcGFyYXRvcjogZnVuY3Rpb24oaGllcmFyY2hpY2FsRmFjZXQpIHtcbiAgICByZXR1cm4gaGllcmFyY2hpY2FsRmFjZXQuc2VwYXJhdG9yIHx8ICcgPiAnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBoaWVyYXJjaGljYWxGYWNldCBwcmVmaXggcGF0aCBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge29iamVjdH0gaGllcmFyY2hpY2FsRmFjZXRcbiAgICogQHJldHVybiB7c3RyaW5nfSByZXR1cm5zIHRoZSBoaWVyYXJjaGljYWxGYWNldC5yb290UGF0aCBvciBudWxsIGFzIGRlZmF1bHRcbiAgICovXG4gIF9nZXRIaWVyYXJjaGljYWxSb290UGF0aDogZnVuY3Rpb24oaGllcmFyY2hpY2FsRmFjZXQpIHtcbiAgICByZXR1cm4gaGllcmFyY2hpY2FsRmFjZXQucm9vdFBhdGggfHwgbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHdlIHNob3cgdGhlIHBhcmVudCBsZXZlbCBvZiB0aGUgaGllcmFyY2hpY2FsRmFjZXRcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7b2JqZWN0fSBoaWVyYXJjaGljYWxGYWNldFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHJldHVybnMgdGhlIGhpZXJhcmNoaWNhbEZhY2V0LnNob3dQYXJlbnRMZXZlbCBvciB0cnVlIGFzIGRlZmF1bHRcbiAgICovXG4gIF9nZXRIaWVyYXJjaGljYWxTaG93UGFyZW50TGV2ZWw6IGZ1bmN0aW9uKGhpZXJhcmNoaWNhbEZhY2V0KSB7XG4gICAgaWYgKHR5cGVvZiBoaWVyYXJjaGljYWxGYWNldC5zaG93UGFyZW50TGV2ZWwgPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIGhpZXJhcmNoaWNhbEZhY2V0LnNob3dQYXJlbnRMZXZlbDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGhpZXJhcmNoaWNhbEZhY2V0IGJ5IGl0J3MgbmFtZVxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGhpZXJhcmNoaWNhbEZhY2V0TmFtZVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IGEgaGllcmFyY2hpY2FsRmFjZXRcbiAgICovXG4gIGdldEhpZXJhcmNoaWNhbEZhY2V0QnlOYW1lOiBmdW5jdGlvbihoaWVyYXJjaGljYWxGYWNldE5hbWUpIHtcbiAgICByZXR1cm4gZmluZChcbiAgICAgIHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzLFxuICAgICAgZnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gZi5uYW1lID09PSBoaWVyYXJjaGljYWxGYWNldE5hbWU7XG4gICAgICB9XG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGJyZWFkY3J1bWIgZm9yIGEgaGllcmFyY2hpY2FsIGZhY2V0LCBhcyBhbiBhcnJheVxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGZhY2V0TmFtZSBIaWVyYXJjaGljYWwgZmFjZXQgbmFtZVxuICAgKiBAcmV0dXJuIHthcnJheS48c3RyaW5nPn0gdGhlIHBhdGggYXMgYW4gYXJyYXkgb2Ygc3RyaW5nXG4gICAqL1xuICBnZXRIaWVyYXJjaGljYWxGYWNldEJyZWFkY3J1bWI6IGZ1bmN0aW9uKGZhY2V0TmFtZSkge1xuICAgIGlmICghdGhpcy5pc0hpZXJhcmNoaWNhbEZhY2V0KGZhY2V0TmFtZSkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgcmVmaW5lbWVudCA9IHRoaXMuZ2V0SGllcmFyY2hpY2FsUmVmaW5lbWVudChmYWNldE5hbWUpWzBdO1xuICAgIGlmICghcmVmaW5lbWVudCkgcmV0dXJuIFtdO1xuXG4gICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuX2dldEhpZXJhcmNoaWNhbEZhY2V0U2VwYXJhdG9yKFxuICAgICAgdGhpcy5nZXRIaWVyYXJjaGljYWxGYWNldEJ5TmFtZShmYWNldE5hbWUpXG4gICAgKTtcbiAgICB2YXIgcGF0aCA9IHJlZmluZW1lbnQuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICByZXR1cm4gcGF0aC5tYXAoZnVuY3Rpb24ocGFydCkge1xuICAgICAgcmV0dXJuIHBhcnQudHJpbSgpO1xuICAgIH0pO1xuICB9LFxuXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgbnVsbCwgMik7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbGJhY2sgdXNlZCBmb3IgY2xlYXJSZWZpbmVtZW50IG1ldGhvZFxuICogQGNhbGxiYWNrIFNlYXJjaFBhcmFtZXRlcnMuY2xlYXJDYWxsYmFja1xuICogQHBhcmFtIHtPcGVyYXRvckxpc3R8RmFjZXRMaXN0fSB2YWx1ZSB0aGUgdmFsdWUgb2YgdGhlIGZpbHRlclxuICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUgY3VycmVudCBhdHRyaWJ1dGUgbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgYG51bWVyaWNgLCBgZGlzanVuY3RpdmVGYWNldGAsIGBjb25qdW5jdGl2ZUZhY2V0YCwgYGhpZXJhcmNoaWNhbEZhY2V0YCBvciBgZXhjbHVkZWBcbiAqIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBmYWNldFxuICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBlbGVtZW50IHNob3VsZCBiZSByZW1vdmVkLiBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBTZWFyY2hQYXJhbWV0ZXJzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdlbmVyYXRlVHJlZXM7XG5cbnZhciBvcmRlckJ5ID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL29yZGVyQnknKTtcbnZhciBmaW5kID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2ZpbmQnKTtcbnZhciBwcmVwYXJlSGllcmFyY2hpY2FsRmFjZXRTb3J0QnkgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZm9ybWF0U29ydCcpO1xudmFyIGZ2ID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2VzY2FwZUZhY2V0VmFsdWUnKTtcbnZhciBlc2NhcGVGYWNldFZhbHVlID0gZnYuZXNjYXBlRmFjZXRWYWx1ZTtcbnZhciB1bmVzY2FwZUZhY2V0VmFsdWUgPSBmdi51bmVzY2FwZUZhY2V0VmFsdWU7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlVHJlZXMoc3RhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGdlbmVyYXRlKGhpZXJhcmNoaWNhbEZhY2V0UmVzdWx0LCBoaWVyYXJjaGljYWxGYWNldEluZGV4KSB7XG4gICAgdmFyIGhpZXJhcmNoaWNhbEZhY2V0ID0gc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzW2hpZXJhcmNoaWNhbEZhY2V0SW5kZXhdO1xuICAgIHZhciBoaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQgPVxuICAgICAgKHN0YXRlLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzW2hpZXJhcmNoaWNhbEZhY2V0Lm5hbWVdICYmXG4gICAgICAgIHN0YXRlLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzW2hpZXJhcmNoaWNhbEZhY2V0Lm5hbWVdWzBdKSB8fFxuICAgICAgJyc7XG4gICAgdmFyIGhpZXJhcmNoaWNhbFNlcGFyYXRvciA9IHN0YXRlLl9nZXRIaWVyYXJjaGljYWxGYWNldFNlcGFyYXRvcihcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0XG4gICAgKTtcbiAgICB2YXIgaGllcmFyY2hpY2FsUm9vdFBhdGggPSBzdGF0ZS5fZ2V0SGllcmFyY2hpY2FsUm9vdFBhdGgoXG4gICAgICBoaWVyYXJjaGljYWxGYWNldFxuICAgICk7XG4gICAgdmFyIGhpZXJhcmNoaWNhbFNob3dQYXJlbnRMZXZlbCA9IHN0YXRlLl9nZXRIaWVyYXJjaGljYWxTaG93UGFyZW50TGV2ZWwoXG4gICAgICBoaWVyYXJjaGljYWxGYWNldFxuICAgICk7XG4gICAgdmFyIHNvcnRCeSA9IHByZXBhcmVIaWVyYXJjaGljYWxGYWNldFNvcnRCeShcbiAgICAgIHN0YXRlLl9nZXRIaWVyYXJjaGljYWxGYWNldFNvcnRCeShoaWVyYXJjaGljYWxGYWNldClcbiAgICApO1xuXG4gICAgdmFyIHJvb3RFeGhhdXN0aXZlID0gaGllcmFyY2hpY2FsRmFjZXRSZXN1bHQuZXZlcnkoZnVuY3Rpb24oZmFjZXRSZXN1bHQpIHtcbiAgICAgIHJldHVybiBmYWNldFJlc3VsdC5leGhhdXN0aXZlO1xuICAgIH0pO1xuXG4gICAgdmFyIGdlbmVyYXRlVHJlZUZuID0gZ2VuZXJhdGVIaWVyYXJjaGljYWxUcmVlKFxuICAgICAgc29ydEJ5LFxuICAgICAgaGllcmFyY2hpY2FsU2VwYXJhdG9yLFxuICAgICAgaGllcmFyY2hpY2FsUm9vdFBhdGgsXG4gICAgICBoaWVyYXJjaGljYWxTaG93UGFyZW50TGV2ZWwsXG4gICAgICBoaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnRcbiAgICApO1xuXG4gICAgdmFyIHJlc3VsdHMgPSBoaWVyYXJjaGljYWxGYWNldFJlc3VsdDtcblxuICAgIGlmIChoaWVyYXJjaGljYWxSb290UGF0aCkge1xuICAgICAgcmVzdWx0cyA9IGhpZXJhcmNoaWNhbEZhY2V0UmVzdWx0LnNsaWNlKFxuICAgICAgICBoaWVyYXJjaGljYWxSb290UGF0aC5zcGxpdChoaWVyYXJjaGljYWxTZXBhcmF0b3IpLmxlbmd0aFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cy5yZWR1Y2UoZ2VuZXJhdGVUcmVlRm4sIHtcbiAgICAgIG5hbWU6IHN0YXRlLmhpZXJhcmNoaWNhbEZhY2V0c1toaWVyYXJjaGljYWxGYWNldEluZGV4XS5uYW1lLFxuICAgICAgY291bnQ6IG51bGwsIC8vIHJvb3QgbGV2ZWwsIG5vIGNvdW50XG4gICAgICBpc1JlZmluZWQ6IHRydWUsIC8vIHJvb3QgbGV2ZWwsIGFsd2F5cyByZWZpbmVkXG4gICAgICBwYXRoOiBudWxsLCAvLyByb290IGxldmVsLCBubyBwYXRoXG4gICAgICBlc2NhcGVkVmFsdWU6IG51bGwsXG4gICAgICBleGhhdXN0aXZlOiByb290RXhoYXVzdGl2ZSxcbiAgICAgIGRhdGE6IG51bGxcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVIaWVyYXJjaGljYWxUcmVlKFxuICBzb3J0QnksXG4gIGhpZXJhcmNoaWNhbFNlcGFyYXRvcixcbiAgaGllcmFyY2hpY2FsUm9vdFBhdGgsXG4gIGhpZXJhcmNoaWNhbFNob3dQYXJlbnRMZXZlbCxcbiAgY3VycmVudFJlZmluZW1lbnRcbikge1xuICByZXR1cm4gZnVuY3Rpb24gZ2VuZXJhdGVUcmVlKFxuICAgIGhpZXJhcmNoaWNhbFRyZWUsXG4gICAgaGllcmFyY2hpY2FsRmFjZXRSZXN1bHQsXG4gICAgY3VycmVudEhpZXJhcmNoaWNhbExldmVsXG4gICkge1xuICAgIHZhciBwYXJlbnQgPSBoaWVyYXJjaGljYWxUcmVlO1xuXG4gICAgaWYgKGN1cnJlbnRIaWVyYXJjaGljYWxMZXZlbCA+IDApIHtcbiAgICAgIHZhciBsZXZlbCA9IDA7XG5cbiAgICAgIHBhcmVudCA9IGhpZXJhcmNoaWNhbFRyZWU7XG5cbiAgICAgIHdoaWxlIChsZXZlbCA8IGN1cnJlbnRIaWVyYXJjaGljYWxMZXZlbCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge29iamVjdFtdXX0gaGllcmFyY2hpY2FsIGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIHZhciBkYXRhID0gcGFyZW50ICYmIEFycmF5LmlzQXJyYXkocGFyZW50LmRhdGEpID8gcGFyZW50LmRhdGEgOiBbXTtcbiAgICAgICAgcGFyZW50ID0gZmluZChkYXRhLCBmdW5jdGlvbihzdWJ0cmVlKSB7XG4gICAgICAgICAgcmV0dXJuIHN1YnRyZWUuaXNSZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV2ZWwrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZSBmb3VuZCBhIHJlZmluZWQgcGFyZW50LCBsZXQncyBhZGQgY3VycmVudCBsZXZlbCBkYXRhIHVuZGVyIGl0XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgLy8gZmlsdGVyIHZhbHVlcyBpbiBjYXNlIGFuIG9iamVjdCBoYXMgbXVsdGlwbGUgY2F0ZWdvcmllczpcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgIGNhdGVnb3JpZXM6IHtcbiAgICAgIC8vICAgICAgIGxldmVsMDogWydiZWVycycsICdiacOocmVzJ10sXG4gICAgICAvLyAgICAgICBsZXZlbDE6IFsnYmVlcnMgPiBJUEEnLCAnYmnDqHJlcyA+IEJlbGdlcyddXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9XG4gICAgICAvL1xuICAgICAgLy8gSWYgcGFyZW50IHJlZmluZW1lbnQgaXMgYGJlZXJzYCwgdGhlbiB3ZSBkbyBub3Qgd2FudCB0byBoYXZlIGBiacOocmVzID4gQmVsZ2VzYFxuICAgICAgLy8gc2hvd2luZyB1cFxuXG4gICAgICB2YXIgcGlja2VkID0gT2JqZWN0LmtleXMoaGllcmFyY2hpY2FsRmFjZXRSZXN1bHQuZGF0YSlcbiAgICAgICAgLm1hcChmdW5jdGlvbihmYWNldFZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIFtmYWNldFZhbHVlLCBoaWVyYXJjaGljYWxGYWNldFJlc3VsdC5kYXRhW2ZhY2V0VmFsdWVdXTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbih0dXBsZSkge1xuICAgICAgICAgIHZhciBmYWNldFZhbHVlID0gdHVwbGVbMF07XG4gICAgICAgICAgcmV0dXJuIG9ubHlNYXRjaGluZ1RyZWUoXG4gICAgICAgICAgICBmYWNldFZhbHVlLFxuICAgICAgICAgICAgcGFyZW50LnBhdGggfHwgaGllcmFyY2hpY2FsUm9vdFBhdGgsXG4gICAgICAgICAgICBjdXJyZW50UmVmaW5lbWVudCxcbiAgICAgICAgICAgIGhpZXJhcmNoaWNhbFNlcGFyYXRvcixcbiAgICAgICAgICAgIGhpZXJhcmNoaWNhbFJvb3RQYXRoLFxuICAgICAgICAgICAgaGllcmFyY2hpY2FsU2hvd1BhcmVudExldmVsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHBhcmVudC5kYXRhID0gb3JkZXJCeShcbiAgICAgICAgcGlja2VkLm1hcChmdW5jdGlvbih0dXBsZSkge1xuICAgICAgICAgIHZhciBmYWNldFZhbHVlID0gdHVwbGVbMF07XG4gICAgICAgICAgdmFyIGZhY2V0Q291bnQgPSB0dXBsZVsxXTtcblxuICAgICAgICAgIHJldHVybiBmb3JtYXQoXG4gICAgICAgICAgICBmYWNldENvdW50LFxuICAgICAgICAgICAgZmFjZXRWYWx1ZSxcbiAgICAgICAgICAgIGhpZXJhcmNoaWNhbFNlcGFyYXRvcixcbiAgICAgICAgICAgIHVuZXNjYXBlRmFjZXRWYWx1ZShjdXJyZW50UmVmaW5lbWVudCksXG4gICAgICAgICAgICBoaWVyYXJjaGljYWxGYWNldFJlc3VsdC5leGhhdXN0aXZlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSksXG4gICAgICAgIHNvcnRCeVswXSxcbiAgICAgICAgc29ydEJ5WzFdXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBoaWVyYXJjaGljYWxUcmVlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmx5TWF0Y2hpbmdUcmVlKFxuICBmYWNldFZhbHVlLFxuICBwYXJlbnRQYXRoLFxuICBjdXJyZW50UmVmaW5lbWVudCxcbiAgaGllcmFyY2hpY2FsU2VwYXJhdG9yLFxuICBoaWVyYXJjaGljYWxSb290UGF0aCxcbiAgaGllcmFyY2hpY2FsU2hvd1BhcmVudExldmVsXG4pIHtcbiAgLy8gd2Ugd2FudCB0aGUgZmFjZXRWYWx1ZSBpcyBhIGNoaWxkIG9mIGhpZXJhcmNoaWNhbFJvb3RQYXRoXG4gIGlmIChcbiAgICBoaWVyYXJjaGljYWxSb290UGF0aCAmJlxuICAgIChmYWNldFZhbHVlLmluZGV4T2YoaGllcmFyY2hpY2FsUm9vdFBhdGgpICE9PSAwIHx8XG4gICAgICBoaWVyYXJjaGljYWxSb290UGF0aCA9PT0gZmFjZXRWYWx1ZSlcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gd2UgYWx3YXlzIHdhbnQgcm9vdCBsZXZlbHMgKG9ubHkgd2hlbiB0aGVyZSBpcyBubyBwcmVmaXggcGF0aClcbiAgcmV0dXJuIChcbiAgICAoIWhpZXJhcmNoaWNhbFJvb3RQYXRoICYmXG4gICAgICBmYWNldFZhbHVlLmluZGV4T2YoaGllcmFyY2hpY2FsU2VwYXJhdG9yKSA9PT0gLTEpIHx8XG4gICAgLy8gaWYgdGhlcmUgaXMgYSByb290UGF0aCwgYmVpbmcgcm9vdCBsZXZlbCBtZWFuIDEgbGV2ZWwgdW5kZXIgcm9vdFBhdGhcbiAgICAoaGllcmFyY2hpY2FsUm9vdFBhdGggJiZcbiAgICAgIGZhY2V0VmFsdWUuc3BsaXQoaGllcmFyY2hpY2FsU2VwYXJhdG9yKS5sZW5ndGggLVxuICAgICAgICBoaWVyYXJjaGljYWxSb290UGF0aC5zcGxpdChoaWVyYXJjaGljYWxTZXBhcmF0b3IpLmxlbmd0aCA9PT1cbiAgICAgICAgMSkgfHxcbiAgICAvLyBpZiBjdXJyZW50IHJlZmluZW1lbnQgaXMgYSByb290IGxldmVsIGFuZCBjdXJyZW50IGZhY2V0VmFsdWUgaXMgYSByb290IGxldmVsLFxuICAgIC8vIGtlZXAgdGhlIGZhY2V0VmFsdWVcbiAgICAoZmFjZXRWYWx1ZS5pbmRleE9mKGhpZXJhcmNoaWNhbFNlcGFyYXRvcikgPT09IC0xICYmXG4gICAgICBjdXJyZW50UmVmaW5lbWVudC5pbmRleE9mKGhpZXJhcmNoaWNhbFNlcGFyYXRvcikgPT09IC0xKSB8fFxuICAgIC8vIGN1cnJlbnRSZWZpbmVtZW50IGlzIGEgY2hpbGQgb2YgdGhlIGZhY2V0IHZhbHVlXG4gICAgY3VycmVudFJlZmluZW1lbnQuaW5kZXhPZihmYWNldFZhbHVlKSA9PT0gMCB8fFxuICAgIC8vIGZhY2V0VmFsdWUgaXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBwYXJlbnQsIGFkZCBpdFxuICAgIChmYWNldFZhbHVlLmluZGV4T2YocGFyZW50UGF0aCArIGhpZXJhcmNoaWNhbFNlcGFyYXRvcikgPT09IDAgJiZcbiAgICAgIChoaWVyYXJjaGljYWxTaG93UGFyZW50TGV2ZWwgfHxcbiAgICAgICAgZmFjZXRWYWx1ZS5pbmRleE9mKGN1cnJlbnRSZWZpbmVtZW50KSA9PT0gMCkpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdChcbiAgZmFjZXRDb3VudCxcbiAgZmFjZXRWYWx1ZSxcbiAgaGllcmFyY2hpY2FsU2VwYXJhdG9yLFxuICBjdXJyZW50UmVmaW5lbWVudCxcbiAgZXhoYXVzdGl2ZVxuKSB7XG4gIHZhciBwYXJ0cyA9IGZhY2V0VmFsdWUuc3BsaXQoaGllcmFyY2hpY2FsU2VwYXJhdG9yKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXS50cmltKCksXG4gICAgcGF0aDogZmFjZXRWYWx1ZSxcbiAgICBlc2NhcGVkVmFsdWU6IGVzY2FwZUZhY2V0VmFsdWUoZmFjZXRWYWx1ZSksXG4gICAgY291bnQ6IGZhY2V0Q291bnQsXG4gICAgaXNSZWZpbmVkOlxuICAgICAgY3VycmVudFJlZmluZW1lbnQgPT09IGZhY2V0VmFsdWUgfHxcbiAgICAgIGN1cnJlbnRSZWZpbmVtZW50LmluZGV4T2YoZmFjZXRWYWx1ZSArIGhpZXJhcmNoaWNhbFNlcGFyYXRvcikgPT09IDAsXG4gICAgZXhoYXVzdGl2ZTogZXhoYXVzdGl2ZSxcbiAgICBkYXRhOiBudWxsXG4gIH07XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBtZXJnZSA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9tZXJnZScpO1xudmFyIGRlZmF1bHRzUHVyZSA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9kZWZhdWx0c1B1cmUnKTtcbnZhciBvcmRlckJ5ID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL29yZGVyQnknKTtcbnZhciBjb21wYWN0ID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2NvbXBhY3QnKTtcbnZhciBmaW5kID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2ZpbmQnKTtcbnZhciBmaW5kSW5kZXggPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZmluZEluZGV4Jyk7XG52YXIgZm9ybWF0U29ydCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9mb3JtYXRTb3J0Jyk7XG52YXIgZnYgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZXNjYXBlRmFjZXRWYWx1ZScpO1xudmFyIGVzY2FwZUZhY2V0VmFsdWUgPSBmdi5lc2NhcGVGYWNldFZhbHVlO1xudmFyIHVuZXNjYXBlRmFjZXRWYWx1ZSA9IGZ2LnVuZXNjYXBlRmFjZXRWYWx1ZTtcblxudmFyIGdlbmVyYXRlSGllcmFyY2hpY2FsVHJlZSA9IHJlcXVpcmUoJy4vZ2VuZXJhdGUtaGllcmFyY2hpY2FsLXRyZWUnKTtcblxuLyoqXG4gKiBAdHlwZWRlZiBTZWFyY2hSZXN1bHRzLkZhY2V0XG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIGluIHRoZSByZWNvcmRcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBkYXRhIHRoZSBmYWNldGluZyBkYXRhOiB2YWx1ZSwgbnVtYmVyIG9mIGVudHJpZXNcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBzdGF0cyB1bmRlZmluZWQgdW5sZXNzIGZhY2V0X3N0YXRzIGlzIHJldHJpZXZlZCBmcm9tIGFsZ29saWFcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIFNlYXJjaFJlc3VsdHMuSGllcmFyY2hpY2FsRmFjZXRcbiAqIEB0eXBlIHtvYmplY3R9XG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBjdXJyZW50IHZhbHVlIGdpdmVuIHRoZSBoaWVyYXJjaGljYWwgbGV2ZWwsIHRyaW1tZWQuXG4gKiBJZiByb290IG5vZGUsIHlvdSBnZXQgdGhlIGZhY2V0IG5hbWVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBjb3VudCBudW1iZXIgb2Ygb2JqZWN0cyBtYXRjaGluZyB0aGlzIGhpZXJhcmNoaWNhbCB2YWx1ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBhdGggdGhlIGN1cnJlbnQgaGllcmFyY2hpY2FsIHZhbHVlIGZ1bGwgcGF0aFxuICogQHByb3BlcnR5IHtib29sZWFufSBpc1JlZmluZWQgYHRydWVgIGlmIHRoZSBjdXJyZW50IHZhbHVlIHdhcyByZWZpbmVkLCBgZmFsc2VgIG90aGVyd2lzZVxuICogQHByb3BlcnR5IHtIaWVyYXJjaGljYWxGYWNldFtdfSBkYXRhIHN1YiB2YWx1ZXMgZm9yIHRoZSBjdXJyZW50IGxldmVsXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBTZWFyY2hSZXN1bHRzLkZhY2V0VmFsdWVcbiAqIEB0eXBlIHtvYmplY3R9XG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSB0aGUgZmFjZXQgdmFsdWUgaXRzZWxmXG4gKiBAcHJvcGVydHkge251bWJlcn0gY291bnQgdGltZXMgdGhpcyBmYWNldCBhcHBlYXJzIGluIHRoZSByZXN1bHRzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGlzUmVmaW5lZCBpcyB0aGUgZmFjZXQgY3VycmVudGx5IHNlbGVjdGVkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGlzRXhjbHVkZWQgaXMgdGhlIGZhY2V0IGN1cnJlbnRseSBleGNsdWRlZCAob25seSBmb3IgY29uanVuY3RpdmUgZmFjZXRzKVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgUmVmaW5lbWVudFxuICogQHR5cGUge29iamVjdH1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIHRoZSB0eXBlIG9mIGZpbHRlciB1c2VkOlxuICogYG51bWVyaWNgLCBgZmFjZXRgLCBgZXhjbHVkZWAsIGBkaXNqdW5jdGl2ZWAsIGBoaWVyYXJjaGljYWxgXG4gKiBAcHJvcGVydHkge3N0cmluZ30gYXR0cmlidXRlTmFtZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdXNlZCBmb3IgZmlsdGVyaW5nXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSB0aGUgdmFsdWUgb2YgdGhlIGZpbHRlclxuICogQHByb3BlcnR5IHtudW1iZXJ9IG51bWVyaWNWYWx1ZSB0aGUgdmFsdWUgYXMgYSBudW1iZXIuIE9ubHkgZm9yIG51bWVyaWMgZmlsdGVycy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBvcGVyYXRvciB0aGUgb3BlcmF0b3IgdXNlZC4gT25seSBmb3IgbnVtZXJpYyBmaWx0ZXJzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGNvdW50IHRoZSBudW1iZXIgb2YgY29tcHV0ZWQgaGl0cyBmb3IgdGhpcyBmaWx0ZXIuIE9ubHkgb24gZmFjZXRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBleGhhdXN0aXZlIGlmIHRoZSBjb3VudCBpcyBleGhhdXN0aXZlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBhdHRyaWJ1dGVzXG4gKi9cbmZ1bmN0aW9uIGdldEluZGljZXMoYXR0cmlidXRlcykge1xuICB2YXIgaW5kaWNlcyA9IHt9O1xuXG4gIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGluZGljZXNbdmFsXSA9IGlkeDtcbiAgfSk7XG5cbiAgcmV0dXJuIGluZGljZXM7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbkZhY2V0U3RhdHMoZGVzdCwgZmFjZXRTdGF0cywga2V5KSB7XG4gIGlmIChmYWNldFN0YXRzICYmIGZhY2V0U3RhdHNba2V5XSkge1xuICAgIGRlc3Quc3RhdHMgPSBmYWNldFN0YXRzW2tleV07XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBIaWVyYXJjaGljYWxGYWNldFxuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGF0dHJpYnV0ZXNcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7SGllcmFyY2hpY2FsRmFjZXRbXX0gaGllcmFyY2hpY2FsRmFjZXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gaGllcmFyY2hpY2FsQXR0cmlidXRlTmFtZVxuICovXG5mdW5jdGlvbiBmaW5kTWF0Y2hpbmdIaWVyYXJjaGljYWxGYWNldEZyb21BdHRyaWJ1dGVOYW1lKFxuICBoaWVyYXJjaGljYWxGYWNldHMsXG4gIGhpZXJhcmNoaWNhbEF0dHJpYnV0ZU5hbWVcbikge1xuICByZXR1cm4gZmluZChoaWVyYXJjaGljYWxGYWNldHMsIGZ1bmN0aW9uIGZhY2V0S2V5TWF0Y2hlc0F0dHJpYnV0ZShcbiAgICBoaWVyYXJjaGljYWxGYWNldFxuICApIHtcbiAgICB2YXIgZmFjZXROYW1lcyA9IGhpZXJhcmNoaWNhbEZhY2V0LmF0dHJpYnV0ZXMgfHwgW107XG4gICAgcmV0dXJuIGZhY2V0TmFtZXMuaW5kZXhPZihoaWVyYXJjaGljYWxBdHRyaWJ1dGVOYW1lKSA+IC0xO1xuICB9KTtcbn1cblxuLyplc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBDb25zdHJ1Y3RvciBmb3IgU2VhcmNoUmVzdWx0c1xuICogQGNsYXNzXG4gKiBAY2xhc3NkZXNjIFNlYXJjaFJlc3VsdHMgY29udGFpbnMgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeSB0byBBbGdvbGlhIHVzaW5nIHRoZVxuICoge0BsaW5rIEFsZ29saWFTZWFyY2hIZWxwZXJ9LlxuICogQHBhcmFtIHtTZWFyY2hQYXJhbWV0ZXJzfSBzdGF0ZSBzdGF0ZSB0aGF0IGxlZCB0byB0aGUgcmVzcG9uc2VcbiAqIEBwYXJhbSB7YXJyYXkuPG9iamVjdD59IHJlc3VsdHMgdGhlIHJlc3VsdHMgZnJvbSBhbGdvbGlhIGNsaWVudFxuICogQGV4YW1wbGUgPGNhcHRpb24+U2VhcmNoUmVzdWx0cyBvZiB0aGUgZmlyc3QgcXVlcnkgaW5cbiAqIDxhIGhyZWY9XCJodHRwOi8vZGVtb3MuYWxnb2xpYS5jb20vaW5zdGFudC1zZWFyY2gtZGVtb1wiPnRoZSBpbnN0YW50IHNlYXJjaCBkZW1vPC9hPjwvY2FwdGlvbj5cbntcbiAgIFwiaGl0c1BlclBhZ2VcIjogMTAsXG4gICBcInByb2Nlc3NpbmdUaW1lTVNcIjogMixcbiAgIFwiZmFjZXRzXCI6IFtcbiAgICAgIHtcbiAgICAgICAgIFwibmFtZVwiOiBcInR5cGVcIixcbiAgICAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgICAgICBcIkhhcmRHb29kXCI6IDY2MjcsXG4gICAgICAgICAgICBcIkJsYWNrVGllXCI6IDU1MCxcbiAgICAgICAgICAgIFwiTXVzaWNcIjogNjY1LFxuICAgICAgICAgICAgXCJTb2Z0d2FyZVwiOiAxMzEsXG4gICAgICAgICAgICBcIkdhbWVcIjogNDU2LFxuICAgICAgICAgICAgXCJNb3ZpZVwiOiAxNTcxXG4gICAgICAgICB9LFxuICAgICAgICAgXCJleGhhdXN0aXZlXCI6IGZhbHNlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAgXCJleGhhdXN0aXZlXCI6IGZhbHNlLFxuICAgICAgICAgXCJkYXRhXCI6IHtcbiAgICAgICAgICAgIFwiRnJlZSBzaGlwcGluZ1wiOiA1NTA3XG4gICAgICAgICB9LFxuICAgICAgICAgXCJuYW1lXCI6IFwic2hpcHBpbmdcIlxuICAgICAgfVxuICBdLFxuICAgXCJoaXRzXCI6IFtcbiAgICAgIHtcbiAgICAgICAgIFwidGh1bWJuYWlsSW1hZ2VcIjogXCJodHRwOi8vaW1nLmJieXN0YXRpYy5jb20vQmVzdEJ1eV9VUy9pbWFnZXMvcHJvZHVjdHMvMTY4OC8xNjg4ODMyXzU0eDEwOF9zLmdpZlwiLFxuICAgICAgICAgXCJfaGlnaGxpZ2h0UmVzdWx0XCI6IHtcbiAgICAgICAgICAgIFwic2hvcnREZXNjcmlwdGlvblwiOiB7XG4gICAgICAgICAgICAgICBcIm1hdGNoTGV2ZWxcIjogXCJub25lXCIsXG4gICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiU2FmZWd1YXJkIHlvdXIgUEMsIE1hYywgQW5kcm9pZCBhbmQgaU9TIGRldmljZXMgd2l0aCBjb21wcmVoZW5zaXZlIEludGVybmV0IHByb3RlY3Rpb25cIixcbiAgICAgICAgICAgICAgIFwibWF0Y2hlZFdvcmRzXCI6IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJjYXRlZ29yeVwiOiB7XG4gICAgICAgICAgICAgICBcIm1hdGNoTGV2ZWxcIjogXCJub25lXCIsXG4gICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiQ29tcHV0ZXIgU2VjdXJpdHkgU29mdHdhcmVcIixcbiAgICAgICAgICAgICAgIFwibWF0Y2hlZFdvcmRzXCI6IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtYW51ZmFjdHVyZXJcIjoge1xuICAgICAgICAgICAgICAgXCJtYXRjaGVkV29yZHNcIjogW10sXG4gICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiV2Vicm9vdFwiLFxuICAgICAgICAgICAgICAgXCJtYXRjaExldmVsXCI6IFwibm9uZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJuYW1lXCI6IHtcbiAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJXZWJyb290IFNlY3VyZUFueXdoZXJlIEludGVybmV0IFNlY3VyaXR5ICgzLURldmljZSkgKDEtWWVhciBTdWJzY3JpcHRpb24pIC0gTWFjL1dpbmRvd3NcIixcbiAgICAgICAgICAgICAgIFwibWF0Y2hlZFdvcmRzXCI6IFtdLFxuICAgICAgICAgICAgICAgXCJtYXRjaExldmVsXCI6IFwibm9uZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICB9LFxuICAgICAgICAgXCJpbWFnZVwiOiBcImh0dHA6Ly9pbWcuYmJ5c3RhdGljLmNvbS9CZXN0QnV5X1VTL2ltYWdlcy9wcm9kdWN0cy8xNjg4LzE2ODg4MzJfMTA1eDIxMF9zYy5qcGdcIixcbiAgICAgICAgIFwic2hpcHBpbmdcIjogXCJGcmVlIHNoaXBwaW5nXCIsXG4gICAgICAgICBcImJlc3RTZWxsaW5nUmFua1wiOiA0LFxuICAgICAgICAgXCJzaG9ydERlc2NyaXB0aW9uXCI6IFwiU2FmZWd1YXJkIHlvdXIgUEMsIE1hYywgQW5kcm9pZCBhbmQgaU9TIGRldmljZXMgd2l0aCBjb21wcmVoZW5zaXZlIEludGVybmV0IHByb3RlY3Rpb25cIixcbiAgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3d3dy5iZXN0YnV5LmNvbS9zaXRlL3dlYnJvb3Qtc2VjdXJlYW55d2hlcmUtaW50ZXJuZXQtc2VjdXJpdHktMy1kZXZp4oCmZD0xMjE5MDYwNjg3OTY5JnNrdUlkPTE2ODg4MzImY21wPVJNWCZreT0yZDNHZkVtTkl6akEwdmt6dmVIZFpFQmdwUEN5TW5MVEpcIixcbiAgICAgICAgIFwibmFtZVwiOiBcIldlYnJvb3QgU2VjdXJlQW55d2hlcmUgSW50ZXJuZXQgU2VjdXJpdHkgKDMtRGV2aWNlKSAoMS1ZZWFyIFN1YnNjcmlwdGlvbikgLSBNYWMvV2luZG93c1wiLFxuICAgICAgICAgXCJjYXRlZ29yeVwiOiBcIkNvbXB1dGVyIFNlY3VyaXR5IFNvZnR3YXJlXCIsXG4gICAgICAgICBcInNhbGVQcmljZV9yYW5nZVwiOiBcIjEgLSA1MFwiLFxuICAgICAgICAgXCJvYmplY3RJRFwiOiBcIjE2ODg4MzJcIixcbiAgICAgICAgIFwidHlwZVwiOiBcIlNvZnR3YXJlXCIsXG4gICAgICAgICBcImN1c3RvbWVyUmV2aWV3Q291bnRcIjogNTk4MCxcbiAgICAgICAgIFwic2FsZVByaWNlXCI6IDQ5Ljk5LFxuICAgICAgICAgXCJtYW51ZmFjdHVyZXJcIjogXCJXZWJyb290XCJcbiAgICAgIH0sXG4gICAgICAuLi4uXG4gIF0sXG4gICBcIm5iSGl0c1wiOiAxMDAwMCxcbiAgIFwiZGlzanVuY3RpdmVGYWNldHNcIjogW1xuICAgICAge1xuICAgICAgICAgXCJleGhhdXN0aXZlXCI6IGZhbHNlLFxuICAgICAgICAgXCJkYXRhXCI6IHtcbiAgICAgICAgICAgIFwiNVwiOiAxODMsXG4gICAgICAgICAgICBcIjEyXCI6IDExMixcbiAgICAgICAgICAgIFwiN1wiOiAxNDksXG4gICAgICAgICAgICAuLi5cbiAgICAgICAgIH0sXG4gICAgICAgICBcIm5hbWVcIjogXCJjdXN0b21lclJldmlld0NvdW50XCIsXG4gICAgICAgICBcInN0YXRzXCI6IHtcbiAgICAgICAgICAgIFwibWF4XCI6IDc0NjEsXG4gICAgICAgICAgICBcImF2Z1wiOiAxNTcuOTM5LFxuICAgICAgICAgICAgXCJtaW5cIjogMVxuICAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgICAgICBcIlByaW50ZXIgSW5rXCI6IDE0MixcbiAgICAgICAgICAgIFwiV2lyZWxlc3MgU3BlYWtlcnNcIjogNjAsXG4gICAgICAgICAgICBcIlBvaW50ICYgU2hvb3QgQ2FtZXJhc1wiOiA0OCxcbiAgICAgICAgICAgIC4uLlxuICAgICAgICAgfSxcbiAgICAgICAgIFwibmFtZVwiOiBcImNhdGVnb3J5XCIsXG4gICAgICAgICBcImV4aGF1c3RpdmVcIjogZmFsc2VcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICBcImV4aGF1c3RpdmVcIjogZmFsc2UsXG4gICAgICAgICBcImRhdGFcIjoge1xuICAgICAgICAgICAgXCI+IDUwMDBcIjogMixcbiAgICAgICAgICAgIFwiMSAtIDUwXCI6IDY1MjQsXG4gICAgICAgICAgICBcIjUwMSAtIDIwMDBcIjogNTY2LFxuICAgICAgICAgICAgXCIyMDEgLSA1MDBcIjogMTUwMSxcbiAgICAgICAgICAgIFwiMTAxIC0gMjAwXCI6IDEzNjAsXG4gICAgICAgICAgICBcIjIwMDEgLSA1MDAwXCI6IDQ3XG4gICAgICAgICB9LFxuICAgICAgICAgXCJuYW1lXCI6IFwic2FsZVByaWNlX3JhbmdlXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICBcImRhdGFcIjoge1xuICAgICAgICAgICAgXCJEeW5leOKEolwiOiAyMDIsXG4gICAgICAgICAgICBcIkluc2lnbmlh4oSiXCI6IDIzMCxcbiAgICAgICAgICAgIFwiUE5ZXCI6IDcyLFxuICAgICAgICAgICAgLi4uXG4gICAgICAgICB9LFxuICAgICAgICAgXCJuYW1lXCI6IFwibWFudWZhY3R1cmVyXCIsXG4gICAgICAgICBcImV4aGF1c3RpdmVcIjogZmFsc2VcbiAgICAgIH1cbiAgXSxcbiAgIFwicXVlcnlcIjogXCJcIixcbiAgIFwibmJQYWdlc1wiOiAxMDAsXG4gICBcInBhZ2VcIjogMCxcbiAgIFwiaW5kZXhcIjogXCJiZXN0YnV5XCJcbn1cbiAqKi9cbi8qZXNsaW50LWVuYWJsZSAqL1xuZnVuY3Rpb24gU2VhcmNoUmVzdWx0cyhzdGF0ZSwgcmVzdWx0cywgb3B0aW9ucykge1xuICB2YXIgbWFpblN1YlJlc3BvbnNlID0gcmVzdWx0c1swXTtcblxuICB0aGlzLl9yYXdSZXN1bHRzID0gcmVzdWx0cztcblxuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgLy8gaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL2FwaS1yZWZlcmVuY2UvYXBpLW1ldGhvZHMvc2VhcmNoLyNyZXNwb25zZVxuICBPYmplY3Qua2V5cyhtYWluU3ViUmVzcG9uc2UpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgc2VsZltrZXldID0gbWFpblN1YlJlc3BvbnNlW2tleV07XG4gIH0pO1xuXG4gIC8vIE1ha2UgZXZlcnkga2V5IG9mIHRoZSByZXN1bHQgb3B0aW9ucyByZWFjaGFibGUgZnJvbSB0aGUgaW5zdGFuY2VcbiAgT2JqZWN0LmtleXMob3B0aW9ucyB8fCB7fSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBzZWxmW2tleV0gPSBvcHRpb25zW2tleV07XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBxdWVyeSB1c2VkIHRvIGdlbmVyYXRlIHRoZSByZXN1bHRzXG4gICAqIEBuYW1lIHF1ZXJ5XG4gICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogVGhlIHF1ZXJ5IGFzIHBhcnNlZCBieSB0aGUgZW5naW5lIGdpdmVuIGFsbCB0aGUgcnVsZXMuXG4gICAqIEBuYW1lIHBhcnNlZFF1ZXJ5XG4gICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogYWxsIHRoZSByZWNvcmRzIHRoYXQgbWF0Y2ggdGhlIHNlYXJjaCBwYXJhbWV0ZXJzLiBFYWNoIHJlY29yZCBpc1xuICAgKiBhdWdtZW50ZWQgd2l0aCBhIG5ldyBhdHRyaWJ1dGUgYF9oaWdobGlnaHRSZXN1bHRgXG4gICAqIHdoaWNoIGlzIGFuIG9iamVjdCBrZXllZCBieSBhdHRyaWJ1dGUgYW5kIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgKiAgLSBgdmFsdWVgIDogdGhlIHZhbHVlIG9mIHRoZSBmYWNldCBoaWdobGlnaHRlZCAoaHRtbClcbiAgICogIC0gYG1hdGNoTGV2ZWxgOiBmdWxsLCBwYXJ0aWFsIG9yIG5vbmUgZGVwZW5kaW5nIG9uIGhvdyB0aGUgcXVlcnkgdGVybXMgbWF0Y2hcbiAgICogQG5hbWUgaGl0c1xuICAgKiBAbWVtYmVyIHtvYmplY3RbXX1cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogaW5kZXggd2hlcmUgdGhlIHJlc3VsdHMgY29tZSBmcm9tXG4gICAqIEBuYW1lIGluZGV4XG4gICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogbnVtYmVyIG9mIGhpdHMgcGVyIHBhZ2UgcmVxdWVzdGVkXG4gICAqIEBuYW1lIGhpdHNQZXJQYWdlXG4gICAqIEBtZW1iZXIge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogdG90YWwgbnVtYmVyIG9mIGhpdHMgb2YgdGhpcyBxdWVyeSBvbiB0aGUgaW5kZXhcbiAgICogQG5hbWUgbmJIaXRzXG4gICAqIEBtZW1iZXIge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogdG90YWwgbnVtYmVyIG9mIHBhZ2VzIHdpdGggcmVzcGVjdCB0byB0aGUgbnVtYmVyIG9mIGhpdHMgcGVyIHBhZ2UgYW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgaGl0c1xuICAgKiBAbmFtZSBuYlBhZ2VzXG4gICAqIEBtZW1iZXIge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogY3VycmVudCBwYWdlXG4gICAqIEBuYW1lIHBhZ2VcbiAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgU2VhcmNoUmVzdWx0c1xuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpb24gaWYgdGhlIHBvc2l0aW9uIHdhcyBndWVzc2VkIGJ5IElQLlxuICAgKiBAbmFtZSBhcm91bmRMYXRMbmdcbiAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU2VhcmNoUmVzdWx0c1xuICAgKiBAaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgXCI0OC44NjM3LDIuMzYxNVwiLFxuICAgKi9cbiAgLyoqXG4gICAqIFRoZSByYWRpdXMgY29tcHV0ZWQgYnkgQWxnb2xpYS5cbiAgICogQG5hbWUgYXV0b21hdGljUmFkaXVzXG4gICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqIEBleGFtcGxlIFwiMTI2NzkyOTIyXCIsXG4gICAqL1xuICAvKipcbiAgICogU3RyaW5nIGlkZW50aWZ5aW5nIHRoZSBzZXJ2ZXIgdXNlZCB0byBzZXJ2ZSB0aGlzIHJlcXVlc3QuXG4gICAqXG4gICAqIGdldFJhbmtpbmdJbmZvIG5lZWRzIHRvIGJlIHNldCB0byBgdHJ1ZWAgZm9yIHRoaXMgdG8gYmUgcmV0dXJuZWRcbiAgICpcbiAgICogQG5hbWUgc2VydmVyVXNlZFxuICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTZWFyY2hSZXN1bHRzXG4gICAqIEBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBcImM3LXVzZS0yLmFsZ29saWEubmV0XCIsXG4gICAqL1xuICAvKipcbiAgICogQm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgY29tcHV0YXRpb24gb2YgdGhlIGNvdW50cyBkaWQgdGltZSBvdXQuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEBuYW1lIHRpbWVvdXRDb3VudHNcbiAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogQm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgY29tcHV0YXRpb24gb2YgdGhlIGhpdHMgZGlkIHRpbWUgb3V0LlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAbmFtZSB0aW1lb3V0SGl0c1xuICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgU2VhcmNoUmVzdWx0c1xuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSBjb3VudHMgb2YgdGhlIGZhY2V0cyBpcyBleGhhdXN0aXZlXG4gICAqIEBuYW1lIGV4aGF1c3RpdmVGYWNldHNDb3VudFxuICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgU2VhcmNoUmVzdWx0c1xuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSBudW1iZXIgb2YgaGl0cyBpcyBleGhhdXN0aXZlXG4gICAqIEBuYW1lIGV4aGF1c3RpdmVOYkhpdHNcbiAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFNlYXJjaFJlc3VsdHNcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICAvKipcbiAgICogQ29udGFpbnMgdGhlIHVzZXJEYXRhIGlmIHRoZXkgYXJlIHNldCBieSBhIFtxdWVyeSBydWxlXShodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL3F1ZXJ5LXJ1bGVzL3F1ZXJ5LXJ1bGVzLW92ZXJ2aWV3LykuXG4gICAqIEBuYW1lIHVzZXJEYXRhXG4gICAqIEBtZW1iZXIge29iamVjdFtdfVxuICAgKiBAbWVtYmVyb2YgU2VhcmNoUmVzdWx0c1xuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIC8qKlxuICAgKiBxdWVyeUlEIGlzIHRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgcXVlcnkgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3VycmVudCBzZWFyY2ggcmVzdWx0cy5cbiAgICogVGhpcyB2YWx1ZSBpcyBvbmx5IGF2YWlsYWJsZSBpZiB0aGUgYGNsaWNrQW5hbHl0aWNzYCBzZWFyY2ggcGFyYW1ldGVyIGlzIHNldCB0byBgdHJ1ZWAuXG4gICAqIEBuYW1lIHF1ZXJ5SURcbiAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU2VhcmNoUmVzdWx0c1xuICAgKiBAaW5zdGFuY2VcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1bSBvZiB0aGUgcHJvY2Vzc2luZyB0aW1lIG9mIGFsbCB0aGUgcXVlcmllc1xuICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLnByb2Nlc3NpbmdUaW1lTVMgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbihzdW0sIHJlc3VsdCkge1xuICAgIHJldHVybiByZXN1bHQucHJvY2Vzc2luZ1RpbWVNUyA9PT0gdW5kZWZpbmVkXG4gICAgICA/IHN1bVxuICAgICAgOiBzdW0gKyByZXN1bHQucHJvY2Vzc2luZ1RpbWVNUztcbiAgfSwgMCk7XG5cbiAgLyoqXG4gICAqIGRpc2p1bmN0aXZlIGZhY2V0cyByZXN1bHRzXG4gICAqIEBtZW1iZXIge1NlYXJjaFJlc3VsdHMuRmFjZXRbXX1cbiAgICovXG4gIHRoaXMuZGlzanVuY3RpdmVGYWNldHMgPSBbXTtcbiAgLyoqXG4gICAqIGRpc2p1bmN0aXZlIGZhY2V0cyByZXN1bHRzXG4gICAqIEBtZW1iZXIge1NlYXJjaFJlc3VsdHMuSGllcmFyY2hpY2FsRmFjZXRbXX1cbiAgICovXG4gIHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzID0gc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzLm1hcChmdW5jdGlvbiBpbml0RnV0dXJlVHJlZSgpIHtcbiAgICByZXR1cm4gW107XG4gIH0pO1xuICAvKipcbiAgICogb3RoZXIgZmFjZXRzIHJlc3VsdHNcbiAgICogQG1lbWJlciB7U2VhcmNoUmVzdWx0cy5GYWNldFtdfVxuICAgKi9cbiAgdGhpcy5mYWNldHMgPSBbXTtcblxuICB2YXIgZGlzanVuY3RpdmVGYWNldHMgPSBzdGF0ZS5nZXRSZWZpbmVkRGlzanVuY3RpdmVGYWNldHMoKTtcblxuICB2YXIgZmFjZXRzSW5kaWNlcyA9IGdldEluZGljZXMoc3RhdGUuZmFjZXRzKTtcbiAgdmFyIGRpc2p1bmN0aXZlRmFjZXRzSW5kaWNlcyA9IGdldEluZGljZXMoc3RhdGUuZGlzanVuY3RpdmVGYWNldHMpO1xuICB2YXIgbmV4dERpc2p1bmN0aXZlUmVzdWx0ID0gMTtcblxuICAvLyBTaW5jZSB3ZSBzZW5kIHJlcXVlc3Qgb25seSBmb3IgZGlzanVuY3RpdmUgZmFjZXRzIHRoYXQgaGF2ZSBiZWVuIHJlZmluZWQsXG4gIC8vIHdlIGdldCB0aGUgZmFjZXRzIGluZm9ybWF0aW9uIGZyb20gdGhlIGZpcnN0LCBnZW5lcmFsLCByZXNwb25zZS5cblxuICB2YXIgbWFpbkZhY2V0cyA9IG1haW5TdWJSZXNwb25zZS5mYWNldHMgfHwge307XG5cbiAgT2JqZWN0LmtleXMobWFpbkZhY2V0cykuZm9yRWFjaChmdW5jdGlvbihmYWNldEtleSkge1xuICAgIHZhciBmYWNldFZhbHVlT2JqZWN0ID0gbWFpbkZhY2V0c1tmYWNldEtleV07XG5cbiAgICB2YXIgaGllcmFyY2hpY2FsRmFjZXQgPSBmaW5kTWF0Y2hpbmdIaWVyYXJjaGljYWxGYWNldEZyb21BdHRyaWJ1dGVOYW1lKFxuICAgICAgc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzLFxuICAgICAgZmFjZXRLZXlcbiAgICApO1xuXG4gICAgaWYgKGhpZXJhcmNoaWNhbEZhY2V0KSB7XG4gICAgICAvLyBQbGFjZSB0aGUgaGllcmFyY2hpY2FsRmFjZXQgZGF0YSBhdCB0aGUgY29ycmVjdCBpbmRleCBkZXBlbmRpbmcgb25cbiAgICAgIC8vIHRoZSBhdHRyaWJ1dGVzIG9yZGVyIHRoYXQgd2FzIGRlZmluZWQgYXQgdGhlIGhlbHBlciBpbml0aWFsaXphdGlvblxuICAgICAgdmFyIGZhY2V0SW5kZXggPSBoaWVyYXJjaGljYWxGYWNldC5hdHRyaWJ1dGVzLmluZGV4T2YoZmFjZXRLZXkpO1xuICAgICAgdmFyIGlkeEF0dHJpYnV0ZU5hbWUgPSBmaW5kSW5kZXgoc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzLCBmdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiBmLm5hbWUgPT09IGhpZXJhcmNoaWNhbEZhY2V0Lm5hbWU7XG4gICAgICB9KTtcbiAgICAgIHNlbGYuaGllcmFyY2hpY2FsRmFjZXRzW2lkeEF0dHJpYnV0ZU5hbWVdW2ZhY2V0SW5kZXhdID0ge1xuICAgICAgICBhdHRyaWJ1dGU6IGZhY2V0S2V5LFxuICAgICAgICBkYXRhOiBmYWNldFZhbHVlT2JqZWN0LFxuICAgICAgICBleGhhdXN0aXZlOiBtYWluU3ViUmVzcG9uc2UuZXhoYXVzdGl2ZUZhY2V0c0NvdW50XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXNGYWNldERpc2p1bmN0aXZlID0gc3RhdGUuZGlzanVuY3RpdmVGYWNldHMuaW5kZXhPZihmYWNldEtleSkgIT09IC0xO1xuICAgICAgdmFyIGlzRmFjZXRDb25qdW5jdGl2ZSA9IHN0YXRlLmZhY2V0cy5pbmRleE9mKGZhY2V0S2V5KSAhPT0gLTE7XG4gICAgICB2YXIgcG9zaXRpb247XG5cbiAgICAgIGlmIChpc0ZhY2V0RGlzanVuY3RpdmUpIHtcbiAgICAgICAgcG9zaXRpb24gPSBkaXNqdW5jdGl2ZUZhY2V0c0luZGljZXNbZmFjZXRLZXldO1xuICAgICAgICBzZWxmLmRpc2p1bmN0aXZlRmFjZXRzW3Bvc2l0aW9uXSA9IHtcbiAgICAgICAgICBuYW1lOiBmYWNldEtleSxcbiAgICAgICAgICBkYXRhOiBmYWNldFZhbHVlT2JqZWN0LFxuICAgICAgICAgIGV4aGF1c3RpdmU6IG1haW5TdWJSZXNwb25zZS5leGhhdXN0aXZlRmFjZXRzQ291bnRcbiAgICAgICAgfTtcbiAgICAgICAgYXNzaWduRmFjZXRTdGF0cyhzZWxmLmRpc2p1bmN0aXZlRmFjZXRzW3Bvc2l0aW9uXSwgbWFpblN1YlJlc3BvbnNlLmZhY2V0c19zdGF0cywgZmFjZXRLZXkpO1xuICAgICAgfVxuICAgICAgaWYgKGlzRmFjZXRDb25qdW5jdGl2ZSkge1xuICAgICAgICBwb3NpdGlvbiA9IGZhY2V0c0luZGljZXNbZmFjZXRLZXldO1xuICAgICAgICBzZWxmLmZhY2V0c1twb3NpdGlvbl0gPSB7XG4gICAgICAgICAgbmFtZTogZmFjZXRLZXksXG4gICAgICAgICAgZGF0YTogZmFjZXRWYWx1ZU9iamVjdCxcbiAgICAgICAgICBleGhhdXN0aXZlOiBtYWluU3ViUmVzcG9uc2UuZXhoYXVzdGl2ZUZhY2V0c0NvdW50XG4gICAgICAgIH07XG4gICAgICAgIGFzc2lnbkZhY2V0U3RhdHMoc2VsZi5mYWNldHNbcG9zaXRpb25dLCBtYWluU3ViUmVzcG9uc2UuZmFjZXRzX3N0YXRzLCBmYWNldEtleSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBNYWtlIHN1cmUgd2UgZG8gbm90IGtlZXAgaG9sZXMgd2l0aGluIHRoZSBoaWVyYXJjaGljYWwgZmFjZXRzXG4gIHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzID0gY29tcGFjdCh0aGlzLmhpZXJhcmNoaWNhbEZhY2V0cyk7XG5cbiAgLy8gYWdncmVnYXRlIHRoZSByZWZpbmVkIGRpc2p1bmN0aXZlIGZhY2V0c1xuICBkaXNqdW5jdGl2ZUZhY2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGRpc2p1bmN0aXZlRmFjZXQpIHtcbiAgICB2YXIgcmVzdWx0ID0gcmVzdWx0c1tuZXh0RGlzanVuY3RpdmVSZXN1bHRdO1xuICAgIHZhciBmYWNldHMgPSByZXN1bHQgJiYgcmVzdWx0LmZhY2V0cyA/IHJlc3VsdC5mYWNldHMgOiB7fTtcbiAgICB2YXIgaGllcmFyY2hpY2FsRmFjZXQgPSBzdGF0ZS5nZXRIaWVyYXJjaGljYWxGYWNldEJ5TmFtZShkaXNqdW5jdGl2ZUZhY2V0KTtcblxuICAgIC8vIFRoZXJlIHNob3VsZCBiZSBvbmx5IGl0ZW0gaW4gZmFjZXRzLlxuICAgIE9iamVjdC5rZXlzKGZhY2V0cykuZm9yRWFjaChmdW5jdGlvbihkZmFjZXQpIHtcbiAgICAgIHZhciBmYWNldFJlc3VsdHMgPSBmYWNldHNbZGZhY2V0XTtcblxuICAgICAgdmFyIHBvc2l0aW9uO1xuXG4gICAgICBpZiAoaGllcmFyY2hpY2FsRmFjZXQpIHtcbiAgICAgICAgcG9zaXRpb24gPSBmaW5kSW5kZXgoc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzLCBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgcmV0dXJuIGYubmFtZSA9PT0gaGllcmFyY2hpY2FsRmFjZXQubmFtZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVJbmRleCA9IGZpbmRJbmRleChzZWxmLmhpZXJhcmNoaWNhbEZhY2V0c1twb3NpdGlvbl0sIGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICByZXR1cm4gZi5hdHRyaWJ1dGUgPT09IGRmYWNldDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcHJldmlvdXMgcmVmaW5lbWVudHMgYW5kIG5vIHJlc3VsdHMgc28gbm90IGFibGUgdG8gZmluZCBpdFxuICAgICAgICBpZiAoYXR0cmlidXRlSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5oaWVyYXJjaGljYWxGYWNldHNbcG9zaXRpb25dW2F0dHJpYnV0ZUluZGV4XS5kYXRhID0gbWVyZ2UoXG4gICAgICAgICAge30sXG4gICAgICAgICAgc2VsZi5oaWVyYXJjaGljYWxGYWNldHNbcG9zaXRpb25dW2F0dHJpYnV0ZUluZGV4XS5kYXRhLFxuICAgICAgICAgIGZhY2V0UmVzdWx0c1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zaXRpb24gPSBkaXNqdW5jdGl2ZUZhY2V0c0luZGljZXNbZGZhY2V0XTtcblxuICAgICAgICB2YXIgZGF0YUZyb21NYWluUmVxdWVzdCA9IG1haW5TdWJSZXNwb25zZS5mYWNldHMgJiYgbWFpblN1YlJlc3BvbnNlLmZhY2V0c1tkZmFjZXRdIHx8IHt9O1xuXG4gICAgICAgIHNlbGYuZGlzanVuY3RpdmVGYWNldHNbcG9zaXRpb25dID0ge1xuICAgICAgICAgIG5hbWU6IGRmYWNldCxcbiAgICAgICAgICBkYXRhOiBkZWZhdWx0c1B1cmUoe30sIGZhY2V0UmVzdWx0cywgZGF0YUZyb21NYWluUmVxdWVzdCksXG4gICAgICAgICAgZXhoYXVzdGl2ZTogcmVzdWx0LmV4aGF1c3RpdmVGYWNldHNDb3VudFxuICAgICAgICB9O1xuICAgICAgICBhc3NpZ25GYWNldFN0YXRzKHNlbGYuZGlzanVuY3RpdmVGYWNldHNbcG9zaXRpb25dLCByZXN1bHQuZmFjZXRzX3N0YXRzLCBkZmFjZXQpO1xuXG4gICAgICAgIGlmIChzdGF0ZS5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzW2RmYWNldF0pIHtcbiAgICAgICAgICBzdGF0ZS5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzW2RmYWNldF0uZm9yRWFjaChmdW5jdGlvbihyZWZpbmVtZW50VmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgZGlzanVuY3RpdmUgcmVmaW5lbWVudHMgaWYgaXQgaXMgbm8gbW9yZSByZXRyaWV2ZWRcbiAgICAgICAgICAgIGlmICghc2VsZi5kaXNqdW5jdGl2ZUZhY2V0c1twb3NpdGlvbl0uZGF0YVtyZWZpbmVtZW50VmFsdWVdICYmXG4gICAgICAgICAgICAgIHN0YXRlLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHNbZGZhY2V0XS5pbmRleE9mKHVuZXNjYXBlRmFjZXRWYWx1ZShyZWZpbmVtZW50VmFsdWUpKSA+IC0xKSB7XG4gICAgICAgICAgICAgIHNlbGYuZGlzanVuY3RpdmVGYWNldHNbcG9zaXRpb25dLmRhdGFbcmVmaW5lbWVudFZhbHVlXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBuZXh0RGlzanVuY3RpdmVSZXN1bHQrKztcbiAgfSk7XG5cbiAgLy8gaWYgd2UgaGF2ZSBzb21lIHBhcmVudCBsZXZlbCB2YWx1ZXMgZm9yIGhpZXJhcmNoaWNhbCBmYWNldHMsIG1lcmdlIHRoZW1cbiAgc3RhdGUuZ2V0UmVmaW5lZEhpZXJhcmNoaWNhbEZhY2V0cygpLmZvckVhY2goZnVuY3Rpb24ocmVmaW5lZEZhY2V0KSB7XG4gICAgdmFyIGhpZXJhcmNoaWNhbEZhY2V0ID0gc3RhdGUuZ2V0SGllcmFyY2hpY2FsRmFjZXRCeU5hbWUocmVmaW5lZEZhY2V0KTtcbiAgICB2YXIgc2VwYXJhdG9yID0gc3RhdGUuX2dldEhpZXJhcmNoaWNhbEZhY2V0U2VwYXJhdG9yKGhpZXJhcmNoaWNhbEZhY2V0KTtcblxuICAgIHZhciBjdXJyZW50UmVmaW5lbWVudCA9IHN0YXRlLmdldEhpZXJhcmNoaWNhbFJlZmluZW1lbnQocmVmaW5lZEZhY2V0KTtcbiAgICAvLyBpZiB3ZSBhcmUgYWxyZWFkeSBhdCBhIHJvb3QgcmVmaW5lbWVudCAob3Igbm8gcmVmaW5lbWVudCBhdCBhbGwpLCB0aGVyZSBpcyBub1xuICAgIC8vIHJvb3QgbGV2ZWwgdmFsdWVzIHJlcXVlc3RcbiAgICBpZiAoY3VycmVudFJlZmluZW1lbnQubGVuZ3RoID09PSAwIHx8IGN1cnJlbnRSZWZpbmVtZW50WzBdLnNwbGl0KHNlcGFyYXRvcikubGVuZ3RoIDwgMikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJlc3VsdHMuc2xpY2UobmV4dERpc2p1bmN0aXZlUmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgdmFyIGZhY2V0cyA9IHJlc3VsdCAmJiByZXN1bHQuZmFjZXRzXG4gICAgICAgID8gcmVzdWx0LmZhY2V0c1xuICAgICAgICA6IHt9O1xuXG4gICAgICBPYmplY3Qua2V5cyhmYWNldHMpLmZvckVhY2goZnVuY3Rpb24oZGZhY2V0KSB7XG4gICAgICAgIHZhciBmYWNldFJlc3VsdHMgPSBmYWNldHNbZGZhY2V0XTtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gZmluZEluZGV4KHN0YXRlLmhpZXJhcmNoaWNhbEZhY2V0cywgZnVuY3Rpb24oZikge1xuICAgICAgICAgIHJldHVybiBmLm5hbWUgPT09IGhpZXJhcmNoaWNhbEZhY2V0Lm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYXR0cmlidXRlSW5kZXggPSBmaW5kSW5kZXgoc2VsZi5oaWVyYXJjaGljYWxGYWNldHNbcG9zaXRpb25dLCBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgcmV0dXJuIGYuYXR0cmlidXRlID09PSBkZmFjZXQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHByZXZpb3VzIHJlZmluZW1lbnRzIGFuZCBubyByZXN1bHRzIHNvIG5vdCBhYmxlIHRvIGZpbmQgaXRcbiAgICAgICAgaWYgKGF0dHJpYnV0ZUluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdoZW4gd2UgYWx3YXlzIGdldCByb290IGxldmVscywgaWYgdGhlIGhpdHMgcmVmaW5lbWVudCBpcyBgYmVlcnMgPiBJUEFgIChjb3VudDogNSksXG4gICAgICAgIC8vIHRoZW4gdGhlIGRpc2p1bmN0aXZlIHZhbHVlcyB3aWxsIGJlIGBiZWVyc2AgKGNvdW50OiAxMDApLFxuICAgICAgICAvLyBidXQgd2UgZG8gbm90IHdhbnQgdG8gZGlzcGxheVxuICAgICAgICAvLyAgIHwgYmVlcnMgKDEwMClcbiAgICAgICAgLy8gICAgID4gSVBBICg1KVxuICAgICAgICAvLyBXZSB3YW50XG4gICAgICAgIC8vICAgfCBiZWVycyAoNSlcbiAgICAgICAgLy8gICAgID4gSVBBICg1KVxuICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSB7fTtcblxuICAgICAgICBpZiAoY3VycmVudFJlZmluZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciByb290ID0gY3VycmVudFJlZmluZW1lbnRbMF0uc3BsaXQoc2VwYXJhdG9yKVswXTtcbiAgICAgICAgICBkZWZhdWx0RGF0YVtyb290XSA9IHNlbGYuaGllcmFyY2hpY2FsRmFjZXRzW3Bvc2l0aW9uXVthdHRyaWJ1dGVJbmRleF0uZGF0YVtyb290XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaGllcmFyY2hpY2FsRmFjZXRzW3Bvc2l0aW9uXVthdHRyaWJ1dGVJbmRleF0uZGF0YSA9IGRlZmF1bHRzUHVyZShcbiAgICAgICAgICBkZWZhdWx0RGF0YSxcbiAgICAgICAgICBmYWNldFJlc3VsdHMsXG4gICAgICAgICAgc2VsZi5oaWVyYXJjaGljYWxGYWNldHNbcG9zaXRpb25dW2F0dHJpYnV0ZUluZGV4XS5kYXRhXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgbmV4dERpc2p1bmN0aXZlUmVzdWx0Kys7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGFkZCB0aGUgZXhjbHVkZXNcbiAgT2JqZWN0LmtleXMoc3RhdGUuZmFjZXRzRXhjbHVkZXMpLmZvckVhY2goZnVuY3Rpb24oZmFjZXROYW1lKSB7XG4gICAgdmFyIGV4Y2x1ZGVzID0gc3RhdGUuZmFjZXRzRXhjbHVkZXNbZmFjZXROYW1lXTtcbiAgICB2YXIgcG9zaXRpb24gPSBmYWNldHNJbmRpY2VzW2ZhY2V0TmFtZV07XG5cbiAgICBzZWxmLmZhY2V0c1twb3NpdGlvbl0gPSB7XG4gICAgICBuYW1lOiBmYWNldE5hbWUsXG4gICAgICBkYXRhOiBtYWluU3ViUmVzcG9uc2UuZmFjZXRzW2ZhY2V0TmFtZV0sXG4gICAgICBleGhhdXN0aXZlOiBtYWluU3ViUmVzcG9uc2UuZXhoYXVzdGl2ZUZhY2V0c0NvdW50XG4gICAgfTtcbiAgICBleGNsdWRlcy5mb3JFYWNoKGZ1bmN0aW9uKGZhY2V0VmFsdWUpIHtcbiAgICAgIHNlbGYuZmFjZXRzW3Bvc2l0aW9uXSA9IHNlbGYuZmFjZXRzW3Bvc2l0aW9uXSB8fCB7bmFtZTogZmFjZXROYW1lfTtcbiAgICAgIHNlbGYuZmFjZXRzW3Bvc2l0aW9uXS5kYXRhID0gc2VsZi5mYWNldHNbcG9zaXRpb25dLmRhdGEgfHwge307XG4gICAgICBzZWxmLmZhY2V0c1twb3NpdGlvbl0uZGF0YVtmYWNldFZhbHVlXSA9IDA7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuICB0aGlzLmhpZXJhcmNoaWNhbEZhY2V0cyA9IHRoaXMuaGllcmFyY2hpY2FsRmFjZXRzLm1hcChnZW5lcmF0ZUhpZXJhcmNoaWNhbFRyZWUoc3RhdGUpKTtcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cbiAgdGhpcy5mYWNldHMgPSBjb21wYWN0KHRoaXMuZmFjZXRzKTtcbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICovXG4gIHRoaXMuZGlzanVuY3RpdmVGYWNldHMgPSBjb21wYWN0KHRoaXMuZGlzanVuY3RpdmVGYWNldHMpO1xuXG4gIHRoaXMuX3N0YXRlID0gc3RhdGU7XG59XG5cbi8qKlxuICogR2V0IGEgZmFjZXQgb2JqZWN0IHdpdGggaXRzIG5hbWVcbiAqIEBkZXByZWNhdGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBmYWNldGVkIGF0dHJpYnV0ZVxuICogQHJldHVybiB7U2VhcmNoUmVzdWx0cy5GYWNldH0gdGhlIGZhY2V0IG9iamVjdFxuICovXG5TZWFyY2hSZXN1bHRzLnByb3RvdHlwZS5nZXRGYWNldEJ5TmFtZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgZnVuY3Rpb24gcHJlZGljYXRlKGZhY2V0KSB7XG4gICAgcmV0dXJuIGZhY2V0Lm5hbWUgPT09IG5hbWU7XG4gIH1cblxuICByZXR1cm4gZmluZCh0aGlzLmZhY2V0cywgcHJlZGljYXRlKSB8fFxuICAgIGZpbmQodGhpcy5kaXNqdW5jdGl2ZUZhY2V0cywgcHJlZGljYXRlKSB8fFxuICAgIGZpbmQodGhpcy5oaWVyYXJjaGljYWxGYWNldHMsIHByZWRpY2F0ZSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZmFjZXQgdmFsdWVzIG9mIGEgc3BlY2lmaWVkIGF0dHJpYnV0ZSBmcm9tIGEgU2VhcmNoUmVzdWx0cyBvYmplY3QuXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTZWFyY2hSZXN1bHRzfSByZXN1bHRzIHRoZSBzZWFyY2ggcmVzdWx0cyB0byBzZWFyY2ggaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgbmFtZSBvZiB0aGUgZmFjZXRlZCBhdHRyaWJ1dGUgdG8gc2VhcmNoIGZvclxuICogQHJldHVybiB7YXJyYXl8b2JqZWN0fSBmYWNldCB2YWx1ZXMuIEZvciB0aGUgaGllcmFyY2hpY2FsIGZhY2V0cyBpdCBpcyBhbiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3ROb3JtYWxpemVkRmFjZXRWYWx1ZXMocmVzdWx0cywgYXR0cmlidXRlKSB7XG4gIGZ1bmN0aW9uIHByZWRpY2F0ZShmYWNldCkge1xuICAgIHJldHVybiBmYWNldC5uYW1lID09PSBhdHRyaWJ1dGU7XG4gIH1cblxuICBpZiAocmVzdWx0cy5fc3RhdGUuaXNDb25qdW5jdGl2ZUZhY2V0KGF0dHJpYnV0ZSkpIHtcbiAgICB2YXIgZmFjZXQgPSBmaW5kKHJlc3VsdHMuZmFjZXRzLCBwcmVkaWNhdGUpO1xuICAgIGlmICghZmFjZXQpIHJldHVybiBbXTtcblxuICAgIHJldHVybiBPYmplY3Qua2V5cyhmYWNldC5kYXRhKS5tYXAoZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gZXNjYXBlRmFjZXRWYWx1ZShuYW1lKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGVzY2FwZWRWYWx1ZTogdmFsdWUsXG4gICAgICAgIGNvdW50OiBmYWNldC5kYXRhW25hbWVdLFxuICAgICAgICBpc1JlZmluZWQ6IHJlc3VsdHMuX3N0YXRlLmlzRmFjZXRSZWZpbmVkKGF0dHJpYnV0ZSwgdmFsdWUpLFxuICAgICAgICBpc0V4Y2x1ZGVkOiByZXN1bHRzLl9zdGF0ZS5pc0V4Y2x1ZGVSZWZpbmVkKGF0dHJpYnV0ZSwgbmFtZSlcbiAgICAgIH07XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAocmVzdWx0cy5fc3RhdGUuaXNEaXNqdW5jdGl2ZUZhY2V0KGF0dHJpYnV0ZSkpIHtcbiAgICB2YXIgZGlzanVuY3RpdmVGYWNldCA9IGZpbmQocmVzdWx0cy5kaXNqdW5jdGl2ZUZhY2V0cywgcHJlZGljYXRlKTtcbiAgICBpZiAoIWRpc2p1bmN0aXZlRmFjZXQpIHJldHVybiBbXTtcblxuICAgIHJldHVybiBPYmplY3Qua2V5cyhkaXNqdW5jdGl2ZUZhY2V0LmRhdGEpLm1hcChmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgdmFsdWUgPSBlc2NhcGVGYWNldFZhbHVlKG5hbWUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgZXNjYXBlZFZhbHVlOiB2YWx1ZSxcbiAgICAgICAgY291bnQ6IGRpc2p1bmN0aXZlRmFjZXQuZGF0YVtuYW1lXSxcbiAgICAgICAgaXNSZWZpbmVkOiByZXN1bHRzLl9zdGF0ZS5pc0Rpc2p1bmN0aXZlRmFjZXRSZWZpbmVkKGF0dHJpYnV0ZSwgdmFsdWUpXG4gICAgICB9O1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHJlc3VsdHMuX3N0YXRlLmlzSGllcmFyY2hpY2FsRmFjZXQoYXR0cmlidXRlKSkge1xuICAgIHJldHVybiBmaW5kKHJlc3VsdHMuaGllcmFyY2hpY2FsRmFjZXRzLCBwcmVkaWNhdGUpO1xuICB9XG59XG5cbi8qKlxuICogU29ydCBub2RlcyBvZiBhIGhpZXJhcmNoaWNhbCBvciBkaXNqdW5jdGl2ZSBmYWNldCByZXN1bHRzXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gc29ydEZuXG4gKiBAcGFyYW0ge0hpZXJhcmNoaWNhbEZhY2V0fEFycmF5fSBub2RlIG5vZGUgdXBvbiB3aGljaCB3ZSB3YW50IHRvIGFwcGx5IHRoZSBzb3J0XG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBuYW1lcyBhdHRyaWJ1dGUgbmFtZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGV2ZWw9MF0gY3VycmVudCBpbmRleCBpbiB0aGUgbmFtZXMgYXJyYXlcbiAqL1xuZnVuY3Rpb24gcmVjU29ydChzb3J0Rm4sIG5vZGUsIG5hbWVzLCBsZXZlbCkge1xuICBsZXZlbCA9IGxldmVsIHx8IDA7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICByZXR1cm4gc29ydEZuKG5vZGUsIG5hbWVzW2xldmVsXSk7XG4gIH1cblxuICBpZiAoIW5vZGUuZGF0YSB8fCBub2RlLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICB2YXIgY2hpbGRyZW4gPSBub2RlLmRhdGEubWFwKGZ1bmN0aW9uKGNoaWxkTm9kZSkge1xuICAgIHJldHVybiByZWNTb3J0KHNvcnRGbiwgY2hpbGROb2RlLCBuYW1lcywgbGV2ZWwgKyAxKTtcbiAgfSk7XG4gIHZhciBzb3J0ZWRDaGlsZHJlbiA9IHNvcnRGbihjaGlsZHJlbiwgbmFtZXNbbGV2ZWxdKTtcbiAgdmFyIG5ld05vZGUgPSBkZWZhdWx0c1B1cmUoe2RhdGE6IHNvcnRlZENoaWxkcmVufSwgbm9kZSk7XG4gIHJldHVybiBuZXdOb2RlO1xufVxuXG5TZWFyY2hSZXN1bHRzLkRFRkFVTFRfU09SVCA9IFsnaXNSZWZpbmVkOmRlc2MnLCAnY291bnQ6ZGVzYycsICduYW1lOmFzYyddO1xuXG5mdW5jdGlvbiB2YW5pbGxhU29ydEZuKG9yZGVyLCBkYXRhKSB7XG4gIHJldHVybiBkYXRhLnNvcnQob3JkZXIpO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIEZhY2V0T3JkZXJpbmdcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBbb3JkZXJdXG4gKiBAcHJvcGVydHkgeydjb3VudCcgfCAnYWxwaGEnIHwgJ2hpZGRlbid9IFtzb3J0UmVtYWluaW5nQnldXG4gKi9cblxuLyoqXG4gKiBTb3J0cyBmYWNldCBhcnJheXMgdmlhIHRoZWlyIGZhY2V0IG9yZGVyaW5nXG4gKiBAcGFyYW0ge0FycmF5fSBmYWNldFZhbHVlcyB0aGUgdmFsdWVzXG4gKiBAcGFyYW0ge0ZhY2V0T3JkZXJpbmd9IGZhY2V0T3JkZXJpbmcgdGhlIG9yZGVyaW5nXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHNvcnRWaWFGYWNldE9yZGVyaW5nKGZhY2V0VmFsdWVzLCBmYWNldE9yZGVyaW5nKSB7XG4gIHZhciBvcmRlcmVkRmFjZXRzID0gW107XG4gIHZhciByZW1haW5pbmdGYWNldHMgPSBbXTtcblxuICB2YXIgb3JkZXIgPSBmYWNldE9yZGVyaW5nLm9yZGVyIHx8IFtdO1xuICAvKipcbiAgICogYW4gb2JqZWN0IHdpdGggdGhlIGtleXMgYmVpbmcgdGhlIHZhbHVlcyBpbiBvcmRlciwgdGhlIHZhbHVlcyB0aGVpciBpbmRleDpcbiAgICogWydvbmUnLCAndHdvJ10gLT4geyBvbmU6IDAsIHR3bzogMSB9XG4gICAqL1xuICB2YXIgcmV2ZXJzZU9yZGVyID0gb3JkZXIucmVkdWNlKGZ1bmN0aW9uKGFjYywgbmFtZSwgaSkge1xuICAgIGFjY1tuYW1lXSA9IGk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG4gIGZhY2V0VmFsdWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgIC8vIGhpZXJhcmNoaWNhbCBmYWNldHMgZ2V0IHNvcnRlZCB1c2luZyB0aGVpciByYXcgbmFtZVxuICAgIHZhciBuYW1lID0gaXRlbS5wYXRoIHx8IGl0ZW0ubmFtZTtcbiAgICBpZiAocmV2ZXJzZU9yZGVyW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9yZGVyZWRGYWNldHNbcmV2ZXJzZU9yZGVyW25hbWVdXSA9IGl0ZW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbWFpbmluZ0ZhY2V0cy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfSk7XG5cbiAgb3JkZXJlZEZhY2V0cyA9IG9yZGVyZWRGYWNldHMuZmlsdGVyKGZ1bmN0aW9uKGZhY2V0KSB7XG4gICAgcmV0dXJuIGZhY2V0O1xuICB9KTtcblxuICB2YXIgc29ydFJlbWFpbmluZ0J5ID0gZmFjZXRPcmRlcmluZy5zb3J0UmVtYWluaW5nQnk7XG4gIHZhciBvcmRlcmluZztcbiAgaWYgKHNvcnRSZW1haW5pbmdCeSA9PT0gJ2hpZGRlbicpIHtcbiAgICByZXR1cm4gb3JkZXJlZEZhY2V0cztcbiAgfSBlbHNlIGlmIChzb3J0UmVtYWluaW5nQnkgPT09ICdhbHBoYScpIHtcbiAgICBvcmRlcmluZyA9IFtbJ3BhdGgnLCAnbmFtZSddLCBbJ2FzYycsICdhc2MnXV07XG4gIH0gZWxzZSB7XG4gICAgb3JkZXJpbmcgPSBbWydjb3VudCddLCBbJ2Rlc2MnXV07XG4gIH1cblxuICByZXR1cm4gb3JkZXJlZEZhY2V0cy5jb25jYXQoXG4gICAgb3JkZXJCeShyZW1haW5pbmdGYWNldHMsIG9yZGVyaW5nWzBdLCBvcmRlcmluZ1sxXSlcbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1NlYXJjaFJlc3VsdHN9IHJlc3VsdHMgdGhlIHNlYXJjaCByZXN1bHRzIGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIHRoZSBhdHRyaWJ1dGUgdG8gcmV0cmlldmUgb3JkZXJpbmcgb2ZcbiAqIEByZXR1cm5zIHtGYWNldE9yZGVyaW5nPX1cbiAqL1xuZnVuY3Rpb24gZ2V0RmFjZXRPcmRlcmluZyhyZXN1bHRzLCBhdHRyaWJ1dGUpIHtcbiAgcmV0dXJuIChcbiAgICByZXN1bHRzLnJlbmRlcmluZ0NvbnRlbnQgJiZcbiAgICByZXN1bHRzLnJlbmRlcmluZ0NvbnRlbnQuZmFjZXRPcmRlcmluZyAmJlxuICAgIHJlc3VsdHMucmVuZGVyaW5nQ29udGVudC5mYWNldE9yZGVyaW5nLnZhbHVlcyAmJlxuICAgIHJlc3VsdHMucmVuZGVyaW5nQ29udGVudC5mYWNldE9yZGVyaW5nLnZhbHVlc1thdHRyaWJ1dGVdXG4gICk7XG59XG5cbi8qKlxuICogR2V0IGEgdGhlIGxpc3Qgb2YgdmFsdWVzIGZvciBhIGdpdmVuIGZhY2V0IGF0dHJpYnV0ZS4gVGhvc2UgdmFsdWVzIGFyZSBzb3J0ZWRcbiAqIHJlZmluZW1lbnQgZmlyc3QsIGRlc2NlbmRpbmcgY291bnQgKGJpZ2dlciB2YWx1ZSBvbiB0b3ApLCBhbmQgbmFtZSBhc2NlbmRpbmdcbiAqIChhbHBoYWJldGljYWwgb3JkZXIpLiBUaGUgc29ydCBmb3JtdWxhIGNhbiBvdmVycmlkZGVuIHVzaW5nIGVpdGhlciBzdHJpbmcgYmFzZWRcbiAqIHByZWRpY2F0ZXMgb3IgYSBmdW5jdGlvbi5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyByZXR1cm5lZCBieSB0aGUgQWxnb2xpYSBlbmdpbmUgcGx1cyBhbGxcbiAqIHRoZSB2YWx1ZXMgYWxyZWFkeSByZWZpbmVkLiBUaGlzIG1lYW5zIHRoYXQgaXQgY2FuIGhhcHBlbiB0aGF0IHRoZVxuICogYG1heFZhbHVlc1BlckZhY2V0YCBbY29uZmlndXJhdGlvbl0oaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL3Jlc3QtYXBpL3NlYXJjaCNwYXJhbS1tYXhWYWx1ZXNQZXJGYWNldClcbiAqIG1pZ2h0IG5vdCBiZSByZXNwZWN0ZWQgaWYgeW91IGhhdmUgZmFjZXQgdmFsdWVzIHRoYXQgYXJlIGFscmVhZHkgcmVmaW5lZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgYXR0cmlidXRlIG5hbWVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZmFjZXRPcmRlcmluZ11cbiAqIEZvcmNlIHRoZSB1c2Ugb2YgZmFjZXRPcmRlcmluZyBmcm9tIHRoZSByZXN1bHQgaWYgYSBzb3J0QnkgaXMgcHJlc2VudC4gSWZcbiAqIHNvcnRCeSBpc24ndCBwcmVzZW50LCBmYWNldE9yZGVyaW5nIHdpbGwgYmUgdXNlZCBhdXRvbWF0aWNhbGx5LlxuICogQHBhcmFtIHtBcnJheS48c3RyaW5nPiB8IGZ1bmN0aW9ufSBvcHRzLnNvcnRCeVxuICogV2hlbiB1c2luZyBzdHJpbmdzLCBpdCBjb25zaXN0cyBvZlxuICogdGhlIG5hbWUgb2YgdGhlIFtGYWNldFZhbHVlXSgjU2VhcmNoUmVzdWx0cy5GYWNldFZhbHVlKSBvciB0aGVcbiAqIFtIaWVyYXJjaGljYWxGYWNldF0oI1NlYXJjaFJlc3VsdHMuSGllcmFyY2hpY2FsRmFjZXQpIGF0dHJpYnV0ZXMgd2l0aCB0aGVcbiAqIG9yZGVyIChgYXNjYCBvciBgZGVzY2ApLiBGb3IgZXhhbXBsZSB0byBvcmRlciB0aGUgdmFsdWUgYnkgY291bnQsIHRoZVxuICogYXJndW1lbnQgd291bGQgYmUgYFsnY291bnQ6YXNjJ11gLlxuICpcbiAqIElmIG9ubHkgdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIHNwZWNpZmllZCwgdGhlIG9yZGVyaW5nIGRlZmF1bHRzIHRvIHRoZSBvbmVcbiAqIHNwZWNpZmllZCBpbiB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhpcyBhdHRyaWJ1dGUuXG4gKlxuICogV2hlbiBub3Qgc3BlY2lmaWVkLCB0aGUgb3JkZXIgaXNcbiAqIGFzY2VuZGluZy4gIFRoaXMgcGFyYW1ldGVyIGNhbiBhbHNvIGJlIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvIGZhY2V0XG4gKiB2YWx1ZXMgYW5kIHNob3VsZCByZXR1cm4gYSBudW1iZXIsIDAgaWYgZXF1YWwsIDEgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzXG4gKiBiaWdnZXIgb3IgLTEgb3RoZXJ3aXNlLlxuICpcbiAqIFRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGlzIGF0dHJpYnV0ZSBgWydpc1JlZmluZWQ6ZGVzYycsICdjb3VudDpkZXNjJywgJ25hbWU6YXNjJ11gXG4gKiBAcmV0dXJuIHtGYWNldFZhbHVlW118SGllcmFyY2hpY2FsRmFjZXR8dW5kZWZpbmVkfSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgZmFjZXQgb2ZcbiAqIHRoZSBhdHRyaWJ1dGUgcmVxdWVzdGVkIChoaWVyYXJjaGljYWwsIGRpc2p1bmN0aXZlIG9yIGNvbmp1bmN0aXZlKVxuICogQGV4YW1wbGVcbiAqIGhlbHBlci5vbigncmVzdWx0JywgZnVuY3Rpb24oZXZlbnQpe1xuICogICAvL2dldCB2YWx1ZXMgb3JkZXJlZCBvbmx5IGJ5IG5hbWUgYXNjZW5kaW5nIHVzaW5nIHRoZSBzdHJpbmcgcHJlZGljYXRlXG4gKiAgIGV2ZW50LnJlc3VsdHMuZ2V0RmFjZXRWYWx1ZXMoJ2NpdHknLCB7c29ydEJ5OiBbJ25hbWU6YXNjJ119KTtcbiAqICAgLy9nZXQgdmFsdWVzICBvcmRlcmVkIG9ubHkgYnkgY291bnQgYXNjZW5kaW5nIHVzaW5nIGEgZnVuY3Rpb25cbiAqICAgZXZlbnQucmVzdWx0cy5nZXRGYWNldFZhbHVlcygnY2l0eScsIHtcbiAqICAgICAvLyB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gWydjb3VudDphc2MnXVxuICogICAgIHNvcnRCeTogZnVuY3Rpb24oYSwgYikge1xuICogICAgICAgaWYgKGEuY291bnQgPT09IGIuY291bnQpIHJldHVybiAwO1xuICogICAgICAgaWYgKGEuY291bnQgPiBiLmNvdW50KSAgIHJldHVybiAxO1xuICogICAgICAgaWYgKGIuY291bnQgPiBhLmNvdW50KSAgIHJldHVybiAtMTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICogfSk7XG4gKi9cblNlYXJjaFJlc3VsdHMucHJvdG90eXBlLmdldEZhY2V0VmFsdWVzID0gZnVuY3Rpb24oYXR0cmlidXRlLCBvcHRzKSB7XG4gIHZhciBmYWNldFZhbHVlcyA9IGV4dHJhY3ROb3JtYWxpemVkRmFjZXRWYWx1ZXModGhpcywgYXR0cmlidXRlKTtcbiAgaWYgKCFmYWNldFZhbHVlcykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgb3B0aW9ucyA9IGRlZmF1bHRzUHVyZSh7fSwgb3B0cywge1xuICAgIHNvcnRCeTogU2VhcmNoUmVzdWx0cy5ERUZBVUxUX1NPUlQsXG4gICAgLy8gaWYgbm8gc29ydEJ5IGlzIGdpdmVuLCBhdHRlbXB0IHRvIHNvcnQgYmFzZWQgb24gZmFjZXRPcmRlcmluZ1xuICAgIC8vIGlmIGl0IGlzIGdpdmVuLCB3ZSBzdGlsbCBhbGxvdyB0byBzb3J0IHZpYSBmYWNldCBvcmRlcmluZyBmaXJzdFxuICAgIGZhY2V0T3JkZXJpbmc6ICEob3B0cyAmJiBvcHRzLnNvcnRCeSlcbiAgfSk7XG5cbiAgdmFyIHJlc3VsdHMgPSB0aGlzO1xuICB2YXIgYXR0cmlidXRlcztcbiAgaWYgKEFycmF5LmlzQXJyYXkoZmFjZXRWYWx1ZXMpKSB7XG4gICAgYXR0cmlidXRlcyA9IFthdHRyaWJ1dGVdO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb25maWcgPSByZXN1bHRzLl9zdGF0ZS5nZXRIaWVyYXJjaGljYWxGYWNldEJ5TmFtZShmYWNldFZhbHVlcy5uYW1lKTtcbiAgICBhdHRyaWJ1dGVzID0gY29uZmlnLmF0dHJpYnV0ZXM7XG4gIH1cblxuICByZXR1cm4gcmVjU29ydChmdW5jdGlvbihkYXRhLCBmYWNldE5hbWUpIHtcbiAgICBpZiAob3B0aW9ucy5mYWNldE9yZGVyaW5nKSB7XG4gICAgICB2YXIgZmFjZXRPcmRlcmluZyA9IGdldEZhY2V0T3JkZXJpbmcocmVzdWx0cywgZmFjZXROYW1lKTtcbiAgICAgIGlmIChCb29sZWFuKGZhY2V0T3JkZXJpbmcpKSB7XG4gICAgICAgIHJldHVybiBzb3J0VmlhRmFjZXRPcmRlcmluZyhkYXRhLCBmYWNldE9yZGVyaW5nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnNvcnRCeSkpIHtcbiAgICAgIHZhciBvcmRlciA9IGZvcm1hdFNvcnQob3B0aW9ucy5zb3J0QnksIFNlYXJjaFJlc3VsdHMuREVGQVVMVF9TT1JUKTtcbiAgICAgIHJldHVybiBvcmRlckJ5KGRhdGEsIG9yZGVyWzBdLCBvcmRlclsxXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5zb3J0QnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB2YW5pbGxhU29ydEZuKG9wdGlvbnMuc29ydEJ5LCBkYXRhKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ29wdGlvbnMuc29ydEJ5IGlzIG9wdGlvbmFsIGJ1dCBpZiBkZWZpbmVkIGl0IG11c3QgYmUgJyArXG4gICAgICAgICdlaXRoZXIgYW4gYXJyYXkgb2Ygc3RyaW5nIChwcmVkaWNhdGVzKSBvciBhIHNvcnRpbmcgZnVuY3Rpb24nXG4gICAgKTtcbiAgfSwgZmFjZXRWYWx1ZXMsIGF0dHJpYnV0ZXMpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmYWNldCBzdGF0cyBpZiBhdHRyaWJ1dGUgaXMgZGVmaW5lZCBhbmQgdGhlIGZhY2V0IGNvbnRhaW5zIHNvbWUuXG4gKiBPdGhlcndpc2UgcmV0dXJucyB1bmRlZmluZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIG5hbWUgb2YgdGhlIGZhY2V0ZWQgYXR0cmlidXRlXG4gKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBzdGF0cyBvZiB0aGUgZmFjZXRcbiAqL1xuU2VhcmNoUmVzdWx0cy5wcm90b3R5cGUuZ2V0RmFjZXRTdGF0cyA9IGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xuICBpZiAodGhpcy5fc3RhdGUuaXNDb25qdW5jdGl2ZUZhY2V0KGF0dHJpYnV0ZSkpIHtcbiAgICByZXR1cm4gZ2V0RmFjZXRTdGF0c0lmQXZhaWxhYmxlKHRoaXMuZmFjZXRzLCBhdHRyaWJ1dGUpO1xuICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlLmlzRGlzanVuY3RpdmVGYWNldChhdHRyaWJ1dGUpKSB7XG4gICAgcmV0dXJuIGdldEZhY2V0U3RhdHNJZkF2YWlsYWJsZSh0aGlzLmRpc2p1bmN0aXZlRmFjZXRzLCBhdHRyaWJ1dGUpO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmFjZXRMaXN0SXRlbVxuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWVcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7RmFjZXRMaXN0SXRlbVtdfSBmYWNldExpc3QgKGhhcyBtb3JlIGl0ZW1zLCBidXQgZW5vdWdoIGZvciBoZXJlKVxuICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0TmFtZVxuICovXG5mdW5jdGlvbiBnZXRGYWNldFN0YXRzSWZBdmFpbGFibGUoZmFjZXRMaXN0LCBmYWNldE5hbWUpIHtcbiAgdmFyIGRhdGEgPSBmaW5kKGZhY2V0TGlzdCwgZnVuY3Rpb24oZmFjZXQpIHtcbiAgICByZXR1cm4gZmFjZXQubmFtZSA9PT0gZmFjZXROYW1lO1xuICB9KTtcbiAgcmV0dXJuIGRhdGEgJiYgZGF0YS5zdGF0cztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFsbCByZWZpbmVtZW50cyBmb3IgYWxsIGZpbHRlcnMgKyB0YWdzLiBJdCBhbHNvIHByb3ZpZGVzXG4gKiBhZGRpdGlvbmFsIGluZm9ybWF0aW9uOiBjb3VudCBhbmQgZXhoYXVzdGl2ZW5lc3MgZm9yIGVhY2ggZmlsdGVyLlxuICpcbiAqIFNlZSB0aGUgW3JlZmluZW1lbnQgdHlwZV0oI1JlZmluZW1lbnQpIGZvciBhbiBleGhhdXN0aXZlIHZpZXcgb2YgdGhlIGF2YWlsYWJsZVxuICogZGF0YS5cbiAqXG4gKiBOb3RlIHRoYXQgZm9yIGEgbnVtZXJpYyByZWZpbmVtZW50LCByZXN1bHRzIGFyZSBncm91cGVkIHBlciBvcGVyYXRvciwgdGhpc1xuICogbWVhbnMgdGhhdCBpdCB3aWxsIHJldHVybiByZXNwb25zZXMgZm9yIG9wZXJhdG9ycyB3aGljaCBhcmUgZW1wdHkuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPFJlZmluZW1lbnQ+fSBhbGwgdGhlIHJlZmluZW1lbnRzXG4gKi9cblNlYXJjaFJlc3VsdHMucHJvdG90eXBlLmdldFJlZmluZW1lbnRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3N0YXRlO1xuICB2YXIgcmVzdWx0cyA9IHRoaXM7XG4gIHZhciByZXMgPSBbXTtcblxuICBPYmplY3Qua2V5cyhzdGF0ZS5mYWNldHNSZWZpbmVtZW50cykuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGVOYW1lKSB7XG4gICAgc3RhdGUuZmFjZXRzUmVmaW5lbWVudHNbYXR0cmlidXRlTmFtZV0uZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXMucHVzaChnZXRSZWZpbmVtZW50KHN0YXRlLCAnZmFjZXQnLCBhdHRyaWJ1dGVOYW1lLCBuYW1lLCByZXN1bHRzLmZhY2V0cykpO1xuICAgIH0pO1xuICB9KTtcblxuICBPYmplY3Qua2V5cyhzdGF0ZS5mYWNldHNFeGNsdWRlcykuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGVOYW1lKSB7XG4gICAgc3RhdGUuZmFjZXRzRXhjbHVkZXNbYXR0cmlidXRlTmFtZV0uZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXMucHVzaChnZXRSZWZpbmVtZW50KHN0YXRlLCAnZXhjbHVkZScsIGF0dHJpYnV0ZU5hbWUsIG5hbWUsIHJlc3VsdHMuZmFjZXRzKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIE9iamVjdC5rZXlzKHN0YXRlLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMpLmZvckVhY2goZnVuY3Rpb24oYXR0cmlidXRlTmFtZSkge1xuICAgIHN0YXRlLmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHNbYXR0cmlidXRlTmFtZV0uZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXMucHVzaChnZXRSZWZpbmVtZW50KHN0YXRlLCAnZGlzanVuY3RpdmUnLCBhdHRyaWJ1dGVOYW1lLCBuYW1lLCByZXN1bHRzLmRpc2p1bmN0aXZlRmFjZXRzKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIE9iamVjdC5rZXlzKHN0YXRlLmhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICBzdGF0ZS5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c1thdHRyaWJ1dGVOYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJlcy5wdXNoKGdldEhpZXJhcmNoaWNhbFJlZmluZW1lbnQoc3RhdGUsIGF0dHJpYnV0ZU5hbWUsIG5hbWUsIHJlc3VsdHMuaGllcmFyY2hpY2FsRmFjZXRzKSk7XG4gICAgfSk7XG4gIH0pO1xuXG5cbiAgT2JqZWN0LmtleXMoc3RhdGUubnVtZXJpY1JlZmluZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICB2YXIgb3BlcmF0b3JzID0gc3RhdGUubnVtZXJpY1JlZmluZW1lbnRzW2F0dHJpYnV0ZU5hbWVdO1xuICAgIE9iamVjdC5rZXlzKG9wZXJhdG9ycykuZm9yRWFjaChmdW5jdGlvbihvcGVyYXRvcikge1xuICAgICAgb3BlcmF0b3JzW29wZXJhdG9yXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJlcy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbnVtZXJpYycsXG4gICAgICAgICAgYXR0cmlidXRlTmFtZTogYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICBuYW1lOiB2YWx1ZSxcbiAgICAgICAgICBudW1lcmljVmFsdWU6IHZhbHVlLFxuICAgICAgICAgIG9wZXJhdG9yOiBvcGVyYXRvclxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBzdGF0ZS50YWdSZWZpbmVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXMucHVzaCh7dHlwZTogJ3RhZycsIGF0dHJpYnV0ZU5hbWU6ICdfdGFncycsIG5hbWU6IG5hbWV9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmFjZXRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lXG4gKiBAcHJvcGVydHkge09iamVjdH0gZGF0YVxuICogQHByb3BlcnR5IHtib29sZWFufSBleGhhdXN0aXZlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0geyp9IHN0YXRlXG4gKiBAcGFyYW0geyp9IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lXG4gKiBAcGFyYW0geyp9IG5hbWVcbiAqIEBwYXJhbSB7RmFjZXRbXX0gcmVzdWx0c0ZhY2V0c1xuICovXG5mdW5jdGlvbiBnZXRSZWZpbmVtZW50KHN0YXRlLCB0eXBlLCBhdHRyaWJ1dGVOYW1lLCBuYW1lLCByZXN1bHRzRmFjZXRzKSB7XG4gIHZhciBmYWNldCA9IGZpbmQocmVzdWx0c0ZhY2V0cywgZnVuY3Rpb24oZikge1xuICAgIHJldHVybiBmLm5hbWUgPT09IGF0dHJpYnV0ZU5hbWU7XG4gIH0pO1xuICB2YXIgY291bnQgPSBmYWNldCAmJiBmYWNldC5kYXRhICYmIGZhY2V0LmRhdGFbbmFtZV0gPyBmYWNldC5kYXRhW25hbWVdIDogMDtcbiAgdmFyIGV4aGF1c3RpdmUgPSAoZmFjZXQgJiYgZmFjZXQuZXhoYXVzdGl2ZSkgfHwgZmFsc2U7XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiB0eXBlLFxuICAgIGF0dHJpYnV0ZU5hbWU6IGF0dHJpYnV0ZU5hbWUsXG4gICAgbmFtZTogbmFtZSxcbiAgICBjb3VudDogY291bnQsXG4gICAgZXhoYXVzdGl2ZTogZXhoYXVzdGl2ZVxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gc3RhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lXG4gKiBAcGFyYW0geyp9IG5hbWVcbiAqIEBwYXJhbSB7RmFjZXRbXX0gcmVzdWx0c0ZhY2V0c1xuICovXG5mdW5jdGlvbiBnZXRIaWVyYXJjaGljYWxSZWZpbmVtZW50KHN0YXRlLCBhdHRyaWJ1dGVOYW1lLCBuYW1lLCByZXN1bHRzRmFjZXRzKSB7XG4gIHZhciBmYWNldERlY2xhcmF0aW9uID0gc3RhdGUuZ2V0SGllcmFyY2hpY2FsRmFjZXRCeU5hbWUoYXR0cmlidXRlTmFtZSk7XG4gIHZhciBzZXBhcmF0b3IgPSBzdGF0ZS5fZ2V0SGllcmFyY2hpY2FsRmFjZXRTZXBhcmF0b3IoZmFjZXREZWNsYXJhdGlvbik7XG4gIHZhciBzcGxpdCA9IG5hbWUuc3BsaXQoc2VwYXJhdG9yKTtcbiAgdmFyIHJvb3RGYWNldCA9IGZpbmQocmVzdWx0c0ZhY2V0cywgZnVuY3Rpb24oZmFjZXQpIHtcbiAgICByZXR1cm4gZmFjZXQubmFtZSA9PT0gYXR0cmlidXRlTmFtZTtcbiAgfSk7XG5cbiAgdmFyIGZhY2V0ID0gc3BsaXQucmVkdWNlKGZ1bmN0aW9uKGludGVybWVkaWF0ZUZhY2V0LCBwYXJ0KSB7XG4gICAgdmFyIG5ld0ZhY2V0ID1cbiAgICAgIGludGVybWVkaWF0ZUZhY2V0ICYmIGZpbmQoaW50ZXJtZWRpYXRlRmFjZXQuZGF0YSwgZnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gZi5uYW1lID09PSBwYXJ0O1xuICAgICAgfSk7XG4gICAgcmV0dXJuIG5ld0ZhY2V0ICE9PSB1bmRlZmluZWQgPyBuZXdGYWNldCA6IGludGVybWVkaWF0ZUZhY2V0O1xuICB9LCByb290RmFjZXQpO1xuXG4gIHZhciBjb3VudCA9IChmYWNldCAmJiBmYWNldC5jb3VudCkgfHwgMDtcbiAgdmFyIGV4aGF1c3RpdmUgPSAoZmFjZXQgJiYgZmFjZXQuZXhoYXVzdGl2ZSkgfHwgZmFsc2U7XG4gIHZhciBwYXRoID0gKGZhY2V0ICYmIGZhY2V0LnBhdGgpIHx8ICcnO1xuXG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2hpZXJhcmNoaWNhbCcsXG4gICAgYXR0cmlidXRlTmFtZTogYXR0cmlidXRlTmFtZSxcbiAgICBuYW1lOiBwYXRoLFxuICAgIGNvdW50OiBjb3VudCxcbiAgICBleGhhdXN0aXZlOiBleGhhdXN0aXZlXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VhcmNoUmVzdWx0cztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFNlYXJjaFBhcmFtZXRlcnMgPSByZXF1aXJlKCcuL1NlYXJjaFBhcmFtZXRlcnMnKTtcbnZhciBTZWFyY2hSZXN1bHRzID0gcmVxdWlyZSgnLi9TZWFyY2hSZXN1bHRzJyk7XG52YXIgRGVyaXZlZEhlbHBlciA9IHJlcXVpcmUoJy4vRGVyaXZlZEhlbHBlcicpO1xudmFyIHJlcXVlc3RCdWlsZGVyID0gcmVxdWlyZSgnLi9yZXF1ZXN0QnVpbGRlcicpO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnQGFsZ29saWEvZXZlbnRzJyk7XG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9pbmhlcml0cycpO1xudmFyIG9iamVjdEhhc0tleXMgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9vYmplY3RIYXNLZXlzJyk7XG52YXIgb21pdCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL29taXQnKTtcbnZhciBtZXJnZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL21lcmdlJyk7XG5cbnZhciB2ZXJzaW9uID0gcmVxdWlyZSgnLi92ZXJzaW9uJyk7XG52YXIgZXNjYXBlRmFjZXRWYWx1ZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2VzY2FwZUZhY2V0VmFsdWUnKS5lc2NhcGVGYWNldFZhbHVlO1xuXG4vKipcbiAqIEV2ZW50IHRyaWdnZXJlZCB3aGVuIGEgcGFyYW1ldGVyIGlzIHNldCBvciB1cGRhdGVkXG4gKiBAZXZlbnQgQWxnb2xpYVNlYXJjaEhlbHBlciNldmVudDpjaGFuZ2VcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBldmVudFxuICogQHByb3BlcnR5IHtTZWFyY2hQYXJhbWV0ZXJzfSBldmVudC5zdGF0ZSB0aGUgY3VycmVudCBwYXJhbWV0ZXJzIHdpdGggdGhlIGxhdGVzdCBjaGFuZ2VzIGFwcGxpZWRcbiAqIEBwcm9wZXJ0eSB7U2VhcmNoUmVzdWx0c30gZXZlbnQucmVzdWx0cyB0aGUgcHJldmlvdXMgcmVzdWx0cyByZWNlaXZlZCBmcm9tIEFsZ29saWEuIGBudWxsYCBiZWZvcmUgdGhlIGZpcnN0IHJlcXVlc3RcbiAqIEBleGFtcGxlXG4gKiBoZWxwZXIub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgIGNvbnNvbGUubG9nKCdUaGUgcGFyYW1ldGVycyBoYXZlIGNoYW5nZWQnKTtcbiAqIH0pO1xuICovXG5cbi8qKlxuICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gYSBtYWluIHNlYXJjaCBpcyBzZW50IHRvIEFsZ29saWFcbiAqIEBldmVudCBBbGdvbGlhU2VhcmNoSGVscGVyI2V2ZW50OnNlYXJjaFxuICogQHByb3BlcnR5IHtvYmplY3R9IGV2ZW50XG4gKiBAcHJvcGVydHkge1NlYXJjaFBhcmFtZXRlcnN9IGV2ZW50LnN0YXRlIHRoZSBwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoaXMgc2VhcmNoXG4gKiBAcHJvcGVydHkge1NlYXJjaFJlc3VsdHN9IGV2ZW50LnJlc3VsdHMgdGhlIHJlc3VsdHMgZnJvbSB0aGUgcHJldmlvdXMgc2VhcmNoLiBgbnVsbGAgaWYgaXQgaXMgdGhlIGZpcnN0IHNlYXJjaC5cbiAqIEBleGFtcGxlXG4gKiBoZWxwZXIub24oJ3NlYXJjaCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgIGNvbnNvbGUubG9nKCdTZWFyY2ggc2VudCcpO1xuICogfSk7XG4gKi9cblxuLyoqXG4gKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiBhIHNlYXJjaCB1c2luZyBgc2VhcmNoRm9yRmFjZXRWYWx1ZXNgIGlzIHNlbnQgdG8gQWxnb2xpYVxuICogQGV2ZW50IEFsZ29saWFTZWFyY2hIZWxwZXIjZXZlbnQ6c2VhcmNoRm9yRmFjZXRWYWx1ZXNcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBldmVudFxuICogQHByb3BlcnR5IHtTZWFyY2hQYXJhbWV0ZXJzfSBldmVudC5zdGF0ZSB0aGUgcGFyYW1ldGVycyB1c2VkIGZvciB0aGlzIHNlYXJjaCBpdCBpcyB0aGUgZmlyc3Qgc2VhcmNoLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGV2ZW50LmZhY2V0IHRoZSBmYWNldCBzZWFyY2hlZCBpbnRvXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZXZlbnQucXVlcnkgdGhlIHF1ZXJ5IHVzZWQgdG8gc2VhcmNoIGluIHRoZSBmYWNldHNcbiAqIEBleGFtcGxlXG4gKiBoZWxwZXIub24oJ3NlYXJjaEZvckZhY2V0VmFsdWVzJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAqICAgY29uc29sZS5sb2coJ3NlYXJjaEZvckZhY2V0VmFsdWVzIHNlbnQnKTtcbiAqIH0pO1xuICovXG5cbi8qKlxuICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gYSBzZWFyY2ggdXNpbmcgYHNlYXJjaE9uY2VgIGlzIHNlbnQgdG8gQWxnb2xpYVxuICogQGV2ZW50IEFsZ29saWFTZWFyY2hIZWxwZXIjZXZlbnQ6c2VhcmNoT25jZVxuICogQHByb3BlcnR5IHtvYmplY3R9IGV2ZW50XG4gKiBAcHJvcGVydHkge1NlYXJjaFBhcmFtZXRlcnN9IGV2ZW50LnN0YXRlIHRoZSBwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoaXMgc2VhcmNoIGl0IGlzIHRoZSBmaXJzdCBzZWFyY2guXG4gKiBAZXhhbXBsZVxuICogaGVscGVyLm9uKCdzZWFyY2hPbmNlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAqICAgY29uc29sZS5sb2coJ3NlYXJjaE9uY2Ugc2VudCcpO1xuICogfSk7XG4gKi9cblxuLyoqXG4gKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgcmVzdWx0cyBhcmUgcmV0cmlldmVkIGZyb20gQWxnb2xpYVxuICogQGV2ZW50IEFsZ29saWFTZWFyY2hIZWxwZXIjZXZlbnQ6cmVzdWx0XG4gKiBAcHJvcGVydHkge29iamVjdH0gZXZlbnRcbiAqIEBwcm9wZXJ0eSB7U2VhcmNoUmVzdWx0c30gZXZlbnQucmVzdWx0cyB0aGUgcmVzdWx0cyByZWNlaXZlZCBmcm9tIEFsZ29saWFcbiAqIEBwcm9wZXJ0eSB7U2VhcmNoUGFyYW1ldGVyc30gZXZlbnQuc3RhdGUgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBxdWVyeSBBbGdvbGlhLiBUaG9zZSBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb25lIGluIHRoZSBoZWxwZXIgaW5zdGFuY2UgKGZvciBleGFtcGxlIGlmIHRoZSBuZXR3b3JrIGlzIHVucmVsaWFibGUpLlxuICogQGV4YW1wbGVcbiAqIGhlbHBlci5vbigncmVzdWx0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAqICAgY29uc29sZS5sb2coJ1NlYXJjaCByZXN1bHRzIHJlY2VpdmVkJyk7XG4gKiB9KTtcbiAqL1xuXG4vKipcbiAqIEV2ZW50IHRyaWdnZXJlZCB3aGVuIEFsZ29saWEgc2VuZHMgYmFjayBhbiBlcnJvci4gRm9yIGV4YW1wbGUsIGlmIGFuIHVua25vd24gcGFyYW1ldGVyIGlzXG4gKiB1c2VkLCB0aGUgZXJyb3IgY2FuIGJlIGNhdWdodCB1c2luZyB0aGlzIGV2ZW50LlxuICogQGV2ZW50IEFsZ29saWFTZWFyY2hIZWxwZXIjZXZlbnQ6ZXJyb3JcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBldmVudFxuICogQHByb3BlcnR5IHtFcnJvcn0gZXZlbnQuZXJyb3IgdGhlIGVycm9yIHJldHVybmVkIGJ5IHRoZSBBbGdvbGlhLlxuICogQGV4YW1wbGVcbiAqIGhlbHBlci5vbignZXJyb3InLCBmdW5jdGlvbihldmVudCkge1xuICogICBjb25zb2xlLmxvZygnSG91c3RvbiB3ZSBnb3QgYSBwcm9ibGVtLicpO1xuICogfSk7XG4gKi9cblxuLyoqXG4gKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgcXVldWUgb2YgcXVlcmllcyBoYXZlIGJlZW4gZGVwbGV0ZWQgKHdpdGggYW55IHJlc3VsdCBvciBvdXRkYXRlZCBxdWVyaWVzKVxuICogQGV2ZW50IEFsZ29saWFTZWFyY2hIZWxwZXIjZXZlbnQ6c2VhcmNoUXVldWVFbXB0eVxuICogQGV4YW1wbGVcbiAqIGhlbHBlci5vbignc2VhcmNoUXVldWVFbXB0eScsIGZ1bmN0aW9uKCkge1xuICogICBjb25zb2xlLmxvZygnTm8gbW9yZSBzZWFyY2ggcGVuZGluZycpO1xuICogICAvLyBUaGlzIGlzIHJlY2VpdmVkIGJlZm9yZSB0aGUgcmVzdWx0IGV2ZW50IGlmIHdlJ3JlIG5vdCBleHBlY3RpbmcgbmV3IHJlc3VsdHNcbiAqIH0pO1xuICpcbiAqIGhlbHBlci5zZWFyY2goKTtcbiAqL1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgQWxnb2xpYVNlYXJjaEhlbHBlclxuICogQGNsYXNzXG4gKiBAY2xhc3NkZXNjIFRoZSBBbGdvbGlhU2VhcmNoSGVscGVyIGlzIGEgY2xhc3MgdGhhdCBlYXNlIHRoZSBtYW5hZ2VtZW50IG9mIHRoZVxuICogc2VhcmNoLiBJdCBwcm92aWRlcyBhbiBldmVudCBiYXNlZCBpbnRlcmZhY2UgZm9yIHNlYXJjaCBjYWxsYmFja3M6XG4gKiAgLSBjaGFuZ2U6IHdoZW4gdGhlIGludGVybmFsIHNlYXJjaCBzdGF0ZSBpcyBjaGFuZ2VkLlxuICogICAgVGhpcyBldmVudCBjb250YWlucyBhIHtAbGluayBTZWFyY2hQYXJhbWV0ZXJzfSBvYmplY3QgYW5kIHRoZVxuICogICAge0BsaW5rIFNlYXJjaFJlc3VsdHN9IG9mIHRoZSBsYXN0IHJlc3VsdCBpZiBhbnkuXG4gKiAgLSBzZWFyY2g6IHdoZW4gYSBzZWFyY2ggaXMgdHJpZ2dlcmVkIHVzaW5nIHRoZSBgc2VhcmNoKClgIG1ldGhvZC5cbiAqICAtIHJlc3VsdDogd2hlbiB0aGUgcmVzcG9uc2UgaXMgcmV0cmlldmVkIGZyb20gQWxnb2xpYSBhbmQgaXMgcHJvY2Vzc2VkLlxuICogICAgVGhpcyBldmVudCBjb250YWlucyBhIHtAbGluayBTZWFyY2hSZXN1bHRzfSBvYmplY3QgYW5kIHRoZVxuICogICAge0BsaW5rIFNlYXJjaFBhcmFtZXRlcnN9IGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhbnN3ZXIuXG4gKiAgLSBlcnJvcjogd2hlbiB0aGUgcmVzcG9uc2UgaXMgYW4gZXJyb3IuIFRoaXMgZXZlbnQgY29udGFpbnMgdGhlIGVycm9yIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKiBAcGFyYW0gIHtBbGdvbGlhU2VhcmNofSBjbGllbnQgYW4gQWxnb2xpYVNlYXJjaCBjbGllbnRcbiAqIEBwYXJhbSAge3N0cmluZ30gaW5kZXggdGhlIGluZGV4IG5hbWUgdG8gcXVlcnlcbiAqIEBwYXJhbSAge1NlYXJjaFBhcmFtZXRlcnMgfCBvYmplY3R9IG9wdGlvbnMgYW4gb2JqZWN0IGRlZmluaW5nIHRoZSBpbml0aWFsXG4gKiBjb25maWcgb2YgdGhlIHNlYXJjaC4gSXQgZG9lc24ndCBoYXZlIHRvIGJlIGEge1NlYXJjaFBhcmFtZXRlcnN9LFxuICoganVzdCBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcHJvcGVydGllcyB5b3UgbmVlZCBmcm9tIGl0LlxuICovXG5mdW5jdGlvbiBBbGdvbGlhU2VhcmNoSGVscGVyKGNsaWVudCwgaW5kZXgsIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBjbGllbnQuYWRkQWxnb2xpYUFnZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2xpZW50LmFkZEFsZ29saWFBZ2VudCgnSlMgSGVscGVyICgnICsgdmVyc2lvbiArICcpJyk7XG4gIH1cblxuICB0aGlzLnNldENsaWVudChjbGllbnQpO1xuICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge307XG4gIG9wdHMuaW5kZXggPSBpbmRleDtcbiAgdGhpcy5zdGF0ZSA9IFNlYXJjaFBhcmFtZXRlcnMubWFrZShvcHRzKTtcbiAgdGhpcy5sYXN0UmVzdWx0cyA9IG51bGw7XG4gIHRoaXMuX3F1ZXJ5SWQgPSAwO1xuICB0aGlzLl9sYXN0UXVlcnlJZFJlY2VpdmVkID0gLTE7XG4gIHRoaXMuZGVyaXZlZEhlbHBlcnMgPSBbXTtcbiAgdGhpcy5fY3VycmVudE5iUXVlcmllcyA9IDA7XG59XG5cbmluaGVyaXRzKEFsZ29saWFTZWFyY2hIZWxwZXIsIEV2ZW50RW1pdHRlcik7XG5cbi8qKlxuICogU3RhcnQgdGhlIHNlYXJjaCB3aXRoIHRoZSBwYXJhbWV0ZXJzIHNldCBpbiB0aGUgc3RhdGUuIFdoZW4gdGhlXG4gKiBtZXRob2QgaXMgY2FsbGVkLCBpdCB0cmlnZ2VycyBhIGBzZWFyY2hgIGV2ZW50LiBUaGUgcmVzdWx0cyB3aWxsXG4gKiBiZSBhdmFpbGFibGUgdGhyb3VnaCB0aGUgYHJlc3VsdGAgZXZlbnQuIElmIGFuIGVycm9yIG9jY3VycywgYW5cbiAqIGBlcnJvcmAgd2lsbCBiZSBmaXJlZCBpbnN0ZWFkLlxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBmaXJlcyBzZWFyY2hcbiAqIEBmaXJlcyByZXN1bHRcbiAqIEBmaXJlcyBlcnJvclxuICogQGNoYWluYWJsZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fc2VhcmNoKHtvbmx5V2l0aERlcml2ZWRIZWxwZXJzOiBmYWxzZX0pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnNlYXJjaE9ubHlXaXRoRGVyaXZlZEhlbHBlcnMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fc2VhcmNoKHtvbmx5V2l0aERlcml2ZWRIZWxwZXJzOiB0cnVlfSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBzZWFyY2ggcXVlcnkgcGFyYW1ldGVycyB0aGF0IHdvdWxkIGJlIHNlbnQgdG8gdGhlIEFsZ29saWEgQ2xpZW50XG4gKiBmb3IgdGhlIGhpdHNcbiAqIEByZXR1cm4ge29iamVjdH0gUXVlcnkgUGFyYW1ldGVyc1xuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5nZXRRdWVyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICByZXR1cm4gcmVxdWVzdEJ1aWxkZXIuX2dldEhpdHNTZWFyY2hQYXJhbXMoc3RhdGUpO1xufTtcblxuLyoqXG4gKiBTdGFydCBhIHNlYXJjaCB1c2luZyBhIG1vZGlmaWVkIHZlcnNpb24gb2YgdGhlIGN1cnJlbnQgc3RhdGUuIFRoaXMgbWV0aG9kIGRvZXNcbiAqIG5vdCB0cmlnZ2VyIHRoZSBoZWxwZXIgbGlmZWN5Y2xlIGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIHN0YXRlIGtlcHQgaW50ZXJuYWxseVxuICogYnkgdGhlIGhlbHBlci4gVGhpcyBzZWNvbmQgYXNwZWN0IG1lYW5zIHRoYXQgdGhlIG5leHQgc2VhcmNoIGNhbGwgd2lsbCBiZSB0aGVcbiAqIHNhbWUgYXMgYSBzZWFyY2ggY2FsbCBiZWZvcmUgY2FsbGluZyBzZWFyY2hPbmNlLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgY2FuIGNvbnRhaW4gYWxsIHRoZSBwYXJhbWV0ZXJzIHRoYXQgY2FuIGJlIHNldCB0byBTZWFyY2hQYXJhbWV0ZXJzXG4gKiBwbHVzIHRoZSBpbmRleFxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2NhbGxiYWNrXSBvcHRpb25hbCBjYWxsYmFjayBleGVjdXRlZCB3aGVuIHRoZSByZXNwb25zZSBmcm9tIHRoZVxuICogc2VydmVyIGlzIGJhY2suXG4gKiBAcmV0dXJuIHtwcm9taXNlfHVuZGVmaW5lZH0gaWYgYSBjYWxsYmFjayBpcyBwYXNzZWQgdGhlIG1ldGhvZCByZXR1cm5zIHVuZGVmaW5lZFxuICogb3RoZXJ3aXNlIGl0IHJldHVybnMgYSBwcm9taXNlIGNvbnRhaW5pbmcgYW4gb2JqZWN0IHdpdGggdHdvIGtleXMgOlxuICogIC0gY29udGVudCB3aXRoIGEgU2VhcmNoUmVzdWx0c1xuICogIC0gc3RhdGUgd2l0aCB0aGUgc3RhdGUgdXNlZCBmb3IgdGhlIHF1ZXJ5IGFzIGEgU2VhcmNoUGFyYW1ldGVyc1xuICogQGV4YW1wbGVcbiAqIC8vIENoYW5naW5nIHRoZSBudW1iZXIgb2YgcmVjb3JkcyByZXR1cm5lZCBwZXIgcGFnZSB0byAxXG4gKiAvLyBUaGlzIGV4YW1wbGUgdXNlcyB0aGUgY2FsbGJhY2sgQVBJXG4gKiB2YXIgc3RhdGUgPSBoZWxwZXIuc2VhcmNoT25jZSh7aGl0c1BlclBhZ2U6IDF9LFxuICogICBmdW5jdGlvbihlcnJvciwgY29udGVudCwgc3RhdGUpIHtcbiAqICAgICAvLyBpZiBhbiBlcnJvciBvY2N1cnJlZCBpdCB3aWxsIGJlIHBhc3NlZCBpbiBlcnJvciwgb3RoZXJ3aXNlIGl0cyB2YWx1ZSBpcyBudWxsXG4gKiAgICAgLy8gY29udGVudCBjb250YWlucyB0aGUgcmVzdWx0cyBmb3JtYXR0ZWQgYXMgYSBTZWFyY2hSZXN1bHRzXG4gKiAgICAgLy8gc3RhdGUgaXMgdGhlIGluc3RhbmNlIG9mIFNlYXJjaFBhcmFtZXRlcnMgdXNlZCBmb3IgdGhpcyBzZWFyY2hcbiAqICAgfSk7XG4gKiBAZXhhbXBsZVxuICogLy8gQ2hhbmdpbmcgdGhlIG51bWJlciBvZiByZWNvcmRzIHJldHVybmVkIHBlciBwYWdlIHRvIDFcbiAqIC8vIFRoaXMgZXhhbXBsZSB1c2VzIHRoZSBwcm9taXNlIEFQSVxuICogdmFyIHN0YXRlMSA9IGhlbHBlci5zZWFyY2hPbmNlKHtoaXRzUGVyUGFnZTogMX0pXG4gKiAgICAgICAgICAgICAgICAgLnRoZW4ocHJvbWlzZUhhbmRsZXIpO1xuICpcbiAqIGZ1bmN0aW9uIHByb21pc2VIYW5kbGVyKHJlcykge1xuICogICAvLyByZXMgY29udGFpbnNcbiAqICAgLy8ge1xuICogICAvLyAgIGNvbnRlbnQgOiBTZWFyY2hSZXN1bHRzXG4gKiAgIC8vICAgc3RhdGUgICA6IFNlYXJjaFBhcmFtZXRlcnMgKHRoZSBvbmUgdXNlZCBmb3IgdGhpcyBzcGVjaWZpYyBzZWFyY2gpXG4gKiAgIC8vIH1cbiAqIH1cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuc2VhcmNoT25jZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNiKSB7XG4gIHZhciB0ZW1wU3RhdGUgPSAhb3B0aW9ucyA/IHRoaXMuc3RhdGUgOiB0aGlzLnN0YXRlLnNldFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKTtcbiAgdmFyIHF1ZXJpZXMgPSByZXF1ZXN0QnVpbGRlci5fZ2V0UXVlcmllcyh0ZW1wU3RhdGUuaW5kZXgsIHRlbXBTdGF0ZSk7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB0aGlzLl9jdXJyZW50TmJRdWVyaWVzKys7XG5cbiAgdGhpcy5lbWl0KCdzZWFyY2hPbmNlJywge1xuICAgIHN0YXRlOiB0ZW1wU3RhdGVcbiAgfSk7XG5cbiAgaWYgKGNiKSB7XG4gICAgdGhpcy5jbGllbnRcbiAgICAgIC5zZWFyY2gocXVlcmllcylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgc2VsZi5fY3VycmVudE5iUXVlcmllcy0tO1xuICAgICAgICBpZiAoc2VsZi5fY3VycmVudE5iUXVlcmllcyA9PT0gMCkge1xuICAgICAgICAgIHNlbGYuZW1pdCgnc2VhcmNoUXVldWVFbXB0eScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2IobnVsbCwgbmV3IFNlYXJjaFJlc3VsdHModGVtcFN0YXRlLCBjb250ZW50LnJlc3VsdHMpLCB0ZW1wU3RhdGUpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgc2VsZi5fY3VycmVudE5iUXVlcmllcy0tO1xuICAgICAgICBpZiAoc2VsZi5fY3VycmVudE5iUXVlcmllcyA9PT0gMCkge1xuICAgICAgICAgIHNlbGYuZW1pdCgnc2VhcmNoUXVldWVFbXB0eScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2IoZXJyLCBudWxsLCB0ZW1wU3RhdGUpO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuY2xpZW50LnNlYXJjaChxdWVyaWVzKS50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICBzZWxmLl9jdXJyZW50TmJRdWVyaWVzLS07XG4gICAgaWYgKHNlbGYuX2N1cnJlbnROYlF1ZXJpZXMgPT09IDApIHNlbGYuZW1pdCgnc2VhcmNoUXVldWVFbXB0eScpO1xuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50OiBuZXcgU2VhcmNoUmVzdWx0cyh0ZW1wU3RhdGUsIGNvbnRlbnQucmVzdWx0cyksXG4gICAgICBzdGF0ZTogdGVtcFN0YXRlLFxuICAgICAgX29yaWdpbmFsUmVzcG9uc2U6IGNvbnRlbnRcbiAgICB9O1xuICB9LCBmdW5jdGlvbihlKSB7XG4gICAgc2VsZi5fY3VycmVudE5iUXVlcmllcy0tO1xuICAgIGlmIChzZWxmLl9jdXJyZW50TmJRdWVyaWVzID09PSAwKSBzZWxmLmVtaXQoJ3NlYXJjaFF1ZXVlRW1wdHknKTtcbiAgICB0aHJvdyBlO1xuICB9KTtcbn07XG5cbiAvKipcbiAqIFN0YXJ0IHRoZSBzZWFyY2ggZm9yIGFuc3dlcnMgd2l0aCB0aGUgcGFyYW1ldGVycyBzZXQgaW4gdGhlIHN0YXRlLlxuICogVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoZSBvcHRpb25zIGZvciBhbnN3ZXJzIEFQSSBjYWxsXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBvcHRpb25zLmF0dHJpYnV0ZXNGb3JQcmVkaWN0aW9uIC0gQXR0cmlidXRlcyB0byB1c2UgZm9yIHByZWRpY3Rpb25zLiBJZiBlbXB0eSwgYHNlYXJjaGFibGVBdHRyaWJ1dGVzYCBpcyB1c2VkIGluc3RlYWQuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBvcHRpb25zLnF1ZXJ5TGFuZ3VhZ2VzIC0gVGhlIGxhbmd1YWdlcyBpbiB0aGUgcXVlcnkuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIFsnZW4nXS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLm5iSGl0cyAtIE1heGltdW0gbnVtYmVyIG9mIGFuc3dlcnMgdG8gcmV0cmlldmUgZnJvbSB0aGUgQW5zd2VycyBFbmdpbmUuIENhbm5vdCBiZSBncmVhdGVyIHRoYW4gMTAwMC5cbiAqXG4gKiBAcmV0dXJuIHtwcm9taXNlfSB0aGUgYW5zd2VyIHJlc3VsdHNcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuZmluZEFuc3dlcnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gIHZhciBkZXJpdmVkSGVscGVyID0gdGhpcy5kZXJpdmVkSGVscGVyc1swXTtcbiAgaWYgKCFkZXJpdmVkSGVscGVyKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gIH1cbiAgdmFyIGRlcml2ZWRTdGF0ZSA9IGRlcml2ZWRIZWxwZXIuZ2V0TW9kaWZpZWRTdGF0ZShzdGF0ZSk7XG4gIHZhciBkYXRhID0gbWVyZ2UoXG4gICAge1xuICAgICAgYXR0cmlidXRlc0ZvclByZWRpY3Rpb246IG9wdGlvbnMuYXR0cmlidXRlc0ZvclByZWRpY3Rpb24sXG4gICAgICBuYkhpdHM6IG9wdGlvbnMubmJIaXRzXG4gICAgfSxcbiAgICB7XG4gICAgICBwYXJhbXM6IG9taXQocmVxdWVzdEJ1aWxkZXIuX2dldEhpdHNTZWFyY2hQYXJhbXMoZGVyaXZlZFN0YXRlKSwgW1xuICAgICAgICAnYXR0cmlidXRlc1RvU25pcHBldCcsXG4gICAgICAgICdoaXRzUGVyUGFnZScsXG4gICAgICAgICdyZXN0cmljdFNlYXJjaGFibGVBdHRyaWJ1dGVzJyxcbiAgICAgICAgJ3NuaXBwZXRFbGxpcHNpc1RleHQnIC8vIEZJWE1FIHJlbW92ZSB0aGlzIGxpbmUgb25jZSB0aGUgZW5naW5lIGlzIGZpeGVkLlxuICAgICAgXSlcbiAgICB9XG4gICk7XG5cbiAgdmFyIGVycm9yTWVzc2FnZSA9ICdzZWFyY2ggZm9yIGFuc3dlcnMgd2FzIGNhbGxlZCwgYnV0IHRoaXMgY2xpZW50IGRvZXMgbm90IGhhdmUgYSBmdW5jdGlvbiBjbGllbnQuaW5pdEluZGV4KGluZGV4KS5maW5kQW5zd2Vycyc7XG4gIGlmICh0eXBlb2YgdGhpcy5jbGllbnQuaW5pdEluZGV4ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gIH1cbiAgdmFyIGluZGV4ID0gdGhpcy5jbGllbnQuaW5pdEluZGV4KGRlcml2ZWRTdGF0ZS5pbmRleCk7XG4gIGlmICh0eXBlb2YgaW5kZXguZmluZEFuc3dlcnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgfVxuICByZXR1cm4gaW5kZXguZmluZEFuc3dlcnMoZGVyaXZlZFN0YXRlLnF1ZXJ5LCBvcHRpb25zLnF1ZXJ5TGFuZ3VhZ2VzLCBkYXRhKTtcbn07XG5cbi8qKlxuICogU3RydWN0dXJlIG9mIGVhY2ggcmVzdWx0IHdoZW4gdXNpbmdcbiAqIFtgc2VhcmNoRm9yRmFjZXRWYWx1ZXMoKWBdKHJlZmVyZW5jZS5odG1sI0FsZ29saWFTZWFyY2hIZWxwZXIjc2VhcmNoRm9yRmFjZXRWYWx1ZXMpXG4gKiBAdHlwZWRlZiBGYWNldFNlYXJjaEhpdFxuICogQHR5cGUge29iamVjdH1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB2YWx1ZSB0aGUgZmFjZXQgdmFsdWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBoaWdobGlnaHRlZCB0aGUgZmFjZXQgdmFsdWUgaGlnaGxpZ2h0ZWQgd2l0aCB0aGUgcXVlcnkgc3RyaW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gY291bnQgbnVtYmVyIG9mIG9jY3VycmVuY2Ugb2YgdGhpcyBmYWNldCB2YWx1ZVxuICogQHByb3BlcnR5IHtib29sZWFufSBpc1JlZmluZWQgdHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYWxyZWFkeSByZWZpbmVkXG4gKi9cblxuLyoqXG4gKiBTdHJ1Y3R1cmUgb2YgdGhlIGRhdGEgcmVzb2x2ZWQgYnkgdGhlXG4gKiBbYHNlYXJjaEZvckZhY2V0VmFsdWVzKClgXShyZWZlcmVuY2UuaHRtbCNBbGdvbGlhU2VhcmNoSGVscGVyI3NlYXJjaEZvckZhY2V0VmFsdWVzKVxuICogcHJvbWlzZS5cbiAqIEB0eXBlZGVmIEZhY2V0U2VhcmNoUmVzdWx0XG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtGYWNldFNlYXJjaEhpdH0gZmFjZXRIaXRzIHRoZSByZXN1bHRzIGZvciB0aGlzIHNlYXJjaCBmb3IgZmFjZXQgdmFsdWVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gcHJvY2Vzc2luZ1RpbWVNUyB0aW1lIHRha2VuIGJ5IHRoZSBxdWVyeSBpbnNpZGUgdGhlIGVuZ2luZVxuICovXG5cbi8qKlxuICogU2VhcmNoIGZvciBmYWNldCB2YWx1ZXMgYmFzZWQgb24gYW4gcXVlcnkgYW5kIHRoZSBuYW1lIG9mIGEgZmFjZXRlZCBhdHRyaWJ1dGUuIFRoaXNcbiAqIHRyaWdnZXJzIGEgc2VhcmNoIGFuZCB3aWxsIHJldHVybiBhIHByb21pc2UuIE9uIHRvcCBvZiB1c2luZyB0aGUgcXVlcnksIGl0IGFsc28gc2VuZHNcbiAqIHRoZSBwYXJhbWV0ZXJzIGZyb20gdGhlIHN0YXRlIHNvIHRoYXQgdGhlIHNlYXJjaCBpcyBuYXJyb3dlZCBkb3duIHRvIG9ubHkgdGhlIHBvc3NpYmxlIHZhbHVlcy5cbiAqXG4gKiBTZWUgdGhlIGRlc2NyaXB0aW9uIG9mIFtGYWNldFNlYXJjaFJlc3VsdF0ocmVmZXJlbmNlLmh0bWwjRmFjZXRTZWFyY2hSZXN1bHQpXG4gKiBAcGFyYW0ge3N0cmluZ30gZmFjZXQgdGhlIG5hbWUgb2YgdGhlIGZhY2V0ZWQgYXR0cmlidXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgdGhlIHN0cmluZyBxdWVyeSBmb3IgdGhlIHNlYXJjaFxuICogQHBhcmFtIHtudW1iZXJ9IFttYXhGYWNldEhpdHNdIHRoZSBtYXhpbXVtIG51bWJlciB2YWx1ZXMgcmV0dXJuZWQuIFNob3VsZCBiZSA+IDAgYW5kIDw9IDEwMFxuICogQHBhcmFtIHtvYmplY3R9IFt1c2VyU3RhdGVdIHRoZSBzZXQgb2YgY3VzdG9tIHBhcmFtZXRlcnMgdG8gdXNlIG9uIHRvcCBvZiB0aGUgY3VycmVudCBzdGF0ZS4gU2V0dGluZyBhIHByb3BlcnR5IHRvIGB1bmRlZmluZWRgIHJlbW92ZXNcbiAqIGl0IGluIHRoZSBnZW5lcmF0ZWQgcXVlcnkuXG4gKiBAcmV0dXJuIHtwcm9taXNlLjxGYWNldFNlYXJjaFJlc3VsdD59IHRoZSByZXN1bHRzIG9mIHRoZSBzZWFyY2hcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuc2VhcmNoRm9yRmFjZXRWYWx1ZXMgPSBmdW5jdGlvbihmYWNldCwgcXVlcnksIG1heEZhY2V0SGl0cywgdXNlclN0YXRlKSB7XG4gIHZhciBjbGllbnRIYXNTRkZWID0gdHlwZW9mIHRoaXMuY2xpZW50LnNlYXJjaEZvckZhY2V0VmFsdWVzID09PSAnZnVuY3Rpb24nO1xuICB2YXIgY2xpZW50SGFzSW5pdEluZGV4ID0gdHlwZW9mIHRoaXMuY2xpZW50LmluaXRJbmRleCA9PT0gJ2Z1bmN0aW9uJztcbiAgaWYgKFxuICAgICFjbGllbnRIYXNTRkZWICYmXG4gICAgIWNsaWVudEhhc0luaXRJbmRleCAmJlxuICAgIHR5cGVvZiB0aGlzLmNsaWVudC5zZWFyY2ggIT09ICdmdW5jdGlvbidcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ3NlYXJjaCBmb3IgZmFjZXQgdmFsdWVzIChzZWFyY2hhYmxlKSB3YXMgY2FsbGVkLCBidXQgdGhpcyBjbGllbnQgZG9lcyBub3QgaGF2ZSBhIGZ1bmN0aW9uIGNsaWVudC5zZWFyY2hGb3JGYWNldFZhbHVlcyBvciBjbGllbnQuaW5pdEluZGV4KGluZGV4KS5zZWFyY2hGb3JGYWNldFZhbHVlcydcbiAgICApO1xuICB9XG5cbiAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZS5zZXRRdWVyeVBhcmFtZXRlcnModXNlclN0YXRlIHx8IHt9KTtcbiAgdmFyIGlzRGlzanVuY3RpdmUgPSBzdGF0ZS5pc0Rpc2p1bmN0aXZlRmFjZXQoZmFjZXQpO1xuICB2YXIgYWxnb2xpYVF1ZXJ5ID0gcmVxdWVzdEJ1aWxkZXIuZ2V0U2VhcmNoRm9yRmFjZXRRdWVyeShmYWNldCwgcXVlcnksIG1heEZhY2V0SGl0cywgc3RhdGUpO1xuXG4gIHRoaXMuX2N1cnJlbnROYlF1ZXJpZXMrKztcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgc2VhcmNoRm9yRmFjZXRWYWx1ZXNQcm9taXNlO1xuICAvLyBuZXdlciBhbGdvbGlhc2VhcmNoIF4zLjI3LjEgLSB+NC4wLjBcbiAgaWYgKGNsaWVudEhhc1NGRlYpIHtcbiAgICBzZWFyY2hGb3JGYWNldFZhbHVlc1Byb21pc2UgPSB0aGlzLmNsaWVudC5zZWFyY2hGb3JGYWNldFZhbHVlcyhbXG4gICAgICB7aW5kZXhOYW1lOiBzdGF0ZS5pbmRleCwgcGFyYW1zOiBhbGdvbGlhUXVlcnl9XG4gICAgXSk7XG4gICAgLy8gYWxnb2xpYXNlYXJjaCA8IDMuMjcuMVxuICB9IGVsc2UgaWYgKGNsaWVudEhhc0luaXRJbmRleCkge1xuICAgIHNlYXJjaEZvckZhY2V0VmFsdWVzUHJvbWlzZSA9IHRoaXMuY2xpZW50XG4gICAgICAuaW5pdEluZGV4KHN0YXRlLmluZGV4KVxuICAgICAgLnNlYXJjaEZvckZhY2V0VmFsdWVzKGFsZ29saWFRdWVyeSk7XG4gICAgLy8gYWxnb2xpYXNlYXJjaCB+NS4wLjBcbiAgfSBlbHNlIHtcbiAgICAvLyBATUFKT1Igb25seSB1c2UgY2xpZW50LnNlYXJjaFxuICAgIGRlbGV0ZSBhbGdvbGlhUXVlcnkuZmFjZXROYW1lO1xuICAgIHNlYXJjaEZvckZhY2V0VmFsdWVzUHJvbWlzZSA9IHRoaXMuY2xpZW50XG4gICAgICAuc2VhcmNoKFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdmYWNldCcsXG4gICAgICAgICAgZmFjZXQ6IGZhY2V0LFxuICAgICAgICAgIGluZGV4TmFtZTogc3RhdGUuaW5kZXgsXG4gICAgICAgICAgcGFyYW1zOiBhbGdvbGlhUXVlcnlcbiAgICAgICAgfVxuICAgICAgXSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIHByb2Nlc3NSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UucmVzdWx0c1swXTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdGhpcy5lbWl0KCdzZWFyY2hGb3JGYWNldFZhbHVlcycsIHtcbiAgICBzdGF0ZTogc3RhdGUsXG4gICAgZmFjZXQ6IGZhY2V0LFxuICAgIHF1ZXJ5OiBxdWVyeVxuICB9KTtcblxuICByZXR1cm4gc2VhcmNoRm9yRmFjZXRWYWx1ZXNQcm9taXNlLnRoZW4oZnVuY3Rpb24gYWRkSXNSZWZpbmVkKGNvbnRlbnQpIHtcbiAgICBzZWxmLl9jdXJyZW50TmJRdWVyaWVzLS07XG4gICAgaWYgKHNlbGYuX2N1cnJlbnROYlF1ZXJpZXMgPT09IDApIHNlbGYuZW1pdCgnc2VhcmNoUXVldWVFbXB0eScpO1xuXG4gICAgY29udGVudCA9IEFycmF5LmlzQXJyYXkoY29udGVudCkgPyBjb250ZW50WzBdIDogY29udGVudDtcblxuICAgIGNvbnRlbnQuZmFjZXRIaXRzLmZvckVhY2goZnVuY3Rpb24oZikge1xuICAgICAgZi5lc2NhcGVkVmFsdWUgPSBlc2NhcGVGYWNldFZhbHVlKGYudmFsdWUpO1xuICAgICAgZi5pc1JlZmluZWQgPSBpc0Rpc2p1bmN0aXZlXG4gICAgICAgID8gc3RhdGUuaXNEaXNqdW5jdGl2ZUZhY2V0UmVmaW5lZChmYWNldCwgZi5lc2NhcGVkVmFsdWUpXG4gICAgICAgIDogc3RhdGUuaXNGYWNldFJlZmluZWQoZmFjZXQsIGYuZXNjYXBlZFZhbHVlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb250ZW50O1xuICB9LCBmdW5jdGlvbihlKSB7XG4gICAgc2VsZi5fY3VycmVudE5iUXVlcmllcy0tO1xuICAgIGlmIChzZWxmLl9jdXJyZW50TmJRdWVyaWVzID09PSAwKSBzZWxmLmVtaXQoJ3NlYXJjaFF1ZXVlRW1wdHknKTtcbiAgICB0aHJvdyBlO1xuICB9KTtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgdGV4dCBxdWVyeSB1c2VkIGZvciB0aGUgc2VhcmNoLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHEgdGhlIHVzZXIgcXVlcnlcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnNldFF1ZXJ5ID0gZnVuY3Rpb24ocSkge1xuICB0aGlzLl9jaGFuZ2Uoe1xuICAgIHN0YXRlOiB0aGlzLnN0YXRlLnJlc2V0UGFnZSgpLnNldFF1ZXJ5KHEpLFxuICAgIGlzUGFnZVJlc2V0OiB0cnVlXG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIHRoZSB0eXBlcyBvZiByZWZpbmVtZW50cyBleGNlcHQgdGFncy4gQSBzdHJpbmcgY2FuIGJlIHByb3ZpZGVkIHRvIHJlbW92ZVxuICogb25seSB0aGUgcmVmaW5lbWVudHMgb2YgYSBzcGVjaWZpYyBhdHRyaWJ1dGUuIEZvciBtb3JlIGFkdmFuY2VkIHVzZSBjYXNlLCB5b3UgY2FuXG4gKiBwcm92aWRlIGEgZnVuY3Rpb24gaW5zdGVhZC4gVGhpcyBmdW5jdGlvbiBzaG91bGQgZm9sbG93IHRoZVxuICogW2NsZWFyQ2FsbGJhY2sgZGVmaW5pdGlvbl0oI1NlYXJjaFBhcmFtZXRlcnMuY2xlYXJDYWxsYmFjaykuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gb3B0aW9uYWwgbmFtZSBvZiB0aGUgZmFjZXQgLyBhdHRyaWJ1dGUgb24gd2hpY2ggd2Ugd2FudCB0byByZW1vdmUgYWxsIHJlZmluZW1lbnRzXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICogQGV4YW1wbGVcbiAqIC8vIFJlbW92aW5nIGFsbCB0aGUgcmVmaW5lbWVudHNcbiAqIGhlbHBlci5jbGVhclJlZmluZW1lbnRzKCkuc2VhcmNoKCk7XG4gKiBAZXhhbXBsZVxuICogLy8gUmVtb3ZpbmcgYWxsIHRoZSBmaWx0ZXJzIG9uIGEgdGhlIGNhdGVnb3J5IGF0dHJpYnV0ZS5cbiAqIGhlbHBlci5jbGVhclJlZmluZW1lbnRzKCdjYXRlZ29yeScpLnNlYXJjaCgpO1xuICogQGV4YW1wbGVcbiAqIC8vIFJlbW92aW5nIG9ubHkgdGhlIGV4Y2x1ZGUgZmlsdGVycyBvbiB0aGUgY2F0ZWdvcnkgZmFjZXQuXG4gKiBoZWxwZXIuY2xlYXJSZWZpbmVtZW50cyhmdW5jdGlvbih2YWx1ZSwgYXR0cmlidXRlLCB0eXBlKSB7XG4gKiAgIHJldHVybiB0eXBlID09PSAnZXhjbHVkZScgJiYgYXR0cmlidXRlID09PSAnY2F0ZWdvcnknO1xuICogfSkuc2VhcmNoKCk7XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmNsZWFyUmVmaW5lbWVudHMgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkuY2xlYXJSZWZpbmVtZW50cyhuYW1lKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCB0aGUgdGFnIGZpbHRlcnMuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmNsZWFyVGFncyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jaGFuZ2Uoe1xuICAgIHN0YXRlOiB0aGlzLnN0YXRlLnJlc2V0UGFnZSgpLmNsZWFyVGFncygpLFxuICAgIGlzUGFnZVJlc2V0OiB0cnVlXG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgZGlzanVuY3RpdmUgZmlsdGVyIHRvIGEgZmFjZXRlZCBhdHRyaWJ1dGUgd2l0aCB0aGUgYHZhbHVlYCBwcm92aWRlZC4gSWYgdGhlXG4gKiBmaWx0ZXIgaXMgYWxyZWFkeSBzZXQsIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBmaWx0ZXJzLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCB0byByZWZpbmVcbiAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWUgdGhlIGFzc29jaWF0ZWQgdmFsdWUgKHdpbGwgYmUgY29udmVydGVkIHRvIHN0cmluZylcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmFkZERpc2p1bmN0aXZlRmFjZXRSZWZpbmVtZW50ID0gZnVuY3Rpb24oZmFjZXQsIHZhbHVlKSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkuYWRkRGlzanVuY3RpdmVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgc2luY2UgdmVyc2lvbiAyLjQuMCwgc2VlIHtAbGluayBBbGdvbGlhU2VhcmNoSGVscGVyI2FkZERpc2p1bmN0aXZlRmFjZXRSZWZpbmVtZW50fVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5hZGREaXNqdW5jdGl2ZVJlZmluZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5hZGREaXNqdW5jdGl2ZUZhY2V0UmVmaW5lbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgcmVmaW5lbWVudCBvbiBhIGhpZXJhcmNoaWNhbCBmYWNldC4gSXQgd2lsbCB0aHJvd1xuICogYW4gZXhjZXB0aW9uIGlmIHRoZSBmYWNldCBpcyBub3QgZGVmaW5lZCBvciBpZiB0aGUgZmFjZXRcbiAqIGlzIGFscmVhZHkgcmVmaW5lZC5cbiAqXG4gKiBUaGlzIG1ldGhvZCByZXNldHMgdGhlIGN1cnJlbnQgcGFnZSB0byAwLlxuICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCB0aGUgaGllcmFyY2hpY2FsIGZhY2V0IHBhdGhcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBmYWNldCBpcyBub3QgZGVmaW5lZCBvciBpZiB0aGUgZmFjZXQgaXMgcmVmaW5lZFxuICogQGNoYWluYWJsZVxuICogQGZpcmVzIGNoYW5nZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5hZGRIaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQgPSBmdW5jdGlvbihmYWNldCwgdmFsdWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5hZGRIaWVyYXJjaGljYWxGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQWRkcyBhIGFuIG51bWVyaWMgZmlsdGVyIHRvIGFuIGF0dHJpYnV0ZSB3aXRoIHRoZSBgb3BlcmF0b3JgIGFuZCBgdmFsdWVgIHByb3ZpZGVkLiBJZiB0aGVcbiAqIGZpbHRlciBpcyBhbHJlYWR5IHNldCwgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIGZpbHRlcnMuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEBwYXJhbSAge3N0cmluZ30gYXR0cmlidXRlIHRoZSBhdHRyaWJ1dGUgb24gd2hpY2ggdGhlIG51bWVyaWMgZmlsdGVyIGFwcGxpZXNcbiAqIEBwYXJhbSAge3N0cmluZ30gb3BlcmF0b3IgdGhlIG9wZXJhdG9yIG9mIHRoZSBmaWx0ZXJcbiAqIEBwYXJhbSAge251bWJlcn0gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmFkZE51bWVyaWNSZWZpbmVtZW50ID0gZnVuY3Rpb24oYXR0cmlidXRlLCBvcGVyYXRvciwgdmFsdWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5hZGROdW1lcmljUmVmaW5lbWVudChhdHRyaWJ1dGUsIG9wZXJhdG9yLCB2YWx1ZSksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBmaWx0ZXIgdG8gYSBmYWNldGVkIGF0dHJpYnV0ZSB3aXRoIHRoZSBgdmFsdWVgIHByb3ZpZGVkLiBJZiB0aGVcbiAqIGZpbHRlciBpcyBhbHJlYWR5IHNldCwgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIGZpbHRlcnMuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEBwYXJhbSAge3N0cmluZ30gZmFjZXQgdGhlIGZhY2V0IHRvIHJlZmluZVxuICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSB0aGUgYXNzb2NpYXRlZCB2YWx1ZSAod2lsbCBiZSBjb252ZXJ0ZWQgdG8gc3RyaW5nKVxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBmaXJlcyBjaGFuZ2VcbiAqIEBjaGFpbmFibGVcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuYWRkRmFjZXRSZWZpbmVtZW50ID0gZnVuY3Rpb24oZmFjZXQsIHZhbHVlKSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkuYWRkRmFjZXRSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gMi40LjAsIHNlZSB7QGxpbmsgQWxnb2xpYVNlYXJjaEhlbHBlciNhZGRGYWNldFJlZmluZW1lbnR9XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmFkZFJlZmluZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5hZGRGYWNldFJlZmluZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cblxuLyoqXG4gKiBBZGRzIGEgYW4gZXhjbHVzaW9uIGZpbHRlciB0byBhIGZhY2V0ZWQgYXR0cmlidXRlIHdpdGggdGhlIGB2YWx1ZWAgcHJvdmlkZWQuIElmIHRoZVxuICogZmlsdGVyIGlzIGFscmVhZHkgc2V0LCBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgZmlsdGVycy5cbiAqXG4gKiBUaGlzIG1ldGhvZCByZXNldHMgdGhlIGN1cnJlbnQgcGFnZSB0byAwLlxuICogQHBhcmFtICB7c3RyaW5nfSBmYWNldCB0aGUgZmFjZXQgdG8gcmVmaW5lXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHZhbHVlIHRoZSBhc3NvY2lhdGVkIHZhbHVlICh3aWxsIGJlIGNvbnZlcnRlZCB0byBzdHJpbmcpXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5hZGRGYWNldEV4Y2x1c2lvbiA9IGZ1bmN0aW9uKGZhY2V0LCB2YWx1ZSkge1xuICB0aGlzLl9jaGFuZ2Uoe1xuICAgIHN0YXRlOiB0aGlzLnN0YXRlLnJlc2V0UGFnZSgpLmFkZEV4Y2x1ZGVSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gMi40LjAsIHNlZSB7QGxpbmsgQWxnb2xpYVNlYXJjaEhlbHBlciNhZGRGYWNldEV4Y2x1c2lvbn1cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuYWRkRXhjbHVkZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5hZGRGYWNldEV4Y2x1c2lvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgdGFnIGZpbHRlciB3aXRoIHRoZSBgdGFnYCBwcm92aWRlZC4gSWYgdGhlXG4gKiBmaWx0ZXIgaXMgYWxyZWFkeSBzZXQsIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBmaWx0ZXJzLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIHRoZSB0YWcgdG8gYWRkIHRvIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmFkZFRhZyA9IGZ1bmN0aW9uKHRhZykge1xuICB0aGlzLl9jaGFuZ2Uoe1xuICAgIHN0YXRlOiB0aGlzLnN0YXRlLnJlc2V0UGFnZSgpLmFkZFRhZ1JlZmluZW1lbnQodGFnKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhbiBudW1lcmljIGZpbHRlciB0byBhbiBhdHRyaWJ1dGUgd2l0aCB0aGUgYG9wZXJhdG9yYCBhbmQgYHZhbHVlYCBwcm92aWRlZC4gSWYgdGhlXG4gKiBmaWx0ZXIgaXMgbm90IHNldCwgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIGZpbHRlcnMuXG4gKlxuICogU29tZSBwYXJhbWV0ZXJzIGFyZSBvcHRpb25hbCwgdHJpZ2dlcmluZyBkaWZmZXJlbnQgYmVoYXZpb3I6XG4gKiAgLSBpZiB0aGUgdmFsdWUgaXMgbm90IHByb3ZpZGVkLCB0aGVuIGFsbCB0aGUgbnVtZXJpYyB2YWx1ZSB3aWxsIGJlIHJlbW92ZWQgZm9yIHRoZVxuICogIHNwZWNpZmllZCBhdHRyaWJ1dGUvb3BlcmF0b3IgY291cGxlLlxuICogIC0gaWYgdGhlIG9wZXJhdG9yIGlzIG5vdCBwcm92aWRlZCBlaXRoZXIsIHRoZW4gYWxsIHRoZSBudW1lcmljIGZpbHRlciBvbiB0aGlzIGF0dHJpYnV0ZVxuICogIHdpbGwgYmUgcmVtb3ZlZC5cbiAqXG4gKiBUaGlzIG1ldGhvZCByZXNldHMgdGhlIGN1cnJlbnQgcGFnZSB0byAwLlxuICogQHBhcmFtICB7c3RyaW5nfSBhdHRyaWJ1dGUgdGhlIGF0dHJpYnV0ZSBvbiB3aGljaCB0aGUgbnVtZXJpYyBmaWx0ZXIgYXBwbGllc1xuICogQHBhcmFtICB7c3RyaW5nfSBbb3BlcmF0b3JdIHRoZSBvcGVyYXRvciBvZiB0aGUgZmlsdGVyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IFt2YWx1ZV0gdGhlIHZhbHVlIG9mIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnJlbW92ZU51bWVyaWNSZWZpbmVtZW50ID0gZnVuY3Rpb24oYXR0cmlidXRlLCBvcGVyYXRvciwgdmFsdWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5yZW1vdmVOdW1lcmljUmVmaW5lbWVudChhdHRyaWJ1dGUsIG9wZXJhdG9yLCB2YWx1ZSksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBkaXNqdW5jdGl2ZSBmaWx0ZXIgdG8gYSBmYWNldGVkIGF0dHJpYnV0ZSB3aXRoIHRoZSBgdmFsdWVgIHByb3ZpZGVkLiBJZiB0aGVcbiAqIGZpbHRlciBpcyBub3Qgc2V0LCBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgZmlsdGVycy5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgaXMgb21pdHRlZCwgdGhlbiB0aGlzIG1ldGhvZCB3aWxsIHJlbW92ZSBhbGwgdGhlIGZpbHRlcnMgZm9yIHRoZVxuICogYXR0cmlidXRlLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCB0byByZWZpbmVcbiAqIEBwYXJhbSAge3N0cmluZ30gW3ZhbHVlXSB0aGUgYXNzb2NpYXRlZCB2YWx1ZVxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBmaXJlcyBjaGFuZ2VcbiAqIEBjaGFpbmFibGVcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUucmVtb3ZlRGlzanVuY3RpdmVGYWNldFJlZmluZW1lbnQgPSBmdW5jdGlvbihmYWNldCwgdmFsdWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5yZW1vdmVEaXNqdW5jdGl2ZUZhY2V0UmVmaW5lbWVudChmYWNldCwgdmFsdWUpLFxuICAgIGlzUGFnZVJlc2V0OiB0cnVlXG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDIuNC4wLCBzZWUge0BsaW5rIEFsZ29saWFTZWFyY2hIZWxwZXIjcmVtb3ZlRGlzanVuY3RpdmVGYWNldFJlZmluZW1lbnR9XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnJlbW92ZURpc2p1bmN0aXZlUmVmaW5lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnJlbW92ZURpc2p1bmN0aXZlRmFjZXRSZWZpbmVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgdGhlIHJlZmluZW1lbnQgc2V0IG9uIGEgaGllcmFyY2hpY2FsIGZhY2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCBuYW1lXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQHRocm93cyBFcnJvciBpZiB0aGUgZmFjZXQgaXMgbm90IGRlZmluZWQgb3IgaWYgdGhlIGZhY2V0IGlzIG5vdCByZWZpbmVkXG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnJlbW92ZUhpZXJhcmNoaWNhbEZhY2V0UmVmaW5lbWVudCA9IGZ1bmN0aW9uKGZhY2V0KSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkucmVtb3ZlSGllcmFyY2hpY2FsRmFjZXRSZWZpbmVtZW50KGZhY2V0KSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIGZpbHRlciB0byBhIGZhY2V0ZWQgYXR0cmlidXRlIHdpdGggdGhlIGB2YWx1ZWAgcHJvdmlkZWQuIElmIHRoZVxuICogZmlsdGVyIGlzIG5vdCBzZXQsIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBmaWx0ZXJzLlxuICpcbiAqIElmIHRoZSB2YWx1ZSBpcyBvbWl0dGVkLCB0aGVuIHRoaXMgbWV0aG9kIHdpbGwgcmVtb3ZlIGFsbCB0aGUgZmlsdGVycyBmb3IgdGhlXG4gKiBhdHRyaWJ1dGUuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEBwYXJhbSAge3N0cmluZ30gZmFjZXQgdGhlIGZhY2V0IHRvIHJlZmluZVxuICogQHBhcmFtICB7c3RyaW5nfSBbdmFsdWVdIHRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5yZW1vdmVGYWNldFJlZmluZW1lbnQgPSBmdW5jdGlvbihmYWNldCwgdmFsdWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5yZW1vdmVGYWNldFJlZmluZW1lbnQoZmFjZXQsIHZhbHVlKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgc2luY2UgdmVyc2lvbiAyLjQuMCwgc2VlIHtAbGluayBBbGdvbGlhU2VhcmNoSGVscGVyI3JlbW92ZUZhY2V0UmVmaW5lbWVudH1cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUucmVtb3ZlUmVmaW5lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnJlbW92ZUZhY2V0UmVmaW5lbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGFuIGV4Y2x1c2lvbiBmaWx0ZXIgdG8gYSBmYWNldGVkIGF0dHJpYnV0ZSB3aXRoIHRoZSBgdmFsdWVgIHByb3ZpZGVkLiBJZiB0aGVcbiAqIGZpbHRlciBpcyBub3Qgc2V0LCBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgZmlsdGVycy5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgaXMgb21pdHRlZCwgdGhlbiB0aGlzIG1ldGhvZCB3aWxsIHJlbW92ZSBhbGwgdGhlIGZpbHRlcnMgZm9yIHRoZVxuICogYXR0cmlidXRlLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCB0byByZWZpbmVcbiAqIEBwYXJhbSAge3N0cmluZ30gW3ZhbHVlXSB0aGUgYXNzb2NpYXRlZCB2YWx1ZVxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBmaXJlcyBjaGFuZ2VcbiAqIEBjaGFpbmFibGVcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUucmVtb3ZlRmFjZXRFeGNsdXNpb24gPSBmdW5jdGlvbihmYWNldCwgdmFsdWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5yZW1vdmVFeGNsdWRlUmVmaW5lbWVudChmYWNldCwgdmFsdWUpLFxuICAgIGlzUGFnZVJlc2V0OiB0cnVlXG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDIuNC4wLCBzZWUge0BsaW5rIEFsZ29saWFTZWFyY2hIZWxwZXIjcmVtb3ZlRmFjZXRFeGNsdXNpb259XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnJlbW92ZUV4Y2x1ZGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMucmVtb3ZlRmFjZXRFeGNsdXNpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIHRhZyBmaWx0ZXIgd2l0aCB0aGUgYHRhZ2AgcHJvdmlkZWQuIElmIHRoZVxuICogZmlsdGVyIGlzIG5vdCBzZXQsIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBmaWx0ZXJzLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIHRhZyB0byByZW1vdmUgZnJvbSB0aGUgZmlsdGVyXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5yZW1vdmVUYWcgPSBmdW5jdGlvbih0YWcpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5yZW1vdmVUYWdSZWZpbmVtZW50KHRhZyksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZHMgb3IgcmVtb3ZlcyBhbiBleGNsdXNpb24gZmlsdGVyIHRvIGEgZmFjZXRlZCBhdHRyaWJ1dGUgd2l0aCB0aGUgYHZhbHVlYCBwcm92aWRlZC4gSWZcbiAqIHRoZSB2YWx1ZSBpcyBzZXQgdGhlbiBpdCByZW1vdmVzIGl0LCBvdGhlcndpc2UgaXQgYWRkcyB0aGUgZmlsdGVyLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCB0byByZWZpbmVcbiAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWUgdGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnRvZ2dsZUZhY2V0RXhjbHVzaW9uID0gZnVuY3Rpb24oZmFjZXQsIHZhbHVlKSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkudG9nZ2xlRXhjbHVkZUZhY2V0UmVmaW5lbWVudChmYWNldCwgdmFsdWUpLFxuICAgIGlzUGFnZVJlc2V0OiB0cnVlXG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDIuNC4wLCBzZWUge0BsaW5rIEFsZ29saWFTZWFyY2hIZWxwZXIjdG9nZ2xlRmFjZXRFeGNsdXNpb259XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnRvZ2dsZUV4Y2x1ZGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMudG9nZ2xlRmFjZXRFeGNsdXNpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogQWRkcyBvciByZW1vdmVzIGEgZmlsdGVyIHRvIGEgZmFjZXRlZCBhdHRyaWJ1dGUgd2l0aCB0aGUgYHZhbHVlYCBwcm92aWRlZC4gSWZcbiAqIHRoZSB2YWx1ZSBpcyBzZXQgdGhlbiBpdCByZW1vdmVzIGl0LCBvdGhlcndpc2UgaXQgYWRkcyB0aGUgZmlsdGVyLlxuICpcbiAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBjb25qdW5jdGl2ZSwgZGlzanVuY3RpdmUgYW5kIGhpZXJhcmNoaWNhbCBmaWx0ZXJzLlxuICpcbiAqIFRoaXMgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCBwYWdlIHRvIDAuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGZhY2V0IHRoZSBmYWNldCB0byByZWZpbmVcbiAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWUgdGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAdGhyb3dzIEVycm9yIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGZhY2V0IGlzIG5vdCBkZWNsYXJlZCBpbiB0aGUgc2V0dGluZ3Mgb2YgdGhlIGhlbHBlclxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICogQGRlcHJlY2F0ZWQgc2luY2UgdmVyc2lvbiAyLjE5LjAsIHNlZSB7QGxpbmsgQWxnb2xpYVNlYXJjaEhlbHBlciN0b2dnbGVGYWNldFJlZmluZW1lbnR9XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnRvZ2dsZVJlZmluZW1lbnQgPSBmdW5jdGlvbihmYWNldCwgdmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMudG9nZ2xlRmFjZXRSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSk7XG59O1xuXG4vKipcbiAqIEFkZHMgb3IgcmVtb3ZlcyBhIGZpbHRlciB0byBhIGZhY2V0ZWQgYXR0cmlidXRlIHdpdGggdGhlIGB2YWx1ZWAgcHJvdmlkZWQuIElmXG4gKiB0aGUgdmFsdWUgaXMgc2V0IHRoZW4gaXQgcmVtb3ZlcyBpdCwgb3RoZXJ3aXNlIGl0IGFkZHMgdGhlIGZpbHRlci5cbiAqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgY29uanVuY3RpdmUsIGRpc2p1bmN0aXZlIGFuZCBoaWVyYXJjaGljYWwgZmlsdGVycy5cbiAqXG4gKiBUaGlzIG1ldGhvZCByZXNldHMgdGhlIGN1cnJlbnQgcGFnZSB0byAwLlxuICogQHBhcmFtICB7c3RyaW5nfSBmYWNldCB0aGUgZmFjZXQgdG8gcmVmaW5lXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHZhbHVlIHRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQHRocm93cyBFcnJvciB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBmYWNldCBpcyBub3QgZGVjbGFyZWQgaW4gdGhlIHNldHRpbmdzIG9mIHRoZSBoZWxwZXJcbiAqIEBmaXJlcyBjaGFuZ2VcbiAqIEBjaGFpbmFibGVcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUudG9nZ2xlRmFjZXRSZWZpbmVtZW50ID0gZnVuY3Rpb24oZmFjZXQsIHZhbHVlKSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkudG9nZ2xlRmFjZXRSZWZpbmVtZW50KGZhY2V0LCB2YWx1ZSksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gMi40LjAsIHNlZSB7QGxpbmsgQWxnb2xpYVNlYXJjaEhlbHBlciN0b2dnbGVGYWNldFJlZmluZW1lbnR9XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnRvZ2dsZVJlZmluZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy50b2dnbGVGYWNldFJlZmluZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogQWRkcyBvciByZW1vdmVzIGEgdGFnIGZpbHRlciB3aXRoIHRoZSBgdmFsdWVgIHByb3ZpZGVkLiBJZlxuICogdGhlIHZhbHVlIGlzIHNldCB0aGVuIGl0IHJlbW92ZXMgaXQsIG90aGVyd2lzZSBpdCBhZGRzIHRoZSBmaWx0ZXIuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgdGFnIHRvIHJlbW92ZSBvciBhZGRcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnRvZ2dsZVRhZyA9IGZ1bmN0aW9uKHRhZykge1xuICB0aGlzLl9jaGFuZ2Uoe1xuICAgIHN0YXRlOiB0aGlzLnN0YXRlLnJlc2V0UGFnZSgpLnRvZ2dsZVRhZ1JlZmluZW1lbnQodGFnKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSW5jcmVtZW50cyB0aGUgcGFnZSBudW1iZXIgYnkgb25lLlxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBmaXJlcyBjaGFuZ2VcbiAqIEBjaGFpbmFibGVcbiAqIEBleGFtcGxlXG4gKiBoZWxwZXIuc2V0UGFnZSgwKS5uZXh0UGFnZSgpLmdldFBhZ2UoKTtcbiAqIC8vIHJldHVybnMgMVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5uZXh0UGFnZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFnZSA9IHRoaXMuc3RhdGUucGFnZSB8fCAwO1xuICByZXR1cm4gdGhpcy5zZXRQYWdlKHBhZ2UgKyAxKTtcbn07XG5cbi8qKlxuICogRGVjcmVtZW50cyB0aGUgcGFnZSBudW1iZXIgYnkgb25lLlxuICogQGZpcmVzIGNoYW5nZVxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBjaGFpbmFibGVcbiAqIEBleGFtcGxlXG4gKiBoZWxwZXIuc2V0UGFnZSgxKS5wcmV2aW91c1BhZ2UoKS5nZXRQYWdlKCk7XG4gKiAvLyByZXR1cm5zIDBcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUucHJldmlvdXNQYWdlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwYWdlID0gdGhpcy5zdGF0ZS5wYWdlIHx8IDA7XG4gIHJldHVybiB0aGlzLnNldFBhZ2UocGFnZSAtIDEpO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZXRDdXJyZW50UGFnZShwYWdlKSB7XG4gIGlmIChwYWdlIDwgMCkgdGhyb3cgbmV3IEVycm9yKCdQYWdlIHJlcXVlc3RlZCBiZWxvdyAwLicpO1xuXG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUuc2V0UGFnZShwYWdlKSxcbiAgICBpc1BhZ2VSZXNldDogZmFsc2VcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBjdXJyZW50IHBhZ2VcbiAqIEBkZXByZWNhdGVkXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHBhZ2UgVGhlIHBhZ2UgbnVtYmVyXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5zZXRDdXJyZW50UGFnZSA9IHNldEN1cnJlbnRQYWdlO1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgcGFnZS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7bnVtYmVyfSBwYWdlIFRoZSBwYWdlIG51bWJlclxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaEhlbHBlcn1cbiAqIEBmaXJlcyBjaGFuZ2VcbiAqIEBjaGFpbmFibGVcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuc2V0UGFnZSA9IHNldEN1cnJlbnRQYWdlO1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIG5hbWUgb2YgdGhlIGluZGV4IHRoYXQgd2lsbCBiZSB0YXJnZXRlZCBieSB0aGUgcXVlcnkuXG4gKlxuICogVGhpcyBtZXRob2QgcmVzZXRzIHRoZSBjdXJyZW50IHBhZ2UgdG8gMC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHRoZSBpbmRleCBuYW1lXG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICogQGZpcmVzIGNoYW5nZVxuICogQGNoYWluYWJsZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5zZXRJbmRleCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogdGhpcy5zdGF0ZS5yZXNldFBhZ2UoKS5zZXRJbmRleChuYW1lKSxcbiAgICBpc1BhZ2VSZXNldDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVXBkYXRlIGEgcGFyYW1ldGVyIG9mIHRoZSBzZWFyY2guIFRoaXMgbWV0aG9kIHJlc2V0IHRoZSBwYWdlXG4gKlxuICogVGhlIGNvbXBsZXRlIGxpc3Qgb2YgcGFyYW1ldGVycyBpcyBhdmFpbGFibGUgb24gdGhlXG4gKiBbQWxnb2xpYSB3ZWJzaXRlXShodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvcmVzdCNxdWVyeS1hbi1pbmRleCkuXG4gKiBUaGUgbW9zdCBjb21tb25seSB1c2VkIHBhcmFtZXRlcnMgaGF2ZSB0aGVpciBvd24gW3Nob3J0Y3V0c10oI3F1ZXJ5LXBhcmFtZXRlcnMtc2hvcnRjdXRzKVxuICogb3IgYmVuZWZpdCBmcm9tIGhpZ2hlci1sZXZlbCBBUElzIChhbGwgdGhlIGtpbmQgb2YgZmlsdGVycyBhbmQgZmFjZXRzIGhhdmUgdGhlaXIgb3duIEFQSSlcbiAqXG4gKiBUaGlzIG1ldGhvZCByZXNldHMgdGhlIGN1cnJlbnQgcGFnZSB0byAwLlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtZXRlciBuYW1lIG9mIHRoZSBwYXJhbWV0ZXIgdG8gdXBkYXRlXG4gKiBAcGFyYW0ge2FueX0gdmFsdWUgbmV3IHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXJcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKiBAZXhhbXBsZVxuICogaGVscGVyLnNldFF1ZXJ5UGFyYW1ldGVyKCdoaXRzUGVyUGFnZScsIDIwKS5zZWFyY2goKTtcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuc2V0UXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihwYXJhbWV0ZXIsIHZhbHVlKSB7XG4gIHRoaXMuX2NoYW5nZSh7XG4gICAgc3RhdGU6IHRoaXMuc3RhdGUucmVzZXRQYWdlKCkuc2V0UXVlcnlQYXJhbWV0ZXIocGFyYW1ldGVyLCB2YWx1ZSksXG4gICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgd2hvbGUgc3RhdGUgKHdhcm5pbmc6IHdpbGwgZXJhc2UgcHJldmlvdXMgc3RhdGUpXG4gKiBAcGFyYW0ge1NlYXJjaFBhcmFtZXRlcnN9IG5ld1N0YXRlIHRoZSB3aG9sZSBuZXcgc3RhdGVcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZmlyZXMgY2hhbmdlXG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24obmV3U3RhdGUpIHtcbiAgdGhpcy5fY2hhbmdlKHtcbiAgICBzdGF0ZTogU2VhcmNoUGFyYW1ldGVycy5tYWtlKG5ld1N0YXRlKSxcbiAgICBpc1BhZ2VSZXNldDogZmFsc2VcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE92ZXJyaWRlIHRoZSBjdXJyZW50IHN0YXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGNoYW5nZSBldmVudC5cbiAqIERvIG5vdCB1c2UgdGhpcyBtZXRob2QgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy4gKHNlZSB0aGUgZXhhbXBsZVxuICogZm9yIGEgbGVnaXQgdXNlIGNhc2UpXG4gKiBAcGFyYW0ge1NlYXJjaFBhcmFtZXRlcnN9IG5ld1N0YXRlIHRoZSB3aG9sZSBuZXcgc3RhdGVcbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKiBAZXhhbXBsZVxuICogIGhlbHBlci5vbignY2hhbmdlJywgZnVuY3Rpb24oc3RhdGUpe1xuICogICAgLy8gSW4gdGhpcyBmdW5jdGlvbiB5b3UgbWlnaHQgd2FudCB0byBmaW5kIGEgd2F5IHRvIHN0b3JlIHRoZSBzdGF0ZSBpbiB0aGUgdXJsL2hpc3RvcnlcbiAqICAgIHVwZGF0ZVlvdXJVUkwoc3RhdGUpXG4gKiAgfSlcbiAqICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAqICAgIC8vIFRoaXMgaXMgbmFpdmUgdGhvdWdoIGFzIHlvdSBzaG91bGQgY2hlY2sgaWYgdGhlIHN0YXRlIGlzIHJlYWxseSBkZWZpbmVkIGV0Yy5cbiAqICAgIGhlbHBlci5vdmVycmlkZVN0YXRlV2l0aG91dFRyaWdnZXJpbmdDaGFuZ2VFdmVudChldmVudC5zdGF0ZSkuc2VhcmNoKClcbiAqICB9XG4gKiBAY2hhaW5hYmxlXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLm92ZXJyaWRlU3RhdGVXaXRob3V0VHJpZ2dlcmluZ0NoYW5nZUV2ZW50ID0gZnVuY3Rpb24obmV3U3RhdGUpIHtcbiAgdGhpcy5zdGF0ZSA9IG5ldyBTZWFyY2hQYXJhbWV0ZXJzKG5ld1N0YXRlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBoYXMgYW55IG51bWVyaWMsIGNvbmp1bmN0aXZlLCBkaXNqdW5jdGl2ZSBvciBoaWVyYXJjaGljYWwgZmlsdGVycy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZVxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgYXR0cmlidXRlIGlzIGZpbHRlcmVkIGJ5IGF0IGxlYXN0IG9uZSB2YWx1ZVxuICogQGV4YW1wbGVcbiAqIC8vIGhhc1JlZmluZW1lbnRzIHdvcmtzIHdpdGggbnVtZXJpYywgY29uanVuY3RpdmUsIGRpc2p1bmN0aXZlIGFuZCBoaWVyYXJjaGljYWwgZmlsdGVyc1xuICogaGVscGVyLmhhc1JlZmluZW1lbnRzKCdwcmljZScpOyAvLyBmYWxzZVxuICogaGVscGVyLmFkZE51bWVyaWNSZWZpbmVtZW50KCdwcmljZScsICc+JywgMTAwKTtcbiAqIGhlbHBlci5oYXNSZWZpbmVtZW50cygncHJpY2UnKTsgLy8gdHJ1ZVxuICpcbiAqIGhlbHBlci5oYXNSZWZpbmVtZW50cygnY29sb3InKTsgLy8gZmFsc2VcbiAqIGhlbHBlci5hZGRGYWNldFJlZmluZW1lbnQoJ2NvbG9yJywgJ2JsdWUnKTtcbiAqIGhlbHBlci5oYXNSZWZpbmVtZW50cygnY29sb3InKTsgLy8gdHJ1ZVxuICpcbiAqIGhlbHBlci5oYXNSZWZpbmVtZW50cygnbWF0ZXJpYWwnKTsgLy8gZmFsc2VcbiAqIGhlbHBlci5hZGREaXNqdW5jdGl2ZUZhY2V0UmVmaW5lbWVudCgnbWF0ZXJpYWwnLCAncGxhc3RpYycpO1xuICogaGVscGVyLmhhc1JlZmluZW1lbnRzKCdtYXRlcmlhbCcpOyAvLyB0cnVlXG4gKlxuICogaGVscGVyLmhhc1JlZmluZW1lbnRzKCdjYXRlZ29yaWVzJyk7IC8vIGZhbHNlXG4gKiBoZWxwZXIudG9nZ2xlRmFjZXRSZWZpbmVtZW50KCdjYXRlZ29yaWVzJywgJ2tpdGNoZW4gPiBrbmlmZScpO1xuICogaGVscGVyLmhhc1JlZmluZW1lbnRzKCdjYXRlZ29yaWVzJyk7IC8vIHRydWVcbiAqXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmhhc1JlZmluZW1lbnRzID0gZnVuY3Rpb24oYXR0cmlidXRlKSB7XG4gIGlmIChvYmplY3RIYXNLZXlzKHRoaXMuc3RhdGUuZ2V0TnVtZXJpY1JlZmluZW1lbnRzKGF0dHJpYnV0ZSkpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5pc0Nvbmp1bmN0aXZlRmFjZXQoYXR0cmlidXRlKSkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmlzRmFjZXRSZWZpbmVkKGF0dHJpYnV0ZSk7XG4gIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5pc0Rpc2p1bmN0aXZlRmFjZXQoYXR0cmlidXRlKSkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmlzRGlzanVuY3RpdmVGYWNldFJlZmluZWQoYXR0cmlidXRlKTtcbiAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmlzSGllcmFyY2hpY2FsRmFjZXQoYXR0cmlidXRlKSkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmlzSGllcmFyY2hpY2FsRmFjZXRSZWZpbmVkKGF0dHJpYnV0ZSk7XG4gIH1cblxuICAvLyB0aGVyZSdzIGN1cnJlbnRseSBubyB3YXkgdG8ga25vdyB0aGF0IHRoZSB1c2VyIGRpZCBjYWxsIGBhZGROdW1lcmljUmVmaW5lbWVudGAgYXQgc29tZSBwb2ludFxuICAvLyB0aHVzIHdlIGNhbm5vdCBkaXN0aW5ndWlzaCBpZiB0aGVyZSBvbmNlIHdhcyBhIG51bWVyaWMgcmVmaW5lbWVudCB0aGF0IHdhcyBjbGVhcmVkXG4gIC8vIHNvIHdlIHdpbGwgcmV0dXJuIGZhbHNlIGluIGV2ZXJ5IG90aGVyIHNpdHVhdGlvbnMgdG8gYmUgY29uc2lzdGVudFxuICAvLyB3aGlsZSB3aGF0IHdlIHNob3VsZCBkbyBoZXJlIGlzIHRocm93IGJlY2F1c2Ugd2UgZGlkIG5vdCBmaW5kIHRoZSBhdHRyaWJ1dGUgaW4gYW55IHR5cGVcbiAgLy8gb2YgcmVmaW5lbWVudFxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGEgdmFsdWUgaXMgZXhjbHVkZWQgZm9yIGEgc3BlY2lmaWMgZmFjZXRlZCBhdHRyaWJ1dGUuIElmIHRoZSB2YWx1ZVxuICogaXMgb21pdHRlZCB0aGVuIHRoZSBmdW5jdGlvbiBjaGVja3MgaWYgdGhlcmUgaXMgYW55IGV4Y2x1ZGluZyByZWZpbmVtZW50cy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICBmYWNldCBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgZm9yIHVzZWQgZm9yIGZhY2V0aW5nXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlLiBJZiBwYXNzZWQgd2lsbCB0ZXN0IHRoYXQgdGhpcyB2YWx1ZVxuICAgKiBpcyBmaWx0ZXJpbmcgdGhlIGdpdmVuIGZhY2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiByZWZpbmVkXG4gKiBAZXhhbXBsZVxuICogaGVscGVyLmlzRXhjbHVkZVJlZmluZWQoJ2NvbG9yJyk7IC8vIGZhbHNlXG4gKiBoZWxwZXIuaXNFeGNsdWRlUmVmaW5lZCgnY29sb3InLCAnYmx1ZScpIC8vIGZhbHNlXG4gKiBoZWxwZXIuaXNFeGNsdWRlUmVmaW5lZCgnY29sb3InLCAncmVkJykgLy8gZmFsc2VcbiAqXG4gKiBoZWxwZXIuYWRkRmFjZXRFeGNsdXNpb24oJ2NvbG9yJywgJ3JlZCcpO1xuICpcbiAqIGhlbHBlci5pc0V4Y2x1ZGVSZWZpbmVkKCdjb2xvcicpOyAvLyB0cnVlXG4gKiBoZWxwZXIuaXNFeGNsdWRlUmVmaW5lZCgnY29sb3InLCAnYmx1ZScpIC8vIGZhbHNlXG4gKiBoZWxwZXIuaXNFeGNsdWRlUmVmaW5lZCgnY29sb3InLCAncmVkJykgLy8gdHJ1ZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5pc0V4Y2x1ZGVkID0gZnVuY3Rpb24oZmFjZXQsIHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLnN0YXRlLmlzRXhjbHVkZVJlZmluZWQoZmFjZXQsIHZhbHVlKTtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgc2luY2UgMi40LjAsIHNlZSB7QGxpbmsgQWxnb2xpYVNlYXJjaEhlbHBlciNoYXNSZWZpbmVtZW50c31cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuaXNEaXNqdW5jdGl2ZVJlZmluZWQgPSBmdW5jdGlvbihmYWNldCwgdmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMuc3RhdGUuaXNEaXNqdW5jdGl2ZUZhY2V0UmVmaW5lZChmYWNldCwgdmFsdWUpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgc3RyaW5nIGlzIGEgY3VycmVudGx5IGZpbHRlcmluZyB0YWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIHRhZyB0byBjaGVja1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuaGFzVGFnID0gZnVuY3Rpb24odGFnKSB7XG4gIHJldHVybiB0aGlzLnN0YXRlLmlzVGFnUmVmaW5lZCh0YWcpO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBzaW5jZSAyLjQuMCwgc2VlIHtAbGluayBBbGdvbGlhU2VhcmNoSGVscGVyI2hhc1RhZ31cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuaXNUYWdSZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmhhc1RhZ1JlZmluZW1lbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5cbi8qKlxuICogR2V0IHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50bHkgdXNlZCBpbmRleC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEBleGFtcGxlXG4gKiBoZWxwZXIuc2V0SW5kZXgoJ2hpZ2hlc3RQcmljZV9wcm9kdWN0cycpLmdldEluZGV4KCk7XG4gKiAvLyByZXR1cm5zICdoaWdoZXN0UHJpY2VfcHJvZHVjdHMnXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnN0YXRlLmluZGV4O1xufTtcblxuZnVuY3Rpb24gZ2V0Q3VycmVudFBhZ2UoKSB7XG4gIHJldHVybiB0aGlzLnN0YXRlLnBhZ2U7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcGFnZVxuICogQGRlcHJlY2F0ZWRcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGN1cnJlbnQgcGFnZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5nZXRDdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlO1xuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBwYWdlXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGN1cnJlbnQgcGFnZVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5nZXRQYWdlID0gZ2V0Q3VycmVudFBhZ2U7XG5cbi8qKlxuICogR2V0IGFsbCB0aGUgdGFncyBjdXJyZW50bHkgc2V0IHRvIGZpbHRlcnMgdGhlIHJlc3VsdHMuXG4gKlxuICogQHJldHVybiB7c3RyaW5nW119IFRoZSBsaXN0IG9mIHRhZ3MgY3VycmVudGx5IHNldC5cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuZ2V0VGFncyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5zdGF0ZS50YWdSZWZpbmVtZW50cztcbn07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIHJlZmluZW1lbnRzIGZvciBhIGdpdmVuIGF0dHJpYnV0ZS4gVGhpcyBtZXRob2Qgd29ya3Mgd2l0aFxuICogY29uanVuY3RpdmUsIGRpc2p1bmN0aXZlLCBleGNsdWRpbmcgYW5kIG51bWVyaWNhbCBmaWx0ZXJzLlxuICpcbiAqIFNlZSBhbHNvIFNlYXJjaFJlc3VsdHMjZ2V0UmVmaW5lbWVudHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmFjZXROYW1lIGF0dHJpYnV0ZSBuYW1lIHVzZWQgZm9yIGZhY2V0aW5nXG4gKiBAcmV0dXJuIHtBcnJheS48RmFjZXRSZWZpbmVtZW50fE51bWVyaWNSZWZpbmVtZW50Pn0gQWxsIFJlZmluZW1lbnQgYXJlIG9iamVjdHMgdGhhdCBjb250YWluIGEgdmFsdWUsIGFuZFxuICogYSB0eXBlLiBOdW1lcmljIGFsc28gY29udGFpbnMgYW4gb3BlcmF0b3IuXG4gKiBAZXhhbXBsZVxuICogaGVscGVyLmFkZE51bWVyaWNSZWZpbmVtZW50KCdwcmljZScsICc+JywgMTAwKTtcbiAqIGhlbHBlci5nZXRSZWZpbmVtZW50cygncHJpY2UnKTtcbiAqIC8vIFtcbiAqIC8vICAge1xuICogLy8gICAgIFwidmFsdWVcIjogW1xuICogLy8gICAgICAgMTAwXG4gKiAvLyAgICAgXSxcbiAqIC8vICAgICBcIm9wZXJhdG9yXCI6IFwiPlwiLFxuICogLy8gICAgIFwidHlwZVwiOiBcIm51bWVyaWNcIlxuICogLy8gICB9XG4gKiAvLyBdXG4gKiBAZXhhbXBsZVxuICogaGVscGVyLmFkZEZhY2V0UmVmaW5lbWVudCgnY29sb3InLCAnYmx1ZScpO1xuICogaGVscGVyLmFkZEZhY2V0RXhjbHVzaW9uKCdjb2xvcicsICdyZWQnKTtcbiAqIGhlbHBlci5nZXRSZWZpbmVtZW50cygnY29sb3InKTtcbiAqIC8vIFtcbiAqIC8vICAge1xuICogLy8gICAgIFwidmFsdWVcIjogXCJibHVlXCIsXG4gKiAvLyAgICAgXCJ0eXBlXCI6IFwiY29uanVuY3RpdmVcIlxuICogLy8gICB9LFxuICogLy8gICB7XG4gKiAvLyAgICAgXCJ2YWx1ZVwiOiBcInJlZFwiLFxuICogLy8gICAgIFwidHlwZVwiOiBcImV4Y2x1ZGVcIlxuICogLy8gICB9XG4gKiAvLyBdXG4gKiBAZXhhbXBsZVxuICogaGVscGVyLmFkZERpc2p1bmN0aXZlRmFjZXRSZWZpbmVtZW50KCdtYXRlcmlhbCcsICdwbGFzdGljJyk7XG4gKiAvLyBbXG4gKiAvLyAgIHtcbiAqIC8vICAgICBcInZhbHVlXCI6IFwicGxhc3RpY1wiLFxuICogLy8gICAgIFwidHlwZVwiOiBcImRpc2p1bmN0aXZlXCJcbiAqIC8vICAgfVxuICogLy8gXVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5nZXRSZWZpbmVtZW50cyA9IGZ1bmN0aW9uKGZhY2V0TmFtZSkge1xuICB2YXIgcmVmaW5lbWVudHMgPSBbXTtcblxuICBpZiAodGhpcy5zdGF0ZS5pc0Nvbmp1bmN0aXZlRmFjZXQoZmFjZXROYW1lKSkge1xuICAgIHZhciBjb25qUmVmaW5lbWVudHMgPSB0aGlzLnN0YXRlLmdldENvbmp1bmN0aXZlUmVmaW5lbWVudHMoZmFjZXROYW1lKTtcblxuICAgIGNvbmpSZWZpbmVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHIpIHtcbiAgICAgIHJlZmluZW1lbnRzLnB1c2goe1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgdHlwZTogJ2Nvbmp1bmN0aXZlJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgZXhjbHVkZVJlZmluZW1lbnRzID0gdGhpcy5zdGF0ZS5nZXRFeGNsdWRlUmVmaW5lbWVudHMoZmFjZXROYW1lKTtcblxuICAgIGV4Y2x1ZGVSZWZpbmVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHIpIHtcbiAgICAgIHJlZmluZW1lbnRzLnB1c2goe1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgdHlwZTogJ2V4Y2x1ZGUnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmlzRGlzanVuY3RpdmVGYWNldChmYWNldE5hbWUpKSB7XG4gICAgdmFyIGRpc2pSZWZpbmVtZW50cyA9IHRoaXMuc3RhdGUuZ2V0RGlzanVuY3RpdmVSZWZpbmVtZW50cyhmYWNldE5hbWUpO1xuXG4gICAgZGlzalJlZmluZW1lbnRzLmZvckVhY2goZnVuY3Rpb24ocikge1xuICAgICAgcmVmaW5lbWVudHMucHVzaCh7XG4gICAgICAgIHZhbHVlOiByLFxuICAgICAgICB0eXBlOiAnZGlzanVuY3RpdmUnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBudW1lcmljUmVmaW5lbWVudHMgPSB0aGlzLnN0YXRlLmdldE51bWVyaWNSZWZpbmVtZW50cyhmYWNldE5hbWUpO1xuXG4gIE9iamVjdC5rZXlzKG51bWVyaWNSZWZpbmVtZW50cykuZm9yRWFjaChmdW5jdGlvbihvcGVyYXRvcikge1xuICAgIHZhciB2YWx1ZSA9IG51bWVyaWNSZWZpbmVtZW50c1tvcGVyYXRvcl07XG5cbiAgICByZWZpbmVtZW50cy5wdXNoKHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICAgIHR5cGU6ICdudW1lcmljJ1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gcmVmaW5lbWVudHM7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgY3VycmVudCByZWZpbmVtZW50IGZvciB0aGUgKGF0dHJpYnV0ZSwgb3BlcmF0b3IpXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIGF0dHJpYnV0ZSBpbiB0aGUgcmVjb3JkXG4gKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0b3Igb3BlcmF0b3IgYXBwbGllZCBvbiB0aGUgcmVmaW5lZCB2YWx1ZXNcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXJ8bnVtYmVyW10+fSByZWZpbmVkIHZhbHVlc1xuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5nZXROdW1lcmljUmVmaW5lbWVudCA9IGZ1bmN0aW9uKGF0dHJpYnV0ZSwgb3BlcmF0b3IpIHtcbiAgcmV0dXJuIHRoaXMuc3RhdGUuZ2V0TnVtZXJpY1JlZmluZW1lbnQoYXR0cmlidXRlLCBvcGVyYXRvcik7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBicmVhZGNydW1iIGZvciBhIGhpZXJhcmNoaWNhbCBmYWNldCwgYXMgYW4gYXJyYXlcbiAqIEBwYXJhbSAge3N0cmluZ30gZmFjZXROYW1lIEhpZXJhcmNoaWNhbCBmYWNldCBuYW1lXG4gKiBAcmV0dXJuIHthcnJheS48c3RyaW5nPn0gdGhlIHBhdGggYXMgYW4gYXJyYXkgb2Ygc3RyaW5nXG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmdldEhpZXJhcmNoaWNhbEZhY2V0QnJlYWRjcnVtYiA9IGZ1bmN0aW9uKGZhY2V0TmFtZSkge1xuICByZXR1cm4gdGhpcy5zdGF0ZS5nZXRIaWVyYXJjaGljYWxGYWNldEJyZWFkY3J1bWIoZmFjZXROYW1lKTtcbn07XG5cbi8vIC8vLy8vLy8vLy8vIFBSSVZBVEVcblxuLyoqXG4gKiBQZXJmb3JtIHRoZSB1bmRlcmx5aW5nIHF1ZXJpZXNcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9XG4gKiBAZmlyZXMgc2VhcmNoXG4gKiBAZmlyZXMgcmVzdWx0XG4gKiBAZmlyZXMgZXJyb3JcbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuX3NlYXJjaCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgdmFyIHN0YXRlcyA9IFtdO1xuICB2YXIgbWFpblF1ZXJpZXMgPSBbXTtcblxuICBpZiAoIW9wdGlvbnMub25seVdpdGhEZXJpdmVkSGVscGVycykge1xuICAgIG1haW5RdWVyaWVzID0gcmVxdWVzdEJ1aWxkZXIuX2dldFF1ZXJpZXMoc3RhdGUuaW5kZXgsIHN0YXRlKTtcblxuICAgIHN0YXRlcy5wdXNoKHtcbiAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgIHF1ZXJpZXNDb3VudDogbWFpblF1ZXJpZXMubGVuZ3RoLFxuICAgICAgaGVscGVyOiB0aGlzXG4gICAgfSk7XG5cbiAgICB0aGlzLmVtaXQoJ3NlYXJjaCcsIHtcbiAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgIHJlc3VsdHM6IHRoaXMubGFzdFJlc3VsdHNcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBkZXJpdmVkUXVlcmllcyA9IHRoaXMuZGVyaXZlZEhlbHBlcnMubWFwKGZ1bmN0aW9uKGRlcml2ZWRIZWxwZXIpIHtcbiAgICB2YXIgZGVyaXZlZFN0YXRlID0gZGVyaXZlZEhlbHBlci5nZXRNb2RpZmllZFN0YXRlKHN0YXRlKTtcbiAgICB2YXIgZGVyaXZlZFN0YXRlUXVlcmllcyA9IHJlcXVlc3RCdWlsZGVyLl9nZXRRdWVyaWVzKGRlcml2ZWRTdGF0ZS5pbmRleCwgZGVyaXZlZFN0YXRlKTtcblxuICAgIHN0YXRlcy5wdXNoKHtcbiAgICAgIHN0YXRlOiBkZXJpdmVkU3RhdGUsXG4gICAgICBxdWVyaWVzQ291bnQ6IGRlcml2ZWRTdGF0ZVF1ZXJpZXMubGVuZ3RoLFxuICAgICAgaGVscGVyOiBkZXJpdmVkSGVscGVyXG4gICAgfSk7XG5cbiAgICBkZXJpdmVkSGVscGVyLmVtaXQoJ3NlYXJjaCcsIHtcbiAgICAgIHN0YXRlOiBkZXJpdmVkU3RhdGUsXG4gICAgICByZXN1bHRzOiBkZXJpdmVkSGVscGVyLmxhc3RSZXN1bHRzXG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVyaXZlZFN0YXRlUXVlcmllcztcbiAgfSk7XG5cbiAgdmFyIHF1ZXJpZXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KG1haW5RdWVyaWVzLCBkZXJpdmVkUXVlcmllcyk7XG4gIHZhciBxdWVyeUlkID0gdGhpcy5fcXVlcnlJZCsrO1xuXG4gIHRoaXMuX2N1cnJlbnROYlF1ZXJpZXMrKztcblxuICB0cnkge1xuICAgIHRoaXMuY2xpZW50LnNlYXJjaChxdWVyaWVzKVxuICAgICAgLnRoZW4odGhpcy5fZGlzcGF0Y2hBbGdvbGlhUmVzcG9uc2UuYmluZCh0aGlzLCBzdGF0ZXMsIHF1ZXJ5SWQpKVxuICAgICAgLmNhdGNoKHRoaXMuX2Rpc3BhdGNoQWxnb2xpYUVycm9yLmJpbmQodGhpcywgcXVlcnlJZCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIElmIHdlIHJlYWNoIHRoaXMgcGFydCwgd2UncmUgaW4gYW4gaW50ZXJuYWwgZXJyb3Igc3RhdGVcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgZXJyb3I6IGVycm9yXG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhbnNmb3JtIHRoZSByZXNwb25zZXMgYXMgc2VudCBieSB0aGUgc2VydmVyIGFuZCB0cmFuc2Zvcm0gdGhlbSBpbnRvIGEgdXNlclxuICogdXNhYmxlIG9iamVjdCB0aGF0IG1lcmdlIHRoZSByZXN1bHRzIG9mIGFsbCB0aGUgYmF0Y2ggcmVxdWVzdHMuIEl0IHdpbGwgZGlzcGF0Y2hcbiAqIG92ZXIgdGhlIGRpZmZlcmVudCBoZWxwZXIgKyBkZXJpdmVkIGhlbHBlcnMgKHdoZW4gdGhlcmUgYXJlIHNvbWUpLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7YXJyYXkuPHtTZWFyY2hQYXJhbWV0ZXJzLCBBbGdvbGlhUXVlcmllcywgQWxnb2xpYVNlYXJjaEhlbHBlcn0+fVxuICogIHN0YXRlIHN0YXRlIHVzZWQgZm9yIHRvIGdlbmVyYXRlIHRoZSByZXF1ZXN0XG4gKiBAcGFyYW0ge251bWJlcn0gcXVlcnlJZCBpZCBvZiB0aGUgY3VycmVudCByZXF1ZXN0XG4gKiBAcGFyYW0ge29iamVjdH0gY29udGVudCBjb250ZW50IG9mIHRoZSByZXNwb25zZVxuICogQHJldHVybiB7dW5kZWZpbmVkfVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5fZGlzcGF0Y2hBbGdvbGlhUmVzcG9uc2UgPSBmdW5jdGlvbihzdGF0ZXMsIHF1ZXJ5SWQsIGNvbnRlbnQpIHtcbiAgLy8gRklYTUUgcmVtb3ZlIHRoZSBudW1iZXIgb2Ygb3V0ZGF0ZWQgcXVlcmllcyBkaXNjYXJkZWQgaW5zdGVhZCBvZiBqdXN0IG9uZVxuXG4gIGlmIChxdWVyeUlkIDwgdGhpcy5fbGFzdFF1ZXJ5SWRSZWNlaXZlZCkge1xuICAgIC8vIE91dGRhdGVkIGFuc3dlclxuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuX2N1cnJlbnROYlF1ZXJpZXMgLT0gKHF1ZXJ5SWQgLSB0aGlzLl9sYXN0UXVlcnlJZFJlY2VpdmVkKTtcbiAgdGhpcy5fbGFzdFF1ZXJ5SWRSZWNlaXZlZCA9IHF1ZXJ5SWQ7XG5cbiAgaWYgKHRoaXMuX2N1cnJlbnROYlF1ZXJpZXMgPT09IDApIHRoaXMuZW1pdCgnc2VhcmNoUXVldWVFbXB0eScpO1xuXG4gIHZhciByZXN1bHRzID0gY29udGVudC5yZXN1bHRzLnNsaWNlKCk7XG5cbiAgc3RhdGVzLmZvckVhY2goZnVuY3Rpb24ocykge1xuICAgIHZhciBzdGF0ZSA9IHMuc3RhdGU7XG4gICAgdmFyIHF1ZXJpZXNDb3VudCA9IHMucXVlcmllc0NvdW50O1xuICAgIHZhciBoZWxwZXIgPSBzLmhlbHBlcjtcbiAgICB2YXIgc3BlY2lmaWNSZXN1bHRzID0gcmVzdWx0cy5zcGxpY2UoMCwgcXVlcmllc0NvdW50KTtcblxuICAgIHZhciBmb3JtYXR0ZWRSZXNwb25zZSA9IGhlbHBlci5sYXN0UmVzdWx0cyA9IG5ldyBTZWFyY2hSZXN1bHRzKHN0YXRlLCBzcGVjaWZpY1Jlc3VsdHMpO1xuXG4gICAgaGVscGVyLmVtaXQoJ3Jlc3VsdCcsIHtcbiAgICAgIHJlc3VsdHM6IGZvcm1hdHRlZFJlc3BvbnNlLFxuICAgICAgc3RhdGU6IHN0YXRlXG4gICAgfSk7XG4gIH0pO1xufTtcblxuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuX2Rpc3BhdGNoQWxnb2xpYUVycm9yID0gZnVuY3Rpb24ocXVlcnlJZCwgZXJyb3IpIHtcbiAgaWYgKHF1ZXJ5SWQgPCB0aGlzLl9sYXN0UXVlcnlJZFJlY2VpdmVkKSB7XG4gICAgLy8gT3V0ZGF0ZWQgYW5zd2VyXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fY3VycmVudE5iUXVlcmllcyAtPSBxdWVyeUlkIC0gdGhpcy5fbGFzdFF1ZXJ5SWRSZWNlaXZlZDtcbiAgdGhpcy5fbGFzdFF1ZXJ5SWRSZWNlaXZlZCA9IHF1ZXJ5SWQ7XG5cbiAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICBlcnJvcjogZXJyb3JcbiAgfSk7XG5cbiAgaWYgKHRoaXMuX2N1cnJlbnROYlF1ZXJpZXMgPT09IDApIHRoaXMuZW1pdCgnc2VhcmNoUXVldWVFbXB0eScpO1xufTtcblxuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuY29udGFpbnNSZWZpbmVtZW50ID0gZnVuY3Rpb24ocXVlcnksIGZhY2V0RmlsdGVycywgbnVtZXJpY0ZpbHRlcnMsIHRhZ0ZpbHRlcnMpIHtcbiAgcmV0dXJuIHF1ZXJ5IHx8XG4gICAgZmFjZXRGaWx0ZXJzLmxlbmd0aCAhPT0gMCB8fFxuICAgIG51bWVyaWNGaWx0ZXJzLmxlbmd0aCAhPT0gMCB8fFxuICAgIHRhZ0ZpbHRlcnMubGVuZ3RoICE9PSAwO1xufTtcblxuLyoqXG4gKiBUZXN0IGlmIHRoZXJlIGFyZSBzb21lIGRpc2p1bmN0aXZlIHJlZmluZW1lbnRzIG9uIHRoZSBmYWNldFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBmYWNldCB0aGUgYXR0cmlidXRlIHRvIHRlc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLl9oYXNEaXNqdW5jdGl2ZVJlZmluZW1lbnRzID0gZnVuY3Rpb24oZmFjZXQpIHtcbiAgcmV0dXJuIHRoaXMuc3RhdGUuZGlzanVuY3RpdmVSZWZpbmVtZW50c1tmYWNldF0gJiZcbiAgICB0aGlzLnN0YXRlLmRpc2p1bmN0aXZlUmVmaW5lbWVudHNbZmFjZXRdLmxlbmd0aCA+IDA7XG59O1xuXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5fY2hhbmdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgdmFyIHN0YXRlID0gZXZlbnQuc3RhdGU7XG4gIHZhciBpc1BhZ2VSZXNldCA9IGV2ZW50LmlzUGFnZVJlc2V0O1xuXG4gIGlmIChzdGF0ZSAhPT0gdGhpcy5zdGF0ZSkge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblxuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywge1xuICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICByZXN1bHRzOiB0aGlzLmxhc3RSZXN1bHRzLFxuICAgICAgaXNQYWdlUmVzZXQ6IGlzUGFnZVJlc2V0XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBjYWNoZSBvZiB0aGUgdW5kZXJseWluZyBBbGdvbGlhIGNsaWVudC5cbiAqIEByZXR1cm4ge0FsZ29saWFTZWFyY2hIZWxwZXJ9XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmNsZWFyQ2FjaGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jbGllbnQuY2xlYXJDYWNoZSAmJiB0aGlzLmNsaWVudC5jbGVhckNhY2hlKCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBpbnRlcm5hbCBjbGllbnQgaW5zdGFuY2UuIElmIHRoZSByZWZlcmVuY2Ugb2YgdGhlIGNsaWVudHNcbiAqIGFyZSBlcXVhbCB0aGVuIG5vIHVwZGF0ZSBpcyBhY3R1YWxseSBkb25lLlxuICogQHBhcmFtICB7QWxnb2xpYVNlYXJjaH0gbmV3Q2xpZW50IGFuIEFsZ29saWFTZWFyY2ggY2xpZW50XG4gKiBAcmV0dXJuIHtBbGdvbGlhU2VhcmNoSGVscGVyfVxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5zZXRDbGllbnQgPSBmdW5jdGlvbihuZXdDbGllbnQpIHtcbiAgaWYgKHRoaXMuY2xpZW50ID09PSBuZXdDbGllbnQpIHJldHVybiB0aGlzO1xuXG4gIGlmICh0eXBlb2YgbmV3Q2xpZW50LmFkZEFsZ29saWFBZ2VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG5ld0NsaWVudC5hZGRBbGdvbGlhQWdlbnQoJ0pTIEhlbHBlciAoJyArIHZlcnNpb24gKyAnKScpO1xuICB9XG4gIHRoaXMuY2xpZW50ID0gbmV3Q2xpZW50O1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBpbnN0YW5jZSBvZiB0aGUgY3VycmVudGx5IHVzZWQgY2xpZW50LlxuICogQHJldHVybiB7QWxnb2xpYVNlYXJjaH1cbiAqL1xuQWxnb2xpYVNlYXJjaEhlbHBlci5wcm90b3R5cGUuZ2V0Q2xpZW50ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmNsaWVudDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBkZXJpdmVkIGluc3RhbmNlIG9mIHRoZSBIZWxwZXIuIEEgZGVyaXZlZCBoZWxwZXJcbiAqIGlzIGEgd2F5IHRvIHJlcXVlc3Qgb3RoZXIgaW5kaWNlcyBzeW5jaHJvbmlzZWQgd2l0aCB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgbWFpbiBIZWxwZXIuIFRoaXMgbWVjaGFuaXNtIHVzZXMgdGhlIG11bHRpcXVlcmllcyBmZWF0dXJlXG4gKiBvZiBBbGdvbGlhIHRvIGFnZ3JlZ2F0ZSBhbGwgdGhlIHJlcXVlc3RzIGluIGEgc2luZ2xlIG5ldHdvcmsgY2FsbC5cbiAqXG4gKiBUaGlzIG1ldGhvZCB0YWtlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byBjcmVhdGUgYSBuZXcgU2VhcmNoUGFyYW1ldGVyXG4gKiB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgcmVxdWVzdHMgdG8gQWxnb2xpYS4gVGhvc2UgbmV3IHJlcXVlc3RzXG4gKiBhcmUgY3JlYXRlZCBqdXN0IGJlZm9yZSB0aGUgYHNlYXJjaGAgZXZlbnQuIFRoZSBzaWduYXR1cmUgb2YgdGhlIGZ1bmN0aW9uXG4gKiBpcyBgU2VhcmNoUGFyYW1ldGVycyAtPiBTZWFyY2hQYXJhbWV0ZXJzYC5cbiAqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IERlcml2ZWRIZWxwZXIgd2hpY2ggaXMgYW4gRXZlbnRFbWl0dGVyXG4gKiB0aGF0IGZpcmVzIHRoZSBzYW1lIGBzZWFyY2hgLCBgcmVzdWx0YCBhbmQgYGVycm9yYCBldmVudHMuIFRob3NlXG4gKiBldmVudHMsIGhvd2V2ZXIsIHdpbGwgcmVjZWl2ZSBkYXRhIHNwZWNpZmljIHRvIHRoaXMgRGVyaXZlZEhlbHBlclxuICogYW5kIHRoZSBTZWFyY2hQYXJhbWV0ZXJzIHRoYXQgaXMgcmV0dXJuZWQgYnkgdGhlIGNhbGwgb2YgdGhlXG4gKiBwYXJhbWV0ZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiBTZWFyY2hQYXJhbWV0ZXJzIC0+IFNlYXJjaFBhcmFtZXRlcnNcbiAqIEByZXR1cm4ge0Rlcml2ZWRIZWxwZXJ9XG4gKi9cbkFsZ29saWFTZWFyY2hIZWxwZXIucHJvdG90eXBlLmRlcml2ZSA9IGZ1bmN0aW9uKGZuKSB7XG4gIHZhciBkZXJpdmVkSGVscGVyID0gbmV3IERlcml2ZWRIZWxwZXIodGhpcywgZm4pO1xuICB0aGlzLmRlcml2ZWRIZWxwZXJzLnB1c2goZGVyaXZlZEhlbHBlcik7XG4gIHJldHVybiBkZXJpdmVkSGVscGVyO1xufTtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBkZXRhY2hlcyBhIGRlcml2ZWQgSGVscGVyIGZyb20gdGhlIG1haW4gb25lLiBQcmVmZXIgdXNpbmcgdGhlIG9uZSBmcm9tIHRoZVxuICogZGVyaXZlZCBoZWxwZXIgaXRzZWxmLCB0byByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVycyB0b28uXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybiB7dW5kZWZpbmVkfVxuICogQHRocm93cyBFcnJvclxuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5kZXRhY2hEZXJpdmVkSGVscGVyID0gZnVuY3Rpb24oZGVyaXZlZEhlbHBlcikge1xuICB2YXIgcG9zID0gdGhpcy5kZXJpdmVkSGVscGVycy5pbmRleE9mKGRlcml2ZWRIZWxwZXIpO1xuICBpZiAocG9zID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdEZXJpdmVkIGhlbHBlciBhbHJlYWR5IGRldGFjaGVkJyk7XG4gIHRoaXMuZGVyaXZlZEhlbHBlcnMuc3BsaWNlKHBvcywgMSk7XG59O1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBjdXJyZW50bHkgYXQgbGVhc3Qgb25lIG9uLWdvaW5nIHNlYXJjaC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlcmUgaXMgYSBzZWFyY2ggcGVuZGluZ1xuICovXG5BbGdvbGlhU2VhcmNoSGVscGVyLnByb3RvdHlwZS5oYXNQZW5kaW5nUmVxdWVzdHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2N1cnJlbnROYlF1ZXJpZXMgPiAwO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiBBbGdvbGlhU2VhcmNoSGVscGVyLk51bWVyaWNSZWZpbmVtZW50XG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtudW1iZXJbXX0gdmFsdWUgdGhlIG51bWJlcnMgdGhhdCBhcmUgdXNlZCBmb3IgZmlsdGVyaW5nIHRoaXMgYXR0cmlidXRlIHdpdGhcbiAqIHRoZSBvcGVyYXRvciBzcGVjaWZpZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gb3BlcmF0b3IgdGhlIGZhY2V0aW5nIGRhdGE6IHZhbHVlLCBudW1iZXIgb2YgZW50cmllc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgd2lsbCBiZSAnbnVtZXJpYydcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIEFsZ29saWFTZWFyY2hIZWxwZXIuRmFjZXRSZWZpbmVtZW50XG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHZhbHVlIHRoZSBzdHJpbmcgdXNlIHRvIGZpbHRlciB0aGUgYXR0cmlidXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSB0aGUgdHlwZSBvZiBmaWx0ZXI6ICdjb25qdW5jdGl2ZScsICdkaXNqdW5jdGl2ZScsICdleGNsdWRlJ1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gQWxnb2xpYVNlYXJjaEhlbHBlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21wYWN0KGFycmF5KSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShhcnJheSkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICByZXR1cm4gYXJyYXkuZmlsdGVyKEJvb2xlYW4pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gTk9URTogdGhpcyBiZWhhdmVzIGxpa2UgbG9kYXNoL2RlZmF1bHRzLCBidXQgZG9lc24ndCBtdXRhdGUgdGhlIHRhcmdldFxuLy8gaXQgYWxzbyBwcmVzZXJ2ZSBrZXlzIG9yZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmF1bHRzUHVyZSgpIHtcbiAgdmFyIHNvdXJjZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gIHJldHVybiBzb3VyY2VzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKGFjYywgc291cmNlKSB7XG4gICAgT2JqZWN0LmtleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZiAoc291cmNlW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoYWNjW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyByZW1vdmUgaWYgYWxyZWFkeSBhZGRlZCwgc28gdGhhdCB3ZSBjYW4gYWRkIGl0IGluIGNvcnJlY3Qgb3JkZXJcbiAgICAgICAgZGVsZXRlIGFjY1trZXldO1xuICAgICAgfVxuICAgICAgYWNjW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFJlcGxhY2VzIGEgbGVhZGluZyAtIHdpdGggXFwtXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHthbnl9IHZhbHVlIHRoZSBmYWNldCB2YWx1ZSB0byByZXBsYWNlXG4gKiBAcmV0dXJucyBhbnlcbiAqL1xuZnVuY3Rpb24gZXNjYXBlRmFjZXRWYWx1ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlO1xuXG4gIHJldHVybiBTdHJpbmcodmFsdWUpLnJlcGxhY2UoL14tLywgJ1xcXFwtJyk7XG59XG5cbi8qKlxuICogUmVwbGFjZXMgYSBsZWFkaW5nIFxcLSB3aXRoIC1cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2FueX0gdmFsdWUgdGhlIGVzY2FwZWQgZmFjZXQgdmFsdWVcbiAqIEByZXR1cm5zIGFueVxuICovXG5mdW5jdGlvbiB1bmVzY2FwZUZhY2V0VmFsdWUodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZTtcblxuICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXlxcXFwtLywgJy0nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGVzY2FwZUZhY2V0VmFsdWU6IGVzY2FwZUZhY2V0VmFsdWUsXG4gIHVuZXNjYXBlRmFjZXRWYWx1ZTogdW5lc2NhcGVGYWNldFZhbHVlXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBATUFKT1IgY2FuIGJlIHJlcGxhY2VkIGJ5IG5hdGl2ZSBBcnJheSNmaW5kIHdoZW4gd2UgY2hhbmdlIHN1cHBvcnRcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZmluZChhcnJheSwgY29tcGFyYXRvcikge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY29tcGFyYXRvcihhcnJheVtpXSkpIHtcbiAgICAgIHJldHVybiBhcnJheVtpXTtcbiAgICB9XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIEBNQUpPUiBjYW4gYmUgcmVwbGFjZWQgYnkgbmF0aXZlIEFycmF5I2ZpbmRJbmRleCB3aGVuIHdlIGNoYW5nZSBzdXBwb3J0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZpbmQoYXJyYXksIGNvbXBhcmF0b3IpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY29tcGFyYXRvcihhcnJheVtpXSkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZmluZCA9IHJlcXVpcmUoJy4vZmluZCcpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSBzb3J0IGZvcm1hdCBmcm9tIHVzZXIgZnJpZW5kbHkgbm90YXRpb24gdG8gbG9kYXNoIGZvcm1hdFxuICogQHBhcmFtIHtzdHJpbmdbXX0gc29ydEJ5IGFycmF5IG9mIHByZWRpY2F0ZSBvZiB0aGUgZm9ybSBcImF0dHJpYnV0ZTpvcmRlclwiXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBbZGVmYXVsdHNdIGFycmF5IG9mIHByZWRpY2F0ZSBvZiB0aGUgZm9ybSBcImF0dHJpYnV0ZTpvcmRlclwiXG4gKiBAcmV0dXJuIHthcnJheS48c3RyaW5nW10+fSBhcnJheSBjb250YWluaW5nIDIgZWxlbWVudHMgOiBhdHRyaWJ1dGVzLCBvcmRlcnNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmb3JtYXRTb3J0KHNvcnRCeSwgZGVmYXVsdHMpIHtcbiAgdmFyIGRlZmF1bHRJbnN0cnVjdGlvbnMgPSAoZGVmYXVsdHMgfHwgW10pLm1hcChmdW5jdGlvbihzb3J0KSB7XG4gICAgcmV0dXJuIHNvcnQuc3BsaXQoJzonKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHNvcnRCeS5yZWR1Y2UoXG4gICAgZnVuY3Rpb24gcHJlcGFyZVByZWRpY2F0ZShvdXQsIHNvcnQpIHtcbiAgICAgIHZhciBzb3J0SW5zdHJ1Y3Rpb24gPSBzb3J0LnNwbGl0KCc6Jyk7XG5cbiAgICAgIHZhciBtYXRjaGluZ0RlZmF1bHQgPSBmaW5kKGRlZmF1bHRJbnN0cnVjdGlvbnMsIGZ1bmN0aW9uKFxuICAgICAgICBkZWZhdWx0SW5zdHJ1Y3Rpb25cbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdEluc3RydWN0aW9uWzBdID09PSBzb3J0SW5zdHJ1Y3Rpb25bMF07XG4gICAgICB9KTtcblxuICAgICAgaWYgKHNvcnRJbnN0cnVjdGlvbi5sZW5ndGggPiAxIHx8ICFtYXRjaGluZ0RlZmF1bHQpIHtcbiAgICAgICAgb3V0WzBdLnB1c2goc29ydEluc3RydWN0aW9uWzBdKTtcbiAgICAgICAgb3V0WzFdLnB1c2goc29ydEluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgIH1cblxuICAgICAgb3V0WzBdLnB1c2gobWF0Y2hpbmdEZWZhdWx0WzBdKTtcbiAgICAgIG91dFsxXS5wdXNoKG1hdGNoaW5nRGVmYXVsdFsxXSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0sXG4gICAgW1tdLCBbXV1cbiAgKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogY3RvcixcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluaGVyaXRzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBpbnRlcnNlY3Rpb24oYXJyMSwgYXJyMikge1xuICByZXR1cm4gYXJyMS5maWx0ZXIoZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGFycjIuaW5kZXhPZih2YWx1ZSkgPiAtMSAmJlxuICAgICAgYXJyMS5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXggLyogc2tpcHMgZHVwbGljYXRlcyAqL1xuICAgICk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGludGVyc2VjdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gY2xvbmUodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gX21lcmdlKEFycmF5LmlzQXJyYXkodmFsdWUpID8gW10gOiB7fSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3RPckFycmF5T3JGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8XG4gICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSdcbiAgKTtcbn1cblxuZnVuY3Rpb24gX21lcmdlKHRhcmdldCwgc291cmNlKSB7XG4gIGlmICh0YXJnZXQgPT09IHNvdXJjZSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgaWYgKFxuICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkgfHxcbiAgICAgIGtleSA9PT0gJ19fcHJvdG9fXydcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBzb3VyY2VWYWwgPSBzb3VyY2Vba2V5XTtcbiAgICB2YXIgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV07XG5cbiAgICBpZiAodHlwZW9mIHRhcmdldFZhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHNvdXJjZVZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGlzT2JqZWN0T3JBcnJheU9yRnVuY3Rpb24odGFyZ2V0VmFsKSAmJlxuICAgICAgaXNPYmplY3RPckFycmF5T3JGdW5jdGlvbihzb3VyY2VWYWwpXG4gICAgKSB7XG4gICAgICB0YXJnZXRba2V5XSA9IF9tZXJnZSh0YXJnZXRWYWwsIHNvdXJjZVZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldFtrZXldID0gY2xvbmUoc291cmNlVmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIE9iamVjdC5hc3NpZ24sIGJ1dCByZWN1cnNpdmVseSBtZXJnZXMgb3duIGFuZCBpbmhlcml0ZWRcbiAqIGVudW1lcmFibGUga2V5ZWQgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0cyBpbnRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKlxuICogTk9URTogdGhpcyBiZWhhdmVzIGxpa2UgbG9kYXNoL21lcmdlLCBidXQ6XG4gKiAtIGRvZXMgbXV0YXRlIGZ1bmN0aW9ucyBpZiB0aGV5IGFyZSBhIHNvdXJjZVxuICogLSB0cmVhdHMgbm9uLXBsYWluIG9iamVjdHMgYXMgcGxhaW5cbiAqIC0gZG9lcyBub3Qgd29yayBmb3IgY2lyY3VsYXIgb2JqZWN0c1xuICogLSB0cmVhdHMgc3BhcnNlIGFycmF5cyBhcyBzcGFyc2VcbiAqIC0gZG9lcyBub3QgY29udmVydCBBcnJheS1saWtlIG9iamVjdHMgKEFyZ3VtZW50cywgTm9kZUxpc3RzLCBldGMuKSB0byBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2UodGFyZ2V0KSB7XG4gIGlmICghaXNPYmplY3RPckFycmF5T3JGdW5jdGlvbih0YXJnZXQpKSB7XG4gICAgdGFyZ2V0ID0ge307XG4gIH1cblxuICBmb3IgKHZhciBpID0gMSwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgaWYgKGlzT2JqZWN0T3JBcnJheU9yRnVuY3Rpb24oc291cmNlKSkge1xuICAgICAgX21lcmdlKHRhcmdldCwgc291cmNlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtZXJnZTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0SGFzS2V5cyhvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0SGFzS2V5cztcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2JhYmVsL2JhYmVsL2Jsb2IvM2FhYWZhZTA1M2ZhNzVmZWJiM2FhNDVkNDViNmYwMDY0NmUzMGJhNC9wYWNrYWdlcy9iYWJlbC1oZWxwZXJzL3NyYy9oZWxwZXJzLmpzI0w2MDQtTDYyMFxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5O1xuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKHZhbHVlLCBvdGhlcikge1xuICBpZiAodmFsdWUgIT09IG90aGVyKSB7XG4gICAgdmFyIHZhbElzRGVmaW5lZCA9IHZhbHVlICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIHZhbElzTnVsbCA9IHZhbHVlID09PSBudWxsO1xuXG4gICAgdmFyIG90aElzRGVmaW5lZCA9IG90aGVyICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIG90aElzTnVsbCA9IG90aGVyID09PSBudWxsO1xuXG4gICAgaWYgKFxuICAgICAgKCFvdGhJc051bGwgJiYgdmFsdWUgPiBvdGhlcikgfHxcbiAgICAgICh2YWxJc051bGwgJiYgb3RoSXNEZWZpbmVkKSB8fFxuICAgICAgIXZhbElzRGVmaW5lZFxuICAgICkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICghdmFsSXNOdWxsICYmIHZhbHVlIDwgb3RoZXIpIHx8XG4gICAgICAob3RoSXNOdWxsICYmIHZhbElzRGVmaW5lZCkgfHxcbiAgICAgICFvdGhJc0RlZmluZWRcbiAgICApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxvYmplY3Q+fSBjb2xsZWN0aW9uIG9iamVjdCB3aXRoIGtleXMgaW4gYXR0cmlidXRlc1xuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBpdGVyYXRlZXMgYXR0cmlidXRlc1xuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBvcmRlcnMgYXNjIHwgZGVzY1xuICovXG5mdW5jdGlvbiBvcmRlckJ5KGNvbGxlY3Rpb24sIGl0ZXJhdGVlcywgb3JkZXJzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShjb2xsZWN0aW9uKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShvcmRlcnMpKSB7XG4gICAgb3JkZXJzID0gW107XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gY29sbGVjdGlvbi5tYXAoZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyaXRlcmlhOiBpdGVyYXRlZXMubWFwKGZ1bmN0aW9uKGl0ZXJhdGVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZVtpdGVyYXRlZV07XG4gICAgICB9KSxcbiAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH07XG4gIH0pO1xuXG4gIHJlc3VsdC5zb3J0KGZ1bmN0aW9uIGNvbXBhcmVyKG9iamVjdCwgb3RoZXIpIHtcbiAgICB2YXIgaW5kZXggPSAtMTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgb2JqZWN0LmNyaXRlcmlhLmxlbmd0aCkge1xuICAgICAgdmFyIHJlcyA9IGNvbXBhcmVBc2NlbmRpbmcob2JqZWN0LmNyaXRlcmlhW2luZGV4XSwgb3RoZXIuY3JpdGVyaWFbaW5kZXhdKTtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgaWYgKGluZGV4ID49IG9yZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlcnNbaW5kZXhdID09PSAnZGVzYycpIHtcbiAgICAgICAgICByZXR1cm4gLXJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoaXMgZW5zdXJlcyBhIHN0YWJsZSBzb3J0IGluIFY4IGFuZCBvdGhlciBlbmdpbmVzLlxuICAgIC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD05MCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIHJldHVybiBvYmplY3QuaW5kZXggLSBvdGhlci5pbmRleDtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdC5tYXAoZnVuY3Rpb24ocmVzKSB7XG4gICAgcmV0dXJuIHJlcy52YWx1ZTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb3JkZXJCeTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gdmFsVG9OdW1iZXIodikge1xuICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHY7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodik7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgIHJldHVybiB2Lm1hcCh2YWxUb051bWJlcik7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB2YWx1ZSBzaG91bGQgYmUgYSBudW1iZXIsIGEgcGFyc2FibGUgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHRob3NlLicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHZhbFRvTnVtYmVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbWVyZ2UgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9tZXJnZScpO1xuXG5mdW5jdGlvbiBzb3J0T2JqZWN0KG9iaikge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgIC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XG4gICAgfSlcbiAgICAucmVkdWNlKGZ1bmN0aW9uKGFjYywgY3Vycikge1xuICAgICAgYWNjW2N1cnJdID0gb2JqW2N1cnJdO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG5cbnZhciByZXF1ZXN0QnVpbGRlciA9IHtcbiAgLyoqXG4gICAqIEdldCBhbGwgdGhlIHF1ZXJpZXMgdG8gc2VuZCB0byB0aGUgY2xpZW50LCB0aG9zZSBxdWVyaWVzIGNhbiB1c2VkIGRpcmVjdGx5XG4gICAqIHdpdGggdGhlIEFsZ29saWEgY2xpZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gVGhlIHF1ZXJpZXNcbiAgICovXG4gIF9nZXRRdWVyaWVzOiBmdW5jdGlvbiBnZXRRdWVyaWVzKGluZGV4LCBzdGF0ZSkge1xuICAgIHZhciBxdWVyaWVzID0gW107XG5cbiAgICAvLyBPbmUgcXVlcnkgZm9yIHRoZSBoaXRzXG4gICAgcXVlcmllcy5wdXNoKHtcbiAgICAgIGluZGV4TmFtZTogaW5kZXgsXG4gICAgICBwYXJhbXM6IHJlcXVlc3RCdWlsZGVyLl9nZXRIaXRzU2VhcmNoUGFyYW1zKHN0YXRlKVxuICAgIH0pO1xuXG4gICAgLy8gT25lIGZvciBlYWNoIGRpc2p1bmN0aXZlIGZhY2V0c1xuICAgIHN0YXRlLmdldFJlZmluZWREaXNqdW5jdGl2ZUZhY2V0cygpLmZvckVhY2goZnVuY3Rpb24ocmVmaW5lZEZhY2V0KSB7XG4gICAgICBxdWVyaWVzLnB1c2goe1xuICAgICAgICBpbmRleE5hbWU6IGluZGV4LFxuICAgICAgICBwYXJhbXM6IHJlcXVlc3RCdWlsZGVyLl9nZXREaXNqdW5jdGl2ZUZhY2V0U2VhcmNoUGFyYW1zKHN0YXRlLCByZWZpbmVkRmFjZXQpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIE1vcmUgdG8gZ2V0IHRoZSBwYXJlbnQgbGV2ZWxzIG9mIHRoZSBoaWVyYXJjaGljYWwgZmFjZXRzIHdoZW4gcmVmaW5lZFxuICAgIHN0YXRlLmdldFJlZmluZWRIaWVyYXJjaGljYWxGYWNldHMoKS5mb3JFYWNoKGZ1bmN0aW9uKHJlZmluZWRGYWNldCkge1xuICAgICAgdmFyIGhpZXJhcmNoaWNhbEZhY2V0ID0gc3RhdGUuZ2V0SGllcmFyY2hpY2FsRmFjZXRCeU5hbWUocmVmaW5lZEZhY2V0KTtcbiAgICAgIHZhciBjdXJyZW50UmVmaW5lbWVudCA9IHN0YXRlLmdldEhpZXJhcmNoaWNhbFJlZmluZW1lbnQocmVmaW5lZEZhY2V0KTtcbiAgICAgIHZhciBzZXBhcmF0b3IgPSBzdGF0ZS5fZ2V0SGllcmFyY2hpY2FsRmFjZXRTZXBhcmF0b3IoaGllcmFyY2hpY2FsRmFjZXQpO1xuXG4gICAgICAvLyBJZiB3ZSBhcmUgZGVlcGVyIHRoYW4gbGV2ZWwgMCAoc3RhcnRpbmcgZnJvbSBgYmVlciA+IElQQWApXG4gICAgICAvLyB3ZSB3YW50IHRvIGdldCBhbGwgcGFyZW50IHZhbHVlc1xuICAgICAgaWYgKGN1cnJlbnRSZWZpbmVtZW50Lmxlbmd0aCA+IDAgJiYgY3VycmVudFJlZmluZW1lbnRbMF0uc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIFdlIGdlbmVyYXRlIGEgbWFwIG9mIHRoZSBmaWx0ZXJzIHdlIHdpbGwgdXNlIGZvciBvdXIgZmFjZXQgdmFsdWVzIHF1ZXJpZXNcbiAgICAgICAgdmFyIGZpbHRlcnNNYXAgPSBjdXJyZW50UmVmaW5lbWVudFswXS5zcGxpdChzZXBhcmF0b3IpLnNsaWNlKDAsIC0xKS5yZWR1Y2UoXG4gICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyc01hcChtYXAsIHNlZ21lbnQsIGxldmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFwLmNvbmNhdCh7XG4gICAgICAgICAgICAgIGF0dHJpYnV0ZTogaGllcmFyY2hpY2FsRmFjZXQuYXR0cmlidXRlc1tsZXZlbF0sXG4gICAgICAgICAgICAgIHZhbHVlOiBsZXZlbCA9PT0gMFxuICAgICAgICAgICAgICAgID8gc2VnbWVudFxuICAgICAgICAgICAgICAgIDogW21hcFttYXAubGVuZ3RoIC0gMV0udmFsdWUsIHNlZ21lbnRdLmpvaW4oc2VwYXJhdG9yKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAsIFtdKTtcblxuICAgICAgICBmaWx0ZXJzTWFwLmZvckVhY2goZnVuY3Rpb24oZmlsdGVyLCBsZXZlbCkge1xuICAgICAgICAgIHZhciBwYXJhbXMgPSByZXF1ZXN0QnVpbGRlci5fZ2V0RGlzanVuY3RpdmVGYWNldFNlYXJjaFBhcmFtcyhcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgZmlsdGVyLmF0dHJpYnV0ZSxcbiAgICAgICAgICAgIGxldmVsID09PSAwXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEtlZXAgZmFjZXQgZmlsdGVycyB1bnJlbGF0ZWQgdG8gY3VycmVudCBoaWVyYXJjaGljYWwgYXR0cmlidXRlc1xuICAgICAgICAgIGZ1bmN0aW9uIGhhc0hpZXJhcmNoaWNhbEZhY2V0RmlsdGVyKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gaGllcmFyY2hpY2FsRmFjZXQuYXR0cmlidXRlcy5zb21lKGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlID09PSB2YWx1ZS5zcGxpdCgnOicpWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGZpbHRlcmVkRmFjZXRGaWx0ZXJzID0gKHBhcmFtcy5mYWNldEZpbHRlcnMgfHwgW10pLnJlZHVjZShmdW5jdGlvbihhY2MsIGZhY2V0RmlsdGVyKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmYWNldEZpbHRlcikpIHtcbiAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gZmFjZXRGaWx0ZXIuZmlsdGVyKGZ1bmN0aW9uKGZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFoYXNIaWVyYXJjaGljYWxGYWNldEZpbHRlcihmaWx0ZXJWYWx1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYWNjLnB1c2goZmlsdGVyZWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmFjZXRGaWx0ZXIgPT09ICdzdHJpbmcnICYmICFoYXNIaWVyYXJjaGljYWxGYWNldEZpbHRlcihmYWNldEZpbHRlcikpIHtcbiAgICAgICAgICAgICAgYWNjLnB1c2goZmFjZXRGaWx0ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgIH0sIFtdKTtcblxuICAgICAgICAgIHZhciBwYXJlbnQgPSBmaWx0ZXJzTWFwW2xldmVsIC0gMV07XG4gICAgICAgICAgaWYgKGxldmVsID4gMCkge1xuICAgICAgICAgICAgcGFyYW1zLmZhY2V0RmlsdGVycyA9IGZpbHRlcmVkRmFjZXRGaWx0ZXJzLmNvbmNhdChwYXJlbnQuYXR0cmlidXRlICsgJzonICsgcGFyZW50LnZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zLmZhY2V0RmlsdGVycyA9IGZpbHRlcmVkRmFjZXRGaWx0ZXJzLmxlbmd0aCA+IDAgPyBmaWx0ZXJlZEZhY2V0RmlsdGVycyA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBxdWVyaWVzLnB1c2goe2luZGV4TmFtZTogaW5kZXgsIHBhcmFtczogcGFyYW1zfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHF1ZXJpZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJ1aWxkIHNlYXJjaCBwYXJhbWV0ZXJzIHVzZWQgdG8gZmV0Y2ggaGl0c1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtvYmplY3QuPHN0cmluZywgYW55Pn1cbiAgICovXG4gIF9nZXRIaXRzU2VhcmNoUGFyYW1zOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgIHZhciBmYWNldHMgPSBzdGF0ZS5mYWNldHNcbiAgICAgIC5jb25jYXQoc3RhdGUuZGlzanVuY3RpdmVGYWNldHMpXG4gICAgICAuY29uY2F0KHJlcXVlc3RCdWlsZGVyLl9nZXRIaXRzSGllcmFyY2hpY2FsRmFjZXRzQXR0cmlidXRlcyhzdGF0ZSkpO1xuXG5cbiAgICB2YXIgZmFjZXRGaWx0ZXJzID0gcmVxdWVzdEJ1aWxkZXIuX2dldEZhY2V0RmlsdGVycyhzdGF0ZSk7XG4gICAgdmFyIG51bWVyaWNGaWx0ZXJzID0gcmVxdWVzdEJ1aWxkZXIuX2dldE51bWVyaWNGaWx0ZXJzKHN0YXRlKTtcbiAgICB2YXIgdGFnRmlsdGVycyA9IHJlcXVlc3RCdWlsZGVyLl9nZXRUYWdGaWx0ZXJzKHN0YXRlKTtcbiAgICB2YXIgYWRkaXRpb25hbFBhcmFtcyA9IHtcbiAgICAgIGZhY2V0czogZmFjZXRzLmluZGV4T2YoJyonKSA+IC0xID8gWycqJ10gOiBmYWNldHMsXG4gICAgICB0YWdGaWx0ZXJzOiB0YWdGaWx0ZXJzXG4gICAgfTtcblxuICAgIGlmIChmYWNldEZpbHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgYWRkaXRpb25hbFBhcmFtcy5mYWNldEZpbHRlcnMgPSBmYWNldEZpbHRlcnM7XG4gICAgfVxuXG4gICAgaWYgKG51bWVyaWNGaWx0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFkZGl0aW9uYWxQYXJhbXMubnVtZXJpY0ZpbHRlcnMgPSBudW1lcmljRmlsdGVycztcbiAgICB9XG5cbiAgICByZXR1cm4gc29ydE9iamVjdChtZXJnZSh7fSwgc3RhdGUuZ2V0UXVlcnlQYXJhbXMoKSwgYWRkaXRpb25hbFBhcmFtcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCdWlsZCBzZWFyY2ggcGFyYW1ldGVycyB1c2VkIHRvIGZldGNoIGEgZGlzanVuY3RpdmUgZmFjZXRcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7c3RyaW5nfSBmYWNldCB0aGUgYXNzb2NpYXRlZCBmYWNldCBuYW1lXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IGhpZXJhcmNoaWNhbFJvb3RMZXZlbCA/PyBGSVhNRVxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqL1xuICBfZ2V0RGlzanVuY3RpdmVGYWNldFNlYXJjaFBhcmFtczogZnVuY3Rpb24oc3RhdGUsIGZhY2V0LCBoaWVyYXJjaGljYWxSb290TGV2ZWwpIHtcbiAgICB2YXIgZmFjZXRGaWx0ZXJzID0gcmVxdWVzdEJ1aWxkZXIuX2dldEZhY2V0RmlsdGVycyhzdGF0ZSwgZmFjZXQsIGhpZXJhcmNoaWNhbFJvb3RMZXZlbCk7XG4gICAgdmFyIG51bWVyaWNGaWx0ZXJzID0gcmVxdWVzdEJ1aWxkZXIuX2dldE51bWVyaWNGaWx0ZXJzKHN0YXRlLCBmYWNldCk7XG4gICAgdmFyIHRhZ0ZpbHRlcnMgPSByZXF1ZXN0QnVpbGRlci5fZ2V0VGFnRmlsdGVycyhzdGF0ZSk7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMgPSB7XG4gICAgICBoaXRzUGVyUGFnZTogMCxcbiAgICAgIHBhZ2U6IDAsXG4gICAgICBhbmFseXRpY3M6IGZhbHNlLFxuICAgICAgY2xpY2tBbmFseXRpY3M6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmICh0YWdGaWx0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFkZGl0aW9uYWxQYXJhbXMudGFnRmlsdGVycyA9IHRhZ0ZpbHRlcnM7XG4gICAgfVxuXG4gICAgdmFyIGhpZXJhcmNoaWNhbEZhY2V0ID0gc3RhdGUuZ2V0SGllcmFyY2hpY2FsRmFjZXRCeU5hbWUoZmFjZXQpO1xuXG4gICAgaWYgKGhpZXJhcmNoaWNhbEZhY2V0KSB7XG4gICAgICBhZGRpdGlvbmFsUGFyYW1zLmZhY2V0cyA9IHJlcXVlc3RCdWlsZGVyLl9nZXREaXNqdW5jdGl2ZUhpZXJhcmNoaWNhbEZhY2V0QXR0cmlidXRlKFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgaGllcmFyY2hpY2FsRmFjZXQsXG4gICAgICAgIGhpZXJhcmNoaWNhbFJvb3RMZXZlbFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkaXRpb25hbFBhcmFtcy5mYWNldHMgPSBmYWNldDtcbiAgICB9XG5cbiAgICBpZiAobnVtZXJpY0ZpbHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgYWRkaXRpb25hbFBhcmFtcy5udW1lcmljRmlsdGVycyA9IG51bWVyaWNGaWx0ZXJzO1xuICAgIH1cblxuICAgIGlmIChmYWNldEZpbHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgYWRkaXRpb25hbFBhcmFtcy5mYWNldEZpbHRlcnMgPSBmYWNldEZpbHRlcnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvcnRPYmplY3QobWVyZ2Uoe30sIHN0YXRlLmdldFF1ZXJ5UGFyYW1zKCksIGFkZGl0aW9uYWxQYXJhbXMpKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBudW1lcmljIGZpbHRlcnMgaW4gYW4gYWxnb2xpYSByZXF1ZXN0IGZhc2hpb25cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtmYWNldE5hbWVdIHRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgZm9yIHdoaWNoIHRoZSBmaWx0ZXJzIHNob3VsZCBiZSBleGNsdWRlZFxuICAgKiBAcmV0dXJuIHtzdHJpbmdbXX0gdGhlIG51bWVyaWMgZmlsdGVycyBpbiB0aGUgYWxnb2xpYSBmb3JtYXRcbiAgICovXG4gIF9nZXROdW1lcmljRmlsdGVyczogZnVuY3Rpb24oc3RhdGUsIGZhY2V0TmFtZSkge1xuICAgIGlmIChzdGF0ZS5udW1lcmljRmlsdGVycykge1xuICAgICAgcmV0dXJuIHN0YXRlLm51bWVyaWNGaWx0ZXJzO1xuICAgIH1cblxuICAgIHZhciBudW1lcmljRmlsdGVycyA9IFtdO1xuXG4gICAgT2JqZWN0LmtleXMoc3RhdGUubnVtZXJpY1JlZmluZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xuICAgICAgdmFyIG9wZXJhdG9ycyA9IHN0YXRlLm51bWVyaWNSZWZpbmVtZW50c1thdHRyaWJ1dGVdIHx8IHt9O1xuICAgICAgT2JqZWN0LmtleXMob3BlcmF0b3JzKS5mb3JFYWNoKGZ1bmN0aW9uKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBvcGVyYXRvcnNbb3BlcmF0b3JdIHx8IFtdO1xuICAgICAgICBpZiAoZmFjZXROYW1lICE9PSBhdHRyaWJ1dGUpIHtcbiAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgIHZhciB2cyA9IHZhbHVlLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZSArIG9wZXJhdG9yICsgdjtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIG51bWVyaWNGaWx0ZXJzLnB1c2godnMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbnVtZXJpY0ZpbHRlcnMucHVzaChhdHRyaWJ1dGUgKyBvcGVyYXRvciArIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbnVtZXJpY0ZpbHRlcnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdGFncyBmaWx0ZXJzIGRlcGVuZGluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBfZ2V0VGFnRmlsdGVyczogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUudGFnRmlsdGVycykge1xuICAgICAgcmV0dXJuIHN0YXRlLnRhZ0ZpbHRlcnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRlLnRhZ1JlZmluZW1lbnRzLmpvaW4oJywnKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBCdWlsZCBmYWNldEZpbHRlcnMgcGFyYW1ldGVyIGJhc2VkIG9uIGN1cnJlbnQgcmVmaW5lbWVudHMuIFRoZSBhcnJheSByZXR1cm5lZFxuICAgKiBjb250YWlucyBzdHJpbmdzIHJlcHJlc2VudGluZyB0aGUgZmFjZXQgZmlsdGVycyBpbiB0aGUgYWxnb2xpYSBmb3JtYXQuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge3N0cmluZ30gW2ZhY2V0XSBpZiBzZXQsIHRoZSBjdXJyZW50IGRpc2p1bmN0aXZlIGZhY2V0XG4gICAqIEByZXR1cm4ge2FycmF5LjxzdHJpbmc+fVxuICAgKi9cbiAgX2dldEZhY2V0RmlsdGVyczogZnVuY3Rpb24oc3RhdGUsIGZhY2V0LCBoaWVyYXJjaGljYWxSb290TGV2ZWwpIHtcbiAgICB2YXIgZmFjZXRGaWx0ZXJzID0gW107XG5cbiAgICB2YXIgZmFjZXRzUmVmaW5lbWVudHMgPSBzdGF0ZS5mYWNldHNSZWZpbmVtZW50cyB8fCB7fTtcbiAgICBPYmplY3Qua2V5cyhmYWNldHNSZWZpbmVtZW50cykuZm9yRWFjaChmdW5jdGlvbihmYWNldE5hbWUpIHtcbiAgICAgIHZhciBmYWNldFZhbHVlcyA9IGZhY2V0c1JlZmluZW1lbnRzW2ZhY2V0TmFtZV0gfHwgW107XG4gICAgICBmYWNldFZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGZhY2V0VmFsdWUpIHtcbiAgICAgICAgZmFjZXRGaWx0ZXJzLnB1c2goZmFjZXROYW1lICsgJzonICsgZmFjZXRWYWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBmYWNldHNFeGNsdWRlcyA9IHN0YXRlLmZhY2V0c0V4Y2x1ZGVzIHx8IHt9O1xuICAgIE9iamVjdC5rZXlzKGZhY2V0c0V4Y2x1ZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGZhY2V0TmFtZSkge1xuICAgICAgdmFyIGZhY2V0VmFsdWVzID0gZmFjZXRzRXhjbHVkZXNbZmFjZXROYW1lXSB8fCBbXTtcbiAgICAgIGZhY2V0VmFsdWVzLmZvckVhY2goZnVuY3Rpb24oZmFjZXRWYWx1ZSkge1xuICAgICAgICBmYWNldEZpbHRlcnMucHVzaChmYWNldE5hbWUgKyAnOi0nICsgZmFjZXRWYWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBkaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzID0gc3RhdGUuZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50cyB8fCB7fTtcbiAgICBPYmplY3Qua2V5cyhkaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGZhY2V0TmFtZSkge1xuICAgICAgdmFyIGZhY2V0VmFsdWVzID0gZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50c1tmYWNldE5hbWVdIHx8IFtdO1xuICAgICAgaWYgKGZhY2V0TmFtZSA9PT0gZmFjZXQgfHwgIWZhY2V0VmFsdWVzIHx8IGZhY2V0VmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgb3JGaWx0ZXJzID0gW107XG5cbiAgICAgIGZhY2V0VmFsdWVzLmZvckVhY2goZnVuY3Rpb24oZmFjZXRWYWx1ZSkge1xuICAgICAgICBvckZpbHRlcnMucHVzaChmYWNldE5hbWUgKyAnOicgKyBmYWNldFZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBmYWNldEZpbHRlcnMucHVzaChvckZpbHRlcnMpO1xuICAgIH0pO1xuXG4gICAgdmFyIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzID0gc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMgfHwge307XG4gICAgT2JqZWN0LmtleXMoaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMpLmZvckVhY2goZnVuY3Rpb24oZmFjZXROYW1lKSB7XG4gICAgICB2YXIgZmFjZXRWYWx1ZXMgPSBoaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c1tmYWNldE5hbWVdIHx8IFtdO1xuICAgICAgdmFyIGZhY2V0VmFsdWUgPSBmYWNldFZhbHVlc1swXTtcblxuICAgICAgaWYgKGZhY2V0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBoaWVyYXJjaGljYWxGYWNldCA9IHN0YXRlLmdldEhpZXJhcmNoaWNhbEZhY2V0QnlOYW1lKGZhY2V0TmFtZSk7XG4gICAgICB2YXIgc2VwYXJhdG9yID0gc3RhdGUuX2dldEhpZXJhcmNoaWNhbEZhY2V0U2VwYXJhdG9yKGhpZXJhcmNoaWNhbEZhY2V0KTtcbiAgICAgIHZhciByb290UGF0aCA9IHN0YXRlLl9nZXRIaWVyYXJjaGljYWxSb290UGF0aChoaWVyYXJjaGljYWxGYWNldCk7XG4gICAgICB2YXIgYXR0cmlidXRlVG9SZWZpbmU7XG4gICAgICB2YXIgYXR0cmlidXRlc0luZGV4O1xuXG4gICAgICAvLyB3ZSBhc2sgZm9yIHBhcmVudCBmYWNldCB2YWx1ZXMgb25seSB3aGVuIHRoZSBgZmFjZXRgIGlzIHRoZSBjdXJyZW50IGhpZXJhcmNoaWNhbCBmYWNldFxuICAgICAgaWYgKGZhY2V0ID09PSBmYWNldE5hbWUpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlIGF0IHRoZSByb290IGxldmVsIGFscmVhZHksIG5vIG5lZWQgdG8gYXNrIGZvciBmYWNldCB2YWx1ZXMsIHdlIGdldCB0aGVtIGZyb21cbiAgICAgICAgLy8gdGhlIGhpdHMgcXVlcnlcbiAgICAgICAgaWYgKGZhY2V0VmFsdWUuaW5kZXhPZihzZXBhcmF0b3IpID09PSAtMSB8fCAoIXJvb3RQYXRoICYmIGhpZXJhcmNoaWNhbFJvb3RMZXZlbCA9PT0gdHJ1ZSkgfHxcbiAgICAgICAgICAocm9vdFBhdGggJiYgcm9vdFBhdGguc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGggPT09IGZhY2V0VmFsdWUuc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyb290UGF0aCkge1xuICAgICAgICAgIGF0dHJpYnV0ZXNJbmRleCA9IGZhY2V0VmFsdWUuc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGggLSAyO1xuICAgICAgICAgIGZhY2V0VmFsdWUgPSBmYWNldFZhbHVlLnNsaWNlKDAsIGZhY2V0VmFsdWUubGFzdEluZGV4T2Yoc2VwYXJhdG9yKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0cmlidXRlc0luZGV4ID0gcm9vdFBhdGguc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGggLSAxO1xuICAgICAgICAgIGZhY2V0VmFsdWUgPSByb290UGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVRvUmVmaW5lID0gaGllcmFyY2hpY2FsRmFjZXQuYXR0cmlidXRlc1thdHRyaWJ1dGVzSW5kZXhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXR0cmlidXRlc0luZGV4ID0gZmFjZXRWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgYXR0cmlidXRlVG9SZWZpbmUgPSBoaWVyYXJjaGljYWxGYWNldC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZXNJbmRleF07XG4gICAgICB9XG5cbiAgICAgIGlmIChhdHRyaWJ1dGVUb1JlZmluZSkge1xuICAgICAgICBmYWNldEZpbHRlcnMucHVzaChbYXR0cmlidXRlVG9SZWZpbmUgKyAnOicgKyBmYWNldFZhbHVlXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmFjZXRGaWx0ZXJzO1xuICB9LFxuXG4gIF9nZXRIaXRzSGllcmFyY2hpY2FsRmFjZXRzQXR0cmlidXRlczogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICB2YXIgb3V0ID0gW107XG5cbiAgICByZXR1cm4gc3RhdGUuaGllcmFyY2hpY2FsRmFjZXRzLnJlZHVjZShcbiAgICAgIC8vIGFzayBmb3IgYXMgbXVjaCBsZXZlbHMgYXMgdGhlcmUncyBoaWVyYXJjaGljYWwgcmVmaW5lbWVudHNcbiAgICAgIGZ1bmN0aW9uIGdldEhpdHNBdHRyaWJ1dGVzRm9ySGllcmFyY2hpY2FsRmFjZXQoYWxsQXR0cmlidXRlcywgaGllcmFyY2hpY2FsRmFjZXQpIHtcbiAgICAgICAgdmFyIGhpZXJhcmNoaWNhbFJlZmluZW1lbnQgPSBzdGF0ZS5nZXRIaWVyYXJjaGljYWxSZWZpbmVtZW50KGhpZXJhcmNoaWNhbEZhY2V0Lm5hbWUpWzBdO1xuXG4gICAgICAgIC8vIGlmIG5vIHJlZmluZW1lbnQsIGFzayBmb3Igcm9vdCBsZXZlbFxuICAgICAgICBpZiAoIWhpZXJhcmNoaWNhbFJlZmluZW1lbnQpIHtcbiAgICAgICAgICBhbGxBdHRyaWJ1dGVzLnB1c2goaGllcmFyY2hpY2FsRmFjZXQuYXR0cmlidXRlc1swXSk7XG4gICAgICAgICAgcmV0dXJuIGFsbEF0dHJpYnV0ZXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VwYXJhdG9yID0gc3RhdGUuX2dldEhpZXJhcmNoaWNhbEZhY2V0U2VwYXJhdG9yKGhpZXJhcmNoaWNhbEZhY2V0KTtcbiAgICAgICAgdmFyIGxldmVsID0gaGllcmFyY2hpY2FsUmVmaW5lbWVudC5zcGxpdChzZXBhcmF0b3IpLmxlbmd0aDtcbiAgICAgICAgdmFyIG5ld0F0dHJpYnV0ZXMgPSBoaWVyYXJjaGljYWxGYWNldC5hdHRyaWJ1dGVzLnNsaWNlKDAsIGxldmVsICsgMSk7XG5cbiAgICAgICAgcmV0dXJuIGFsbEF0dHJpYnV0ZXMuY29uY2F0KG5ld0F0dHJpYnV0ZXMpO1xuICAgICAgfSwgb3V0KTtcbiAgfSxcblxuICBfZ2V0RGlzanVuY3RpdmVIaWVyYXJjaGljYWxGYWNldEF0dHJpYnV0ZTogZnVuY3Rpb24oc3RhdGUsIGhpZXJhcmNoaWNhbEZhY2V0LCByb290TGV2ZWwpIHtcbiAgICB2YXIgc2VwYXJhdG9yID0gc3RhdGUuX2dldEhpZXJhcmNoaWNhbEZhY2V0U2VwYXJhdG9yKGhpZXJhcmNoaWNhbEZhY2V0KTtcbiAgICBpZiAocm9vdExldmVsID09PSB0cnVlKSB7XG4gICAgICB2YXIgcm9vdFBhdGggPSBzdGF0ZS5fZ2V0SGllcmFyY2hpY2FsUm9vdFBhdGgoaGllcmFyY2hpY2FsRmFjZXQpO1xuICAgICAgdmFyIGF0dHJpYnV0ZUluZGV4ID0gMDtcblxuICAgICAgaWYgKHJvb3RQYXRoKSB7XG4gICAgICAgIGF0dHJpYnV0ZUluZGV4ID0gcm9vdFBhdGguc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2hpZXJhcmNoaWNhbEZhY2V0LmF0dHJpYnV0ZXNbYXR0cmlidXRlSW5kZXhdXTtcbiAgICB9XG5cbiAgICB2YXIgaGllcmFyY2hpY2FsUmVmaW5lbWVudCA9IHN0YXRlLmdldEhpZXJhcmNoaWNhbFJlZmluZW1lbnQoaGllcmFyY2hpY2FsRmFjZXQubmFtZSlbMF0gfHwgJyc7XG4gICAgLy8gaWYgcmVmaW5lbWVudCBpcyAnYmVlcnMgPiBJUEEgPiBGbHlpbmcgZG9nJyxcbiAgICAvLyB0aGVuIHdlIHdhbnQgYGZhY2V0czogWydiZWVycyA+IElQQSddYCBhcyBkaXNqdW5jdGl2ZSBmYWNldCAocGFyZW50IGxldmVsIHZhbHVlcylcblxuICAgIHZhciBwYXJlbnRMZXZlbCA9IGhpZXJhcmNoaWNhbFJlZmluZW1lbnQuc3BsaXQoc2VwYXJhdG9yKS5sZW5ndGggLSAxO1xuICAgIHJldHVybiBoaWVyYXJjaGljYWxGYWNldC5hdHRyaWJ1dGVzLnNsaWNlKDAsIHBhcmVudExldmVsICsgMSk7XG4gIH0sXG5cbiAgZ2V0U2VhcmNoRm9yRmFjZXRRdWVyeTogZnVuY3Rpb24oZmFjZXROYW1lLCBxdWVyeSwgbWF4RmFjZXRIaXRzLCBzdGF0ZSkge1xuICAgIHZhciBzdGF0ZUZvclNlYXJjaEZvckZhY2V0VmFsdWVzID0gc3RhdGUuaXNEaXNqdW5jdGl2ZUZhY2V0KGZhY2V0TmFtZSkgP1xuICAgICAgc3RhdGUuY2xlYXJSZWZpbmVtZW50cyhmYWNldE5hbWUpIDpcbiAgICAgIHN0YXRlO1xuICAgIHZhciBzZWFyY2hGb3JGYWNldFNlYXJjaFBhcmFtZXRlcnMgPSB7XG4gICAgICBmYWNldFF1ZXJ5OiBxdWVyeSxcbiAgICAgIGZhY2V0TmFtZTogZmFjZXROYW1lXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIG1heEZhY2V0SGl0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlYXJjaEZvckZhY2V0U2VhcmNoUGFyYW1ldGVycy5tYXhGYWNldEhpdHMgPSBtYXhGYWNldEhpdHM7XG4gICAgfVxuICAgIHJldHVybiBzb3J0T2JqZWN0KG1lcmdlKFxuICAgICAge30sXG4gICAgICByZXF1ZXN0QnVpbGRlci5fZ2V0SGl0c1NlYXJjaFBhcmFtcyhzdGF0ZUZvclNlYXJjaEZvckZhY2V0VmFsdWVzKSxcbiAgICAgIHNlYXJjaEZvckZhY2V0U2VhcmNoUGFyYW1ldGVyc1xuICAgICkpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3RCdWlsZGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzVmFsaWRVc2VyVG9rZW4odXNlclRva2VuKSB7XG4gIGlmICh1c2VyVG9rZW4gPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIC9eW2EtekEtWjAtOV8tXXsxLDY0fSQvLnRlc3QodXNlclRva2VuKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gJzMuMTEuMSc7XG4iLCIvLyBmYWtlIGZpbGUgdG8gYWxsb3cgYGV4cG9ydCAqIGZyb20gJ2FsZ29saWFzZWFyY2gtaGVscGVyL3R5cGVzL2FsZ29saWFzZWFyY2gnYFxuIiwiLyohIGFsZ29saWFzZWFyY2gtbGl0ZS51bWQuanMgfCA0LjE0LjIgfCDCqSBBbGdvbGlhLCBpbmMuIHwgaHR0cHM6Ly9naXRodWIuY29tL2FsZ29saWEvYWxnb2xpYXNlYXJjaC1jbGllbnQtamF2YXNjcmlwdCAqL1xuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuYWxnb2xpYXNlYXJjaD10KCl9KHRoaXMsKGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLHQscil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1yLGV9ZnVuY3Rpb24gdChlLHQpe3ZhciByPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKG49bi5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSksci5wdXNoLmFwcGx5KHIsbil9cmV0dXJuIHJ9ZnVuY3Rpb24gcihyKXtmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXt2YXIgbz1udWxsIT1hcmd1bWVudHNbbl0/YXJndW1lbnRzW25dOnt9O24lMj90KE9iamVjdChvKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZShyLHQsb1t0XSl9KSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMocixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSk6dChPYmplY3QobykpLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGUpKX0pKX1yZXR1cm4gcn1mdW5jdGlvbiBuKGUsdCl7aWYobnVsbD09ZSlyZXR1cm57fTt2YXIgcixuLG89ZnVuY3Rpb24oZSx0KXtpZihudWxsPT1lKXJldHVybnt9O3ZhciByLG4sbz17fSxhPU9iamVjdC5rZXlzKGUpO2ZvcihuPTA7bjxhLmxlbmd0aDtuKyspcj1hW25dLHQuaW5kZXhPZihyKT49MHx8KG9bcl09ZVtyXSk7cmV0dXJuIG99KGUsdCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtmb3Iobj0wO248YS5sZW5ndGg7bisrKXI9YVtuXSx0LmluZGV4T2Yocik+PTB8fE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHIpJiYob1tyXT1lW3JdKX1yZXR1cm4gb31mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGV9KGUpfHxmdW5jdGlvbihlLHQpe2lmKCEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKXx8XCJbb2JqZWN0IEFyZ3VtZW50c11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkpcmV0dXJuO3ZhciByPVtdLG49ITAsbz0hMSxhPXZvaWQgMDt0cnl7Zm9yKHZhciB1LGk9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7IShuPSh1PWkubmV4dCgpKS5kb25lKSYmKHIucHVzaCh1LnZhbHVlKSwhdHx8ci5sZW5ndGghPT10KTtuPSEwKTt9Y2F0Y2goZSl7bz0hMCxhPWV9ZmluYWxseXt0cnl7bnx8bnVsbD09aS5yZXR1cm58fGkucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IGF9fXJldHVybiByfShlLHQpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpfSgpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLHI9bmV3IEFycmF5KGUubGVuZ3RoKTt0PGUubGVuZ3RoO3QrKylyW3RdPWVbdF07cmV0dXJuIHJ9fShlKXx8ZnVuY3Rpb24oZSl7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKXx8XCJbb2JqZWN0IEFyZ3VtZW50c11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX0oZSl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpfSgpfWZ1bmN0aW9uIHUoZSl7dmFyIHQscj1cImFsZ29saWFzZWFyY2gtY2xpZW50LWpzLVwiLmNvbmNhdChlLmtleSksbj1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10JiYodD1lLmxvY2FsU3RvcmFnZXx8d2luZG93LmxvY2FsU3RvcmFnZSksdH0sYT1mdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKG4oKS5nZXRJdGVtKHIpfHxcInt9XCIpfTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnttaXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfX07cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIHI9SlNPTi5zdHJpbmdpZnkoZSksbj1hKClbcl07cmV0dXJuIFByb21pc2UuYWxsKFtufHx0KCksdm9pZCAwIT09bl0pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW8oZSwyKSxuPXRbMF0sYT10WzFdO3JldHVybiBQcm9taXNlLmFsbChbbixhfHxyLm1pc3MobildKX0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gbyhlLDEpWzBdfSkpfSxzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24oKXt2YXIgbz1hKCk7cmV0dXJuIG9bSlNPTi5zdHJpbmdpZnkoZSldPXQsbigpLnNldEl0ZW0ocixKU09OLnN0cmluZ2lmeShvKSksdH0pKX0sZGVsZXRlOmZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe3ZhciB0PWEoKTtkZWxldGUgdFtKU09OLnN0cmluZ2lmeShlKV0sbigpLnNldEl0ZW0ocixKU09OLnN0cmluZ2lmeSh0KSl9KSl9LGNsZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7bigpLnJlbW92ZUl0ZW0ocil9KSl9fX1mdW5jdGlvbiBpKGUpe3ZhciB0PWEoZS5jYWNoZXMpLHI9dC5zaGlmdCgpO3JldHVybiB2b2lkIDA9PT1yP3tnZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e21pc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9fSxuPXQoKTtyZXR1cm4gbi50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5hbGwoW2Usci5taXNzKGUpXSl9KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSwxKVswXX0pKX0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0KX0sZGVsZXRlOmZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX0sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9fTp7Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnttaXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfX07cmV0dXJuIHIuZ2V0KGUsbixvKS5jYXRjaCgoZnVuY3Rpb24oKXtyZXR1cm4gaSh7Y2FjaGVzOnR9KS5nZXQoZSxuLG8pfSkpfSxzZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gci5zZXQoZSxuKS5jYXRjaCgoZnVuY3Rpb24oKXtyZXR1cm4gaSh7Y2FjaGVzOnR9KS5zZXQoZSxuKX0pKX0sZGVsZXRlOmZ1bmN0aW9uKGUpe3JldHVybiByLmRlbGV0ZShlKS5jYXRjaCgoZnVuY3Rpb24oKXtyZXR1cm4gaSh7Y2FjaGVzOnR9KS5kZWxldGUoZSl9KSl9LGNsZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHIuY2xlYXIoKS5jYXRjaCgoZnVuY3Rpb24oKXtyZXR1cm4gaSh7Y2FjaGVzOnR9KS5jbGVhcigpfSkpfX19ZnVuY3Rpb24gcygpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7c2VyaWFsaXphYmxlOiEwfSx0PXt9O3JldHVybntnZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e21pc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9fSxhPUpTT04uc3RyaW5naWZ5KHIpO2lmKGEgaW4gdClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUuc2VyaWFsaXphYmxlP0pTT04ucGFyc2UodFthXSk6dFthXSk7dmFyIHU9bigpLGk9byYmby5taXNzfHxmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07cmV0dXJuIHUudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9KSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gdX0pKX0sc2V0OmZ1bmN0aW9uKHIsbil7cmV0dXJuIHRbSlNPTi5zdHJpbmdpZnkocildPWUuc2VyaWFsaXphYmxlP0pTT04uc3RyaW5naWZ5KG4pOm4sUHJvbWlzZS5yZXNvbHZlKG4pfSxkZWxldGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGRlbGV0ZSB0W0pTT04uc3RyaW5naWZ5KGUpXSxQcm9taXNlLnJlc29sdmUoKX0sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdD17fSxQcm9taXNlLnJlc29sdmUoKX19fWZ1bmN0aW9uIGMoZSl7Zm9yKHZhciB0PWUubGVuZ3RoLTE7dD4wO3QtLSl7dmFyIHI9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKih0KzEpKSxuPWVbdF07ZVt0XT1lW3JdLGVbcl09bn1yZXR1cm4gZX1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIHQ/KE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKHIpe2Vbcl09dFtyXShlKX0pKSxlKTplfWZ1bmN0aW9uIGYoZSl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkodD4xP3QtMTowKSxuPTE7bjx0O24rKylyW24tMV09YXJndW1lbnRzW25dO3ZhciBvPTA7cmV0dXJuIGUucmVwbGFjZSgvJXMvZywoZnVuY3Rpb24oKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHJbbysrXSl9KSl9dmFyIGg9e1dpdGhpblF1ZXJ5UGFyYW1ldGVyczowLFdpdGhpbkhlYWRlcnM6MX07ZnVuY3Rpb24gZChlLHQpe3ZhciByPWV8fHt9LG49ci5kYXRhfHx7fTtyZXR1cm4gT2JqZWN0LmtleXMocikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7LTE9PT1bXCJ0aW1lb3V0XCIsXCJoZWFkZXJzXCIsXCJxdWVyeVBhcmFtZXRlcnNcIixcImRhdGFcIixcImNhY2hlYWJsZVwiXS5pbmRleE9mKGUpJiYobltlXT1yW2VdKX0pKSx7ZGF0YTpPYmplY3QuZW50cmllcyhuKS5sZW5ndGg+MD9uOnZvaWQgMCx0aW1lb3V0OnIudGltZW91dHx8dCxoZWFkZXJzOnIuaGVhZGVyc3x8e30scXVlcnlQYXJhbWV0ZXJzOnIucXVlcnlQYXJhbWV0ZXJzfHx7fSxjYWNoZWFibGU6ci5jYWNoZWFibGV9fXZhciBtPXtSZWFkOjEsV3JpdGU6MixBbnk6M30scD0xLHY9Mix5PTM7ZnVuY3Rpb24gZyhlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06cDtyZXR1cm4gcihyKHt9LGUpLHt9LHtzdGF0dXM6dCxsYXN0VXBkYXRlOkRhdGUubm93KCl9KX1mdW5jdGlvbiBiKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP3twcm90b2NvbDpcImh0dHBzXCIsdXJsOmUsYWNjZXB0Om0uQW55fTp7cHJvdG9jb2w6ZS5wcm90b2NvbHx8XCJodHRwc1wiLHVybDplLnVybCxhY2NlcHQ6ZS5hY2NlcHR8fG0uQW55fX12YXIgTz1cIkdFVFwiLFA9XCJQT1NUXCI7ZnVuY3Rpb24gcShlLHQpe3JldHVybiBQcm9taXNlLmFsbCh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0KHQsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShnKHQpKX0pKX0pKSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHI9ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0dXM9PT1wfHxEYXRlLm5vdygpLWUubGFzdFVwZGF0ZT4xMmU0fShlKX0pKSxuPWUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdHVzPT09eSYmRGF0ZS5ub3coKS1lLmxhc3RVcGRhdGU8PTEyZTR9KGUpfSkpLG89W10uY29uY2F0KGEociksYShuKSk7cmV0dXJue2dldFRpbWVvdXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4oMD09PW4ubGVuZ3RoJiYwPT09ZT8xOm4ubGVuZ3RoKzMrZSkqdH0sc3RhdGVsZXNzSG9zdHM6by5sZW5ndGg+MD9vLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGIoZSl9KSk6dH19KSl9ZnVuY3Rpb24gdyhlLHQsbixvKXt2YXIgdT1bXSxpPWZ1bmN0aW9uKGUsdCl7aWYoZS5tZXRob2Q9PT1PfHx2b2lkIDA9PT1lLmRhdGEmJnZvaWQgMD09PXQuZGF0YSlyZXR1cm47dmFyIG49QXJyYXkuaXNBcnJheShlLmRhdGEpP2UuZGF0YTpyKHIoe30sZS5kYXRhKSx0LmRhdGEpO3JldHVybiBKU09OLnN0cmluZ2lmeShuKX0obixvKSxzPWZ1bmN0aW9uKGUsdCl7dmFyIG49cihyKHt9LGUuaGVhZGVycyksdC5oZWFkZXJzKSxvPXt9O3JldHVybiBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1uW2VdO29bZS50b0xvd2VyQ2FzZSgpXT10fSkpLG99KGUsbyksYz1uLm1ldGhvZCxsPW4ubWV0aG9kIT09Tz97fTpyKHIoe30sbi5kYXRhKSxvLmRhdGEpLGY9cihyKHIoe1wieC1hbGdvbGlhLWFnZW50XCI6ZS51c2VyQWdlbnQudmFsdWV9LGUucXVlcnlQYXJhbWV0ZXJzKSxsKSxvLnF1ZXJ5UGFyYW1ldGVycyksaD0wLGQ9ZnVuY3Rpb24gdChyLGEpe3ZhciBsPXIucG9wKCk7aWYodm9pZCAwPT09bCl0aHJvd3tuYW1lOlwiUmV0cnlFcnJvclwiLG1lc3NhZ2U6XCJVbnJlYWNoYWJsZSBob3N0cyAtIHlvdXIgYXBwbGljYXRpb24gaWQgbWF5IGJlIGluY29ycmVjdC4gSWYgdGhlIGVycm9yIHBlcnNpc3RzLCBjb250YWN0IHN1cHBvcnRAYWxnb2xpYS5jb20uXCIsdHJhbnNwb3J0ZXJTdGFja1RyYWNlOkEodSl9O3ZhciBkPXtkYXRhOmksaGVhZGVyczpzLG1ldGhvZDpjLHVybDpTKGwsbi5wYXRoLGYpLGNvbm5lY3RUaW1lb3V0OmEoaCxlLnRpbWVvdXRzLmNvbm5lY3QpLHJlc3BvbnNlVGltZW91dDphKGgsby50aW1lb3V0KX0sbT1mdW5jdGlvbihlKXt2YXIgdD17cmVxdWVzdDpkLHJlc3BvbnNlOmUsaG9zdDpsLHRyaWVzTGVmdDpyLmxlbmd0aH07cmV0dXJuIHUucHVzaCh0KSx0fSxwPXtvblN1Y2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlLmNvbnRlbnQpfWNhdGNoKHQpe3Rocm93IGZ1bmN0aW9uKGUsdCl7cmV0dXJue25hbWU6XCJEZXNlcmlhbGl6YXRpb25FcnJvclwiLG1lc3NhZ2U6ZSxyZXNwb25zZTp0fX0odC5tZXNzYWdlLGUpfX0oZSl9LG9uUmV0cnk6ZnVuY3Rpb24obil7dmFyIG89bShuKTtyZXR1cm4gbi5pc1RpbWVkT3V0JiZoKyssUHJvbWlzZS5hbGwoW2UubG9nZ2VyLmluZm8oXCJSZXRyeWFibGUgZmFpbHVyZVwiLHgobykpLGUuaG9zdHNDYWNoZS5zZXQobCxnKGwsbi5pc1RpbWVkT3V0P3k6dikpXSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gdChyLGEpfSkpfSxvbkZhaWw6ZnVuY3Rpb24oZSl7dGhyb3cgbShlKSxmdW5jdGlvbihlLHQpe3ZhciByPWUuY29udGVudCxuPWUuc3RhdHVzLG89cjt0cnl7bz1KU09OLnBhcnNlKHIpLm1lc3NhZ2V9Y2F0Y2goZSl7fXJldHVybiBmdW5jdGlvbihlLHQscil7cmV0dXJue25hbWU6XCJBcGlFcnJvclwiLG1lc3NhZ2U6ZSxzdGF0dXM6dCx0cmFuc3BvcnRlclN0YWNrVHJhY2U6cn19KG8sbix0KX0oZSxBKHUpKX19O3JldHVybiBlLnJlcXVlc3Rlci5zZW5kKGQpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD1lLnN0YXR1cztyZXR1cm4gZS5pc1RpbWVkT3V0fHxmdW5jdGlvbihlKXt2YXIgdD1lLmlzVGltZWRPdXQscj1lLnN0YXR1cztyZXR1cm4hdCYmMD09fn5yfShlKXx8MiE9fn4odC8xMDApJiY0IT1+fih0LzEwMCl9KGUpP3Qub25SZXRyeShlKToyPT1+fihlLnN0YXR1cy8xMDApP3Qub25TdWNjZXNzKGUpOnQub25GYWlsKGUpfShlLHApfSkpfTtyZXR1cm4gcShlLmhvc3RzQ2FjaGUsdCkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGQoYShlLnN0YXRlbGVzc0hvc3RzKS5yZXZlcnNlKCksZS5nZXRUaW1lb3V0KX0pKX1mdW5jdGlvbiBqKGUpe3ZhciB0PXt2YWx1ZTpcIkFsZ29saWEgZm9yIEphdmFTY3JpcHQgKFwiLmNvbmNhdChlLFwiKVwiKSxhZGQ6ZnVuY3Rpb24oZSl7dmFyIHI9XCI7IFwiLmNvbmNhdChlLnNlZ21lbnQpLmNvbmNhdCh2b2lkIDAhPT1lLnZlcnNpb24/XCIgKFwiLmNvbmNhdChlLnZlcnNpb24sXCIpXCIpOlwiXCIpO3JldHVybi0xPT09dC52YWx1ZS5pbmRleE9mKHIpJiYodC52YWx1ZT1cIlwiLmNvbmNhdCh0LnZhbHVlKS5jb25jYXQocikpLHR9fTtyZXR1cm4gdH1mdW5jdGlvbiBTKGUsdCxyKXt2YXIgbj1UKHIpLG89XCJcIi5jb25jYXQoZS5wcm90b2NvbCxcIjovL1wiKS5jb25jYXQoZS51cmwsXCIvXCIpLmNvbmNhdChcIi9cIj09PXQuY2hhckF0KDApP3Quc3Vic3RyKDEpOnQpO3JldHVybiBuLmxlbmd0aCYmKG8rPVwiP1wiLmNvbmNhdChuKSksb31mdW5jdGlvbiBUKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBmKFwiJXM9JXNcIix0LChyPWVbdF0sXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChyKXx8XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpP0pTT04uc3RyaW5naWZ5KGVbdF0pOmVbdF0pKTt2YXIgcn0pKS5qb2luKFwiJlwiKX1mdW5jdGlvbiBBKGUpe3JldHVybiBlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHgoZSl9KSl9ZnVuY3Rpb24geChlKXt2YXIgdD1lLnJlcXVlc3QuaGVhZGVyc1tcIngtYWxnb2xpYS1hcGkta2V5XCJdP3tcIngtYWxnb2xpYS1hcGkta2V5XCI6XCIqKioqKlwifTp7fTtyZXR1cm4gcihyKHt9LGUpLHt9LHtyZXF1ZXN0OnIocih7fSxlLnJlcXVlc3QpLHt9LHtoZWFkZXJzOnIocih7fSxlLnJlcXVlc3QuaGVhZGVycyksdCl9KX0pfXZhciBOPWZ1bmN0aW9uKGUpe3ZhciB0PWUuYXBwSWQsbj1mdW5jdGlvbihlLHQscil7dmFyIG49e1wieC1hbGdvbGlhLWFwaS1rZXlcIjpyLFwieC1hbGdvbGlhLWFwcGxpY2F0aW9uLWlkXCI6dH07cmV0dXJue2hlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gZT09PWguV2l0aGluSGVhZGVycz9uOnt9fSxxdWVyeVBhcmFtZXRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gZT09PWguV2l0aGluUXVlcnlQYXJhbWV0ZXJzP246e319fX0odm9pZCAwIT09ZS5hdXRoTW9kZT9lLmF1dGhNb2RlOmguV2l0aGluSGVhZGVycyx0LGUuYXBpS2V5KSxhPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaG9zdHNDYWNoZSxyPWUubG9nZ2VyLG49ZS5yZXF1ZXN0ZXIsYT1lLnJlcXVlc3RzQ2FjaGUsdT1lLnJlc3BvbnNlc0NhY2hlLGk9ZS50aW1lb3V0cyxzPWUudXNlckFnZW50LGM9ZS5ob3N0cyxsPWUucXVlcnlQYXJhbWV0ZXJzLGY9e2hvc3RzQ2FjaGU6dCxsb2dnZXI6cixyZXF1ZXN0ZXI6bixyZXF1ZXN0c0NhY2hlOmEscmVzcG9uc2VzQ2FjaGU6dSx0aW1lb3V0czppLHVzZXJBZ2VudDpzLGhlYWRlcnM6ZS5oZWFkZXJzLHF1ZXJ5UGFyYW1ldGVyczpsLGhvc3RzOmMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gYihlKX0pKSxyZWFkOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZCh0LGYudGltZW91dHMucmVhZCksbj1mdW5jdGlvbigpe3JldHVybiB3KGYsZi5ob3N0cy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAwIT0oZS5hY2NlcHQmbS5SZWFkKX0pKSxlLHIpfTtpZighMCE9PSh2b2lkIDAhPT1yLmNhY2hlYWJsZT9yLmNhY2hlYWJsZTplLmNhY2hlYWJsZSkpcmV0dXJuIG4oKTt2YXIgYT17cmVxdWVzdDplLG1hcHBlZFJlcXVlc3RPcHRpb25zOnIsdHJhbnNwb3J0ZXI6e3F1ZXJ5UGFyYW1ldGVyczpmLnF1ZXJ5UGFyYW1ldGVycyxoZWFkZXJzOmYuaGVhZGVyc319O3JldHVybiBmLnJlc3BvbnNlc0NhY2hlLmdldChhLChmdW5jdGlvbigpe3JldHVybiBmLnJlcXVlc3RzQ2FjaGUuZ2V0KGEsKGZ1bmN0aW9uKCl7cmV0dXJuIGYucmVxdWVzdHNDYWNoZS5zZXQoYSxuKCkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLmFsbChbZi5yZXF1ZXN0c0NhY2hlLmRlbGV0ZShhKSxlXSl9KSwoZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UuYWxsKFtmLnJlcXVlc3RzQ2FjaGUuZGVsZXRlKGEpLFByb21pc2UucmVqZWN0KGUpXSl9KSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9byhlLDIpO3RbMF07cmV0dXJuIHRbMV19KSl9KSl9KSx7bWlzczpmdW5jdGlvbihlKXtyZXR1cm4gZi5yZXNwb25zZXNDYWNoZS5zZXQoYSxlKX19KX0sd3JpdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyhmLGYuaG9zdHMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMCE9KGUuYWNjZXB0Jm0uV3JpdGUpfSkpLGUsZCh0LGYudGltZW91dHMud3JpdGUpKX19O3JldHVybiBmfShyKHIoe2hvc3RzOlt7dXJsOlwiXCIuY29uY2F0KHQsXCItZHNuLmFsZ29saWEubmV0XCIpLGFjY2VwdDptLlJlYWR9LHt1cmw6XCJcIi5jb25jYXQodCxcIi5hbGdvbGlhLm5ldFwiKSxhY2NlcHQ6bS5Xcml0ZX1dLmNvbmNhdChjKFt7dXJsOlwiXCIuY29uY2F0KHQsXCItMS5hbGdvbGlhbmV0LmNvbVwiKX0se3VybDpcIlwiLmNvbmNhdCh0LFwiLTIuYWxnb2xpYW5ldC5jb21cIil9LHt1cmw6XCJcIi5jb25jYXQodCxcIi0zLmFsZ29saWFuZXQuY29tXCIpfV0pKX0sZSkse30se2hlYWRlcnM6cihyKHIoe30sbi5oZWFkZXJzKCkpLHtcImNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJ9KSxlLmhlYWRlcnMpLHF1ZXJ5UGFyYW1ldGVyczpyKHIoe30sbi5xdWVyeVBhcmFtZXRlcnMoKSksZS5xdWVyeVBhcmFtZXRlcnMpfSkpO3JldHVybiBsKHt0cmFuc3BvcnRlcjphLGFwcElkOnQsYWRkQWxnb2xpYUFnZW50OmZ1bmN0aW9uKGUsdCl7YS51c2VyQWdlbnQuYWRkKHtzZWdtZW50OmUsdmVyc2lvbjp0fSl9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5hbGwoW2EucmVxdWVzdHNDYWNoZS5jbGVhcigpLGEucmVzcG9uc2VzQ2FjaGUuY2xlYXIoKV0pLnRoZW4oKGZ1bmN0aW9uKCl7fSkpfX0sZS5tZXRob2RzKX0sQz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gdC5tZXRob2Q9PT1PP2UudHJhbnNwb3J0ZXIucmVhZCh0LHIpOmUudHJhbnNwb3J0ZXIud3JpdGUodCxyKX19LGs9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPXt0cmFuc3BvcnRlcjplLnRyYW5zcG9ydGVyLGFwcElkOmUuYXBwSWQsaW5kZXhOYW1lOnR9O3JldHVybiBsKG4sci5tZXRob2RzKX19LEo9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIG89dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiByKHIoe30sZSkse30se3BhcmFtczpUKGUucGFyYW1zfHx7fSl9KX0pKTtyZXR1cm4gZS50cmFuc3BvcnRlci5yZWFkKHttZXRob2Q6UCxwYXRoOlwiMS9pbmRleGVzLyovcXVlcmllc1wiLGRhdGE6e3JlcXVlc3RzOm99LGNhY2hlYWJsZTohMH0sbil9fSxFPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG8pe3JldHVybiBQcm9taXNlLmFsbCh0Lm1hcCgoZnVuY3Rpb24odCl7dmFyIGE9dC5wYXJhbXMsdT1hLmZhY2V0TmFtZSxpPWEuZmFjZXRRdWVyeSxzPW4oYSxbXCJmYWNldE5hbWVcIixcImZhY2V0UXVlcnlcIl0pO3JldHVybiBrKGUpKHQuaW5kZXhOYW1lLHttZXRob2RzOntzZWFyY2hGb3JGYWNldFZhbHVlczpSfX0pLnNlYXJjaEZvckZhY2V0VmFsdWVzKHUsaSxyKHIoe30sbykscykpfSkpKX19LEk9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZS50cmFuc3BvcnRlci5yZWFkKHttZXRob2Q6UCxwYXRoOmYoXCIxL2Fuc3dlcnMvJXMvcHJlZGljdGlvblwiLGUuaW5kZXhOYW1lKSxkYXRhOntxdWVyeTp0LHF1ZXJ5TGFuZ3VhZ2VzOnJ9LGNhY2hlYWJsZTohMH0sbil9fSxGPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlLnRyYW5zcG9ydGVyLnJlYWQoe21ldGhvZDpQLHBhdGg6ZihcIjEvaW5kZXhlcy8lcy9xdWVyeVwiLGUuaW5kZXhOYW1lKSxkYXRhOntxdWVyeTp0fSxjYWNoZWFibGU6ITB9LHIpfX0sUj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlLnRyYW5zcG9ydGVyLnJlYWQoe21ldGhvZDpQLHBhdGg6ZihcIjEvaW5kZXhlcy8lcy9mYWNldHMvJXMvcXVlcnlcIixlLmluZGV4TmFtZSx0KSxkYXRhOntmYWNldFF1ZXJ5OnJ9LGNhY2hlYWJsZTohMH0sbil9fSxEPTEsVz0yLEg9MztmdW5jdGlvbiBRKGUsdCxuKXt2YXIgbyxhPXthcHBJZDplLGFwaUtleTp0LHRpbWVvdXRzOntjb25uZWN0OjEscmVhZDoyLHdyaXRlOjMwfSxyZXF1ZXN0ZXI6e3NlbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KXt2YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7ci5vcGVuKGUubWV0aG9kLGUudXJsLCEwKSxPYmplY3Qua2V5cyhlLmhlYWRlcnMpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnNldFJlcXVlc3RIZWFkZXIodCxlLmhlYWRlcnNbdF0pfSkpO3ZhciBuLG89ZnVuY3Rpb24oZSxuKXtyZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyLmFib3J0KCksdCh7c3RhdHVzOjAsY29udGVudDpuLGlzVGltZWRPdXQ6ITB9KX0pLDFlMyplKX0sYT1vKGUuY29ubmVjdFRpbWVvdXQsXCJDb25uZWN0aW9uIHRpbWVvdXRcIik7ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtyLnJlYWR5U3RhdGU+ci5PUEVORUQmJnZvaWQgMD09PW4mJihjbGVhclRpbWVvdXQoYSksbj1vKGUucmVzcG9uc2VUaW1lb3V0LFwiU29ja2V0IHRpbWVvdXRcIikpfSxyLm9uZXJyb3I9ZnVuY3Rpb24oKXswPT09ci5zdGF0dXMmJihjbGVhclRpbWVvdXQoYSksY2xlYXJUaW1lb3V0KG4pLHQoe2NvbnRlbnQ6ci5yZXNwb25zZVRleHR8fFwiTmV0d29yayByZXF1ZXN0IGZhaWxlZFwiLHN0YXR1czpyLnN0YXR1cyxpc1RpbWVkT3V0OiExfSkpfSxyLm9ubG9hZD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChhKSxjbGVhclRpbWVvdXQobiksdCh7Y29udGVudDpyLnJlc3BvbnNlVGV4dCxzdGF0dXM6ci5zdGF0dXMsaXNUaW1lZE91dDohMX0pfSxyLnNlbmQoZS5kYXRhKX0pKX19LGxvZ2dlcjoobz1ILHtkZWJ1ZzpmdW5jdGlvbihlLHQpe3JldHVybiBEPj1vJiZjb25zb2xlLmRlYnVnKGUsdCksUHJvbWlzZS5yZXNvbHZlKCl9LGluZm86ZnVuY3Rpb24oZSx0KXtyZXR1cm4gVz49byYmY29uc29sZS5pbmZvKGUsdCksUHJvbWlzZS5yZXNvbHZlKCl9LGVycm9yOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoZSx0KSxQcm9taXNlLnJlc29sdmUoKX19KSxyZXNwb25zZXNDYWNoZTpzKCkscmVxdWVzdHNDYWNoZTpzKHtzZXJpYWxpemFibGU6ITF9KSxob3N0c0NhY2hlOmkoe2NhY2hlczpbdSh7a2V5OlwiXCIuY29uY2F0KFwiNC4xNC4yXCIsXCItXCIpLmNvbmNhdChlKX0pLHMoKV19KSx1c2VyQWdlbnQ6aihcIjQuMTQuMlwiKS5hZGQoe3NlZ21lbnQ6XCJCcm93c2VyXCIsdmVyc2lvbjpcImxpdGVcIn0pLGF1dGhNb2RlOmguV2l0aGluUXVlcnlQYXJhbWV0ZXJzfTtyZXR1cm4gTihyKHIocih7fSxhKSxuKSx7fSx7bWV0aG9kczp7c2VhcmNoOkosc2VhcmNoRm9yRmFjZXRWYWx1ZXM6RSxtdWx0aXBsZVF1ZXJpZXM6SixtdWx0aXBsZVNlYXJjaEZvckZhY2V0VmFsdWVzOkUsY3VzdG9tUmVxdWVzdDpDLGluaXRJbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGsoZSkodCx7bWV0aG9kczp7c2VhcmNoOkYsc2VhcmNoRm9yRmFjZXRWYWx1ZXM6UixmaW5kQW5zd2VyczpJfX0pfX19fSkpfXJldHVybiBRLnZlcnNpb249XCI0LjE0LjJcIixRfSkpO1xuIiwiLy8gc3RvcEJvZHlTY3JvbGwg5pa55rOV5L6d6LWWXG5sZXQgYm9keUVsID0gZG9jdW1lbnQuYm9keVxubGV0IHdpbmRvd1RvcCA9IDBcbmNvbnN0IGJvZHlFbFBvc2l0aW9uID0gYm9keUVsLnN0eWxlLnBvc2l0aW9uXG5cbmNvbnN0IGFyY2hlclV0aWwgPSB7XG4gIC8vIOWbnuWIsOmhtumDqFxuICBiYWNrVG9wOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgIHRvcDogMCxcbiAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcbiAgICB9KVxuICB9LFxuXG4gIC8vIOiOt+WPluWFg+e0oOWcqOmhtemdouS4iuebuOWvueW3puS4iuinkueahOS9jee9rlxuICBnZXRBYnNQb3NpdGlvbjogZnVuY3Rpb24gKGUpIHtcbiAgICBsZXQgeCA9IGUub2Zmc2V0TGVmdCxcbiAgICAgIHkgPSBlLm9mZnNldFRvcFxuXG4gICAgbGV0IGN1cnJlbnQgPSBlLm9mZnNldFBhcmVudFxuICAgIHdoaWxlIChjdXJyZW50ICE9PSBudWxsKSB7XG4gICAgICB4ICs9IGN1cnJlbnQub2Zmc2V0TGVmdFxuICAgICAgeSArPSBjdXJyZW50Lm9mZnNldFRvcFxuICAgICAgY3VycmVudCA9IGN1cnJlbnQub2Zmc2V0UGFyZW50XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHgsXG4gICAgICB5OiB5LFxuICAgIH1cbiAgfSxcblxuICAvLyDmoLzlvI/ljJbml6XmnJ9cbiAgZGF0ZUZvcm1hdGVyOiBmdW5jdGlvbiAoZGF0ZSwgZm10KSB7XG4gICAgY29uc3QgbyA9IHtcbiAgICAgICdNKyc6IGRhdGUuZ2V0TW9udGgoKSArIDEsIC8vIOaciOS7vVxuICAgICAgJ2QrJzogZGF0ZS5nZXREYXRlKCksIC8vIOaXpVxuICAgICAgJ2grJzogZGF0ZS5nZXRIb3VycygpLCAvLyDlsI/ml7ZcbiAgICAgICdtKyc6IGRhdGUuZ2V0TWludXRlcygpLCAvLyDliIZcbiAgICAgICdzKyc6IGRhdGUuZ2V0U2Vjb25kcygpLCAvLyDnp5JcbiAgICAgICdxKyc6IE1hdGguZmxvb3IoKGRhdGUuZ2V0TW9udGgoKSArIDMpIC8gMyksIC8vIOWto+W6plxuICAgICAgUzogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSwgLy8g5q+r56eSXG4gICAgfVxuICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSB7XG4gICAgICBmbXQgPSBmbXQucmVwbGFjZShcbiAgICAgICAgUmVnRXhwLiQxLFxuICAgICAgICBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpXG4gICAgICApXG4gICAgfVxuICAgIGZvciAoY29uc3QgayBpbiBvKSB7XG4gICAgICBpZiAobmV3IFJlZ0V4cCgnKCcgKyBrICsgJyknKS50ZXN0KGZtdCkpIHtcbiAgICAgICAgZm10ID0gZm10LnJlcGxhY2UoXG4gICAgICAgICAgUmVnRXhwLiQxLFxuICAgICAgICAgIFJlZ0V4cC4kMS5sZW5ndGggPT09IDFcbiAgICAgICAgICAgID8gb1trXVxuICAgICAgICAgICAgOiAoJzAwJyArIG9ba10pLnN1YnN0cihTdHJpbmcob1trXSkubGVuZ3RoKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmbXRcbiAgfSxcblxuICAvLyDojrflj5YgMXJlbSDlr7nlupTnmoQgcHgg5YC8XG4gIHJlbTogKCkgPT4ge1xuICAgIHJldHVybiBwYXJzZUludCgkKCdodG1sJykuY3NzKCdmb250LXNpemUnKSwgMTApXG4gIH0sXG5cbiAgLy8g6K6+572u5Zyw5Z2A5qCPIGhhc2hcbiAgc2V0V2luZG93SGFzaDogKGhhc2gpID0+IHtcbiAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCBgIy8ke2hhc2h9YClcbiAgfSxcblxuICAvLyDor7vlj5blnLDlnYDmoI8gaGFzaFxuICBnZXRXaW5kb3dIYXNoOiAoKSA9PiB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jXFwvLywgJyMnKVxuICB9LFxuXG4gIC8vIHJBRiDnmoQgdGlja2luZ1xuICByYWZUaWNrOiBmdW5jdGlvbiAodGlja2luZywgdXBkYXRlRnVuYykge1xuICAgIGlmICghdGlja2luZykge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUZ1bmMpXG4gICAgfVxuICAgIHRpY2tpbmcgPSB0cnVlXG4gIH0sXG5cbiAgLy8g5Zu65a6aIGJvZHlcbiAgLy8gc2VlOiBodHRwczovL3NlZ21lbnRmYXVsdC5jb20vYS8xMTkwMDAwMDEyMzEzMzM3XG4gIHN0b3BCb2R5U2Nyb2xsOiBmdW5jdGlvbiAoaXNGaXhlZCkge1xuICAgIGlmIChpc0ZpeGVkKSB7XG4gICAgICB3aW5kb3dUb3AgPSB3aW5kb3cuc2Nyb2xsWVxuXG4gICAgICBib2R5RWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnXG4gICAgICBib2R5RWwuc3R5bGUudG9wID0gLXdpbmRvd1RvcCArICdweCdcbiAgICAgIGJvZHlFbC5zdHlsZS53aWR0aCA9ICcxMDAlJ1xuICAgIH0gZWxzZSB7XG4gICAgICBib2R5RWwuc3R5bGUucG9zaXRpb24gPSBib2R5RWxQb3NpdGlvblxuICAgICAgYm9keUVsLnN0eWxlLnRvcCA9ICcnXG4gICAgICBib2R5RWwuc3R5bGUud2lkdGggPSAnJ1xuXG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgd2luZG93VG9wKVxuICAgIH1cbiAgfSxcblxuICAvLyDlh73mlbDoioLmtYFcbiAgdGhyb3R0bGU6IGZ1bmN0aW9uIChmdW5jLCB3YWl0LCBpbW1lZGlhdGUgPSBmYWxzZSkge1xuICAgIGxldCB0aW1lclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzXG4gICAgICBpZiAoIXRpbWVyKSB7XG4gICAgICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGltZXIgPSB1bmRlZmluZWRcbiAgICAgICAgICB9LCB3YWl0KVxuICAgICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGltZXIgPSB1bmRlZmluZWRcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncylcbiAgICAgICAgICB9LCB3YWl0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8vIOWHveaVsOmYsuaKllxuICBkZWJvdW5jZTogZnVuY3Rpb24gKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSA9IGZhbHNlKSB7XG4gICAgbGV0IHRpbWVyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHNcblxuICAgICAgdGltZXIgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKVxuXG4gICAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICAgICF0aW1lciAmJiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpXG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGltZXIgPSB1bmRlZmluZWRcbiAgICAgICAgfSwgd2FpdClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZnVuYy5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgICB9LCB3YWl0KVxuICAgICAgfVxuICAgIH1cbiAgfSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXJjaGVyVXRpbFxuIiwiLyohXG5cdENvcHlyaWdodCAoYykgMjAxOCBKZWQgV2F0c29uLlxuXHRMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuXHRodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXHR2YXIgbmF0aXZlQ29kZVN0cmluZyA9ICdbbmF0aXZlIGNvZGVdJztcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRpZiAoYXJnLmxlbmd0aCkge1xuXHRcdFx0XHRcdHZhciBpbm5lciA9IGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKTtcblx0XHRcdFx0XHRpZiAoaW5uZXIpIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChpbm5lcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGlmIChhcmcudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgJiYgIWFyZy50b1N0cmluZy50b1N0cmluZygpLmluY2x1ZGVzKCdbbmF0aXZlIGNvZGVdJykpIHtcblx0XHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnLnRvU3RyaW5nKCkpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsInZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgdHJ5VG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdHJ5LXRvLXN0cmluZycpO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYEFzc2VydDogSXNDYWxsYWJsZShhcmd1bWVudCkgaXMgdHJ1ZWBcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIGlmIChpc0NhbGxhYmxlKGFyZ3VtZW50KSkgcmV0dXJuIGFyZ3VtZW50O1xuICB0aHJvdyAkVHlwZUVycm9yKHRyeVRvU3RyaW5nKGFyZ3VtZW50KSArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbn07XG4iLCJ2YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xuXG52YXIgJFN0cmluZyA9IFN0cmluZztcbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAodHlwZW9mIGFyZ3VtZW50ID09ICdvYmplY3QnIHx8IGlzQ2FsbGFibGUoYXJndW1lbnQpKSByZXR1cm4gYXJndW1lbnQ7XG4gIHRocm93ICRUeXBlRXJyb3IoXCJDYW4ndCBzZXQgXCIgKyAkU3RyaW5nKGFyZ3VtZW50KSArICcgYXMgYSBwcm90b3R5cGUnKTtcbn07XG4iLCJ2YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgY3JlYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1jcmVhdGUnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5JykuZjtcblxudmFyIFVOU0NPUEFCTEVTID0gd2VsbEtub3duU3ltYm9sKCd1bnNjb3BhYmxlcycpO1xudmFyIEFycmF5UHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlO1xuXG4vLyBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLUBAdW5zY29wYWJsZXNcbmlmIChBcnJheVByb3RvdHlwZVtVTlNDT1BBQkxFU10gPT0gdW5kZWZpbmVkKSB7XG4gIGRlZmluZVByb3BlcnR5KEFycmF5UHJvdG90eXBlLCBVTlNDT1BBQkxFUywge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogY3JlYXRlKG51bGwpXG4gIH0pO1xufVxuXG4vLyBhZGQgYSBrZXkgdG8gQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgQXJyYXlQcm90b3R5cGVbVU5TQ09QQUJMRVNdW2tleV0gPSB0cnVlO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBjaGFyQXQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLW11bHRpYnl0ZScpLmNoYXJBdDtcblxuLy8gYEFkdmFuY2VTdHJpbmdJbmRleGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFkdmFuY2VzdHJpbmdpbmRleFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoUywgaW5kZXgsIHVuaWNvZGUpIHtcbiAgcmV0dXJuIGluZGV4ICsgKHVuaWNvZGUgPyBjaGFyQXQoUywgaW5kZXgpLmxlbmd0aCA6IDEpO1xufTtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxudmFyICRTdHJpbmcgPSBTdHJpbmc7XG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYEFzc2VydDogVHlwZShhcmd1bWVudCkgaXMgT2JqZWN0YFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgaWYgKGlzT2JqZWN0KGFyZ3VtZW50KSkgcmV0dXJuIGFyZ3VtZW50O1xuICB0aHJvdyAkVHlwZUVycm9yKCRTdHJpbmcoYXJndW1lbnQpICsgJyBpcyBub3QgYW4gb2JqZWN0Jyk7XG59O1xuIiwidmFyIHRvSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleGVkLW9iamVjdCcpO1xudmFyIHRvQWJzb2x1dGVJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1hYnNvbHV0ZS1pbmRleCcpO1xudmFyIGxlbmd0aE9mQXJyYXlMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2xlbmd0aC1vZi1hcnJheS1saWtlJyk7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUueyBpbmRleE9mLCBpbmNsdWRlcyB9YCBtZXRob2RzIGltcGxlbWVudGF0aW9uXG52YXIgY3JlYXRlTWV0aG9kID0gZnVuY3Rpb24gKElTX0lOQ0xVREVTKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIGVsLCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgTyA9IHRvSW5kZXhlZE9iamVjdCgkdGhpcyk7XG4gICAgdmFyIGxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlKE8pO1xuICAgIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleChmcm9tSW5kZXgsIGxlbmd0aCk7XG4gICAgdmFyIHZhbHVlO1xuICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICAgIGlmIChJU19JTkNMVURFUyAmJiBlbCAhPSBlbCkgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSB7XG4gICAgICB2YWx1ZSA9IE9baW5kZXgrK107XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICAgICAgaWYgKHZhbHVlICE9IHZhbHVlKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBBcnJheSNpbmRleE9mIGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG4gICAgfSBlbHNlIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7XG4gICAgICBpZiAoKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pICYmIE9baW5kZXhdID09PSBlbCkgcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG4gICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBBcnJheS5wcm90b3R5cGUuaW5jbHVkZXNgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmNsdWRlc1xuICBpbmNsdWRlczogY3JlYXRlTWV0aG9kKHRydWUpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmluZGV4T2ZgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmRleG9mXG4gIGluZGV4T2Y6IGNyZWF0ZU1ldGhvZChmYWxzZSlcbn07XG4iLCJ2YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBJbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luZGV4ZWQtb2JqZWN0Jyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG52YXIgbGVuZ3RoT2ZBcnJheUxpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbGVuZ3RoLW9mLWFycmF5LWxpa2UnKTtcbnZhciBhcnJheVNwZWNpZXNDcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktc3BlY2llcy1jcmVhdGUnKTtcblxudmFyIHB1c2ggPSB1bmN1cnJ5VGhpcyhbXS5wdXNoKTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS57IGZvckVhY2gsIG1hcCwgZmlsdGVyLCBzb21lLCBldmVyeSwgZmluZCwgZmluZEluZGV4LCBmaWx0ZXJSZWplY3QgfWAgbWV0aG9kcyBpbXBsZW1lbnRhdGlvblxudmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChUWVBFKSB7XG4gIHZhciBJU19NQVAgPSBUWVBFID09IDE7XG4gIHZhciBJU19GSUxURVIgPSBUWVBFID09IDI7XG4gIHZhciBJU19TT01FID0gVFlQRSA9PSAzO1xuICB2YXIgSVNfRVZFUlkgPSBUWVBFID09IDQ7XG4gIHZhciBJU19GSU5EX0lOREVYID0gVFlQRSA9PSA2O1xuICB2YXIgSVNfRklMVEVSX1JFSkVDVCA9IFRZUEUgPT0gNztcbiAgdmFyIE5PX0hPTEVTID0gVFlQRSA9PSA1IHx8IElTX0ZJTkRfSU5ERVg7XG4gIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIGNhbGxiYWNrZm4sIHRoYXQsIHNwZWNpZmljQ3JlYXRlKSB7XG4gICAgdmFyIE8gPSB0b09iamVjdCgkdGhpcyk7XG4gICAgdmFyIHNlbGYgPSBJbmRleGVkT2JqZWN0KE8pO1xuICAgIHZhciBib3VuZEZ1bmN0aW9uID0gYmluZChjYWxsYmFja2ZuLCB0aGF0KTtcbiAgICB2YXIgbGVuZ3RoID0gbGVuZ3RoT2ZBcnJheUxpa2Uoc2VsZik7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgY3JlYXRlID0gc3BlY2lmaWNDcmVhdGUgfHwgYXJyYXlTcGVjaWVzQ3JlYXRlO1xuICAgIHZhciB0YXJnZXQgPSBJU19NQVAgPyBjcmVhdGUoJHRoaXMsIGxlbmd0aCkgOiBJU19GSUxURVIgfHwgSVNfRklMVEVSX1JFSkVDVCA/IGNyZWF0ZSgkdGhpcywgMCkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHZhbHVlLCByZXN1bHQ7XG4gICAgZm9yICg7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIGlmIChOT19IT0xFUyB8fCBpbmRleCBpbiBzZWxmKSB7XG4gICAgICB2YWx1ZSA9IHNlbGZbaW5kZXhdO1xuICAgICAgcmVzdWx0ID0gYm91bmRGdW5jdGlvbih2YWx1ZSwgaW5kZXgsIE8pO1xuICAgICAgaWYgKFRZUEUpIHtcbiAgICAgICAgaWYgKElTX01BUCkgdGFyZ2V0W2luZGV4XSA9IHJlc3VsdDsgLy8gbWFwXG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCkgc3dpdGNoIChUWVBFKSB7XG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgIC8vIHNvbWVcbiAgICAgICAgICBjYXNlIDU6IHJldHVybiB2YWx1ZTsgICAgICAgICAgICAgLy8gZmluZFxuICAgICAgICAgIGNhc2UgNjogcmV0dXJuIGluZGV4OyAgICAgICAgICAgICAvLyBmaW5kSW5kZXhcbiAgICAgICAgICBjYXNlIDI6IHB1c2godGFyZ2V0LCB2YWx1ZSk7ICAgICAgLy8gZmlsdGVyXG4gICAgICAgIH0gZWxzZSBzd2l0Y2ggKFRZUEUpIHtcbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiBmYWxzZTsgICAgICAgICAgICAgLy8gZXZlcnlcbiAgICAgICAgICBjYXNlIDc6IHB1c2godGFyZ2V0LCB2YWx1ZSk7ICAgICAgLy8gZmlsdGVyUmVqZWN0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIElTX0ZJTkRfSU5ERVggPyAtMSA6IElTX1NPTUUgfHwgSVNfRVZFUlkgPyBJU19FVkVSWSA6IHRhcmdldDtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgQXJyYXkucHJvdG90eXBlLmZvckVhY2hgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5mb3JlYWNoXG4gIGZvckVhY2g6IGNyZWF0ZU1ldGhvZCgwKSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5tYXBgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5tYXBcbiAgbWFwOiBjcmVhdGVNZXRob2QoMSksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZmlsdGVyYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZmlsdGVyXG4gIGZpbHRlcjogY3JlYXRlTWV0aG9kKDIpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLnNvbWVgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5zb21lXG4gIHNvbWU6IGNyZWF0ZU1ldGhvZCgzKSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5ldmVyeWAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmV2ZXJ5XG4gIGV2ZXJ5OiBjcmVhdGVNZXRob2QoNCksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZmluZGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRcbiAgZmluZDogY3JlYXRlTWV0aG9kKDUpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRJbmRleFxuICBmaW5kSW5kZXg6IGNyZWF0ZU1ldGhvZCg2KSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJSZWplY3RgIG1ldGhvZFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1hcnJheS1maWx0ZXJpbmdcbiAgZmlsdGVyUmVqZWN0OiBjcmVhdGVNZXRob2QoNylcbn07XG4iLCJ2YXIgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1hcnJheScpO1xudmFyIGlzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY29uc3RydWN0b3InKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcbnZhciAkQXJyYXkgPSBBcnJheTtcblxuLy8gYSBwYXJ0IG9mIGBBcnJheVNwZWNpZXNDcmVhdGVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheXNwZWNpZXNjcmVhdGVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9yaWdpbmFsQXJyYXkpIHtcbiAgdmFyIEM7XG4gIGlmIChpc0FycmF5KG9yaWdpbmFsQXJyYXkpKSB7XG4gICAgQyA9IG9yaWdpbmFsQXJyYXkuY29uc3RydWN0b3I7XG4gICAgLy8gY3Jvc3MtcmVhbG0gZmFsbGJhY2tcbiAgICBpZiAoaXNDb25zdHJ1Y3RvcihDKSAmJiAoQyA9PT0gJEFycmF5IHx8IGlzQXJyYXkoQy5wcm90b3R5cGUpKSkgQyA9IHVuZGVmaW5lZDtcbiAgICBlbHNlIGlmIChpc09iamVjdChDKSkge1xuICAgICAgQyA9IENbU1BFQ0lFU107XG4gICAgICBpZiAoQyA9PT0gbnVsbCkgQyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gcmV0dXJuIEMgPT09IHVuZGVmaW5lZCA/ICRBcnJheSA6IEM7XG59O1xuIiwidmFyIGFycmF5U3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3InKTtcblxuLy8gYEFycmF5U3BlY2llc0NyZWF0ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5c3BlY2llc2NyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3JpZ2luYWxBcnJheSwgbGVuZ3RoKSB7XG4gIHJldHVybiBuZXcgKGFycmF5U3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsQXJyYXkpKShsZW5ndGggPT09IDAgPyAwIDogbGVuZ3RoKTtcbn07XG4iLCJ2YXIgdW5jdXJyeVRoaXNSYXcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzLXJhdycpO1xuXG52YXIgdG9TdHJpbmcgPSB1bmN1cnJ5VGhpc1Jhdyh7fS50b1N0cmluZyk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpc1JhdygnJy5zbGljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBzdHJpbmdTbGljZSh0b1N0cmluZyhpdCksIDgsIC0xKTtcbn07XG4iLCJ2YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBjbGFzc29mUmF3ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xudmFyICRPYmplY3QgPSBPYmplY3Q7XG5cbi8vIEVTMyB3cm9uZyBoZXJlXG52YXIgQ09SUkVDVF9BUkdVTUVOVFMgPSBjbGFzc29mUmF3KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJztcblxuLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3JcbnZhciB0cnlHZXQgPSBmdW5jdGlvbiAoaXQsIGtleSkge1xuICB0cnkge1xuICAgIHJldHVybiBpdFtrZXldO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG59O1xuXG4vLyBnZXR0aW5nIHRhZyBmcm9tIEVTNisgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgXG5tb2R1bGUuZXhwb3J0cyA9IFRPX1NUUklOR19UQUdfU1VQUE9SVCA/IGNsYXNzb2ZSYXcgOiBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIE8sIHRhZywgcmVzdWx0O1xuICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCdcbiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2VcbiAgICA6IHR5cGVvZiAodGFnID0gdHJ5R2V0KE8gPSAkT2JqZWN0KGl0KSwgVE9fU1RSSU5HX1RBRykpID09ICdzdHJpbmcnID8gdGFnXG4gICAgLy8gYnVpbHRpblRhZyBjYXNlXG4gICAgOiBDT1JSRUNUX0FSR1VNRU5UUyA/IGNsYXNzb2ZSYXcoTylcbiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrXG4gICAgOiAocmVzdWx0ID0gY2xhc3NvZlJhdyhPKSkgPT0gJ09iamVjdCcgJiYgaXNDYWxsYWJsZShPLmNhbGxlZSkgPyAnQXJndW1lbnRzJyA6IHJlc3VsdDtcbn07XG4iLCJ2YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBvd25LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL293bi1rZXlzJyk7XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldCwgc291cmNlLCBleGNlcHRpb25zKSB7XG4gIHZhciBrZXlzID0gb3duS2V5cyhzb3VyY2UpO1xuICB2YXIgZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mO1xuICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlLmY7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIGlmICghaGFzT3duKHRhcmdldCwga2V5KSAmJiAhKGV4Y2VwdGlvbnMgJiYgaGFzT3duKGV4Y2VwdGlvbnMsIGtleSkpKSB7XG4gICAgICBkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgfVxuICB9XG59O1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpO1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHktZGVzY3JpcHRvcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERFU0NSSVBUT1JTID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICByZXR1cm4gZGVmaW5lUHJvcGVydHlNb2R1bGUuZihvYmplY3QsIGtleSwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDEsIHZhbHVlKSk7XG59IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gb2JqZWN0O1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGJpdG1hcCwgdmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn07XG4iLCJ2YXIgbWFrZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbWFrZS1idWlsdC1pbicpO1xudmFyIGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBuYW1lLCBkZXNjcmlwdG9yKSB7XG4gIGlmIChkZXNjcmlwdG9yLmdldCkgbWFrZUJ1aWx0SW4oZGVzY3JpcHRvci5nZXQsIG5hbWUsIHsgZ2V0dGVyOiB0cnVlIH0pO1xuICBpZiAoZGVzY3JpcHRvci5zZXQpIG1ha2VCdWlsdEluKGRlc2NyaXB0b3Iuc2V0LCBuYW1lLCB7IHNldHRlcjogdHJ1ZSB9KTtcbiAgcmV0dXJuIGRlZmluZVByb3BlcnR5LmYodGFyZ2V0LCBuYW1lLCBkZXNjcmlwdG9yKTtcbn07XG4iLCJ2YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciBtYWtlQnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9tYWtlLWJ1aWx0LWluJyk7XG52YXIgZGVmaW5lR2xvYmFsUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWdsb2JhbC1wcm9wZXJ0eScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChPLCBrZXksIHZhbHVlLCBvcHRpb25zKSB7XG4gIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICB2YXIgc2ltcGxlID0gb3B0aW9ucy5lbnVtZXJhYmxlO1xuICB2YXIgbmFtZSA9IG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uYW1lIDoga2V5O1xuICBpZiAoaXNDYWxsYWJsZSh2YWx1ZSkpIG1ha2VCdWlsdEluKHZhbHVlLCBuYW1lLCBvcHRpb25zKTtcbiAgaWYgKG9wdGlvbnMuZ2xvYmFsKSB7XG4gICAgaWYgKHNpbXBsZSkgT1trZXldID0gdmFsdWU7XG4gICAgZWxzZSBkZWZpbmVHbG9iYWxQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFvcHRpb25zLnVuc2FmZSkgZGVsZXRlIE9ba2V5XTtcbiAgICAgIGVsc2UgaWYgKE9ba2V5XSkgc2ltcGxlID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gICAgaWYgKHNpbXBsZSkgT1trZXldID0gdmFsdWU7XG4gICAgZWxzZSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mKE8sIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6ICFvcHRpb25zLm5vbkNvbmZpZ3VyYWJsZSxcbiAgICAgIHdyaXRhYmxlOiAhb3B0aW9ucy5ub25Xcml0YWJsZVxuICAgIH0pO1xuICB9IHJldHVybiBPO1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gc2FmZVxudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGdsb2JhbFtrZXldID0gdmFsdWU7XG4gIH0gcmV0dXJuIHZhbHVlO1xufTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG4vLyBEZXRlY3QgSUU4J3MgaW5jb21wbGV0ZSBkZWZpbmVQcm9wZXJ0eSBpbXBsZW1lbnRhdGlvblxubW9kdWxlLmV4cG9ydHMgPSAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWRlZmluZXByb3BlcnR5IC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nXG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIDEsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pWzFdICE9IDc7XG59KTtcbiIsInZhciBkb2N1bWVudEFsbCA9IHR5cGVvZiBkb2N1bWVudCA9PSAnb2JqZWN0JyAmJiBkb2N1bWVudC5hbGw7XG5cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtSXNIVE1MRERBLWludGVybmFsLXNsb3RcbnZhciBJU19IVE1MRERBID0gdHlwZW9mIGRvY3VtZW50QWxsID09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50QWxsICE9PSB1bmRlZmluZWQ7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhbGw6IGRvY3VtZW50QWxsLFxuICBJU19IVE1MRERBOiBJU19IVE1MRERBXG59O1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxudmFyIGRvY3VtZW50ID0gZ2xvYmFsLmRvY3VtZW50O1xuLy8gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcgaW4gb2xkIElFXG52YXIgRVhJU1RTID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gRVhJU1RTID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07XG4iLCJ2YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRCdWlsdEluKCduYXZpZ2F0b3InLCAndXNlckFnZW50JykgfHwgJyc7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIHVzZXJBZ2VudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtdXNlci1hZ2VudCcpO1xuXG52YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzO1xudmFyIERlbm8gPSBnbG9iYWwuRGVubztcbnZhciB2ZXJzaW9ucyA9IHByb2Nlc3MgJiYgcHJvY2Vzcy52ZXJzaW9ucyB8fCBEZW5vICYmIERlbm8udmVyc2lvbjtcbnZhciB2OCA9IHZlcnNpb25zICYmIHZlcnNpb25zLnY4O1xudmFyIG1hdGNoLCB2ZXJzaW9uO1xuXG5pZiAodjgpIHtcbiAgbWF0Y2ggPSB2OC5zcGxpdCgnLicpO1xuICAvLyBpbiBvbGQgQ2hyb21lLCB2ZXJzaW9ucyBvZiBWOCBpc24ndCBWOCA9IENocm9tZSAvIDEwXG4gIC8vIGJ1dCB0aGVpciBjb3JyZWN0IHZlcnNpb25zIGFyZSBub3QgaW50ZXJlc3RpbmcgZm9yIHVzXG4gIHZlcnNpb24gPSBtYXRjaFswXSA+IDAgJiYgbWF0Y2hbMF0gPCA0ID8gMSA6ICsobWF0Y2hbMF0gKyBtYXRjaFsxXSk7XG59XG5cbi8vIEJyb3dzZXJGUyBOb2RlSlMgYHByb2Nlc3NgIHBvbHlmaWxsIGluY29ycmVjdGx5IHNldCBgLnY4YCB0byBgMC4wYFxuLy8gc28gY2hlY2sgYHVzZXJBZ2VudGAgZXZlbiBpZiBgLnY4YCBleGlzdHMsIGJ1dCAwXG5pZiAoIXZlcnNpb24gJiYgdXNlckFnZW50KSB7XG4gIG1hdGNoID0gdXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvKFxcZCspLyk7XG4gIGlmICghbWF0Y2ggfHwgbWF0Y2hbMV0gPj0gNzQpIHtcbiAgICBtYXRjaCA9IHVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLyk7XG4gICAgaWYgKG1hdGNoKSB2ZXJzaW9uID0gK21hdGNoWzFdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmVyc2lvbjtcbiIsIi8vIElFOC0gZG9uJ3QgZW51bSBidWcga2V5c1xubW9kdWxlLmV4cG9ydHMgPSBbXG4gICdjb25zdHJ1Y3RvcicsXG4gICdoYXNPd25Qcm9wZXJ0eScsXG4gICdpc1Byb3RvdHlwZU9mJyxcbiAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgJ3RvU3RyaW5nJyxcbiAgJ3ZhbHVlT2YnXG5dO1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpLmY7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eScpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgZGVmaW5lR2xvYmFsUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWdsb2JhbC1wcm9wZXJ0eScpO1xudmFyIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY29weS1jb25zdHJ1Y3Rvci1wcm9wZXJ0aWVzJyk7XG52YXIgaXNGb3JjZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtZm9yY2VkJyk7XG5cbi8qXG4gIG9wdGlvbnMudGFyZ2V0ICAgICAgICAgLSBuYW1lIG9mIHRoZSB0YXJnZXQgb2JqZWN0XG4gIG9wdGlvbnMuZ2xvYmFsICAgICAgICAgLSB0YXJnZXQgaXMgdGhlIGdsb2JhbCBvYmplY3RcbiAgb3B0aW9ucy5zdGF0ICAgICAgICAgICAtIGV4cG9ydCBhcyBzdGF0aWMgbWV0aG9kcyBvZiB0YXJnZXRcbiAgb3B0aW9ucy5wcm90byAgICAgICAgICAtIGV4cG9ydCBhcyBwcm90b3R5cGUgbWV0aG9kcyBvZiB0YXJnZXRcbiAgb3B0aW9ucy5yZWFsICAgICAgICAgICAtIHJlYWwgcHJvdG90eXBlIG1ldGhvZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMuZm9yY2VkICAgICAgICAgLSBleHBvcnQgZXZlbiBpZiB0aGUgbmF0aXZlIGZlYXR1cmUgaXMgYXZhaWxhYmxlXG4gIG9wdGlvbnMuYmluZCAgICAgICAgICAgLSBiaW5kIG1ldGhvZHMgdG8gdGhlIHRhcmdldCwgcmVxdWlyZWQgZm9yIHRoZSBgcHVyZWAgdmVyc2lvblxuICBvcHRpb25zLndyYXAgICAgICAgICAgIC0gd3JhcCBjb25zdHJ1Y3RvcnMgdG8gcHJldmVudGluZyBnbG9iYWwgcG9sbHV0aW9uLCByZXF1aXJlZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMudW5zYWZlICAgICAgICAgLSB1c2UgdGhlIHNpbXBsZSBhc3NpZ25tZW50IG9mIHByb3BlcnR5IGluc3RlYWQgb2YgZGVsZXRlICsgZGVmaW5lUHJvcGVydHlcbiAgb3B0aW9ucy5zaGFtICAgICAgICAgICAtIGFkZCBhIGZsYWcgdG8gbm90IGNvbXBsZXRlbHkgZnVsbCBwb2x5ZmlsbHNcbiAgb3B0aW9ucy5lbnVtZXJhYmxlICAgICAtIGV4cG9ydCBhcyBlbnVtZXJhYmxlIHByb3BlcnR5XG4gIG9wdGlvbnMuZG9udENhbGxHZXRTZXQgLSBwcmV2ZW50IGNhbGxpbmcgYSBnZXR0ZXIgb24gdGFyZ2V0XG4gIG9wdGlvbnMubmFtZSAgICAgICAgICAgLSB0aGUgLm5hbWUgb2YgdGhlIGZ1bmN0aW9uIGlmIGl0IGRvZXMgbm90IG1hdGNoIHRoZSBrZXlcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRpb25zLCBzb3VyY2UpIHtcbiAgdmFyIFRBUkdFVCA9IG9wdGlvbnMudGFyZ2V0O1xuICB2YXIgR0xPQkFMID0gb3B0aW9ucy5nbG9iYWw7XG4gIHZhciBTVEFUSUMgPSBvcHRpb25zLnN0YXQ7XG4gIHZhciBGT1JDRUQsIHRhcmdldCwga2V5LCB0YXJnZXRQcm9wZXJ0eSwgc291cmNlUHJvcGVydHksIGRlc2NyaXB0b3I7XG4gIGlmIChHTE9CQUwpIHtcbiAgICB0YXJnZXQgPSBnbG9iYWw7XG4gIH0gZWxzZSBpZiAoU1RBVElDKSB7XG4gICAgdGFyZ2V0ID0gZ2xvYmFsW1RBUkdFVF0gfHwgZGVmaW5lR2xvYmFsUHJvcGVydHkoVEFSR0VULCB7fSk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0ID0gKGdsb2JhbFtUQVJHRVRdIHx8IHt9KS5wcm90b3R5cGU7XG4gIH1cbiAgaWYgKHRhcmdldCkgZm9yIChrZXkgaW4gc291cmNlKSB7XG4gICAgc291cmNlUHJvcGVydHkgPSBzb3VyY2Vba2V5XTtcbiAgICBpZiAob3B0aW9ucy5kb250Q2FsbEdldFNldCkge1xuICAgICAgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSk7XG4gICAgICB0YXJnZXRQcm9wZXJ0eSA9IGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci52YWx1ZTtcbiAgICB9IGVsc2UgdGFyZ2V0UHJvcGVydHkgPSB0YXJnZXRba2V5XTtcbiAgICBGT1JDRUQgPSBpc0ZvcmNlZChHTE9CQUwgPyBrZXkgOiBUQVJHRVQgKyAoU1RBVElDID8gJy4nIDogJyMnKSArIGtleSwgb3B0aW9ucy5mb3JjZWQpO1xuICAgIC8vIGNvbnRhaW5lZCBpbiB0YXJnZXRcbiAgICBpZiAoIUZPUkNFRCAmJiB0YXJnZXRQcm9wZXJ0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZVByb3BlcnR5ID09IHR5cGVvZiB0YXJnZXRQcm9wZXJ0eSkgY29udGludWU7XG4gICAgICBjb3B5Q29uc3RydWN0b3JQcm9wZXJ0aWVzKHNvdXJjZVByb3BlcnR5LCB0YXJnZXRQcm9wZXJ0eSk7XG4gICAgfVxuICAgIC8vIGFkZCBhIGZsYWcgdG8gbm90IGNvbXBsZXRlbHkgZnVsbCBwb2x5ZmlsbHNcbiAgICBpZiAob3B0aW9ucy5zaGFtIHx8ICh0YXJnZXRQcm9wZXJ0eSAmJiB0YXJnZXRQcm9wZXJ0eS5zaGFtKSkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KHNvdXJjZVByb3BlcnR5LCAnc2hhbScsIHRydWUpO1xuICAgIH1cbiAgICBkZWZpbmVCdWlsdEluKHRhcmdldCwga2V5LCBzb3VyY2VQcm9wZXJ0eSwgb3B0aW9ucyk7XG4gIH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhZXhlYygpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gVE9ETzogUmVtb3ZlIGZyb20gYGNvcmUtanNANGAgc2luY2UgaXQncyBtb3ZlZCB0byBlbnRyeSBwb2ludHNcbnJlcXVpcmUoJy4uL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBkZWZpbmVCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbicpO1xudmFyIHJlZ2V4cEV4ZWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtbm9uLWVudW1lcmFibGUtcHJvcGVydHknKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcbnZhciBSZWdFeHBQcm90b3R5cGUgPSBSZWdFeHAucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVksIGV4ZWMsIEZPUkNFRCwgU0hBTSkge1xuICB2YXIgU1lNQk9MID0gd2VsbEtub3duU3ltYm9sKEtFWSk7XG5cbiAgdmFyIERFTEVHQVRFU19UT19TWU1CT0wgPSAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIC8vIFN0cmluZyBtZXRob2RzIGNhbGwgc3ltYm9sLW5hbWVkIFJlZ0VwIG1ldGhvZHNcbiAgICB2YXIgTyA9IHt9O1xuICAgIE9bU1lNQk9MXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH07XG4gICAgcmV0dXJuICcnW0tFWV0oTykgIT0gNztcbiAgfSk7XG5cbiAgdmFyIERFTEVHQVRFU19UT19FWEVDID0gREVMRUdBVEVTX1RPX1NZTUJPTCAmJiAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIC8vIFN5bWJvbC1uYW1lZCBSZWdFeHAgbWV0aG9kcyBjYWxsIC5leGVjXG4gICAgdmFyIGV4ZWNDYWxsZWQgPSBmYWxzZTtcbiAgICB2YXIgcmUgPSAvYS87XG5cbiAgICBpZiAoS0VZID09PSAnc3BsaXQnKSB7XG4gICAgICAvLyBXZSBjYW4ndCB1c2UgcmVhbCByZWdleCBoZXJlIHNpbmNlIGl0IGNhdXNlcyBkZW9wdGltaXphdGlvblxuICAgICAgLy8gYW5kIHNlcmlvdXMgcGVyZm9ybWFuY2UgZGVncmFkYXRpb24gaW4gVjhcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8zMDZcbiAgICAgIHJlID0ge307XG4gICAgICAvLyBSZWdFeHBbQEBzcGxpdF0gZG9lc24ndCBjYWxsIHRoZSByZWdleCdzIGV4ZWMgbWV0aG9kLCBidXQgZmlyc3QgY3JlYXRlc1xuICAgICAgLy8gYSBuZXcgb25lLiBXZSBuZWVkIHRvIHJldHVybiB0aGUgcGF0Y2hlZCByZWdleCB3aGVuIGNyZWF0aW5nIHRoZSBuZXcgb25lLlxuICAgICAgcmUuY29uc3RydWN0b3IgPSB7fTtcbiAgICAgIHJlLmNvbnN0cnVjdG9yW1NQRUNJRVNdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmU7IH07XG4gICAgICByZS5mbGFncyA9ICcnO1xuICAgICAgcmVbU1lNQk9MXSA9IC8uL1tTWU1CT0xdO1xuICAgIH1cblxuICAgIHJlLmV4ZWMgPSBmdW5jdGlvbiAoKSB7IGV4ZWNDYWxsZWQgPSB0cnVlOyByZXR1cm4gbnVsbDsgfTtcblxuICAgIHJlW1NZTUJPTF0oJycpO1xuICAgIHJldHVybiAhZXhlY0NhbGxlZDtcbiAgfSk7XG5cbiAgaWYgKFxuICAgICFERUxFR0FURVNfVE9fU1lNQk9MIHx8XG4gICAgIURFTEVHQVRFU19UT19FWEVDIHx8XG4gICAgRk9SQ0VEXG4gICkge1xuICAgIHZhciB1bmN1cnJpZWROYXRpdmVSZWdFeHBNZXRob2QgPSB1bmN1cnJ5VGhpcygvLi9bU1lNQk9MXSk7XG4gICAgdmFyIG1ldGhvZHMgPSBleGVjKFNZTUJPTCwgJydbS0VZXSwgZnVuY3Rpb24gKG5hdGl2ZU1ldGhvZCwgcmVnZXhwLCBzdHIsIGFyZzIsIGZvcmNlU3RyaW5nTWV0aG9kKSB7XG4gICAgICB2YXIgdW5jdXJyaWVkTmF0aXZlTWV0aG9kID0gdW5jdXJyeVRoaXMobmF0aXZlTWV0aG9kKTtcbiAgICAgIHZhciAkZXhlYyA9IHJlZ2V4cC5leGVjO1xuICAgICAgaWYgKCRleGVjID09PSByZWdleHBFeGVjIHx8ICRleGVjID09PSBSZWdFeHBQcm90b3R5cGUuZXhlYykge1xuICAgICAgICBpZiAoREVMRUdBVEVTX1RPX1NZTUJPTCAmJiAhZm9yY2VTdHJpbmdNZXRob2QpIHtcbiAgICAgICAgICAvLyBUaGUgbmF0aXZlIFN0cmluZyBtZXRob2QgYWxyZWFkeSBkZWxlZ2F0ZXMgdG8gQEBtZXRob2QgKHRoaXNcbiAgICAgICAgICAvLyBwb2x5ZmlsbGVkIGZ1bmN0aW9uKSwgbGVhc2luZyB0byBpbmZpbml0ZSByZWN1cnNpb24uXG4gICAgICAgICAgLy8gV2UgYXZvaWQgaXQgYnkgZGlyZWN0bHkgY2FsbGluZyB0aGUgbmF0aXZlIEBAbWV0aG9kIG1ldGhvZC5cbiAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5jdXJyaWVkTmF0aXZlUmVnRXhwTWV0aG9kKHJlZ2V4cCwgc3RyLCBhcmcyKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmN1cnJpZWROYXRpdmVNZXRob2Qoc3RyLCByZWdleHAsIGFyZzIpIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyBkb25lOiBmYWxzZSB9O1xuICAgIH0pO1xuXG4gICAgZGVmaW5lQnVpbHRJbihTdHJpbmcucHJvdG90eXBlLCBLRVksIG1ldGhvZHNbMF0pO1xuICAgIGRlZmluZUJ1aWx0SW4oUmVnRXhwUHJvdG90eXBlLCBTWU1CT0wsIG1ldGhvZHNbMV0pO1xuICB9XG5cbiAgaWYgKFNIQU0pIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShSZWdFeHBQcm90b3R5cGVbU1lNQk9MXSwgJ3NoYW0nLCB0cnVlKTtcbn07XG4iLCJ2YXIgTkFUSVZFX0JJTkQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUnKTtcblxudmFyIEZ1bmN0aW9uUHJvdG90eXBlID0gRnVuY3Rpb24ucHJvdG90eXBlO1xudmFyIGFwcGx5ID0gRnVuY3Rpb25Qcm90b3R5cGUuYXBwbHk7XG52YXIgY2FsbCA9IEZ1bmN0aW9uUHJvdG90eXBlLmNhbGw7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1yZWZsZWN0IC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gdHlwZW9mIFJlZmxlY3QgPT0gJ29iamVjdCcgJiYgUmVmbGVjdC5hcHBseSB8fCAoTkFUSVZFX0JJTkQgPyBjYWxsLmJpbmQoYXBwbHkpIDogZnVuY3Rpb24gKCkge1xuICByZXR1cm4gY2FsbC5hcHBseShhcHBseSwgYXJndW1lbnRzKTtcbn0pO1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG52YXIgTkFUSVZFX0JJTkQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUnKTtcblxudmFyIGJpbmQgPSB1bmN1cnJ5VGhpcyh1bmN1cnJ5VGhpcy5iaW5kKTtcblxuLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbiwgdGhhdCkge1xuICBhQ2FsbGFibGUoZm4pO1xuICByZXR1cm4gdGhhdCA9PT0gdW5kZWZpbmVkID8gZm4gOiBOQVRJVkVfQklORCA/IGJpbmQoZm4sIHRoYXQpIDogZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG4iLCJ2YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tZnVuY3Rpb24tcHJvdG90eXBlLWJpbmQgLS0gc2FmZVxuICB2YXIgdGVzdCA9IChmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pLmJpbmQoKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucyAtLSBzYWZlXG4gIHJldHVybiB0eXBlb2YgdGVzdCAhPSAnZnVuY3Rpb24nIHx8IHRlc3QuaGFzT3duUHJvcGVydHkoJ3Byb3RvdHlwZScpO1xufSk7XG4iLCJ2YXIgTkFUSVZFX0JJTkQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUnKTtcblxudmFyIGNhbGwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDtcblxubW9kdWxlLmV4cG9ydHMgPSBOQVRJVkVfQklORCA/IGNhbGwuYmluZChjYWxsKSA6IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGNhbGwuYXBwbHkoY2FsbCwgYXJndW1lbnRzKTtcbn07XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBoYXNPd24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzLW93bi1wcm9wZXJ0eScpO1xuXG52YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvciAtLSBzYWZlXG52YXIgZ2V0RGVzY3JpcHRvciA9IERFU0NSSVBUT1JTICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbnZhciBFWElTVFMgPSBoYXNPd24oRnVuY3Rpb25Qcm90b3R5cGUsICduYW1lJyk7XG4vLyBhZGRpdGlvbmFsIHByb3RlY3Rpb24gZnJvbSBtaW5pZmllZCAvIG1hbmdsZWQgLyBkcm9wcGVkIGZ1bmN0aW9uIG5hbWVzXG52YXIgUFJPUEVSID0gRVhJU1RTICYmIChmdW5jdGlvbiBzb21ldGhpbmcoKSB7IC8qIGVtcHR5ICovIH0pLm5hbWUgPT09ICdzb21ldGhpbmcnO1xudmFyIENPTkZJR1VSQUJMRSA9IEVYSVNUUyAmJiAoIURFU0NSSVBUT1JTIHx8IChERVNDUklQVE9SUyAmJiBnZXREZXNjcmlwdG9yKEZ1bmN0aW9uUHJvdG90eXBlLCAnbmFtZScpLmNvbmZpZ3VyYWJsZSkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgRVhJU1RTOiBFWElTVFMsXG4gIFBST1BFUjogUFJPUEVSLFxuICBDT05GSUdVUkFCTEU6IENPTkZJR1VSQUJMRVxufTtcbiIsInZhciBOQVRJVkVfQklORCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLW5hdGl2ZScpO1xuXG52YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG52YXIgY2FsbCA9IEZ1bmN0aW9uUHJvdG90eXBlLmNhbGw7XG52YXIgdW5jdXJyeVRoaXNXaXRoQmluZCA9IE5BVElWRV9CSU5EICYmIEZ1bmN0aW9uUHJvdG90eXBlLmJpbmQuYmluZChjYWxsLCBjYWxsKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4pIHtcbiAgcmV0dXJuIE5BVElWRV9CSU5EID8gdW5jdXJyeVRoaXNXaXRoQmluZChmbikgOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNhbGwuYXBwbHkoZm4sIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuIiwidmFyIGNsYXNzb2ZSYXcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciB1bmN1cnJ5VGhpc1JhdyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMtcmF3Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuKSB7XG4gIC8vIE5hc2hvcm4gYnVnOlxuICAvLyAgIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xMTI4XG4gIC8vICAgaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzExMzBcbiAgaWYgKGNsYXNzb2ZSYXcoZm4pID09PSAnRnVuY3Rpb24nKSByZXR1cm4gdW5jdXJyeVRoaXNSYXcoZm4pO1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xuXG52YXIgYUZ1bmN0aW9uID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHJldHVybiBpc0NhbGxhYmxlKGFyZ3VtZW50KSA/IGFyZ3VtZW50IDogdW5kZWZpbmVkO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBtZXRob2QpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gYUZ1bmN0aW9uKGdsb2JhbFtuYW1lc3BhY2VdKSA6IGdsb2JhbFtuYW1lc3BhY2VdICYmIGdsb2JhbFtuYW1lc3BhY2VdW21ldGhvZF07XG59O1xuIiwidmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG52YXIgaXNOdWxsT3JVbmRlZmluZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtbnVsbC1vci11bmRlZmluZWQnKTtcblxuLy8gYEdldE1ldGhvZGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWdldG1ldGhvZFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoViwgUCkge1xuICB2YXIgZnVuYyA9IFZbUF07XG4gIHJldHVybiBpc051bGxPclVuZGVmaW5lZChmdW5jKSA/IHVuZGVmaW5lZCA6IGFDYWxsYWJsZShmdW5jKTtcbn07XG4iLCJ2YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG5cbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG52YXIgY2hhckF0ID0gdW5jdXJyeVRoaXMoJycuY2hhckF0KTtcbnZhciByZXBsYWNlID0gdW5jdXJyeVRoaXMoJycucmVwbGFjZSk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG52YXIgU1VCU1RJVFVUSU9OX1NZTUJPTFMgPSAvXFwkKFskJidgXXxcXGR7MSwyfXw8W14+XSo+KS9nO1xudmFyIFNVQlNUSVRVVElPTl9TWU1CT0xTX05PX05BTUVEID0gL1xcJChbJCYnYF18XFxkezEsMn0pL2c7XG5cbi8vIGBHZXRTdWJzdGl0dXRpb25gIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1nZXRzdWJzdGl0dXRpb25cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1hdGNoZWQsIHN0ciwgcG9zaXRpb24sIGNhcHR1cmVzLCBuYW1lZENhcHR1cmVzLCByZXBsYWNlbWVudCkge1xuICB2YXIgdGFpbFBvcyA9IHBvc2l0aW9uICsgbWF0Y2hlZC5sZW5ndGg7XG4gIHZhciBtID0gY2FwdHVyZXMubGVuZ3RoO1xuICB2YXIgc3ltYm9scyA9IFNVQlNUSVRVVElPTl9TWU1CT0xTX05PX05BTUVEO1xuICBpZiAobmFtZWRDYXB0dXJlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgbmFtZWRDYXB0dXJlcyA9IHRvT2JqZWN0KG5hbWVkQ2FwdHVyZXMpO1xuICAgIHN5bWJvbHMgPSBTVUJTVElUVVRJT05fU1lNQk9MUztcbiAgfVxuICByZXR1cm4gcmVwbGFjZShyZXBsYWNlbWVudCwgc3ltYm9scywgZnVuY3Rpb24gKG1hdGNoLCBjaCkge1xuICAgIHZhciBjYXB0dXJlO1xuICAgIHN3aXRjaCAoY2hhckF0KGNoLCAwKSkge1xuICAgICAgY2FzZSAnJCc6IHJldHVybiAnJCc7XG4gICAgICBjYXNlICcmJzogcmV0dXJuIG1hdGNoZWQ7XG4gICAgICBjYXNlICdgJzogcmV0dXJuIHN0cmluZ1NsaWNlKHN0ciwgMCwgcG9zaXRpb24pO1xuICAgICAgY2FzZSBcIidcIjogcmV0dXJuIHN0cmluZ1NsaWNlKHN0ciwgdGFpbFBvcyk7XG4gICAgICBjYXNlICc8JzpcbiAgICAgICAgY2FwdHVyZSA9IG5hbWVkQ2FwdHVyZXNbc3RyaW5nU2xpY2UoY2gsIDEsIC0xKV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gXFxkXFxkP1xuICAgICAgICB2YXIgbiA9ICtjaDtcbiAgICAgICAgaWYgKG4gPT09IDApIHJldHVybiBtYXRjaDtcbiAgICAgICAgaWYgKG4gPiBtKSB7XG4gICAgICAgICAgdmFyIGYgPSBmbG9vcihuIC8gMTApO1xuICAgICAgICAgIGlmIChmID09PSAwKSByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgaWYgKGYgPD0gbSkgcmV0dXJuIGNhcHR1cmVzW2YgLSAxXSA9PT0gdW5kZWZpbmVkID8gY2hhckF0KGNoLCAxKSA6IGNhcHR1cmVzW2YgLSAxXSArIGNoYXJBdChjaCwgMSk7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG4gICAgICAgIGNhcHR1cmUgPSBjYXB0dXJlc1tuIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBjYXB0dXJlID09PSB1bmRlZmluZWQgPyAnJyA6IGNhcHR1cmU7XG4gIH0pO1xufTtcbiIsInZhciBjaGVjayA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXQgJiYgaXQuTWF0aCA9PSBNYXRoICYmIGl0O1xufTtcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjhcbm1vZHVsZS5leHBvcnRzID1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLWdsb2JhbC10aGlzIC0tIHNhZmVcbiAgY2hlY2sodHlwZW9mIGdsb2JhbFRoaXMgPT0gJ29iamVjdCcgJiYgZ2xvYmFsVGhpcykgfHxcbiAgY2hlY2sodHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cpIHx8XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgLS0gc2FmZVxuICBjaGVjayh0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmKSB8fFxuICBjaGVjayh0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCkgfHxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jIC0tIGZhbGxiYWNrXG4gIChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSgpIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4iLCJ2YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IHVuY3VycnlUaGlzKHt9Lmhhc093blByb3BlcnR5KTtcblxuLy8gYEhhc093blByb3BlcnR5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaGFzb3ducHJvcGVydHlcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtaGFzb3duIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0Lmhhc093biB8fCBmdW5jdGlvbiBoYXNPd24oaXQsIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkodG9PYmplY3QoaXQpLCBrZXkpO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0ge307XG4iLCJ2YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRCdWlsdEluKCdkb2N1bWVudCcsICdkb2N1bWVudEVsZW1lbnQnKTtcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudCcpO1xuXG4vLyBUaGFua3MgdG8gSUU4IGZvciBpdHMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIURFU0NSSVBUT1JTICYmICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjcmVhdGVFbGVtZW50KCdkaXYnKSwgJ2EnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9XG4gIH0pLmEgIT0gNztcbn0pO1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mLXJhdycpO1xuXG52YXIgJE9iamVjdCA9IE9iamVjdDtcbnZhciBzcGxpdCA9IHVuY3VycnlUaGlzKCcnLnNwbGl0KTtcblxuLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3Ncbm1vZHVsZS5leHBvcnRzID0gZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyB0aHJvd3MgYW4gZXJyb3IgaW4gcmhpbm8sIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9yaGluby9pc3N1ZXMvMzQ2XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMgLS0gc2FmZVxuICByZXR1cm4gISRPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKTtcbn0pID8gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBjbGFzc29mKGl0KSA9PSAnU3RyaW5nJyA/IHNwbGl0KGl0LCAnJykgOiAkT2JqZWN0KGl0KTtcbn0gOiAkT2JqZWN0O1xuIiwidmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZicpO1xuXG4vLyBtYWtlcyBzdWJjbGFzc2luZyB3b3JrIGNvcnJlY3QgZm9yIHdyYXBwZWQgYnVpbHQtaW5zXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkdGhpcywgZHVtbXksIFdyYXBwZXIpIHtcbiAgdmFyIE5ld1RhcmdldCwgTmV3VGFyZ2V0UHJvdG90eXBlO1xuICBpZiAoXG4gICAgLy8gaXQgY2FuIHdvcmsgb25seSB3aXRoIG5hdGl2ZSBgc2V0UHJvdG90eXBlT2ZgXG4gICAgc2V0UHJvdG90eXBlT2YgJiZcbiAgICAvLyB3ZSBoYXZlbid0IGNvbXBsZXRlbHkgY29ycmVjdCBwcmUtRVM2IHdheSBmb3IgZ2V0dGluZyBgbmV3LnRhcmdldGAsIHNvIHVzZSB0aGlzXG4gICAgaXNDYWxsYWJsZShOZXdUYXJnZXQgPSBkdW1teS5jb25zdHJ1Y3RvcikgJiZcbiAgICBOZXdUYXJnZXQgIT09IFdyYXBwZXIgJiZcbiAgICBpc09iamVjdChOZXdUYXJnZXRQcm90b3R5cGUgPSBOZXdUYXJnZXQucHJvdG90eXBlKSAmJlxuICAgIE5ld1RhcmdldFByb3RvdHlwZSAhPT0gV3JhcHBlci5wcm90b3R5cGVcbiAgKSBzZXRQcm90b3R5cGVPZigkdGhpcywgTmV3VGFyZ2V0UHJvdG90eXBlKTtcbiAgcmV0dXJuICR0aGlzO1xufTtcbiIsInZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgc3RvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLXN0b3JlJyk7XG5cbnZhciBmdW5jdGlvblRvU3RyaW5nID0gdW5jdXJyeVRoaXMoRnVuY3Rpb24udG9TdHJpbmcpO1xuXG4vLyB0aGlzIGhlbHBlciBicm9rZW4gaW4gYGNvcmUtanNAMy40LjEtMy40LjRgLCBzbyB3ZSBjYW4ndCB1c2UgYHNoYXJlZGAgaGVscGVyXG5pZiAoIWlzQ2FsbGFibGUoc3RvcmUuaW5zcGVjdFNvdXJjZSkpIHtcbiAgc3RvcmUuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuICAgIHJldHVybiBmdW5jdGlvblRvU3RyaW5nKGl0KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdG9yZS5pbnNwZWN0U291cmNlO1xuIiwidmFyIE5BVElWRV9XRUFLX01BUCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWFrLW1hcC1iYXNpYy1kZXRlY3Rpb24nKTtcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eScpO1xudmFyIGhhc093biA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMtb3duLXByb3BlcnR5Jyk7XG52YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1zdG9yZScpO1xudmFyIHNoYXJlZEtleSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQta2V5Jyk7XG52YXIgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRkZW4ta2V5cycpO1xuXG52YXIgT0JKRUNUX0FMUkVBRFlfSU5JVElBTElaRUQgPSAnT2JqZWN0IGFscmVhZHkgaW5pdGlhbGl6ZWQnO1xudmFyIFR5cGVFcnJvciA9IGdsb2JhbC5UeXBlRXJyb3I7XG52YXIgV2Vha01hcCA9IGdsb2JhbC5XZWFrTWFwO1xudmFyIHNldCwgZ2V0LCBoYXM7XG5cbnZhciBlbmZvcmNlID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBoYXMoaXQpID8gZ2V0KGl0KSA6IHNldChpdCwge30pO1xufTtcblxudmFyIGdldHRlckZvciA9IGZ1bmN0aW9uIChUWVBFKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaXQpIHtcbiAgICB2YXIgc3RhdGU7XG4gICAgaWYgKCFpc09iamVjdChpdCkgfHwgKHN0YXRlID0gZ2V0KGl0KSkudHlwZSAhPT0gVFlQRSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICcgKyBUWVBFICsgJyByZXF1aXJlZCcpO1xuICAgIH0gcmV0dXJuIHN0YXRlO1xuICB9O1xufTtcblxuaWYgKE5BVElWRV9XRUFLX01BUCB8fCBzaGFyZWQuc3RhdGUpIHtcbiAgdmFyIHN0b3JlID0gc2hhcmVkLnN0YXRlIHx8IChzaGFyZWQuc3RhdGUgPSBuZXcgV2Vha01hcCgpKTtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1hc3NpZ24gLS0gcHJvdG90eXBlIG1ldGhvZHMgcHJvdGVjdGlvbiAqL1xuICBzdG9yZS5nZXQgPSBzdG9yZS5nZXQ7XG4gIHN0b3JlLmhhcyA9IHN0b3JlLmhhcztcbiAgc3RvcmUuc2V0ID0gc3RvcmUuc2V0O1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlbGYtYXNzaWduIC0tIHByb3RvdHlwZSBtZXRob2RzIHByb3RlY3Rpb24gKi9cbiAgc2V0ID0gZnVuY3Rpb24gKGl0LCBtZXRhZGF0YSkge1xuICAgIGlmIChzdG9yZS5oYXMoaXQpKSB0aHJvdyBUeXBlRXJyb3IoT0JKRUNUX0FMUkVBRFlfSU5JVElBTElaRUQpO1xuICAgIG1ldGFkYXRhLmZhY2FkZSA9IGl0O1xuICAgIHN0b3JlLnNldChpdCwgbWV0YWRhdGEpO1xuICAgIHJldHVybiBtZXRhZGF0YTtcbiAgfTtcbiAgZ2V0ID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldChpdCkgfHwge307XG4gIH07XG4gIGhhcyA9IGZ1bmN0aW9uIChpdCkge1xuICAgIHJldHVybiBzdG9yZS5oYXMoaXQpO1xuICB9O1xufSBlbHNlIHtcbiAgdmFyIFNUQVRFID0gc2hhcmVkS2V5KCdzdGF0ZScpO1xuICBoaWRkZW5LZXlzW1NUQVRFXSA9IHRydWU7XG4gIHNldCA9IGZ1bmN0aW9uIChpdCwgbWV0YWRhdGEpIHtcbiAgICBpZiAoaGFzT3duKGl0LCBTVEFURSkpIHRocm93IFR5cGVFcnJvcihPQkpFQ1RfQUxSRUFEWV9JTklUSUFMSVpFRCk7XG4gICAgbWV0YWRhdGEuZmFjYWRlID0gaXQ7XG4gICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KGl0LCBTVEFURSwgbWV0YWRhdGEpO1xuICAgIHJldHVybiBtZXRhZGF0YTtcbiAgfTtcbiAgZ2V0ID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGhhc093bihpdCwgU1RBVEUpID8gaXRbU1RBVEVdIDoge307XG4gIH07XG4gIGhhcyA9IGZ1bmN0aW9uIChpdCkge1xuICAgIHJldHVybiBoYXNPd24oaXQsIFNUQVRFKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogc2V0LFxuICBnZXQ6IGdldCxcbiAgaGFzOiBoYXMsXG4gIGVuZm9yY2U6IGVuZm9yY2UsXG4gIGdldHRlckZvcjogZ2V0dGVyRm9yXG59O1xuIiwidmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcblxuLy8gYElzQXJyYXlgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1pc2FycmF5XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tYXJyYXktaXNhcnJheSAtLSBzYWZlXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gaXNBcnJheShhcmd1bWVudCkge1xuICByZXR1cm4gY2xhc3NvZihhcmd1bWVudCkgPT0gJ0FycmF5Jztcbn07XG4iLCJ2YXIgJGRvY3VtZW50QWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvY3VtZW50LWFsbCcpO1xuXG52YXIgZG9jdW1lbnRBbGwgPSAkZG9jdW1lbnRBbGwuYWxsO1xuXG4vLyBgSXNDYWxsYWJsZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWlzY2FsbGFibGVcbm1vZHVsZS5leHBvcnRzID0gJGRvY3VtZW50QWxsLklTX0hUTUxEREEgPyBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmd1bWVudCA9PSAnZnVuY3Rpb24nIHx8IGFyZ3VtZW50ID09PSBkb2N1bWVudEFsbDtcbn0gOiBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmd1bWVudCA9PSAnZnVuY3Rpb24nO1xufTtcbiIsInZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YnKTtcbnZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIGluc3BlY3RTb3VyY2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW5zcGVjdC1zb3VyY2UnKTtcblxudmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG52YXIgZW1wdHkgPSBbXTtcbnZhciBjb25zdHJ1Y3QgPSBnZXRCdWlsdEluKCdSZWZsZWN0JywgJ2NvbnN0cnVjdCcpO1xudmFyIGNvbnN0cnVjdG9yUmVnRXhwID0gL15cXHMqKD86Y2xhc3N8ZnVuY3Rpb24pXFxiLztcbnZhciBleGVjID0gdW5jdXJyeVRoaXMoY29uc3RydWN0b3JSZWdFeHAuZXhlYyk7XG52YXIgSU5DT1JSRUNUX1RPX1NUUklORyA9ICFjb25zdHJ1Y3RvclJlZ0V4cC5leGVjKG5vb3ApO1xuXG52YXIgaXNDb25zdHJ1Y3Rvck1vZGVybiA9IGZ1bmN0aW9uIGlzQ29uc3RydWN0b3IoYXJndW1lbnQpIHtcbiAgaWYgKCFpc0NhbGxhYmxlKGFyZ3VtZW50KSkgcmV0dXJuIGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0cnVjdChub29wLCBlbXB0eSwgYXJndW1lbnQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIGlzQ29uc3RydWN0b3JMZWdhY3kgPSBmdW5jdGlvbiBpc0NvbnN0cnVjdG9yKGFyZ3VtZW50KSB7XG4gIGlmICghaXNDYWxsYWJsZShhcmd1bWVudCkpIHJldHVybiBmYWxzZTtcbiAgc3dpdGNoIChjbGFzc29mKGFyZ3VtZW50KSkge1xuICAgIGNhc2UgJ0FzeW5jRnVuY3Rpb24nOlxuICAgIGNhc2UgJ0dlbmVyYXRvckZ1bmN0aW9uJzpcbiAgICBjYXNlICdBc3luY0dlbmVyYXRvckZ1bmN0aW9uJzogcmV0dXJuIGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gd2UgY2FuJ3QgY2hlY2sgLnByb3RvdHlwZSBzaW5jZSBjb25zdHJ1Y3RvcnMgcHJvZHVjZWQgYnkgLmJpbmQgaGF2ZW4ndCBpdFxuICAgIC8vIGBGdW5jdGlvbiN0b1N0cmluZ2AgdGhyb3dzIG9uIHNvbWUgYnVpbHQtaXQgZnVuY3Rpb24gaW4gc29tZSBsZWdhY3kgZW5naW5lc1xuICAgIC8vIChmb3IgZXhhbXBsZSwgYERPTVF1YWRgIGFuZCBzaW1pbGFyIGluIEZGNDEtKVxuICAgIHJldHVybiBJTkNPUlJFQ1RfVE9fU1RSSU5HIHx8ICEhZXhlYyhjb25zdHJ1Y3RvclJlZ0V4cCwgaW5zcGVjdFNvdXJjZShhcmd1bWVudCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG5pc0NvbnN0cnVjdG9yTGVnYWN5LnNoYW0gPSB0cnVlO1xuXG4vLyBgSXNDb25zdHJ1Y3RvcmAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWlzY29uc3RydWN0b3Jcbm1vZHVsZS5leHBvcnRzID0gIWNvbnN0cnVjdCB8fCBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWxsZWQ7XG4gIHJldHVybiBpc0NvbnN0cnVjdG9yTW9kZXJuKGlzQ29uc3RydWN0b3JNb2Rlcm4uY2FsbClcbiAgICB8fCAhaXNDb25zdHJ1Y3Rvck1vZGVybihPYmplY3QpXG4gICAgfHwgIWlzQ29uc3RydWN0b3JNb2Rlcm4oZnVuY3Rpb24gKCkgeyBjYWxsZWQgPSB0cnVlOyB9KVxuICAgIHx8IGNhbGxlZDtcbn0pID8gaXNDb25zdHJ1Y3RvckxlZ2FjeSA6IGlzQ29uc3RydWN0b3JNb2Rlcm47XG4iLCJ2YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG5cbnZhciByZXBsYWNlbWVudCA9IC8jfFxcLnByb3RvdHlwZVxcLi87XG5cbnZhciBpc0ZvcmNlZCA9IGZ1bmN0aW9uIChmZWF0dXJlLCBkZXRlY3Rpb24pIHtcbiAgdmFyIHZhbHVlID0gZGF0YVtub3JtYWxpemUoZmVhdHVyZSldO1xuICByZXR1cm4gdmFsdWUgPT0gUE9MWUZJTEwgPyB0cnVlXG4gICAgOiB2YWx1ZSA9PSBOQVRJVkUgPyBmYWxzZVxuICAgIDogaXNDYWxsYWJsZShkZXRlY3Rpb24pID8gZmFpbHMoZGV0ZWN0aW9uKVxuICAgIDogISFkZXRlY3Rpb247XG59O1xuXG52YXIgbm9ybWFsaXplID0gaXNGb3JjZWQubm9ybWFsaXplID0gZnVuY3Rpb24gKHN0cmluZykge1xuICByZXR1cm4gU3RyaW5nKHN0cmluZykucmVwbGFjZShyZXBsYWNlbWVudCwgJy4nKS50b0xvd2VyQ2FzZSgpO1xufTtcblxudmFyIGRhdGEgPSBpc0ZvcmNlZC5kYXRhID0ge307XG52YXIgTkFUSVZFID0gaXNGb3JjZWQuTkFUSVZFID0gJ04nO1xudmFyIFBPTFlGSUxMID0gaXNGb3JjZWQuUE9MWUZJTEwgPSAnUCc7XG5cbm1vZHVsZS5leHBvcnRzID0gaXNGb3JjZWQ7XG4iLCIvLyB3ZSBjYW4ndCB1c2UganVzdCBgaXQgPT0gbnVsbGAgc2luY2Ugb2YgYGRvY3VtZW50LmFsbGAgc3BlY2lhbCBjYXNlXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLUlzSFRNTEREQS1pbnRlcm5hbC1zbG90LWFlY1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGl0ID09PSBudWxsIHx8IGl0ID09PSB1bmRlZmluZWQ7XG59O1xuIiwidmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciAkZG9jdW1lbnRBbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZG9jdW1lbnQtYWxsJyk7XG5cbnZhciBkb2N1bWVudEFsbCA9ICRkb2N1bWVudEFsbC5hbGw7XG5cbm1vZHVsZS5leHBvcnRzID0gJGRvY3VtZW50QWxsLklTX0hUTUxEREEgPyBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogaXNDYWxsYWJsZShpdCkgfHwgaXQgPT09IGRvY3VtZW50QWxsO1xufSA6IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gdHlwZW9mIGl0ID09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiBpc0NhbGxhYmxlKGl0KTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZhbHNlO1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIE1BVENIID0gd2VsbEtub3duU3ltYm9sKCdtYXRjaCcpO1xuXG4vLyBgSXNSZWdFeHBgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1pc3JlZ2V4cFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIGlzUmVnRXhwO1xuICByZXR1cm4gaXNPYmplY3QoaXQpICYmICgoaXNSZWdFeHAgPSBpdFtNQVRDSF0pICE9PSB1bmRlZmluZWQgPyAhIWlzUmVnRXhwIDogY2xhc3NvZihpdCkgPT0gJ1JlZ0V4cCcpO1xufTtcbiIsInZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBpc1Byb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1pcy1wcm90b3R5cGUtb2YnKTtcbnZhciBVU0VfU1lNQk9MX0FTX1VJRCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy91c2Utc3ltYm9sLWFzLXVpZCcpO1xuXG52YXIgJE9iamVjdCA9IE9iamVjdDtcblxubW9kdWxlLmV4cG9ydHMgPSBVU0VfU1lNQk9MX0FTX1VJRCA/IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnO1xufSA6IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgJFN5bWJvbCA9IGdldEJ1aWx0SW4oJ1N5bWJvbCcpO1xuICByZXR1cm4gaXNDYWxsYWJsZSgkU3ltYm9sKSAmJiBpc1Byb3RvdHlwZU9mKCRTeW1ib2wucHJvdG90eXBlLCAkT2JqZWN0KGl0KSk7XG59O1xuIiwidmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xuXG4vLyBgTGVuZ3RoT2ZBcnJheUxpa2VgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1sZW5ndGhvZmFycmF5bGlrZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0b0xlbmd0aChvYmoubGVuZ3RoKTtcbn07XG4iLCJ2YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIENPTkZJR1VSQUJMRV9GVU5DVElPTl9OQU1FID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLW5hbWUnKS5DT05GSUdVUkFCTEU7XG52YXIgaW5zcGVjdFNvdXJjZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnNwZWN0LXNvdXJjZScpO1xudmFyIEludGVybmFsU3RhdGVNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUnKTtcblxudmFyIGVuZm9yY2VJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5lbmZvcmNlO1xudmFyIGdldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldDtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gc2FmZVxudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG52YXIgQ09ORklHVVJBQkxFX0xFTkdUSCA9IERFU0NSSVBUT1JTICYmICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBkZWZpbmVQcm9wZXJ0eShmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0sICdsZW5ndGgnLCB7IHZhbHVlOiA4IH0pLmxlbmd0aCAhPT0gODtcbn0pO1xuXG52YXIgVEVNUExBVEUgPSBTdHJpbmcoU3RyaW5nKS5zcGxpdCgnU3RyaW5nJyk7XG5cbnZhciBtYWtlQnVpbHRJbiA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbHVlLCBuYW1lLCBvcHRpb25zKSB7XG4gIGlmIChTdHJpbmcobmFtZSkuc2xpY2UoMCwgNykgPT09ICdTeW1ib2woJykge1xuICAgIG5hbWUgPSAnWycgKyBTdHJpbmcobmFtZSkucmVwbGFjZSgvXlN5bWJvbFxcKChbXildKilcXCkvLCAnJDEnKSArICddJztcbiAgfVxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdldHRlcikgbmFtZSA9ICdnZXQgJyArIG5hbWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2V0dGVyKSBuYW1lID0gJ3NldCAnICsgbmFtZTtcbiAgaWYgKCFoYXNPd24odmFsdWUsICduYW1lJykgfHwgKENPTkZJR1VSQUJMRV9GVU5DVElPTl9OQU1FICYmIHZhbHVlLm5hbWUgIT09IG5hbWUpKSB7XG4gICAgaWYgKERFU0NSSVBUT1JTKSBkZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgJ25hbWUnLCB7IHZhbHVlOiBuYW1lLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG4gICAgZWxzZSB2YWx1ZS5uYW1lID0gbmFtZTtcbiAgfVxuICBpZiAoQ09ORklHVVJBQkxFX0xFTkdUSCAmJiBvcHRpb25zICYmIGhhc093bihvcHRpb25zLCAnYXJpdHknKSAmJiB2YWx1ZS5sZW5ndGggIT09IG9wdGlvbnMuYXJpdHkpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgJ2xlbmd0aCcsIHsgdmFsdWU6IG9wdGlvbnMuYXJpdHkgfSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgJ2NvbnN0cnVjdG9yJykgJiYgb3B0aW9ucy5jb25zdHJ1Y3Rvcikge1xuICAgICAgaWYgKERFU0NSSVBUT1JTKSBkZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgJ3Byb3RvdHlwZScsIHsgd3JpdGFibGU6IGZhbHNlIH0pO1xuICAgIC8vIGluIFY4IH4gQ2hyb21lIDUzLCBwcm90b3R5cGVzIG9mIHNvbWUgbWV0aG9kcywgbGlrZSBgQXJyYXkucHJvdG90eXBlLnZhbHVlc2AsIGFyZSBub24td3JpdGFibGVcbiAgICB9IGVsc2UgaWYgKHZhbHVlLnByb3RvdHlwZSkgdmFsdWUucHJvdG90eXBlID0gdW5kZWZpbmVkO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIHZhciBzdGF0ZSA9IGVuZm9yY2VJbnRlcm5hbFN0YXRlKHZhbHVlKTtcbiAgaWYgKCFoYXNPd24oc3RhdGUsICdzb3VyY2UnKSkge1xuICAgIHN0YXRlLnNvdXJjZSA9IFRFTVBMQVRFLmpvaW4odHlwZW9mIG5hbWUgPT0gJ3N0cmluZycgPyBuYW1lIDogJycpO1xuICB9IHJldHVybiB2YWx1ZTtcbn07XG5cbi8vIGFkZCBmYWtlIEZ1bmN0aW9uI3RvU3RyaW5nIGZvciBjb3JyZWN0IHdvcmsgd3JhcHBlZCBtZXRob2RzIC8gY29uc3RydWN0b3JzIHdpdGggbWV0aG9kcyBsaWtlIExvRGFzaCBpc05hdGl2ZVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV4dGVuZC1uYXRpdmUgLS0gcmVxdWlyZWRcbkZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IG1ha2VCdWlsdEluKGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gaXNDYWxsYWJsZSh0aGlzKSAmJiBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnNvdXJjZSB8fCBpbnNwZWN0U291cmNlKHRoaXMpO1xufSwgJ3RvU3RyaW5nJyk7XG4iLCJ2YXIgY2VpbCA9IE1hdGguY2VpbDtcbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5cbi8vIGBNYXRoLnRydW5jYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtbWF0aC50cnVuY1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW1hdGgtdHJ1bmMgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBNYXRoLnRydW5jIHx8IGZ1bmN0aW9uIHRydW5jKHgpIHtcbiAgdmFyIG4gPSAreDtcbiAgcmV0dXJuIChuID4gMCA/IGZsb29yIDogY2VpbCkobik7XG59O1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIHRyaW0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLXRyaW0nKS50cmltO1xudmFyIHdoaXRlc3BhY2VzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3doaXRlc3BhY2VzJyk7XG5cbnZhciAkcGFyc2VJbnQgPSBnbG9iYWwucGFyc2VJbnQ7XG52YXIgU3ltYm9sID0gZ2xvYmFsLlN5bWJvbDtcbnZhciBJVEVSQVRPUiA9IFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7XG52YXIgaGV4ID0gL15bKy1dPzB4L2k7XG52YXIgZXhlYyA9IHVuY3VycnlUaGlzKGhleC5leGVjKTtcbnZhciBGT1JDRUQgPSAkcGFyc2VJbnQod2hpdGVzcGFjZXMgKyAnMDgnKSAhPT0gOCB8fCAkcGFyc2VJbnQod2hpdGVzcGFjZXMgKyAnMHgxNicpICE9PSAyMlxuICAvLyBNUyBFZGdlIDE4LSBicm9rZW4gd2l0aCBib3hlZCBzeW1ib2xzXG4gIHx8IChJVEVSQVRPUiAmJiAhZmFpbHMoZnVuY3Rpb24gKCkgeyAkcGFyc2VJbnQoT2JqZWN0KElURVJBVE9SKSk7IH0pKTtcblxuLy8gYHBhcnNlSW50YCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcGFyc2VpbnQtc3RyaW5nLXJhZGl4XG5tb2R1bGUuZXhwb3J0cyA9IEZPUkNFRCA/IGZ1bmN0aW9uIHBhcnNlSW50KHN0cmluZywgcmFkaXgpIHtcbiAgdmFyIFMgPSB0cmltKHRvU3RyaW5nKHN0cmluZykpO1xuICByZXR1cm4gJHBhcnNlSW50KFMsIChyYWRpeCA+Pj4gMCkgfHwgKGV4ZWMoaGV4LCBTKSA/IDE2IDogMTApKTtcbn0gOiAkcGFyc2VJbnQ7XG4iLCIvKiBnbG9iYWwgQWN0aXZlWE9iamVjdCAtLSBvbGQgSUUsIFdTSCAqL1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGRlZmluZVByb3BlcnRpZXNNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0aWVzJyk7XG52YXIgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW51bS1idWcta2V5cycpO1xudmFyIGhpZGRlbktleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZGVuLWtleXMnKTtcbnZhciBodG1sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2h0bWwnKTtcbnZhciBkb2N1bWVudENyZWF0ZUVsZW1lbnQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZG9jdW1lbnQtY3JlYXRlLWVsZW1lbnQnKTtcbnZhciBzaGFyZWRLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLWtleScpO1xuXG52YXIgR1QgPSAnPic7XG52YXIgTFQgPSAnPCc7XG52YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG52YXIgU0NSSVBUID0gJ3NjcmlwdCc7XG52YXIgSUVfUFJPVE8gPSBzaGFyZWRLZXkoJ0lFX1BST1RPJyk7XG5cbnZhciBFbXB0eUNvbnN0cnVjdG9yID0gZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9O1xuXG52YXIgc2NyaXB0VGFnID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgcmV0dXJuIExUICsgU0NSSVBUICsgR1QgKyBjb250ZW50ICsgTFQgKyAnLycgKyBTQ1JJUFQgKyBHVDtcbn07XG5cbi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBBY3RpdmVYIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG52YXIgTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWCA9IGZ1bmN0aW9uIChhY3RpdmVYRG9jdW1lbnQpIHtcbiAgYWN0aXZlWERvY3VtZW50LndyaXRlKHNjcmlwdFRhZygnJykpO1xuICBhY3RpdmVYRG9jdW1lbnQuY2xvc2UoKTtcbiAgdmFyIHRlbXAgPSBhY3RpdmVYRG9jdW1lbnQucGFyZW50V2luZG93Lk9iamVjdDtcbiAgYWN0aXZlWERvY3VtZW50ID0gbnVsbDsgLy8gYXZvaWQgbWVtb3J5IGxlYWtcbiAgcmV0dXJuIHRlbXA7XG59O1xuXG4vLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG52YXIgTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lID0gZnVuY3Rpb24gKCkge1xuICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuICB2YXIgaWZyYW1lID0gZG9jdW1lbnRDcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgdmFyIEpTID0gJ2phdmEnICsgU0NSSVBUICsgJzonO1xuICB2YXIgaWZyYW1lRG9jdW1lbnQ7XG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBodG1sLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy80NzVcbiAgaWZyYW1lLnNyYyA9IFN0cmluZyhKUyk7XG4gIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIGlmcmFtZURvY3VtZW50Lm9wZW4oKTtcbiAgaWZyYW1lRG9jdW1lbnQud3JpdGUoc2NyaXB0VGFnKCdkb2N1bWVudC5GPU9iamVjdCcpKTtcbiAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTtcbiAgcmV0dXJuIGlmcmFtZURvY3VtZW50LkY7XG59O1xuXG4vLyBDaGVjayBmb3IgZG9jdW1lbnQuZG9tYWluIGFuZCBhY3RpdmUgeCBzdXBwb3J0XG4vLyBObyBuZWVkIHRvIHVzZSBhY3RpdmUgeCBhcHByb2FjaCB3aGVuIGRvY3VtZW50LmRvbWFpbiBpcyBub3Qgc2V0XG4vLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltL2lzc3Vlcy8xNTBcbi8vIHZhcmlhdGlvbiBvZiBodHRwczovL2dpdGh1Yi5jb20va2l0Y2FtYnJpZGdlL2VzNS1zaGltL2NvbW1pdC80ZjczOGFjMDY2MzQ2XG4vLyBhdm9pZCBJRSBHQyBidWdcbnZhciBhY3RpdmVYRG9jdW1lbnQ7XG52YXIgTnVsbFByb3RvT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIGFjdGl2ZVhEb2N1bWVudCA9IG5ldyBBY3RpdmVYT2JqZWN0KCdodG1sZmlsZScpO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBpZ25vcmUgKi8gfVxuICBOdWxsUHJvdG9PYmplY3QgPSB0eXBlb2YgZG9jdW1lbnQgIT0gJ3VuZGVmaW5lZCdcbiAgICA/IGRvY3VtZW50LmRvbWFpbiAmJiBhY3RpdmVYRG9jdW1lbnRcbiAgICAgID8gTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWChhY3RpdmVYRG9jdW1lbnQpIC8vIG9sZCBJRVxuICAgICAgOiBOdWxsUHJvdG9PYmplY3RWaWFJRnJhbWUoKVxuICAgIDogTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWChhY3RpdmVYRG9jdW1lbnQpOyAvLyBXU0hcbiAgdmFyIGxlbmd0aCA9IGVudW1CdWdLZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSBkZWxldGUgTnVsbFByb3RvT2JqZWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbbGVuZ3RoXV07XG4gIHJldHVybiBOdWxsUHJvdG9PYmplY3QoKTtcbn07XG5cbmhpZGRlbktleXNbSUVfUFJPVE9dID0gdHJ1ZTtcblxuLy8gYE9iamVjdC5jcmVhdGVgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuY3JlYXRlXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWNyZWF0ZSAtLSBzYWZlXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKE8gIT09IG51bGwpIHtcbiAgICBFbXB0eUNvbnN0cnVjdG9yW1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTtcbiAgICByZXN1bHQgPSBuZXcgRW1wdHlDb25zdHJ1Y3RvcigpO1xuICAgIEVtcHR5Q29uc3RydWN0b3JbUFJPVE9UWVBFXSA9IG51bGw7XG4gICAgLy8gYWRkIFwiX19wcm90b19fXCIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbFxuICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPO1xuICB9IGVsc2UgcmVzdWx0ID0gTnVsbFByb3RvT2JqZWN0KCk7XG4gIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkZWZpbmVQcm9wZXJ0aWVzTW9kdWxlLmYocmVzdWx0LCBQcm9wZXJ0aWVzKTtcbn07XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBWOF9QUk9UT1RZUEVfREVGSU5FX0JVRyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy92OC1wcm90b3R5cGUtZGVmaW5lLWJ1ZycpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciBvYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzJyk7XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydGllc2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5kZWZpbmVwcm9wZXJ0aWVzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWRlZmluZXByb3BlcnRpZXMgLS0gc2FmZVxuZXhwb3J0cy5mID0gREVTQ1JJUFRPUlMgJiYgIVY4X1BST1RPVFlQRV9ERUZJTkVfQlVHID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpIHtcbiAgYW5PYmplY3QoTyk7XG4gIHZhciBwcm9wcyA9IHRvSW5kZXhlZE9iamVjdChQcm9wZXJ0aWVzKTtcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFByb3BlcnRpZXMpO1xuICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBrZXk7XG4gIHdoaWxlIChsZW5ndGggPiBpbmRleCkgZGVmaW5lUHJvcGVydHlNb2R1bGUuZihPLCBrZXkgPSBrZXlzW2luZGV4KytdLCBwcm9wc1trZXldKTtcbiAgcmV0dXJuIE87XG59O1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaWU4LWRvbS1kZWZpbmUnKTtcbnZhciBWOF9QUk9UT1RZUEVfREVGSU5FX0JVRyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy92OC1wcm90b3R5cGUtZGVmaW5lLWJ1ZycpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIHRvUHJvcGVydHlLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tcHJvcGVydHkta2V5Jyk7XG5cbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1kZWZpbmVwcm9wZXJ0eSAtLSBzYWZlXG52YXIgJGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3IgLS0gc2FmZVxudmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIEVOVU1FUkFCTEUgPSAnZW51bWVyYWJsZSc7XG52YXIgQ09ORklHVVJBQkxFID0gJ2NvbmZpZ3VyYWJsZSc7XG52YXIgV1JJVEFCTEUgPSAnd3JpdGFibGUnO1xuXG4vLyBgT2JqZWN0LmRlZmluZVByb3BlcnR5YCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmRlZmluZXByb3BlcnR5XG5leHBvcnRzLmYgPSBERVNDUklQVE9SUyA/IFY4X1BST1RPVFlQRV9ERUZJTkVfQlVHID8gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykge1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJvcGVydHlLZXkoUCk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZiAodHlwZW9mIE8gPT09ICdmdW5jdGlvbicgJiYgUCA9PT0gJ3Byb3RvdHlwZScgJiYgJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzICYmIFdSSVRBQkxFIGluIEF0dHJpYnV0ZXMgJiYgIUF0dHJpYnV0ZXNbV1JJVEFCTEVdKSB7XG4gICAgdmFyIGN1cnJlbnQgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApO1xuICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnRbV1JJVEFCTEVdKSB7XG4gICAgICBPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgICAgIEF0dHJpYnV0ZXMgPSB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogQ09ORklHVVJBQkxFIGluIEF0dHJpYnV0ZXMgPyBBdHRyaWJ1dGVzW0NPTkZJR1VSQUJMRV0gOiBjdXJyZW50W0NPTkZJR1VSQUJMRV0sXG4gICAgICAgIGVudW1lcmFibGU6IEVOVU1FUkFCTEUgaW4gQXR0cmlidXRlcyA/IEF0dHJpYnV0ZXNbRU5VTUVSQUJMRV0gOiBjdXJyZW50W0VOVU1FUkFCTEVdLFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9IHJldHVybiAkZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyk7XG59IDogJGRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykge1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJvcGVydHlLZXkoUCk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7XG4gICAgcmV0dXJuICRkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICBpZiAoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKSB0aHJvdyAkVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCcpO1xuICBpZiAoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKSBPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgcmV0dXJuIE87XG59O1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LXByb3BlcnR5LWlzLWVudW1lcmFibGUnKTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciB0b1Byb3BlcnR5S2V5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXByb3BlcnR5LWtleScpO1xudmFyIGhhc093biA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMtb3duLXByb3BlcnR5Jyk7XG52YXIgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaWU4LWRvbS1kZWZpbmUnKTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3IgLS0gc2FmZVxudmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG4vLyBgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcmAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3JcbmV4cG9ydHMuZiA9IERFU0NSSVBUT1JTID8gJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKSB7XG4gIE8gPSB0b0luZGV4ZWRPYmplY3QoTyk7XG4gIFAgPSB0b1Byb3BlcnR5S2V5KFApO1xuICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7XG4gICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbiAgaWYgKGhhc093bihPLCBQKSkgcmV0dXJuIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcighY2FsbChwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZS5mLCBPLCBQKSwgT1tQXSk7XG59O1xuIiwidmFyIGludGVybmFsT2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cy1pbnRlcm5hbCcpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VudW0tYnVnLWtleXMnKTtcblxudmFyIGhpZGRlbktleXMgPSBlbnVtQnVnS2V5cy5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmdldG93bnByb3BlcnR5bmFtZXNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZ2V0b3ducHJvcGVydHluYW1lcyAtLSBzYWZlXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHtcbiAgcmV0dXJuIGludGVybmFsT2JqZWN0S2V5cyhPLCBoaWRkZW5LZXlzKTtcbn07XG4iLCIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5c3ltYm9scyAtLSBzYWZlXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVuY3VycnlUaGlzKHt9LmlzUHJvdG90eXBlT2YpO1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGhhc093biA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMtb3duLXByb3BlcnR5Jyk7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgaW5kZXhPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pbmNsdWRlcycpLmluZGV4T2Y7XG52YXIgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRkZW4ta2V5cycpO1xuXG52YXIgcHVzaCA9IHVuY3VycnlUaGlzKFtdLnB1c2gpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWVzKSB7XG4gIHZhciBPID0gdG9JbmRleGVkT2JqZWN0KG9iamVjdCk7XG4gIHZhciBpID0gMDtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBPKSAhaGFzT3duKGhpZGRlbktleXMsIGtleSkgJiYgaGFzT3duKE8sIGtleSkgJiYgcHVzaChyZXN1bHQsIGtleSk7XG4gIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXNcbiAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIGlmIChoYXNPd24oTywga2V5ID0gbmFtZXNbaSsrXSkpIHtcbiAgICB+aW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcHVzaChyZXN1bHQsIGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJ2YXIgaW50ZXJuYWxPYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzLWludGVybmFsJyk7XG52YXIgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW51bS1idWcta2V5cycpO1xuXG4vLyBgT2JqZWN0LmtleXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3Qua2V5c1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1rZXlzIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKSB7XG4gIHJldHVybiBpbnRlcm5hbE9iamVjdEtleXMoTywgZW51bUJ1Z0tleXMpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yIC0tIHNhZmVcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG4vLyBOYXNob3JuIH4gSkRLOCBidWdcbnZhciBOQVNIT1JOX0JVRyA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciAmJiAhJHByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoeyAxOiAyIH0sIDEpO1xuXG4vLyBgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZWAgbWV0aG9kIGltcGxlbWVudGF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUucHJvcGVydHlpc2VudW1lcmFibGVcbmV4cG9ydHMuZiA9IE5BU0hPUk5fQlVHID8gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoVikge1xuICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLCBWKTtcbiAgcmV0dXJuICEhZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLmVudW1lcmFibGU7XG59IDogJHByb3BlcnR5SXNFbnVtZXJhYmxlO1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gLS0gc2FmZSAqL1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGFQb3NzaWJsZVByb3RvdHlwZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLXBvc3NpYmxlLXByb3RvdHlwZScpO1xuXG4vLyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LnNldHByb3RvdHlwZW9mXG4vLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3Qtc2V0cHJvdG90eXBlb2YgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gZnVuY3Rpb24gKCkge1xuICB2YXIgQ09SUkVDVF9TRVRURVIgPSBmYWxzZTtcbiAgdmFyIHRlc3QgPSB7fTtcbiAgdmFyIHNldHRlcjtcbiAgdHJ5IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvciAtLSBzYWZlXG4gICAgc2V0dGVyID0gdW5jdXJyeVRoaXMoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0KTtcbiAgICBzZXR0ZXIodGVzdCwgW10pO1xuICAgIENPUlJFQ1RfU0VUVEVSID0gdGVzdCBpbnN0YW5jZW9mIEFycmF5O1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90bykge1xuICAgIGFuT2JqZWN0KE8pO1xuICAgIGFQb3NzaWJsZVByb3RvdHlwZShwcm90byk7XG4gICAgaWYgKENPUlJFQ1RfU0VUVEVSKSBzZXR0ZXIoTywgcHJvdG8pO1xuICAgIGVsc2UgTy5fX3Byb3RvX18gPSBwcm90bztcbiAgICByZXR1cm4gTztcbiAgfTtcbn0oKSA6IHVuZGVmaW5lZCk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xuXG4vLyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AgbWV0aG9kIGltcGxlbWVudGF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gVE9fU1RSSU5HX1RBR19TVVBQT1JUID8ge30udG9TdHJpbmcgOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdbb2JqZWN0ICcgKyBjbGFzc29mKHRoaXMpICsgJ10nO1xufTtcbiIsInZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG5cbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xuXG4vLyBgT3JkaW5hcnlUb1ByaW1pdGl2ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9yZGluYXJ5dG9wcmltaXRpdmVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGlucHV0LCBwcmVmKSB7XG4gIHZhciBmbiwgdmFsO1xuICBpZiAocHJlZiA9PT0gJ3N0cmluZycgJiYgaXNDYWxsYWJsZShmbiA9IGlucHV0LnRvU3RyaW5nKSAmJiAhaXNPYmplY3QodmFsID0gY2FsbChmbiwgaW5wdXQpKSkgcmV0dXJuIHZhbDtcbiAgaWYgKGlzQ2FsbGFibGUoZm4gPSBpbnB1dC52YWx1ZU9mKSAmJiAhaXNPYmplY3QodmFsID0gY2FsbChmbiwgaW5wdXQpKSkgcmV0dXJuIHZhbDtcbiAgaWYgKHByZWYgIT09ICdzdHJpbmcnICYmIGlzQ2FsbGFibGUoZm4gPSBpbnB1dC50b1N0cmluZykgJiYgIWlzT2JqZWN0KHZhbCA9IGNhbGwoZm4sIGlucHV0KSkpIHJldHVybiB2YWw7XG4gIHRocm93ICRUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59O1xuIiwidmFyIGdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWJ1aWx0LWluJyk7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcycpO1xudmFyIGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1zeW1ib2xzJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG5cbnZhciBjb25jYXQgPSB1bmN1cnJ5VGhpcyhbXS5jb25jYXQpO1xuXG4vLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzXG5tb2R1bGUuZXhwb3J0cyA9IGdldEJ1aWx0SW4oJ1JlZmxlY3QnLCAnb3duS2V5cycpIHx8IGZ1bmN0aW9uIG93bktleXMoaXQpIHtcbiAgdmFyIGtleXMgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlLmYoYW5PYmplY3QoaXQpKTtcbiAgdmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZS5mO1xuICByZXR1cm4gZ2V0T3duUHJvcGVydHlTeW1ib2xzID8gY29uY2F0KGtleXMsIGdldE93blByb3BlcnR5U3ltYm9scyhpdCkpIDoga2V5cztcbn07XG4iLCJ2YXIgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpLmY7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFRhcmdldCwgU291cmNlLCBrZXkpIHtcbiAga2V5IGluIFRhcmdldCB8fCBkZWZpbmVQcm9wZXJ0eShUYXJnZXQsIGtleSwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFNvdXJjZVtrZXldOyB9LFxuICAgIHNldDogZnVuY3Rpb24gKGl0KSB7IFNvdXJjZVtrZXldID0gaXQ7IH1cbiAgfSk7XG59O1xuIiwidmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgcmVnZXhwRXhlYyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZXhlYycpO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYFJlZ0V4cEV4ZWNgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1yZWdleHBleGVjXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChSLCBTKSB7XG4gIHZhciBleGVjID0gUi5leGVjO1xuICBpZiAoaXNDYWxsYWJsZShleGVjKSkge1xuICAgIHZhciByZXN1bHQgPSBjYWxsKGV4ZWMsIFIsIFMpO1xuICAgIGlmIChyZXN1bHQgIT09IG51bGwpIGFuT2JqZWN0KHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBpZiAoY2xhc3NvZihSKSA9PT0gJ1JlZ0V4cCcpIHJldHVybiBjYWxsKHJlZ2V4cEV4ZWMsIFIsIFMpO1xuICB0aHJvdyAkVHlwZUVycm9yKCdSZWdFeHAjZXhlYyBjYWxsZWQgb24gaW5jb21wYXRpYmxlIHJlY2VpdmVyJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgcmVnZXhwL25vLWVtcHR5LWNhcHR1cmluZy1ncm91cCwgcmVnZXhwL25vLWVtcHR5LWdyb3VwLCByZWdleHAvbm8tbGF6eS1lbmRzIC0tIHRlc3RpbmcgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJlZ2V4cC9uby11c2VsZXNzLXF1YW50aWZpZXIgLS0gdGVzdGluZyAqL1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIHJlZ2V4cEZsYWdzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1mbGFncycpO1xudmFyIHN0aWNreUhlbHBlcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLXN0aWNreS1oZWxwZXJzJyk7XG52YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xudmFyIGNyZWF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtY3JlYXRlJyk7XG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpLmdldDtcbnZhciBVTlNVUFBPUlRFRF9ET1RfQUxMID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC11bnN1cHBvcnRlZC1kb3QtYWxsJyk7XG52YXIgVU5TVVBQT1JURURfTkNHID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC11bnN1cHBvcnRlZC1uY2cnKTtcblxudmFyIG5hdGl2ZVJlcGxhY2UgPSBzaGFyZWQoJ25hdGl2ZS1zdHJpbmctcmVwbGFjZScsIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSk7XG52YXIgbmF0aXZlRXhlYyA9IFJlZ0V4cC5wcm90b3R5cGUuZXhlYztcbnZhciBwYXRjaGVkRXhlYyA9IG5hdGl2ZUV4ZWM7XG52YXIgY2hhckF0ID0gdW5jdXJyeVRoaXMoJycuY2hhckF0KTtcbnZhciBpbmRleE9mID0gdW5jdXJyeVRoaXMoJycuaW5kZXhPZik7XG52YXIgcmVwbGFjZSA9IHVuY3VycnlUaGlzKCcnLnJlcGxhY2UpO1xudmFyIHN0cmluZ1NsaWNlID0gdW5jdXJyeVRoaXMoJycuc2xpY2UpO1xuXG52YXIgVVBEQVRFU19MQVNUX0lOREVYX1dST05HID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlMSA9IC9hLztcbiAgdmFyIHJlMiA9IC9iKi9nO1xuICBjYWxsKG5hdGl2ZUV4ZWMsIHJlMSwgJ2EnKTtcbiAgY2FsbChuYXRpdmVFeGVjLCByZTIsICdhJyk7XG4gIHJldHVybiByZTEubGFzdEluZGV4ICE9PSAwIHx8IHJlMi5sYXN0SW5kZXggIT09IDA7XG59KSgpO1xuXG52YXIgVU5TVVBQT1JURURfWSA9IHN0aWNreUhlbHBlcnMuQlJPS0VOX0NBUkVUO1xuXG4vLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cCwgY29waWVkIGZyb20gZXM1LXNoaW0ncyBTdHJpbmcjc3BsaXQgcGF0Y2guXG52YXIgTlBDR19JTkNMVURFRCA9IC8oKT8/Ly5leGVjKCcnKVsxXSAhPT0gdW5kZWZpbmVkO1xuXG52YXIgUEFUQ0ggPSBVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkcgfHwgTlBDR19JTkNMVURFRCB8fCBVTlNVUFBPUlRFRF9ZIHx8IFVOU1VQUE9SVEVEX0RPVF9BTEwgfHwgVU5TVVBQT1JURURfTkNHO1xuXG5pZiAoUEFUQ0gpIHtcbiAgcGF0Y2hlZEV4ZWMgPSBmdW5jdGlvbiBleGVjKHN0cmluZykge1xuICAgIHZhciByZSA9IHRoaXM7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZShyZSk7XG4gICAgdmFyIHN0ciA9IHRvU3RyaW5nKHN0cmluZyk7XG4gICAgdmFyIHJhdyA9IHN0YXRlLnJhdztcbiAgICB2YXIgcmVzdWx0LCByZUNvcHksIGxhc3RJbmRleCwgbWF0Y2gsIGksIG9iamVjdCwgZ3JvdXA7XG5cbiAgICBpZiAocmF3KSB7XG4gICAgICByYXcubGFzdEluZGV4ID0gcmUubGFzdEluZGV4O1xuICAgICAgcmVzdWx0ID0gY2FsbChwYXRjaGVkRXhlYywgcmF3LCBzdHIpO1xuICAgICAgcmUubGFzdEluZGV4ID0gcmF3Lmxhc3RJbmRleDtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwcyA9IHN0YXRlLmdyb3VwcztcbiAgICB2YXIgc3RpY2t5ID0gVU5TVVBQT1JURURfWSAmJiByZS5zdGlja3k7XG4gICAgdmFyIGZsYWdzID0gY2FsbChyZWdleHBGbGFncywgcmUpO1xuICAgIHZhciBzb3VyY2UgPSByZS5zb3VyY2U7XG4gICAgdmFyIGNoYXJzQWRkZWQgPSAwO1xuICAgIHZhciBzdHJDb3B5ID0gc3RyO1xuXG4gICAgaWYgKHN0aWNreSkge1xuICAgICAgZmxhZ3MgPSByZXBsYWNlKGZsYWdzLCAneScsICcnKTtcbiAgICAgIGlmIChpbmRleE9mKGZsYWdzLCAnZycpID09PSAtMSkge1xuICAgICAgICBmbGFncyArPSAnZyc7XG4gICAgICB9XG5cbiAgICAgIHN0ckNvcHkgPSBzdHJpbmdTbGljZShzdHIsIHJlLmxhc3RJbmRleCk7XG4gICAgICAvLyBTdXBwb3J0IGFuY2hvcmVkIHN0aWNreSBiZWhhdmlvci5cbiAgICAgIGlmIChyZS5sYXN0SW5kZXggPiAwICYmICghcmUubXVsdGlsaW5lIHx8IHJlLm11bHRpbGluZSAmJiBjaGFyQXQoc3RyLCByZS5sYXN0SW5kZXggLSAxKSAhPT0gJ1xcbicpKSB7XG4gICAgICAgIHNvdXJjZSA9ICcoPzogJyArIHNvdXJjZSArICcpJztcbiAgICAgICAgc3RyQ29weSA9ICcgJyArIHN0ckNvcHk7XG4gICAgICAgIGNoYXJzQWRkZWQrKztcbiAgICAgIH1cbiAgICAgIC8vIF4oPyArIHJ4ICsgKSBpcyBuZWVkZWQsIGluIGNvbWJpbmF0aW9uIHdpdGggc29tZSBzdHIgc2xpY2luZywgdG9cbiAgICAgIC8vIHNpbXVsYXRlIHRoZSAneScgZmxhZy5cbiAgICAgIHJlQ29weSA9IG5ldyBSZWdFeHAoJ14oPzonICsgc291cmNlICsgJyknLCBmbGFncyk7XG4gICAgfVxuXG4gICAgaWYgKE5QQ0dfSU5DTFVERUQpIHtcbiAgICAgIHJlQ29weSA9IG5ldyBSZWdFeHAoJ14nICsgc291cmNlICsgJyQoPyFcXFxccyknLCBmbGFncyk7XG4gICAgfVxuICAgIGlmIChVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkcpIGxhc3RJbmRleCA9IHJlLmxhc3RJbmRleDtcblxuICAgIG1hdGNoID0gY2FsbChuYXRpdmVFeGVjLCBzdGlja3kgPyByZUNvcHkgOiByZSwgc3RyQ29weSk7XG5cbiAgICBpZiAoc3RpY2t5KSB7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgbWF0Y2guaW5wdXQgPSBzdHJpbmdTbGljZShtYXRjaC5pbnB1dCwgY2hhcnNBZGRlZCk7XG4gICAgICAgIG1hdGNoWzBdID0gc3RyaW5nU2xpY2UobWF0Y2hbMF0sIGNoYXJzQWRkZWQpO1xuICAgICAgICBtYXRjaC5pbmRleCA9IHJlLmxhc3RJbmRleDtcbiAgICAgICAgcmUubGFzdEluZGV4ICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgIH0gZWxzZSByZS5sYXN0SW5kZXggPSAwO1xuICAgIH0gZWxzZSBpZiAoVVBEQVRFU19MQVNUX0lOREVYX1dST05HICYmIG1hdGNoKSB7XG4gICAgICByZS5sYXN0SW5kZXggPSByZS5nbG9iYWwgPyBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCA6IGxhc3RJbmRleDtcbiAgICB9XG4gICAgaWYgKE5QQ0dfSU5DTFVERUQgJiYgbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGBcbiAgICAgIC8vIGZvciBOUENHLCBsaWtlIElFOC4gTk9URTogVGhpcyBkb2Vzbid0IHdvcmsgZm9yIC8oLj8pPy9cbiAgICAgIGNhbGwobmF0aXZlUmVwbGFjZSwgbWF0Y2hbMF0sIHJlQ29weSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDI7IGkrKykge1xuICAgICAgICAgIGlmIChhcmd1bWVudHNbaV0gPT09IHVuZGVmaW5lZCkgbWF0Y2hbaV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChtYXRjaCAmJiBncm91cHMpIHtcbiAgICAgIG1hdGNoLmdyb3VwcyA9IG9iamVjdCA9IGNyZWF0ZShudWxsKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ3JvdXAgPSBncm91cHNbaV07XG4gICAgICAgIG9iamVjdFtncm91cFswXV0gPSBtYXRjaFtncm91cFsxXV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGNoO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGNoZWRFeGVjO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xuXG4vLyBgUmVnRXhwLnByb3RvdHlwZS5mbGFnc2AgZ2V0dGVyIGltcGxlbWVudGF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWdldC1yZWdleHAucHJvdG90eXBlLmZsYWdzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRoYXQgPSBhbk9iamVjdCh0aGlzKTtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuICBpZiAodGhhdC5oYXNJbmRpY2VzKSByZXN1bHQgKz0gJ2QnO1xuICBpZiAodGhhdC5nbG9iYWwpIHJlc3VsdCArPSAnZyc7XG4gIGlmICh0aGF0Lmlnbm9yZUNhc2UpIHJlc3VsdCArPSAnaSc7XG4gIGlmICh0aGF0Lm11bHRpbGluZSkgcmVzdWx0ICs9ICdtJztcbiAgaWYgKHRoYXQuZG90QWxsKSByZXN1bHQgKz0gJ3MnO1xuICBpZiAodGhhdC51bmljb2RlKSByZXN1bHQgKz0gJ3UnO1xuICBpZiAodGhhdC51bmljb2RlU2V0cykgcmVzdWx0ICs9ICd2JztcbiAgaWYgKHRoYXQuc3RpY2t5KSByZXN1bHQgKz0gJ3knO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsInZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBoYXNPd24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzLW93bi1wcm9wZXJ0eScpO1xudmFyIGlzUHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWlzLXByb3RvdHlwZS1vZicpO1xudmFyIHJlZ0V4cEZsYWdzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1mbGFncycpO1xuXG52YXIgUmVnRXhwUHJvdG90eXBlID0gUmVnRXhwLnByb3RvdHlwZTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoUikge1xuICB2YXIgZmxhZ3MgPSBSLmZsYWdzO1xuICByZXR1cm4gZmxhZ3MgPT09IHVuZGVmaW5lZCAmJiAhKCdmbGFncycgaW4gUmVnRXhwUHJvdG90eXBlKSAmJiAhaGFzT3duKFIsICdmbGFncycpICYmIGlzUHJvdG90eXBlT2YoUmVnRXhwUHJvdG90eXBlLCBSKVxuICAgID8gY2FsbChyZWdFeHBGbGFncywgUikgOiBmbGFncztcbn07XG4iLCJ2YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG5cbi8vIGJhYmVsLW1pbmlmeSBhbmQgQ2xvc3VyZSBDb21waWxlciB0cmFuc3BpbGVzIFJlZ0V4cCgnYScsICd5JykgLT4gL2EveSBhbmQgaXQgY2F1c2VzIFN5bnRheEVycm9yXG52YXIgJFJlZ0V4cCA9IGdsb2JhbC5SZWdFeHA7XG5cbnZhciBVTlNVUFBPUlRFRF9ZID0gZmFpbHMoZnVuY3Rpb24gKCkge1xuICB2YXIgcmUgPSAkUmVnRXhwKCdhJywgJ3knKTtcbiAgcmUubGFzdEluZGV4ID0gMjtcbiAgcmV0dXJuIHJlLmV4ZWMoJ2FiY2QnKSAhPSBudWxsO1xufSk7XG5cbi8vIFVDIEJyb3dzZXIgYnVnXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTAwOFxudmFyIE1JU1NFRF9TVElDS1kgPSBVTlNVUFBPUlRFRF9ZIHx8IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICEkUmVnRXhwKCdhJywgJ3knKS5zdGlja3k7XG59KTtcblxudmFyIEJST0tFTl9DQVJFVCA9IFVOU1VQUE9SVEVEX1kgfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD03NzM2ODdcbiAgdmFyIHJlID0gJFJlZ0V4cCgnXnInLCAnZ3knKTtcbiAgcmUubGFzdEluZGV4ID0gMjtcbiAgcmV0dXJuIHJlLmV4ZWMoJ3N0cicpICE9IG51bGw7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEJST0tFTl9DQVJFVDogQlJPS0VOX0NBUkVULFxuICBNSVNTRURfU1RJQ0tZOiBNSVNTRURfU1RJQ0tZLFxuICBVTlNVUFBPUlRFRF9ZOiBVTlNVUFBPUlRFRF9ZXG59O1xuIiwidmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG4vLyBiYWJlbC1taW5pZnkgYW5kIENsb3N1cmUgQ29tcGlsZXIgdHJhbnNwaWxlcyBSZWdFeHAoJy4nLCAncycpIC0+IC8uL3MgYW5kIGl0IGNhdXNlcyBTeW50YXhFcnJvclxudmFyICRSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlID0gJFJlZ0V4cCgnLicsICdzJyk7XG4gIHJldHVybiAhKHJlLmRvdEFsbCAmJiByZS5leGVjKCdcXG4nKSAmJiByZS5mbGFncyA9PT0gJ3MnKTtcbn0pO1xuIiwidmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG4vLyBiYWJlbC1taW5pZnkgYW5kIENsb3N1cmUgQ29tcGlsZXIgdHJhbnNwaWxlcyBSZWdFeHAoJyg/PGE+YiknLCAnZycpIC0+IC8oPzxhPmIpL2cgYW5kIGl0IGNhdXNlcyBTeW50YXhFcnJvclxudmFyICRSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlID0gJFJlZ0V4cCgnKD88YT5iKScsICdnJyk7XG4gIHJldHVybiByZS5leGVjKCdiJykuZ3JvdXBzLmEgIT09ICdiJyB8fFxuICAgICdiJy5yZXBsYWNlKHJlLCAnJDxhPmMnKSAhPT0gJ2JjJztcbn0pO1xuIiwidmFyIGlzTnVsbE9yVW5kZWZpbmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW51bGwtb3ItdW5kZWZpbmVkJyk7XG5cbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xuXG4vLyBgUmVxdWlyZU9iamVjdENvZXJjaWJsZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlcXVpcmVvYmplY3Rjb2VyY2libGVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpc051bGxPclVuZGVmaW5lZChpdCkpIHRocm93ICRUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbiIsIi8vIGBTYW1lVmFsdWVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zYW1ldmFsdWVcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtaXMgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuaXMgfHwgZnVuY3Rpb24gaXMoeCwgeSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICByZXR1cm4geCA9PT0geSA/IHggIT09IDAgfHwgMSAvIHggPT09IDEgLyB5IDogeCAhPSB4ICYmIHkgIT0geTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ09OU1RSVUNUT1JfTkFNRSkge1xuICB2YXIgQ29uc3RydWN0b3IgPSBnZXRCdWlsdEluKENPTlNUUlVDVE9SX05BTUUpO1xuICB2YXIgZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mO1xuXG4gIGlmIChERVNDUklQVE9SUyAmJiBDb25zdHJ1Y3RvciAmJiAhQ29uc3RydWN0b3JbU1BFQ0lFU10pIHtcbiAgICBkZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgU1BFQ0lFUywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgfSk7XG4gIH1cbn07XG4iLCJ2YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xudmFyIHVpZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy91aWQnKTtcblxudmFyIGtleXMgPSBzaGFyZWQoJ2tleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXlzW2tleV0gfHwgKGtleXNba2V5XSA9IHVpZChrZXkpKTtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGRlZmluZUdsb2JhbFByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1nbG9iYWwtcHJvcGVydHknKTtcblxudmFyIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nO1xudmFyIHN0b3JlID0gZ2xvYmFsW1NIQVJFRF0gfHwgZGVmaW5lR2xvYmFsUHJvcGVydHkoU0hBUkVELCB7fSk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3RvcmU7XG4iLCJ2YXIgSVNfUFVSRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1wdXJlJyk7XG52YXIgc3RvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLXN0b3JlJyk7XG5cbihtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoge30pO1xufSkoJ3ZlcnNpb25zJywgW10pLnB1c2goe1xuICB2ZXJzaW9uOiAnMy4yNS41JyxcbiAgbW9kZTogSVNfUFVSRSA/ICdwdXJlJyA6ICdnbG9iYWwnLFxuICBjb3B5cmlnaHQ6ICfCqSAyMDE0LTIwMjIgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSknLFxuICBsaWNlbnNlOiAnaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvYmxvYi92My4yNS41L0xJQ0VOU0UnLFxuICBzb3VyY2U6ICdodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcydcbn0pO1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIHRvSW50ZWdlck9ySW5maW5pdHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW50ZWdlci1vci1pbmZpbml0eScpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG5cbnZhciBjaGFyQXQgPSB1bmN1cnJ5VGhpcygnJy5jaGFyQXQpO1xudmFyIGNoYXJDb2RlQXQgPSB1bmN1cnJ5VGhpcygnJy5jaGFyQ29kZUF0KTtcbnZhciBzdHJpbmdTbGljZSA9IHVuY3VycnlUaGlzKCcnLnNsaWNlKTtcblxudmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChDT05WRVJUX1RPX1NUUklORykge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBwb3MpIHtcbiAgICB2YXIgUyA9IHRvU3RyaW5nKHJlcXVpcmVPYmplY3RDb2VyY2libGUoJHRoaXMpKTtcbiAgICB2YXIgcG9zaXRpb24gPSB0b0ludGVnZXJPckluZmluaXR5KHBvcyk7XG4gICAgdmFyIHNpemUgPSBTLmxlbmd0aDtcbiAgICB2YXIgZmlyc3QsIHNlY29uZDtcbiAgICBpZiAocG9zaXRpb24gPCAwIHx8IHBvc2l0aW9uID49IHNpemUpIHJldHVybiBDT05WRVJUX1RPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkO1xuICAgIGZpcnN0ID0gY2hhckNvZGVBdChTLCBwb3NpdGlvbik7XG4gICAgcmV0dXJuIGZpcnN0IDwgMHhEODAwIHx8IGZpcnN0ID4gMHhEQkZGIHx8IHBvc2l0aW9uICsgMSA9PT0gc2l6ZVxuICAgICAgfHwgKHNlY29uZCA9IGNoYXJDb2RlQXQoUywgcG9zaXRpb24gKyAxKSkgPCAweERDMDAgfHwgc2Vjb25kID4gMHhERkZGXG4gICAgICAgID8gQ09OVkVSVF9UT19TVFJJTkdcbiAgICAgICAgICA/IGNoYXJBdChTLCBwb3NpdGlvbilcbiAgICAgICAgICA6IGZpcnN0XG4gICAgICAgIDogQ09OVkVSVF9UT19TVFJJTkdcbiAgICAgICAgICA/IHN0cmluZ1NsaWNlKFMsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDIpXG4gICAgICAgICAgOiAoZmlyc3QgLSAweEQ4MDAgPDwgMTApICsgKHNlY29uZCAtIDB4REMwMCkgKyAweDEwMDAwO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLmNvZGVwb2ludGF0XG4gIGNvZGVBdDogY3JlYXRlTWV0aG9kKGZhbHNlKSxcbiAgLy8gYFN0cmluZy5wcm90b3R5cGUuYXRgIG1ldGhvZFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9TdHJpbmcucHJvdG90eXBlLmF0XG4gIGNoYXJBdDogY3JlYXRlTWV0aG9kKHRydWUpXG59O1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgd2hpdGVzcGFjZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2hpdGVzcGFjZXMnKTtcblxudmFyIHJlcGxhY2UgPSB1bmN1cnJ5VGhpcygnJy5yZXBsYWNlKTtcbnZhciB3aGl0ZXNwYWNlID0gJ1snICsgd2hpdGVzcGFjZXMgKyAnXSc7XG52YXIgbHRyaW0gPSBSZWdFeHAoJ14nICsgd2hpdGVzcGFjZSArIHdoaXRlc3BhY2UgKyAnKicpO1xudmFyIHJ0cmltID0gUmVnRXhwKHdoaXRlc3BhY2UgKyB3aGl0ZXNwYWNlICsgJyokJyk7XG5cbi8vIGBTdHJpbmcucHJvdG90eXBlLnsgdHJpbSwgdHJpbVN0YXJ0LCB0cmltRW5kLCB0cmltTGVmdCwgdHJpbVJpZ2h0IH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoVFlQRSkge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzKSB7XG4gICAgdmFyIHN0cmluZyA9IHRvU3RyaW5nKHJlcXVpcmVPYmplY3RDb2VyY2libGUoJHRoaXMpKTtcbiAgICBpZiAoVFlQRSAmIDEpIHN0cmluZyA9IHJlcGxhY2Uoc3RyaW5nLCBsdHJpbSwgJycpO1xuICAgIGlmIChUWVBFICYgMikgc3RyaW5nID0gcmVwbGFjZShzdHJpbmcsIHJ0cmltLCAnJyk7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgU3RyaW5nLnByb3RvdHlwZS57IHRyaW1MZWZ0LCB0cmltU3RhcnQgfWAgbWV0aG9kc1xuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUudHJpbXN0YXJ0XG4gIHN0YXJ0OiBjcmVhdGVNZXRob2QoMSksXG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLnsgdHJpbVJpZ2h0LCB0cmltRW5kIH1gIG1ldGhvZHNcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLnRyaW1lbmRcbiAgZW5kOiBjcmVhdGVNZXRob2QoMiksXG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLnRyaW1gIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUudHJpbVxuICB0cmltOiBjcmVhdGVNZXRob2QoMylcbn07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBlcy9uby1zeW1ib2wgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmcgKi9cbnZhciBWOF9WRVJTSU9OID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS12OC12ZXJzaW9uJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eXN5bWJvbHMgLS0gcmVxdWlyZWQgZm9yIHRlc3Rpbmdcbm1vZHVsZS5leHBvcnRzID0gISFPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICYmICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHZhciBzeW1ib2wgPSBTeW1ib2woKTtcbiAgLy8gQ2hyb21lIDM4IFN5bWJvbCBoYXMgaW5jb3JyZWN0IHRvU3RyaW5nIGNvbnZlcnNpb25cbiAgLy8gYGdldC1vd24tcHJvcGVydHktc3ltYm9sc2AgcG9seWZpbGwgc3ltYm9scyBjb252ZXJ0ZWQgdG8gb2JqZWN0IGFyZSBub3QgU3ltYm9sIGluc3RhbmNlc1xuICByZXR1cm4gIVN0cmluZyhzeW1ib2wpIHx8ICEoT2JqZWN0KHN5bWJvbCkgaW5zdGFuY2VvZiBTeW1ib2wpIHx8XG4gICAgLy8gQ2hyb21lIDM4LTQwIHN5bWJvbHMgYXJlIG5vdCBpbmhlcml0ZWQgZnJvbSBET00gY29sbGVjdGlvbnMgcHJvdG90eXBlcyB0byBpbnN0YW5jZXNcbiAgICAhU3ltYm9sLnNoYW0gJiYgVjhfVkVSU0lPTiAmJiBWOF9WRVJTSU9OIDwgNDE7XG59KTtcbiIsInZhciB0b0ludGVnZXJPckluZmluaXR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWludGVnZXItb3ItaW5maW5pdHknKTtcblxudmFyIG1heCA9IE1hdGgubWF4O1xudmFyIG1pbiA9IE1hdGgubWluO1xuXG4vLyBIZWxwZXIgZm9yIGEgcG9wdWxhciByZXBlYXRpbmcgY2FzZSBvZiB0aGUgc3BlYzpcbi8vIExldCBpbnRlZ2VyIGJlID8gVG9JbnRlZ2VyKGluZGV4KS5cbi8vIElmIGludGVnZXIgPCAwLCBsZXQgcmVzdWx0IGJlIG1heCgobGVuZ3RoICsgaW50ZWdlciksIDApOyBlbHNlIGxldCByZXN1bHQgYmUgbWluKGludGVnZXIsIGxlbmd0aCkuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbmRleCwgbGVuZ3RoKSB7XG4gIHZhciBpbnRlZ2VyID0gdG9JbnRlZ2VyT3JJbmZpbml0eShpbmRleCk7XG4gIHJldHVybiBpbnRlZ2VyIDwgMCA/IG1heChpbnRlZ2VyICsgbGVuZ3RoLCAwKSA6IG1pbihpbnRlZ2VyLCBsZW5ndGgpO1xufTtcbiIsIi8vIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbmRleGVkLW9iamVjdCcpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBJbmRleGVkT2JqZWN0KHJlcXVpcmVPYmplY3RDb2VyY2libGUoaXQpKTtcbn07XG4iLCJ2YXIgdHJ1bmMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbWF0aC10cnVuYycpO1xuXG4vLyBgVG9JbnRlZ2VyT3JJbmZpbml0eWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXRvaW50ZWdlcm9yaW5maW5pdHlcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHZhciBudW1iZXIgPSArYXJndW1lbnQ7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUgLS0gTmFOIGNoZWNrXG4gIHJldHVybiBudW1iZXIgIT09IG51bWJlciB8fCBudW1iZXIgPT09IDAgPyAwIDogdHJ1bmMobnVtYmVyKTtcbn07XG4iLCJ2YXIgdG9JbnRlZ2VyT3JJbmZpbml0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbnRlZ2VyLW9yLWluZmluaXR5Jyk7XG5cbnZhciBtaW4gPSBNYXRoLm1pbjtcblxuLy8gYFRvTGVuZ3RoYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtdG9sZW5ndGhcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHJldHVybiBhcmd1bWVudCA+IDAgPyBtaW4odG9JbnRlZ2VyT3JJbmZpbml0eShhcmd1bWVudCksIDB4MUZGRkZGRkZGRkZGRkYpIDogMDsgLy8gMiAqKiA1MyAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MVxufTtcbiIsInZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZScpO1xuXG52YXIgJE9iamVjdCA9IE9iamVjdDtcblxuLy8gYFRvT2JqZWN0YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtdG9vYmplY3Rcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHJldHVybiAkT2JqZWN0KHJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpKTtcbn07XG4iLCJ2YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG52YXIgaXNTeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtc3ltYm9sJyk7XG52YXIgZ2V0TWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1tZXRob2QnKTtcbnZhciBvcmRpbmFyeVRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29yZGluYXJ5LXRvLXByaW1pdGl2ZScpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcbnZhciBUT19QUklNSVRJVkUgPSB3ZWxsS25vd25TeW1ib2woJ3RvUHJpbWl0aXZlJyk7XG5cbi8vIGBUb1ByaW1pdGl2ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXRvcHJpbWl0aXZlXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbnB1dCwgcHJlZikge1xuICBpZiAoIWlzT2JqZWN0KGlucHV0KSB8fCBpc1N5bWJvbChpbnB1dCkpIHJldHVybiBpbnB1dDtcbiAgdmFyIGV4b3RpY1RvUHJpbSA9IGdldE1ldGhvZChpbnB1dCwgVE9fUFJJTUlUSVZFKTtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKGV4b3RpY1RvUHJpbSkge1xuICAgIGlmIChwcmVmID09PSB1bmRlZmluZWQpIHByZWYgPSAnZGVmYXVsdCc7XG4gICAgcmVzdWx0ID0gY2FsbChleG90aWNUb1ByaW0sIGlucHV0LCBwcmVmKTtcbiAgICBpZiAoIWlzT2JqZWN0KHJlc3VsdCkgfHwgaXNTeW1ib2wocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICB0aHJvdyAkVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xuICB9XG4gIGlmIChwcmVmID09PSB1bmRlZmluZWQpIHByZWYgPSAnbnVtYmVyJztcbiAgcmV0dXJuIG9yZGluYXJ5VG9QcmltaXRpdmUoaW5wdXQsIHByZWYpO1xufTtcbiIsInZhciB0b1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1wcmltaXRpdmUnKTtcbnZhciBpc1N5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1zeW1ib2wnKTtcblxuLy8gYFRvUHJvcGVydHlLZXlgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy10b3Byb3BlcnR5a2V5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICB2YXIga2V5ID0gdG9QcmltaXRpdmUoYXJndW1lbnQsICdzdHJpbmcnKTtcbiAgcmV0dXJuIGlzU3ltYm9sKGtleSkgPyBrZXkgOiBrZXkgKyAnJztcbn07XG4iLCJ2YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xudmFyIHRlc3QgPSB7fTtcblxudGVzdFtUT19TVFJJTkdfVEFHXSA9ICd6JztcblxubW9kdWxlLmV4cG9ydHMgPSBTdHJpbmcodGVzdCkgPT09ICdbb2JqZWN0IHpdJztcbiIsInZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YnKTtcblxudmFyICRTdHJpbmcgPSBTdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIGlmIChjbGFzc29mKGFyZ3VtZW50KSA9PT0gJ1N5bWJvbCcpIHRocm93IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgYSBTeW1ib2wgdmFsdWUgdG8gYSBzdHJpbmcnKTtcbiAgcmV0dXJuICRTdHJpbmcoYXJndW1lbnQpO1xufTtcbiIsInZhciAkU3RyaW5nID0gU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICB0cnkge1xuICAgIHJldHVybiAkU3RyaW5nKGFyZ3VtZW50KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gJ09iamVjdCc7XG4gIH1cbn07XG4iLCJ2YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG5cbnZhciBpZCA9IDA7XG52YXIgcG9zdGZpeCA9IE1hdGgucmFuZG9tKCk7XG52YXIgdG9TdHJpbmcgPSB1bmN1cnJ5VGhpcygxLjAudG9TdHJpbmcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuICdTeW1ib2woJyArIChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5KSArICcpXycgKyB0b1N0cmluZygrK2lkICsgcG9zdGZpeCwgMzYpO1xufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIGVzL25vLXN5bWJvbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZyAqL1xudmFyIE5BVElWRV9TWU1CT0wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3ltYm9sLWNvbnN0cnVjdG9yLWRldGVjdGlvbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5BVElWRV9TWU1CT0xcbiAgJiYgIVN5bWJvbC5zaGFtXG4gICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCc7XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG4vLyBWOCB+IENocm9tZSAzNi1cbi8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMzMzRcbm1vZHVsZS5leHBvcnRzID0gREVTQ1JJUFRPUlMgJiYgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWRlZmluZXByb3BlcnR5IC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nXG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9LCAncHJvdG90eXBlJywge1xuICAgIHZhbHVlOiA0MixcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSkucHJvdG90eXBlICE9IDQyO1xufSk7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcblxudmFyIFdlYWtNYXAgPSBnbG9iYWwuV2Vha01hcDtcblxubW9kdWxlLmV4cG9ydHMgPSBpc0NhbGxhYmxlKFdlYWtNYXApICYmIC9uYXRpdmUgY29kZS8udGVzdChTdHJpbmcoV2Vha01hcCkpO1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBzaGFyZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciB1aWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdWlkJyk7XG52YXIgTkFUSVZFX1NZTUJPTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zeW1ib2wtY29uc3RydWN0b3ItZGV0ZWN0aW9uJyk7XG52YXIgVVNFX1NZTUJPTF9BU19VSUQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdXNlLXN5bWJvbC1hcy11aWQnKTtcblxudmFyIFdlbGxLbm93blN5bWJvbHNTdG9yZSA9IHNoYXJlZCgnd2tzJyk7XG52YXIgU3ltYm9sID0gZ2xvYmFsLlN5bWJvbDtcbnZhciBzeW1ib2xGb3IgPSBTeW1ib2wgJiYgU3ltYm9sWydmb3InXTtcbnZhciBjcmVhdGVXZWxsS25vd25TeW1ib2wgPSBVU0VfU1lNQk9MX0FTX1VJRCA/IFN5bWJvbCA6IFN5bWJvbCAmJiBTeW1ib2wud2l0aG91dFNldHRlciB8fCB1aWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgaWYgKCFoYXNPd24oV2VsbEtub3duU3ltYm9sc1N0b3JlLCBuYW1lKSB8fCAhKE5BVElWRV9TWU1CT0wgfHwgdHlwZW9mIFdlbGxLbm93blN5bWJvbHNTdG9yZVtuYW1lXSA9PSAnc3RyaW5nJykpIHtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSAnU3ltYm9sLicgKyBuYW1lO1xuICAgIGlmIChOQVRJVkVfU1lNQk9MICYmIGhhc093bihTeW1ib2wsIG5hbWUpKSB7XG4gICAgICBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV0gPSBTeW1ib2xbbmFtZV07XG4gICAgfSBlbHNlIGlmIChVU0VfU1lNQk9MX0FTX1VJRCAmJiBzeW1ib2xGb3IpIHtcbiAgICAgIFdlbGxLbm93blN5bWJvbHNTdG9yZVtuYW1lXSA9IHN5bWJvbEZvcihkZXNjcmlwdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIFdlbGxLbm93blN5bWJvbHNTdG9yZVtuYW1lXSA9IGNyZWF0ZVdlbGxLbm93blN5bWJvbChkZXNjcmlwdGlvbik7XG4gICAgfVxuICB9IHJldHVybiBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV07XG59O1xuIiwiLy8gYSBzdHJpbmcgb2YgYWxsIHZhbGlkIHVuaWNvZGUgd2hpdGVzcGFjZXNcbm1vZHVsZS5leHBvcnRzID0gJ1xcdTAwMDlcXHUwMDBBXFx1MDAwQlxcdTAwMENcXHUwMDBEXFx1MDAyMFxcdTAwQTBcXHUxNjgwXFx1MjAwMFxcdTIwMDFcXHUyMDAyJyArXG4gICdcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdTIwMjhcXHUyMDI5XFx1RkVGRic7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciAkZmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pdGVyYXRpb24nKS5maW5kO1xudmFyIGFkZFRvVW5zY29wYWJsZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYWRkLXRvLXVuc2NvcGFibGVzJyk7XG5cbnZhciBGSU5EID0gJ2ZpbmQnO1xudmFyIFNLSVBTX0hPTEVTID0gdHJ1ZTtcblxuLy8gU2hvdWxkbid0IHNraXAgaG9sZXNcbmlmIChGSU5EIGluIFtdKSBBcnJheSgxKVtGSU5EXShmdW5jdGlvbiAoKSB7IFNLSVBTX0hPTEVTID0gZmFsc2U7IH0pO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLmZpbmRgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZmluZFxuJCh7IHRhcmdldDogJ0FycmF5JywgcHJvdG86IHRydWUsIGZvcmNlZDogU0tJUFNfSE9MRVMgfSwge1xuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNhbGxiYWNrZm4gLyogLCB0aGF0ID0gdW5kZWZpbmVkICovKSB7XG4gICAgcmV0dXJuICRmaW5kKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgfVxufSk7XG5cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLUBAdW5zY29wYWJsZXNcbmFkZFRvVW5zY29wYWJsZXMoRklORCk7XG4iLCJ2YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LXRvLXN0cmluZycpO1xuXG4vLyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmdcbmlmICghVE9fU1RSSU5HX1RBR19TVVBQT1JUKSB7XG4gIGRlZmluZUJ1aWx0SW4oT2JqZWN0LnByb3RvdHlwZSwgJ3RvU3RyaW5nJywgdG9TdHJpbmcsIHsgdW5zYWZlOiB0cnVlIH0pO1xufVxuIiwidmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgJHBhcnNlSW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL251bWJlci1wYXJzZS1pbnQnKTtcblxuLy8gYHBhcnNlSW50YCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcGFyc2VpbnQtc3RyaW5nLXJhZGl4XG4kKHsgZ2xvYmFsOiB0cnVlLCBmb3JjZWQ6IHBhcnNlSW50ICE9ICRwYXJzZUludCB9LCB7XG4gIHBhcnNlSW50OiAkcGFyc2VJbnRcbn0pO1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGlzRm9yY2VkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWZvcmNlZCcpO1xudmFyIGluaGVyaXRJZlJlcXVpcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luaGVyaXQtaWYtcmVxdWlyZWQnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcycpLmY7XG52YXIgaXNQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtaXMtcHJvdG90eXBlLW9mJyk7XG52YXIgaXNSZWdFeHAgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcmVnZXhwJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgZ2V0UmVnRXhwRmxhZ3MgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWdldC1mbGFncycpO1xudmFyIHN0aWNreUhlbHBlcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLXN0aWNreS1oZWxwZXJzJyk7XG52YXIgcHJveHlBY2Nlc3NvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm94eS1hY2Nlc3NvcicpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBoYXNPd24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzLW93bi1wcm9wZXJ0eScpO1xudmFyIGVuZm9yY2VJbnRlcm5hbFN0YXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJykuZW5mb3JjZTtcbnZhciBzZXRTcGVjaWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC1zcGVjaWVzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgVU5TVVBQT1JURURfRE9UX0FMTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtZG90LWFsbCcpO1xudmFyIFVOU1VQUE9SVEVEX05DRyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtbmNnJyk7XG5cbnZhciBNQVRDSCA9IHdlbGxLbm93blN5bWJvbCgnbWF0Y2gnKTtcbnZhciBOYXRpdmVSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xudmFyIFJlZ0V4cFByb3RvdHlwZSA9IE5hdGl2ZVJlZ0V4cC5wcm90b3R5cGU7XG52YXIgU3ludGF4RXJyb3IgPSBnbG9iYWwuU3ludGF4RXJyb3I7XG52YXIgZXhlYyA9IHVuY3VycnlUaGlzKFJlZ0V4cFByb3RvdHlwZS5leGVjKTtcbnZhciBjaGFyQXQgPSB1bmN1cnJ5VGhpcygnJy5jaGFyQXQpO1xudmFyIHJlcGxhY2UgPSB1bmN1cnJ5VGhpcygnJy5yZXBsYWNlKTtcbnZhciBzdHJpbmdJbmRleE9mID0gdW5jdXJyeVRoaXMoJycuaW5kZXhPZik7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG4vLyBUT0RPOiBVc2Ugb25seSBwcm9wZXIgUmVnRXhwSWRlbnRpZmllck5hbWVcbnZhciBJU19OQ0cgPSAvXlxcPzxbXlxcc1xcZCEjJSYqKzw9PkBeXVteXFxzISMlJiorPD0+QF5dKj4vO1xudmFyIHJlMSA9IC9hL2c7XG52YXIgcmUyID0gL2EvZztcblxuLy8gXCJuZXdcIiBzaG91bGQgY3JlYXRlIGEgbmV3IG9iamVjdCwgb2xkIHdlYmtpdCBidWdcbnZhciBDT1JSRUNUX05FVyA9IG5ldyBOYXRpdmVSZWdFeHAocmUxKSAhPT0gcmUxO1xuXG52YXIgTUlTU0VEX1NUSUNLWSA9IHN0aWNreUhlbHBlcnMuTUlTU0VEX1NUSUNLWTtcbnZhciBVTlNVUFBPUlRFRF9ZID0gc3RpY2t5SGVscGVycy5VTlNVUFBPUlRFRF9ZO1xuXG52YXIgQkFTRV9GT1JDRUQgPSBERVNDUklQVE9SUyAmJlxuICAoIUNPUlJFQ1RfTkVXIHx8IE1JU1NFRF9TVElDS1kgfHwgVU5TVVBQT1JURURfRE9UX0FMTCB8fCBVTlNVUFBPUlRFRF9OQ0cgfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIHJlMltNQVRDSF0gPSBmYWxzZTtcbiAgICAvLyBSZWdFeHAgY29uc3RydWN0b3IgY2FuIGFsdGVyIGZsYWdzIGFuZCBJc1JlZ0V4cCB3b3JrcyBjb3JyZWN0IHdpdGggQEBtYXRjaFxuICAgIHJldHVybiBOYXRpdmVSZWdFeHAocmUxKSAhPSByZTEgfHwgTmF0aXZlUmVnRXhwKHJlMikgPT0gcmUyIHx8IE5hdGl2ZVJlZ0V4cChyZTEsICdpJykgIT0gJy9hL2knO1xuICB9KSk7XG5cbnZhciBoYW5kbGVEb3RBbGwgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIHZhciBicmFja2V0cyA9IGZhbHNlO1xuICB2YXIgY2hyO1xuICBmb3IgKDsgaW5kZXggPD0gbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY2hyID0gY2hhckF0KHN0cmluZywgaW5kZXgpO1xuICAgIGlmIChjaHIgPT09ICdcXFxcJykge1xuICAgICAgcmVzdWx0ICs9IGNociArIGNoYXJBdChzdHJpbmcsICsraW5kZXgpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICghYnJhY2tldHMgJiYgY2hyID09PSAnLicpIHtcbiAgICAgIHJlc3VsdCArPSAnW1xcXFxzXFxcXFNdJztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNociA9PT0gJ1snKSB7XG4gICAgICAgIGJyYWNrZXRzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoY2hyID09PSAnXScpIHtcbiAgICAgICAgYnJhY2tldHMgPSBmYWxzZTtcbiAgICAgIH0gcmVzdWx0ICs9IGNocjtcbiAgICB9XG4gIH0gcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBoYW5kbGVOQ0cgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIHZhciBuYW1lZCA9IFtdO1xuICB2YXIgbmFtZXMgPSB7fTtcbiAgdmFyIGJyYWNrZXRzID0gZmFsc2U7XG4gIHZhciBuY2cgPSBmYWxzZTtcbiAgdmFyIGdyb3VwaWQgPSAwO1xuICB2YXIgZ3JvdXBuYW1lID0gJyc7XG4gIHZhciBjaHI7XG4gIGZvciAoOyBpbmRleCA8PSBsZW5ndGg7IGluZGV4KyspIHtcbiAgICBjaHIgPSBjaGFyQXQoc3RyaW5nLCBpbmRleCk7XG4gICAgaWYgKGNociA9PT0gJ1xcXFwnKSB7XG4gICAgICBjaHIgPSBjaHIgKyBjaGFyQXQoc3RyaW5nLCArK2luZGV4KTtcbiAgICB9IGVsc2UgaWYgKGNociA9PT0gJ10nKSB7XG4gICAgICBicmFja2V0cyA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoIWJyYWNrZXRzKSBzd2l0Y2ggKHRydWUpIHtcbiAgICAgIGNhc2UgY2hyID09PSAnWyc6XG4gICAgICAgIGJyYWNrZXRzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGNociA9PT0gJygnOlxuICAgICAgICBpZiAoZXhlYyhJU19OQ0csIHN0cmluZ1NsaWNlKHN0cmluZywgaW5kZXggKyAxKSkpIHtcbiAgICAgICAgICBpbmRleCArPSAyO1xuICAgICAgICAgIG5jZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IGNocjtcbiAgICAgICAgZ3JvdXBpZCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIGNhc2UgY2hyID09PSAnPicgJiYgbmNnOlxuICAgICAgICBpZiAoZ3JvdXBuYW1lID09PSAnJyB8fCBoYXNPd24obmFtZXMsIGdyb3VwbmFtZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0ludmFsaWQgY2FwdHVyZSBncm91cCBuYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgbmFtZXNbZ3JvdXBuYW1lXSA9IHRydWU7XG4gICAgICAgIG5hbWVkW25hbWVkLmxlbmd0aF0gPSBbZ3JvdXBuYW1lLCBncm91cGlkXTtcbiAgICAgICAgbmNnID0gZmFsc2U7XG4gICAgICAgIGdyb3VwbmFtZSA9ICcnO1xuICAgICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG5jZykgZ3JvdXBuYW1lICs9IGNocjtcbiAgICBlbHNlIHJlc3VsdCArPSBjaHI7XG4gIH0gcmV0dXJuIFtyZXN1bHQsIG5hbWVkXTtcbn07XG5cbi8vIGBSZWdFeHBgIGNvbnN0cnVjdG9yXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlZ2V4cC1jb25zdHJ1Y3RvclxuaWYgKGlzRm9yY2VkKCdSZWdFeHAnLCBCQVNFX0ZPUkNFRCkpIHtcbiAgdmFyIFJlZ0V4cFdyYXBwZXIgPSBmdW5jdGlvbiBSZWdFeHAocGF0dGVybiwgZmxhZ3MpIHtcbiAgICB2YXIgdGhpc0lzUmVnRXhwID0gaXNQcm90b3R5cGVPZihSZWdFeHBQcm90b3R5cGUsIHRoaXMpO1xuICAgIHZhciBwYXR0ZXJuSXNSZWdFeHAgPSBpc1JlZ0V4cChwYXR0ZXJuKTtcbiAgICB2YXIgZmxhZ3NBcmVVbmRlZmluZWQgPSBmbGFncyA9PT0gdW5kZWZpbmVkO1xuICAgIHZhciBncm91cHMgPSBbXTtcbiAgICB2YXIgcmF3UGF0dGVybiA9IHBhdHRlcm47XG4gICAgdmFyIHJhd0ZsYWdzLCBkb3RBbGwsIHN0aWNreSwgaGFuZGxlZCwgcmVzdWx0LCBzdGF0ZTtcblxuICAgIGlmICghdGhpc0lzUmVnRXhwICYmIHBhdHRlcm5Jc1JlZ0V4cCAmJiBmbGFnc0FyZVVuZGVmaW5lZCAmJiBwYXR0ZXJuLmNvbnN0cnVjdG9yID09PSBSZWdFeHBXcmFwcGVyKSB7XG4gICAgICByZXR1cm4gcGF0dGVybjtcbiAgICB9XG5cbiAgICBpZiAocGF0dGVybklzUmVnRXhwIHx8IGlzUHJvdG90eXBlT2YoUmVnRXhwUHJvdG90eXBlLCBwYXR0ZXJuKSkge1xuICAgICAgcGF0dGVybiA9IHBhdHRlcm4uc291cmNlO1xuICAgICAgaWYgKGZsYWdzQXJlVW5kZWZpbmVkKSBmbGFncyA9IGdldFJlZ0V4cEZsYWdzKHJhd1BhdHRlcm4pO1xuICAgIH1cblxuICAgIHBhdHRlcm4gPSBwYXR0ZXJuID09PSB1bmRlZmluZWQgPyAnJyA6IHRvU3RyaW5nKHBhdHRlcm4pO1xuICAgIGZsYWdzID0gZmxhZ3MgPT09IHVuZGVmaW5lZCA/ICcnIDogdG9TdHJpbmcoZmxhZ3MpO1xuICAgIHJhd1BhdHRlcm4gPSBwYXR0ZXJuO1xuXG4gICAgaWYgKFVOU1VQUE9SVEVEX0RPVF9BTEwgJiYgJ2RvdEFsbCcgaW4gcmUxKSB7XG4gICAgICBkb3RBbGwgPSAhIWZsYWdzICYmIHN0cmluZ0luZGV4T2YoZmxhZ3MsICdzJykgPiAtMTtcbiAgICAgIGlmIChkb3RBbGwpIGZsYWdzID0gcmVwbGFjZShmbGFncywgL3MvZywgJycpO1xuICAgIH1cblxuICAgIHJhd0ZsYWdzID0gZmxhZ3M7XG5cbiAgICBpZiAoTUlTU0VEX1NUSUNLWSAmJiAnc3RpY2t5JyBpbiByZTEpIHtcbiAgICAgIHN0aWNreSA9ICEhZmxhZ3MgJiYgc3RyaW5nSW5kZXhPZihmbGFncywgJ3knKSA+IC0xO1xuICAgICAgaWYgKHN0aWNreSAmJiBVTlNVUFBPUlRFRF9ZKSBmbGFncyA9IHJlcGxhY2UoZmxhZ3MsIC95L2csICcnKTtcbiAgICB9XG5cbiAgICBpZiAoVU5TVVBQT1JURURfTkNHKSB7XG4gICAgICBoYW5kbGVkID0gaGFuZGxlTkNHKHBhdHRlcm4pO1xuICAgICAgcGF0dGVybiA9IGhhbmRsZWRbMF07XG4gICAgICBncm91cHMgPSBoYW5kbGVkWzFdO1xuICAgIH1cblxuICAgIHJlc3VsdCA9IGluaGVyaXRJZlJlcXVpcmVkKE5hdGl2ZVJlZ0V4cChwYXR0ZXJuLCBmbGFncyksIHRoaXNJc1JlZ0V4cCA/IHRoaXMgOiBSZWdFeHBQcm90b3R5cGUsIFJlZ0V4cFdyYXBwZXIpO1xuXG4gICAgaWYgKGRvdEFsbCB8fCBzdGlja3kgfHwgZ3JvdXBzLmxlbmd0aCkge1xuICAgICAgc3RhdGUgPSBlbmZvcmNlSW50ZXJuYWxTdGF0ZShyZXN1bHQpO1xuICAgICAgaWYgKGRvdEFsbCkge1xuICAgICAgICBzdGF0ZS5kb3RBbGwgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5yYXcgPSBSZWdFeHBXcmFwcGVyKGhhbmRsZURvdEFsbChwYXR0ZXJuKSwgcmF3RmxhZ3MpO1xuICAgICAgfVxuICAgICAgaWYgKHN0aWNreSkgc3RhdGUuc3RpY2t5ID0gdHJ1ZTtcbiAgICAgIGlmIChncm91cHMubGVuZ3RoKSBzdGF0ZS5ncm91cHMgPSBncm91cHM7XG4gICAgfVxuXG4gICAgaWYgKHBhdHRlcm4gIT09IHJhd1BhdHRlcm4pIHRyeSB7XG4gICAgICAvLyBmYWlscyBpbiBvbGQgZW5naW5lcywgYnV0IHdlIGhhdmUgbm8gYWx0ZXJuYXRpdmVzIGZvciB1bnN1cHBvcnRlZCByZWdleCBzeW50YXhcbiAgICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShyZXN1bHQsICdzb3VyY2UnLCByYXdQYXR0ZXJuID09PSAnJyA/ICcoPzopJyA6IHJhd1BhdHRlcm4pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZm9yICh2YXIga2V5cyA9IGdldE93blByb3BlcnR5TmFtZXMoTmF0aXZlUmVnRXhwKSwgaW5kZXggPSAwOyBrZXlzLmxlbmd0aCA+IGluZGV4Oykge1xuICAgIHByb3h5QWNjZXNzb3IoUmVnRXhwV3JhcHBlciwgTmF0aXZlUmVnRXhwLCBrZXlzW2luZGV4KytdKTtcbiAgfVxuXG4gIFJlZ0V4cFByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlZ0V4cFdyYXBwZXI7XG4gIFJlZ0V4cFdyYXBwZXIucHJvdG90eXBlID0gUmVnRXhwUHJvdG90eXBlO1xuICBkZWZpbmVCdWlsdEluKGdsb2JhbCwgJ1JlZ0V4cCcsIFJlZ0V4cFdyYXBwZXIsIHsgY29uc3RydWN0b3I6IHRydWUgfSk7XG59XG5cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtZ2V0LXJlZ2V4cC1AQHNwZWNpZXNcbnNldFNwZWNpZXMoJ1JlZ0V4cCcpO1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgVU5TVVBQT1JURURfRE9UX0FMTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtZG90LWFsbCcpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciBkZWZpbmVCdWlsdEluQWNjZXNzb3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluLWFjY2Vzc29yJyk7XG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpLmdldDtcblxudmFyIFJlZ0V4cFByb3RvdHlwZSA9IFJlZ0V4cC5wcm90b3R5cGU7XG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYFJlZ0V4cC5wcm90b3R5cGUuZG90QWxsYCBnZXR0ZXJcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtZ2V0LXJlZ2V4cC5wcm90b3R5cGUuZG90YWxsXG5pZiAoREVTQ1JJUFRPUlMgJiYgVU5TVVBQT1JURURfRE9UX0FMTCkge1xuICBkZWZpbmVCdWlsdEluQWNjZXNzb3IoUmVnRXhwUHJvdG90eXBlLCAnZG90QWxsJywge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGRvdEFsbCgpIHtcbiAgICAgIGlmICh0aGlzID09PSBSZWdFeHBQcm90b3R5cGUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAvLyBXZSBjYW4ndCB1c2UgSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXR0ZXJGb3IgYmVjYXVzZVxuICAgICAgLy8gd2UgZG9uJ3QgYWRkIG1ldGFkYXRhIGZvciByZWdleHBzIGNyZWF0ZWQgYnkgYSBsaXRlcmFsLlxuICAgICAgaWYgKGNsYXNzb2YodGhpcykgPT09ICdSZWdFeHAnKSB7XG4gICAgICAgIHJldHVybiAhIWdldEludGVybmFsU3RhdGUodGhpcykuZG90QWxsO1xuICAgICAgfVxuICAgICAgdGhyb3cgJFR5cGVFcnJvcignSW5jb21wYXRpYmxlIHJlY2VpdmVyLCBSZWdFeHAgcmVxdWlyZWQnKTtcbiAgICB9XG4gIH0pO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgZXhlYyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZXhlYycpO1xuXG4vLyBgUmVnRXhwLnByb3RvdHlwZS5leGVjYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcmVnZXhwLnByb3RvdHlwZS5leGVjXG4kKHsgdGFyZ2V0OiAnUmVnRXhwJywgcHJvdG86IHRydWUsIGZvcmNlZDogLy4vLmV4ZWMgIT09IGV4ZWMgfSwge1xuICBleGVjOiBleGVjXG59KTtcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIE1JU1NFRF9TVElDS1kgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLXN0aWNreS1oZWxwZXJzJykuTUlTU0VEX1NUSUNLWTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgZGVmaW5lQnVpbHRJbkFjY2Vzc29yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbi1hY2Nlc3NvcicpO1xudmFyIGdldEludGVybmFsU3RhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUnKS5nZXQ7XG5cbnZhciBSZWdFeHBQcm90b3R5cGUgPSBSZWdFeHAucHJvdG90eXBlO1xudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbi8vIGBSZWdFeHAucHJvdG90eXBlLnN0aWNreWAgZ2V0dGVyXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWdldC1yZWdleHAucHJvdG90eXBlLnN0aWNreVxuaWYgKERFU0NSSVBUT1JTICYmIE1JU1NFRF9TVElDS1kpIHtcbiAgZGVmaW5lQnVpbHRJbkFjY2Vzc29yKFJlZ0V4cFByb3RvdHlwZSwgJ3N0aWNreScsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBzdGlja3koKSB7XG4gICAgICBpZiAodGhpcyA9PT0gUmVnRXhwUHJvdG90eXBlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgLy8gV2UgY2FuJ3QgdXNlIEludGVybmFsU3RhdGVNb2R1bGUuZ2V0dGVyRm9yIGJlY2F1c2VcbiAgICAgIC8vIHdlIGRvbid0IGFkZCBtZXRhZGF0YSBmb3IgcmVnZXhwcyBjcmVhdGVkIGJ5IGEgbGl0ZXJhbC5cbiAgICAgIGlmIChjbGFzc29mKHRoaXMpID09PSAnUmVnRXhwJykge1xuICAgICAgICByZXR1cm4gISFnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnN0aWNreTtcbiAgICAgIH1cbiAgICAgIHRocm93ICRUeXBlRXJyb3IoJ0luY29tcGF0aWJsZSByZWNlaXZlciwgUmVnRXhwIHJlcXVpcmVkJyk7XG4gICAgfVxuICB9KTtcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIFRPRE86IFJlbW92ZSBmcm9tIGBjb3JlLWpzQDRgIHNpbmNlIGl0J3MgbW92ZWQgdG8gZW50cnkgcG9pbnRzXG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjJyk7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG5cbnZhciBERUxFR0FURVNfVE9fRVhFQyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4ZWNDYWxsZWQgPSBmYWxzZTtcbiAgdmFyIHJlID0gL1thY10vO1xuICByZS5leGVjID0gZnVuY3Rpb24gKCkge1xuICAgIGV4ZWNDYWxsZWQgPSB0cnVlO1xuICAgIHJldHVybiAvLi8uZXhlYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuICByZXR1cm4gcmUudGVzdCgnYWJjJykgPT09IHRydWUgJiYgZXhlY0NhbGxlZDtcbn0oKTtcblxudmFyIG5hdGl2ZVRlc3QgPSAvLi8udGVzdDtcblxuLy8gYFJlZ0V4cC5wcm90b3R5cGUudGVzdGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudGVzdFxuJCh7IHRhcmdldDogJ1JlZ0V4cCcsIHByb3RvOiB0cnVlLCBmb3JjZWQ6ICFERUxFR0FURVNfVE9fRVhFQyB9LCB7XG4gIHRlc3Q6IGZ1bmN0aW9uIChTKSB7XG4gICAgdmFyIFIgPSBhbk9iamVjdCh0aGlzKTtcbiAgICB2YXIgc3RyaW5nID0gdG9TdHJpbmcoUyk7XG4gICAgdmFyIGV4ZWMgPSBSLmV4ZWM7XG4gICAgaWYgKCFpc0NhbGxhYmxlKGV4ZWMpKSByZXR1cm4gY2FsbChuYXRpdmVUZXN0LCBSLCBzdHJpbmcpO1xuICAgIHZhciByZXN1bHQgPSBjYWxsKGV4ZWMsIFIsIHN0cmluZyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIGFuT2JqZWN0KHJlc3VsdCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIFBST1BFUl9GVU5DVElPTl9OQU1FID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLW5hbWUnKS5QUk9QRVI7XG52YXIgZGVmaW5lQnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtYnVpbHQtaW4nKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciAkdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBnZXRSZWdFeHBGbGFncyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZ2V0LWZsYWdzJyk7XG5cbnZhciBUT19TVFJJTkcgPSAndG9TdHJpbmcnO1xudmFyIFJlZ0V4cFByb3RvdHlwZSA9IFJlZ0V4cC5wcm90b3R5cGU7XG52YXIgbmF0aXZlVG9TdHJpbmcgPSBSZWdFeHBQcm90b3R5cGVbVE9fU1RSSU5HXTtcblxudmFyIE5PVF9HRU5FUklDID0gZmFpbHMoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbCh7IHNvdXJjZTogJ2EnLCBmbGFnczogJ2InIH0pICE9ICcvYS9iJzsgfSk7XG4vLyBGRjQ0LSBSZWdFeHAjdG9TdHJpbmcgaGFzIGEgd3JvbmcgbmFtZVxudmFyIElOQ09SUkVDVF9OQU1FID0gUFJPUEVSX0ZVTkNUSU9OX05BTUUgJiYgbmF0aXZlVG9TdHJpbmcubmFtZSAhPSBUT19TVFJJTkc7XG5cbi8vIGBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcmVnZXhwLnByb3RvdHlwZS50b3N0cmluZ1xuaWYgKE5PVF9HRU5FUklDIHx8IElOQ09SUkVDVF9OQU1FKSB7XG4gIGRlZmluZUJ1aWx0SW4oUmVnRXhwLnByb3RvdHlwZSwgVE9fU1RSSU5HLCBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICB2YXIgUiA9IGFuT2JqZWN0KHRoaXMpO1xuICAgIHZhciBwYXR0ZXJuID0gJHRvU3RyaW5nKFIuc291cmNlKTtcbiAgICB2YXIgZmxhZ3MgPSAkdG9TdHJpbmcoZ2V0UmVnRXhwRmxhZ3MoUikpO1xuICAgIHJldHVybiAnLycgKyBwYXR0ZXJuICsgJy8nICsgZmxhZ3M7XG4gIH0sIHsgdW5zYWZlOiB0cnVlIH0pO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFwcGx5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWFwcGx5Jyk7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgZml4UmVnRXhwV2VsbEtub3duU3ltYm9sTG9naWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZml4LXJlZ2V4cC13ZWxsLWtub3duLXN5bWJvbC1sb2dpYycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGlzTnVsbE9yVW5kZWZpbmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW51bGwtb3ItdW5kZWZpbmVkJyk7XG52YXIgdG9JbnRlZ2VyT3JJbmZpbml0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbnRlZ2VyLW9yLWluZmluaXR5Jyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcbnZhciBhZHZhbmNlU3RyaW5nSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYWR2YW5jZS1zdHJpbmctaW5kZXgnKTtcbnZhciBnZXRNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LW1ldGhvZCcpO1xudmFyIGdldFN1YnN0aXR1dGlvbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtc3Vic3RpdHV0aW9uJyk7XG52YXIgcmVnRXhwRXhlYyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZXhlYy1hYnN0cmFjdCcpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgUkVQTEFDRSA9IHdlbGxLbm93blN5bWJvbCgncmVwbGFjZScpO1xudmFyIG1heCA9IE1hdGgubWF4O1xudmFyIG1pbiA9IE1hdGgubWluO1xudmFyIGNvbmNhdCA9IHVuY3VycnlUaGlzKFtdLmNvbmNhdCk7XG52YXIgcHVzaCA9IHVuY3VycnlUaGlzKFtdLnB1c2gpO1xudmFyIHN0cmluZ0luZGV4T2YgPSB1bmN1cnJ5VGhpcygnJy5pbmRleE9mKTtcbnZhciBzdHJpbmdTbGljZSA9IHVuY3VycnlUaGlzKCcnLnNsaWNlKTtcblxudmFyIG1heWJlVG9TdHJpbmcgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyBpdCA6IFN0cmluZyhpdCk7XG59O1xuXG4vLyBJRSA8PSAxMSByZXBsYWNlcyAkMCB3aXRoIHRoZSB3aG9sZSBtYXRjaCwgYXMgaWYgaXQgd2FzICQmXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82MDI0NjY2L2dldHRpbmctaWUtdG8tcmVwbGFjZS1hLXJlZ2V4LXdpdGgtdGhlLWxpdGVyYWwtc3RyaW5nLTBcbnZhciBSRVBMQUNFX0tFRVBTXyQwID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9wcmVmZXItZXNjYXBlLXJlcGxhY2VtZW50LWRvbGxhci1jaGFyIC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nXG4gIHJldHVybiAnYScucmVwbGFjZSgvLi8sICckMCcpID09PSAnJDAnO1xufSkoKTtcblxuLy8gU2FmYXJpIDw9IDEzLjAuMyg/KSBzdWJzdGl0dXRlcyBudGggY2FwdHVyZSB3aGVyZSBuPm0gd2l0aCBhbiBlbXB0eSBzdHJpbmdcbnZhciBSRUdFWFBfUkVQTEFDRV9TVUJTVElUVVRFU19VTkRFRklORURfQ0FQVFVSRSA9IChmdW5jdGlvbiAoKSB7XG4gIGlmICgvLi9bUkVQTEFDRV0pIHtcbiAgICByZXR1cm4gLy4vW1JFUExBQ0VdKCdhJywgJyQwJykgPT09ICcnO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0pKCk7XG5cbnZhciBSRVBMQUNFX1NVUFBPUlRTX05BTUVEX0dST1VQUyA9ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHZhciByZSA9IC8uLztcbiAgcmUuZXhlYyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgcmVzdWx0Lmdyb3VwcyA9IHsgYTogJzcnIH07XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9uby11c2VsZXNzLWRvbGxhci1yZXBsYWNlbWVudHMgLS0gZmFsc2UgcG9zaXRpdmVcbiAgcmV0dXJuICcnLnJlcGxhY2UocmUsICckPGE+JykgIT09ICc3Jztcbn0pO1xuXG4vLyBAQHJlcGxhY2UgbG9naWNcbmZpeFJlZ0V4cFdlbGxLbm93blN5bWJvbExvZ2ljKCdyZXBsYWNlJywgZnVuY3Rpb24gKF8sIG5hdGl2ZVJlcGxhY2UsIG1heWJlQ2FsbE5hdGl2ZSkge1xuICB2YXIgVU5TQUZFX1NVQlNUSVRVVEUgPSBSRUdFWFBfUkVQTEFDRV9TVUJTVElUVVRFU19VTkRFRklORURfQ0FQVFVSRSA/ICckJyA6ICckMCc7XG5cbiAgcmV0dXJuIFtcbiAgICAvLyBgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlYCBtZXRob2RcbiAgICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUucmVwbGFjZVxuICAgIGZ1bmN0aW9uIHJlcGxhY2Uoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSkge1xuICAgICAgdmFyIE8gPSByZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHRoaXMpO1xuICAgICAgdmFyIHJlcGxhY2VyID0gaXNOdWxsT3JVbmRlZmluZWQoc2VhcmNoVmFsdWUpID8gdW5kZWZpbmVkIDogZ2V0TWV0aG9kKHNlYXJjaFZhbHVlLCBSRVBMQUNFKTtcbiAgICAgIHJldHVybiByZXBsYWNlclxuICAgICAgICA/IGNhbGwocmVwbGFjZXIsIHNlYXJjaFZhbHVlLCBPLCByZXBsYWNlVmFsdWUpXG4gICAgICAgIDogY2FsbChuYXRpdmVSZXBsYWNlLCB0b1N0cmluZyhPKSwgc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSk7XG4gICAgfSxcbiAgICAvLyBgUmVnRXhwLnByb3RvdHlwZVtAQHJlcGxhY2VdYCBtZXRob2RcbiAgICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlZ2V4cC5wcm90b3R5cGUtQEByZXBsYWNlXG4gICAgZnVuY3Rpb24gKHN0cmluZywgcmVwbGFjZVZhbHVlKSB7XG4gICAgICB2YXIgcnggPSBhbk9iamVjdCh0aGlzKTtcbiAgICAgIHZhciBTID0gdG9TdHJpbmcoc3RyaW5nKTtcblxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgcmVwbGFjZVZhbHVlID09ICdzdHJpbmcnICYmXG4gICAgICAgIHN0cmluZ0luZGV4T2YocmVwbGFjZVZhbHVlLCBVTlNBRkVfU1VCU1RJVFVURSkgPT09IC0xICYmXG4gICAgICAgIHN0cmluZ0luZGV4T2YocmVwbGFjZVZhbHVlLCAnJDwnKSA9PT0gLTFcbiAgICAgICkge1xuICAgICAgICB2YXIgcmVzID0gbWF5YmVDYWxsTmF0aXZlKG5hdGl2ZVJlcGxhY2UsIHJ4LCBTLCByZXBsYWNlVmFsdWUpO1xuICAgICAgICBpZiAocmVzLmRvbmUpIHJldHVybiByZXMudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBmdW5jdGlvbmFsUmVwbGFjZSA9IGlzQ2FsbGFibGUocmVwbGFjZVZhbHVlKTtcbiAgICAgIGlmICghZnVuY3Rpb25hbFJlcGxhY2UpIHJlcGxhY2VWYWx1ZSA9IHRvU3RyaW5nKHJlcGxhY2VWYWx1ZSk7XG5cbiAgICAgIHZhciBnbG9iYWwgPSByeC5nbG9iYWw7XG4gICAgICBpZiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBmdWxsVW5pY29kZSA9IHJ4LnVuaWNvZGU7XG4gICAgICAgIHJ4Lmxhc3RJbmRleCA9IDA7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlZ0V4cEV4ZWMocngsIFMpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsKSBicmVhaztcblxuICAgICAgICBwdXNoKHJlc3VsdHMsIHJlc3VsdCk7XG4gICAgICAgIGlmICghZ2xvYmFsKSBicmVhaztcblxuICAgICAgICB2YXIgbWF0Y2hTdHIgPSB0b1N0cmluZyhyZXN1bHRbMF0pO1xuICAgICAgICBpZiAobWF0Y2hTdHIgPT09ICcnKSByeC5sYXN0SW5kZXggPSBhZHZhbmNlU3RyaW5nSW5kZXgoUywgdG9MZW5ndGgocngubGFzdEluZGV4KSwgZnVsbFVuaWNvZGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWNjdW11bGF0ZWRSZXN1bHQgPSAnJztcbiAgICAgIHZhciBuZXh0U291cmNlUG9zaXRpb24gPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdHNbaV07XG5cbiAgICAgICAgdmFyIG1hdGNoZWQgPSB0b1N0cmluZyhyZXN1bHRbMF0pO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBtYXgobWluKHRvSW50ZWdlck9ySW5maW5pdHkocmVzdWx0LmluZGV4KSwgUy5sZW5ndGgpLCAwKTtcbiAgICAgICAgdmFyIGNhcHR1cmVzID0gW107XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXF1aXZhbGVudCB0b1xuICAgICAgICAvLyAgIGNhcHR1cmVzID0gcmVzdWx0LnNsaWNlKDEpLm1hcChtYXliZVRvU3RyaW5nKVxuICAgICAgICAvLyBidXQgZm9yIHNvbWUgcmVhc29uIGBuYXRpdmVTbGljZS5jYWxsKHJlc3VsdCwgMSwgcmVzdWx0Lmxlbmd0aClgIChjYWxsZWQgaW5cbiAgICAgICAgLy8gdGhlIHNsaWNlIHBvbHlmaWxsIHdoZW4gc2xpY2luZyBuYXRpdmUgYXJyYXlzKSBcImRvZXNuJ3Qgd29ya1wiIGluIHNhZmFyaSA5IGFuZFxuICAgICAgICAvLyBjYXVzZXMgYSBjcmFzaCAoaHR0cHM6Ly9wYXN0ZWJpbi5jb20vTjIxUXplUUEpIHdoZW4gdHJ5aW5nIHRvIGRlYnVnIGl0LlxuICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IHJlc3VsdC5sZW5ndGg7IGorKykgcHVzaChjYXB0dXJlcywgbWF5YmVUb1N0cmluZyhyZXN1bHRbal0pKTtcbiAgICAgICAgdmFyIG5hbWVkQ2FwdHVyZXMgPSByZXN1bHQuZ3JvdXBzO1xuICAgICAgICBpZiAoZnVuY3Rpb25hbFJlcGxhY2UpIHtcbiAgICAgICAgICB2YXIgcmVwbGFjZXJBcmdzID0gY29uY2F0KFttYXRjaGVkXSwgY2FwdHVyZXMsIHBvc2l0aW9uLCBTKTtcbiAgICAgICAgICBpZiAobmFtZWRDYXB0dXJlcyAhPT0gdW5kZWZpbmVkKSBwdXNoKHJlcGxhY2VyQXJncywgbmFtZWRDYXB0dXJlcyk7XG4gICAgICAgICAgdmFyIHJlcGxhY2VtZW50ID0gdG9TdHJpbmcoYXBwbHkocmVwbGFjZVZhbHVlLCB1bmRlZmluZWQsIHJlcGxhY2VyQXJncykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcGxhY2VtZW50ID0gZ2V0U3Vic3RpdHV0aW9uKG1hdGNoZWQsIFMsIHBvc2l0aW9uLCBjYXB0dXJlcywgbmFtZWRDYXB0dXJlcywgcmVwbGFjZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zaXRpb24gPj0gbmV4dFNvdXJjZVBvc2l0aW9uKSB7XG4gICAgICAgICAgYWNjdW11bGF0ZWRSZXN1bHQgKz0gc3RyaW5nU2xpY2UoUywgbmV4dFNvdXJjZVBvc2l0aW9uLCBwb3NpdGlvbikgKyByZXBsYWNlbWVudDtcbiAgICAgICAgICBuZXh0U291cmNlUG9zaXRpb24gPSBwb3NpdGlvbiArIG1hdGNoZWQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjdW11bGF0ZWRSZXN1bHQgKyBzdHJpbmdTbGljZShTLCBuZXh0U291cmNlUG9zaXRpb24pO1xuICAgIH1cbiAgXTtcbn0sICFSRVBMQUNFX1NVUFBPUlRTX05BTUVEX0dST1VQUyB8fCAhUkVQTEFDRV9LRUVQU18kMCB8fCBSRUdFWFBfUkVQTEFDRV9TVUJTVElUVVRFU19VTkRFRklORURfQ0FQVFVSRSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgZml4UmVnRXhwV2VsbEtub3duU3ltYm9sTG9naWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZml4LXJlZ2V4cC13ZWxsLWtub3duLXN5bWJvbC1sb2dpYycpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGlzTnVsbE9yVW5kZWZpbmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW51bGwtb3ItdW5kZWZpbmVkJyk7XG52YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcbnZhciBzYW1lVmFsdWUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2FtZS12YWx1ZScpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIGdldE1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtbWV0aG9kJyk7XG52YXIgcmVnRXhwRXhlYyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZXhlYy1hYnN0cmFjdCcpO1xuXG4vLyBAQHNlYXJjaCBsb2dpY1xuZml4UmVnRXhwV2VsbEtub3duU3ltYm9sTG9naWMoJ3NlYXJjaCcsIGZ1bmN0aW9uIChTRUFSQ0gsIG5hdGl2ZVNlYXJjaCwgbWF5YmVDYWxsTmF0aXZlKSB7XG4gIHJldHVybiBbXG4gICAgLy8gYFN0cmluZy5wcm90b3R5cGUuc2VhcmNoYCBtZXRob2RcbiAgICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUuc2VhcmNoXG4gICAgZnVuY3Rpb24gc2VhcmNoKHJlZ2V4cCkge1xuICAgICAgdmFyIE8gPSByZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHRoaXMpO1xuICAgICAgdmFyIHNlYXJjaGVyID0gaXNOdWxsT3JVbmRlZmluZWQocmVnZXhwKSA/IHVuZGVmaW5lZCA6IGdldE1ldGhvZChyZWdleHAsIFNFQVJDSCk7XG4gICAgICByZXR1cm4gc2VhcmNoZXIgPyBjYWxsKHNlYXJjaGVyLCByZWdleHAsIE8pIDogbmV3IFJlZ0V4cChyZWdleHApW1NFQVJDSF0odG9TdHJpbmcoTykpO1xuICAgIH0sXG4gICAgLy8gYFJlZ0V4cC5wcm90b3R5cGVbQEBzZWFyY2hdYCBtZXRob2RcbiAgICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlZ2V4cC5wcm90b3R5cGUtQEBzZWFyY2hcbiAgICBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICB2YXIgcnggPSBhbk9iamVjdCh0aGlzKTtcbiAgICAgIHZhciBTID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHZhciByZXMgPSBtYXliZUNhbGxOYXRpdmUobmF0aXZlU2VhcmNoLCByeCwgUyk7XG5cbiAgICAgIGlmIChyZXMuZG9uZSkgcmV0dXJuIHJlcy52YWx1ZTtcblxuICAgICAgdmFyIHByZXZpb3VzTGFzdEluZGV4ID0gcngubGFzdEluZGV4O1xuICAgICAgaWYgKCFzYW1lVmFsdWUocHJldmlvdXNMYXN0SW5kZXgsIDApKSByeC5sYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIHJlc3VsdCA9IHJlZ0V4cEV4ZWMocngsIFMpO1xuICAgICAgaWYgKCFzYW1lVmFsdWUocngubGFzdEluZGV4LCBwcmV2aW91c0xhc3RJbmRleCkpIHJ4Lmxhc3RJbmRleCA9IHByZXZpb3VzTGFzdEluZGV4O1xuICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gbnVsbCA/IC0xIDogcmVzdWx0LmluZGV4O1xuICAgIH1cbiAgXTtcbn0pO1xuIiwiLypcbiAqICBDb3B5cmlnaHQgMjAxMSBUd2l0dGVyLCBJbmMuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4oZnVuY3Rpb24gKEhvZ2FuKSB7XG4gIC8vIFNldHVwIHJlZ2V4ICBhc3NpZ25tZW50c1xuICAvLyByZW1vdmUgd2hpdGVzcGFjZSBhY2NvcmRpbmcgdG8gTXVzdGFjaGUgc3BlY1xuICB2YXIgcklzV2hpdGVzcGFjZSA9IC9cXFMvLFxuICAgICAgclF1b3QgPSAvXFxcIi9nLFxuICAgICAgck5ld2xpbmUgPSAgL1xcbi9nLFxuICAgICAgckNyID0gL1xcci9nLFxuICAgICAgclNsYXNoID0gL1xcXFwvZyxcbiAgICAgIHJMaW5lU2VwID0gL1xcdTIwMjgvLFxuICAgICAgclBhcmFncmFwaFNlcCA9IC9cXHUyMDI5LztcblxuICBIb2dhbi50YWdzID0ge1xuICAgICcjJzogMSwgJ14nOiAyLCAnPCc6IDMsICckJzogNCxcbiAgICAnLyc6IDUsICchJzogNiwgJz4nOiA3LCAnPSc6IDgsICdfdic6IDksXG4gICAgJ3snOiAxMCwgJyYnOiAxMSwgJ190JzogMTJcbiAgfTtcblxuICBIb2dhbi5zY2FuID0gZnVuY3Rpb24gc2Nhbih0ZXh0LCBkZWxpbWl0ZXJzKSB7XG4gICAgdmFyIGxlbiA9IHRleHQubGVuZ3RoLFxuICAgICAgICBJTl9URVhUID0gMCxcbiAgICAgICAgSU5fVEFHX1RZUEUgPSAxLFxuICAgICAgICBJTl9UQUcgPSAyLFxuICAgICAgICBzdGF0ZSA9IElOX1RFWFQsXG4gICAgICAgIHRhZ1R5cGUgPSBudWxsLFxuICAgICAgICB0YWcgPSBudWxsLFxuICAgICAgICBidWYgPSAnJyxcbiAgICAgICAgdG9rZW5zID0gW10sXG4gICAgICAgIHNlZW5UYWcgPSBmYWxzZSxcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGxpbmVTdGFydCA9IDAsXG4gICAgICAgIG90YWcgPSAne3snLFxuICAgICAgICBjdGFnID0gJ319JztcblxuICAgIGZ1bmN0aW9uIGFkZEJ1ZigpIHtcbiAgICAgIGlmIChidWYubGVuZ3RoID4gMCkge1xuICAgICAgICB0b2tlbnMucHVzaCh7dGFnOiAnX3QnLCB0ZXh0OiBuZXcgU3RyaW5nKGJ1Zil9KTtcbiAgICAgICAgYnVmID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGluZUlzV2hpdGVzcGFjZSgpIHtcbiAgICAgIHZhciBpc0FsbFdoaXRlc3BhY2UgPSB0cnVlO1xuICAgICAgZm9yICh2YXIgaiA9IGxpbmVTdGFydDsgaiA8IHRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgICBpc0FsbFdoaXRlc3BhY2UgPVxuICAgICAgICAgIChIb2dhbi50YWdzW3Rva2Vuc1tqXS50YWddIDwgSG9nYW4udGFnc1snX3YnXSkgfHxcbiAgICAgICAgICAodG9rZW5zW2pdLnRhZyA9PSAnX3QnICYmIHRva2Vuc1tqXS50ZXh0Lm1hdGNoKHJJc1doaXRlc3BhY2UpID09PSBudWxsKTtcbiAgICAgICAgaWYgKCFpc0FsbFdoaXRlc3BhY2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzQWxsV2hpdGVzcGFjZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWx0ZXJMaW5lKGhhdmVTZWVuVGFnLCBub05ld0xpbmUpIHtcbiAgICAgIGFkZEJ1ZigpO1xuXG4gICAgICBpZiAoaGF2ZVNlZW5UYWcgJiYgbGluZUlzV2hpdGVzcGFjZSgpKSB7XG4gICAgICAgIGZvciAodmFyIGogPSBsaW5lU3RhcnQsIG5leHQ7IGogPCB0b2tlbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAodG9rZW5zW2pdLnRleHQpIHtcbiAgICAgICAgICAgIGlmICgobmV4dCA9IHRva2Vuc1tqKzFdKSAmJiBuZXh0LnRhZyA9PSAnPicpIHtcbiAgICAgICAgICAgICAgLy8gc2V0IGluZGVudCB0byB0b2tlbiB2YWx1ZVxuICAgICAgICAgICAgICBuZXh0LmluZGVudCA9IHRva2Vuc1tqXS50ZXh0LnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFub05ld0xpbmUpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe3RhZzonXFxuJ30pO1xuICAgICAgfVxuXG4gICAgICBzZWVuVGFnID0gZmFsc2U7XG4gICAgICBsaW5lU3RhcnQgPSB0b2tlbnMubGVuZ3RoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZURlbGltaXRlcnModGV4dCwgaW5kZXgpIHtcbiAgICAgIHZhciBjbG9zZSA9ICc9JyArIGN0YWcsXG4gICAgICAgICAgY2xvc2VJbmRleCA9IHRleHQuaW5kZXhPZihjbG9zZSwgaW5kZXgpLFxuICAgICAgICAgIGRlbGltaXRlcnMgPSB0cmltKFxuICAgICAgICAgICAgdGV4dC5zdWJzdHJpbmcodGV4dC5pbmRleE9mKCc9JywgaW5kZXgpICsgMSwgY2xvc2VJbmRleClcbiAgICAgICAgICApLnNwbGl0KCcgJyk7XG5cbiAgICAgIG90YWcgPSBkZWxpbWl0ZXJzWzBdO1xuICAgICAgY3RhZyA9IGRlbGltaXRlcnNbZGVsaW1pdGVycy5sZW5ndGggLSAxXTtcblxuICAgICAgcmV0dXJuIGNsb3NlSW5kZXggKyBjbG9zZS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChkZWxpbWl0ZXJzKSB7XG4gICAgICBkZWxpbWl0ZXJzID0gZGVsaW1pdGVycy5zcGxpdCgnICcpO1xuICAgICAgb3RhZyA9IGRlbGltaXRlcnNbMF07XG4gICAgICBjdGFnID0gZGVsaW1pdGVyc1sxXTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChzdGF0ZSA9PSBJTl9URVhUKSB7XG4gICAgICAgIGlmICh0YWdDaGFuZ2Uob3RhZywgdGV4dCwgaSkpIHtcbiAgICAgICAgICAtLWk7XG4gICAgICAgICAgYWRkQnVmKCk7XG4gICAgICAgICAgc3RhdGUgPSBJTl9UQUdfVFlQRTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGV4dC5jaGFyQXQoaSkgPT0gJ1xcbicpIHtcbiAgICAgICAgICAgIGZpbHRlckxpbmUoc2VlblRhZyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ1ZiArPSB0ZXh0LmNoYXJBdChpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gSU5fVEFHX1RZUEUpIHtcbiAgICAgICAgaSArPSBvdGFnLmxlbmd0aCAtIDE7XG4gICAgICAgIHRhZyA9IEhvZ2FuLnRhZ3NbdGV4dC5jaGFyQXQoaSArIDEpXTtcbiAgICAgICAgdGFnVHlwZSA9IHRhZyA/IHRleHQuY2hhckF0KGkgKyAxKSA6ICdfdic7XG4gICAgICAgIGlmICh0YWdUeXBlID09ICc9Jykge1xuICAgICAgICAgIGkgPSBjaGFuZ2VEZWxpbWl0ZXJzKHRleHQsIGkpO1xuICAgICAgICAgIHN0YXRlID0gSU5fVEVYVDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXRlID0gSU5fVEFHO1xuICAgICAgICB9XG4gICAgICAgIHNlZW5UYWcgPSBpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRhZ0NoYW5nZShjdGFnLCB0ZXh0LCBpKSkge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHt0YWc6IHRhZ1R5cGUsIG46IHRyaW0oYnVmKSwgb3RhZzogb3RhZywgY3RhZzogY3RhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgaTogKHRhZ1R5cGUgPT0gJy8nKSA/IHNlZW5UYWcgLSBvdGFnLmxlbmd0aCA6IGkgKyBjdGFnLmxlbmd0aH0pO1xuICAgICAgICAgIGJ1ZiA9ICcnO1xuICAgICAgICAgIGkgKz0gY3RhZy5sZW5ndGggLSAxO1xuICAgICAgICAgIHN0YXRlID0gSU5fVEVYVDtcbiAgICAgICAgICBpZiAodGFnVHlwZSA9PSAneycpIHtcbiAgICAgICAgICAgIGlmIChjdGFnID09ICd9fScpIHtcbiAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2xlYW5UcmlwbGVTdGFjaGUodG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZiArPSB0ZXh0LmNoYXJBdChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZpbHRlckxpbmUoc2VlblRhZywgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW5UcmlwbGVTdGFjaGUodG9rZW4pIHtcbiAgICBpZiAodG9rZW4ubi5zdWJzdHIodG9rZW4ubi5sZW5ndGggLSAxKSA9PT0gJ30nKSB7XG4gICAgICB0b2tlbi5uID0gdG9rZW4ubi5zdWJzdHJpbmcoMCwgdG9rZW4ubi5sZW5ndGggLSAxKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0cmltKHMpIHtcbiAgICBpZiAocy50cmltKSB7XG4gICAgICByZXR1cm4gcy50cmltKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHMucmVwbGFjZSgvXlxccyp8XFxzKiQvZywgJycpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGFnQ2hhbmdlKHRhZywgdGV4dCwgaW5kZXgpIHtcbiAgICBpZiAodGV4dC5jaGFyQXQoaW5kZXgpICE9IHRhZy5jaGFyQXQoMCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMSwgbCA9IHRhZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmICh0ZXh0LmNoYXJBdChpbmRleCArIGkpICE9IHRhZy5jaGFyQXQoaSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gdGhlIHRhZ3MgYWxsb3dlZCBpbnNpZGUgc3VwZXIgdGVtcGxhdGVzXG4gIHZhciBhbGxvd2VkSW5TdXBlciA9IHsnX3QnOiB0cnVlLCAnXFxuJzogdHJ1ZSwgJyQnOiB0cnVlLCAnLyc6IHRydWV9O1xuXG4gIGZ1bmN0aW9uIGJ1aWxkVHJlZSh0b2tlbnMsIGtpbmQsIHN0YWNrLCBjdXN0b21UYWdzKSB7XG4gICAgdmFyIGluc3RydWN0aW9ucyA9IFtdLFxuICAgICAgICBvcGVuZXIgPSBudWxsLFxuICAgICAgICB0YWlsID0gbnVsbCxcbiAgICAgICAgdG9rZW4gPSBudWxsO1xuXG4gICAgdGFpbCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuXG4gICAgd2hpbGUgKHRva2Vucy5sZW5ndGggPiAwKSB7XG4gICAgICB0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXG4gICAgICBpZiAodGFpbCAmJiB0YWlsLnRhZyA9PSAnPCcgJiYgISh0b2tlbi50YWcgaW4gYWxsb3dlZEluU3VwZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSWxsZWdhbCBjb250ZW50IGluIDwgc3VwZXIgdGFnLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoSG9nYW4udGFnc1t0b2tlbi50YWddIDw9IEhvZ2FuLnRhZ3NbJyQnXSB8fCBpc09wZW5lcih0b2tlbiwgY3VzdG9tVGFncykpIHtcbiAgICAgICAgc3RhY2sucHVzaCh0b2tlbik7XG4gICAgICAgIHRva2VuLm5vZGVzID0gYnVpbGRUcmVlKHRva2VucywgdG9rZW4udGFnLCBzdGFjaywgY3VzdG9tVGFncyk7XG4gICAgICB9IGVsc2UgaWYgKHRva2VuLnRhZyA9PSAnLycpIHtcbiAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvc2luZyB0YWcgd2l0aG91dCBvcGVuZXI6IC8nICsgdG9rZW4ubik7XG4gICAgICAgIH1cbiAgICAgICAgb3BlbmVyID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGlmICh0b2tlbi5uICE9IG9wZW5lci5uICYmICFpc0Nsb3Nlcih0b2tlbi5uLCBvcGVuZXIubiwgY3VzdG9tVGFncykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05lc3RpbmcgZXJyb3I6ICcgKyBvcGVuZXIubiArICcgdnMuICcgKyB0b2tlbi5uKTtcbiAgICAgICAgfVxuICAgICAgICBvcGVuZXIuZW5kID0gdG9rZW4uaTtcbiAgICAgICAgcmV0dXJuIGluc3RydWN0aW9ucztcbiAgICAgIH0gZWxzZSBpZiAodG9rZW4udGFnID09ICdcXG4nKSB7XG4gICAgICAgIHRva2VuLmxhc3QgPSAodG9rZW5zLmxlbmd0aCA9PSAwKSB8fCAodG9rZW5zWzBdLnRhZyA9PSAnXFxuJyk7XG4gICAgICB9XG5cbiAgICAgIGluc3RydWN0aW9ucy5wdXNoKHRva2VuKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIGNsb3NpbmcgdGFnOiAnICsgc3RhY2sucG9wKCkubik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc3RydWN0aW9ucztcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzT3BlbmVyKHRva2VuLCB0YWdzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0YWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKHRhZ3NbaV0ubyA9PSB0b2tlbi5uKSB7XG4gICAgICAgIHRva2VuLnRhZyA9ICcjJztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDbG9zZXIoY2xvc2UsIG9wZW4sIHRhZ3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAodGFnc1tpXS5jID09IGNsb3NlICYmIHRhZ3NbaV0ubyA9PSBvcGVuKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0cmluZ2lmeVN1YnN0aXR1dGlvbnMob2JqKSB7XG4gICAgdmFyIGl0ZW1zID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaXRlbXMucHVzaCgnXCInICsgZXNjKGtleSkgKyAnXCI6IGZ1bmN0aW9uKGMscCx0LGkpIHsnICsgb2JqW2tleV0gKyAnfScpO1xuICAgIH1cbiAgICByZXR1cm4gXCJ7IFwiICsgaXRlbXMuam9pbihcIixcIikgKyBcIiB9XCI7XG4gIH1cblxuICBmdW5jdGlvbiBzdHJpbmdpZnlQYXJ0aWFscyhjb2RlT2JqKSB7XG4gICAgdmFyIHBhcnRpYWxzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGNvZGVPYmoucGFydGlhbHMpIHtcbiAgICAgIHBhcnRpYWxzLnB1c2goJ1wiJyArIGVzYyhrZXkpICsgJ1wiOntuYW1lOlwiJyArIGVzYyhjb2RlT2JqLnBhcnRpYWxzW2tleV0ubmFtZSkgKyAnXCIsICcgKyBzdHJpbmdpZnlQYXJ0aWFscyhjb2RlT2JqLnBhcnRpYWxzW2tleV0pICsgXCJ9XCIpO1xuICAgIH1cbiAgICByZXR1cm4gXCJwYXJ0aWFsczoge1wiICsgcGFydGlhbHMuam9pbihcIixcIikgKyBcIn0sIHN1YnM6IFwiICsgc3RyaW5naWZ5U3Vic3RpdHV0aW9ucyhjb2RlT2JqLnN1YnMpO1xuICB9XG5cbiAgSG9nYW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24oY29kZU9iaiwgdGV4dCwgb3B0aW9ucykge1xuICAgIHJldHVybiBcIntjb2RlOiBmdW5jdGlvbiAoYyxwLGkpIHsgXCIgKyBIb2dhbi53cmFwTWFpbihjb2RlT2JqLmNvZGUpICsgXCIgfSxcIiArIHN0cmluZ2lmeVBhcnRpYWxzKGNvZGVPYmopICsgIFwifVwiO1xuICB9XG5cbiAgdmFyIHNlcmlhbE5vID0gMDtcbiAgSG9nYW4uZ2VuZXJhdGUgPSBmdW5jdGlvbih0cmVlLCB0ZXh0LCBvcHRpb25zKSB7XG4gICAgc2VyaWFsTm8gPSAwO1xuICAgIHZhciBjb250ZXh0ID0geyBjb2RlOiAnJywgc3Viczoge30sIHBhcnRpYWxzOiB7fSB9O1xuICAgIEhvZ2FuLndhbGsodHJlZSwgY29udGV4dCk7XG5cbiAgICBpZiAob3B0aW9ucy5hc1N0cmluZykge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5naWZ5KGNvbnRleHQsIHRleHQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm1ha2VUZW1wbGF0ZShjb250ZXh0LCB0ZXh0LCBvcHRpb25zKTtcbiAgfVxuXG4gIEhvZ2FuLndyYXBNYWluID0gZnVuY3Rpb24oY29kZSkge1xuICAgIHJldHVybiAndmFyIHQ9dGhpczt0LmIoaT1pfHxcIlwiKTsnICsgY29kZSArICdyZXR1cm4gdC5mbCgpOyc7XG4gIH1cblxuICBIb2dhbi50ZW1wbGF0ZSA9IEhvZ2FuLlRlbXBsYXRlO1xuXG4gIEhvZ2FuLm1ha2VUZW1wbGF0ZSA9IGZ1bmN0aW9uKGNvZGVPYmosIHRleHQsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm1ha2VQYXJ0aWFscyhjb2RlT2JqKTtcbiAgICB0ZW1wbGF0ZS5jb2RlID0gbmV3IEZ1bmN0aW9uKCdjJywgJ3AnLCAnaScsIHRoaXMud3JhcE1haW4oY29kZU9iai5jb2RlKSk7XG4gICAgcmV0dXJuIG5ldyB0aGlzLnRlbXBsYXRlKHRlbXBsYXRlLCB0ZXh0LCB0aGlzLCBvcHRpb25zKTtcbiAgfVxuXG4gIEhvZ2FuLm1ha2VQYXJ0aWFscyA9IGZ1bmN0aW9uKGNvZGVPYmopIHtcbiAgICB2YXIga2V5LCB0ZW1wbGF0ZSA9IHtzdWJzOiB7fSwgcGFydGlhbHM6IGNvZGVPYmoucGFydGlhbHMsIG5hbWU6IGNvZGVPYmoubmFtZX07XG4gICAgZm9yIChrZXkgaW4gdGVtcGxhdGUucGFydGlhbHMpIHtcbiAgICAgIHRlbXBsYXRlLnBhcnRpYWxzW2tleV0gPSB0aGlzLm1ha2VQYXJ0aWFscyh0ZW1wbGF0ZS5wYXJ0aWFsc1trZXldKTtcbiAgICB9XG4gICAgZm9yIChrZXkgaW4gY29kZU9iai5zdWJzKSB7XG4gICAgICB0ZW1wbGF0ZS5zdWJzW2tleV0gPSBuZXcgRnVuY3Rpb24oJ2MnLCAncCcsICd0JywgJ2knLCBjb2RlT2JqLnN1YnNba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVzYyhzKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZShyU2xhc2gsICdcXFxcXFxcXCcpXG4gICAgICAgICAgICAucmVwbGFjZShyUXVvdCwgJ1xcXFxcXFwiJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHJOZXdsaW5lLCAnXFxcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2UockNyLCAnXFxcXHInKVxuICAgICAgICAgICAgLnJlcGxhY2UockxpbmVTZXAsICdcXFxcdTIwMjgnKVxuICAgICAgICAgICAgLnJlcGxhY2UoclBhcmFncmFwaFNlcCwgJ1xcXFx1MjAyOScpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hvb3NlTWV0aG9kKHMpIHtcbiAgICByZXR1cm4gKH5zLmluZGV4T2YoJy4nKSkgPyAnZCcgOiAnZic7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQYXJ0aWFsKG5vZGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcHJlZml4ID0gXCI8XCIgKyAoY29udGV4dC5wcmVmaXggfHwgXCJcIik7XG4gICAgdmFyIHN5bSA9IHByZWZpeCArIG5vZGUubiArIHNlcmlhbE5vKys7XG4gICAgY29udGV4dC5wYXJ0aWFsc1tzeW1dID0ge25hbWU6IG5vZGUubiwgcGFydGlhbHM6IHt9fTtcbiAgICBjb250ZXh0LmNvZGUgKz0gJ3QuYih0LnJwKFwiJyArICBlc2Moc3ltKSArICdcIixjLHAsXCInICsgKG5vZGUuaW5kZW50IHx8ICcnKSArICdcIikpOyc7XG4gICAgcmV0dXJuIHN5bTtcbiAgfVxuXG4gIEhvZ2FuLmNvZGVnZW4gPSB7XG4gICAgJyMnOiBmdW5jdGlvbihub2RlLCBjb250ZXh0KSB7XG4gICAgICBjb250ZXh0LmNvZGUgKz0gJ2lmKHQucyh0LicgKyBjaG9vc2VNZXRob2Qobm9kZS5uKSArICcoXCInICsgZXNjKG5vZGUubikgKyAnXCIsYyxwLDEpLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICdjLHAsMCwnICsgbm9kZS5pICsgJywnICsgbm9kZS5lbmQgKyAnLFwiJyArIG5vZGUub3RhZyArIFwiIFwiICsgbm9kZS5jdGFnICsgJ1wiKSl7JyArXG4gICAgICAgICAgICAgICAgICAgICAgJ3QucnMoYyxwLCcgKyAnZnVuY3Rpb24oYyxwLHQpeyc7XG4gICAgICBIb2dhbi53YWxrKG5vZGUubm9kZXMsIGNvbnRleHQpO1xuICAgICAgY29udGV4dC5jb2RlICs9ICd9KTtjLnBvcCgpO30nO1xuICAgIH0sXG5cbiAgICAnXic6IGZ1bmN0aW9uKG5vZGUsIGNvbnRleHQpIHtcbiAgICAgIGNvbnRleHQuY29kZSArPSAnaWYoIXQucyh0LicgKyBjaG9vc2VNZXRob2Qobm9kZS5uKSArICcoXCInICsgZXNjKG5vZGUubikgKyAnXCIsYyxwLDEpLGMscCwxLDAsMCxcIlwiKSl7JztcbiAgICAgIEhvZ2FuLndhbGsobm9kZS5ub2RlcywgY29udGV4dCk7XG4gICAgICBjb250ZXh0LmNvZGUgKz0gJ307JztcbiAgICB9LFxuXG4gICAgJz4nOiBjcmVhdGVQYXJ0aWFsLFxuICAgICc8JzogZnVuY3Rpb24obm9kZSwgY29udGV4dCkge1xuICAgICAgdmFyIGN0eCA9IHtwYXJ0aWFsczoge30sIGNvZGU6ICcnLCBzdWJzOiB7fSwgaW5QYXJ0aWFsOiB0cnVlfTtcbiAgICAgIEhvZ2FuLndhbGsobm9kZS5ub2RlcywgY3R4KTtcbiAgICAgIHZhciB0ZW1wbGF0ZSA9IGNvbnRleHQucGFydGlhbHNbY3JlYXRlUGFydGlhbChub2RlLCBjb250ZXh0KV07XG4gICAgICB0ZW1wbGF0ZS5zdWJzID0gY3R4LnN1YnM7XG4gICAgICB0ZW1wbGF0ZS5wYXJ0aWFscyA9IGN0eC5wYXJ0aWFscztcbiAgICB9LFxuXG4gICAgJyQnOiBmdW5jdGlvbihub2RlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgY3R4ID0ge3N1YnM6IHt9LCBjb2RlOiAnJywgcGFydGlhbHM6IGNvbnRleHQucGFydGlhbHMsIHByZWZpeDogbm9kZS5ufTtcbiAgICAgIEhvZ2FuLndhbGsobm9kZS5ub2RlcywgY3R4KTtcbiAgICAgIGNvbnRleHQuc3Vic1tub2RlLm5dID0gY3R4LmNvZGU7XG4gICAgICBpZiAoIWNvbnRleHQuaW5QYXJ0aWFsKSB7XG4gICAgICAgIGNvbnRleHQuY29kZSArPSAndC5zdWIoXCInICsgZXNjKG5vZGUubikgKyAnXCIsYyxwLGkpOyc7XG4gICAgICB9XG4gICAgfSxcblxuICAgICdcXG4nOiBmdW5jdGlvbihub2RlLCBjb250ZXh0KSB7XG4gICAgICBjb250ZXh0LmNvZGUgKz0gd3JpdGUoJ1wiXFxcXG5cIicgKyAobm9kZS5sYXN0ID8gJycgOiAnICsgaScpKTtcbiAgICB9LFxuXG4gICAgJ192JzogZnVuY3Rpb24obm9kZSwgY29udGV4dCkge1xuICAgICAgY29udGV4dC5jb2RlICs9ICd0LmIodC52KHQuJyArIGNob29zZU1ldGhvZChub2RlLm4pICsgJyhcIicgKyBlc2Mobm9kZS5uKSArICdcIixjLHAsMCkpKTsnO1xuICAgIH0sXG5cbiAgICAnX3QnOiBmdW5jdGlvbihub2RlLCBjb250ZXh0KSB7XG4gICAgICBjb250ZXh0LmNvZGUgKz0gd3JpdGUoJ1wiJyArIGVzYyhub2RlLnRleHQpICsgJ1wiJyk7XG4gICAgfSxcblxuICAgICd7JzogdHJpcGxlU3RhY2hlLFxuXG4gICAgJyYnOiB0cmlwbGVTdGFjaGVcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaXBsZVN0YWNoZShub2RlLCBjb250ZXh0KSB7XG4gICAgY29udGV4dC5jb2RlICs9ICd0LmIodC50KHQuJyArIGNob29zZU1ldGhvZChub2RlLm4pICsgJyhcIicgKyBlc2Mobm9kZS5uKSArICdcIixjLHAsMCkpKTsnO1xuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGUocykge1xuICAgIHJldHVybiAndC5iKCcgKyBzICsgJyk7JztcbiAgfVxuXG4gIEhvZ2FuLndhbGsgPSBmdW5jdGlvbihub2RlbGlzdCwgY29udGV4dCkge1xuICAgIHZhciBmdW5jO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZWxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmdW5jID0gSG9nYW4uY29kZWdlbltub2RlbGlzdFtpXS50YWddO1xuICAgICAgZnVuYyAmJiBmdW5jKG5vZGVsaXN0W2ldLCBjb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICBIb2dhbi5wYXJzZSA9IGZ1bmN0aW9uKHRva2VucywgdGV4dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiBidWlsZFRyZWUodG9rZW5zLCAnJywgW10sIG9wdGlvbnMuc2VjdGlvblRhZ3MgfHwgW10pO1xuICB9XG5cbiAgSG9nYW4uY2FjaGUgPSB7fTtcblxuICBIb2dhbi5jYWNoZUtleSA9IGZ1bmN0aW9uKHRleHQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gW3RleHQsICEhb3B0aW9ucy5hc1N0cmluZywgISFvcHRpb25zLmRpc2FibGVMYW1iZGEsIG9wdGlvbnMuZGVsaW1pdGVycywgISFvcHRpb25zLm1vZGVsR2V0XS5qb2luKCd8fCcpO1xuICB9XG5cbiAgSG9nYW4uY29tcGlsZSA9IGZ1bmN0aW9uKHRleHQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIga2V5ID0gSG9nYW4uY2FjaGVLZXkodGV4dCwgb3B0aW9ucyk7XG4gICAgdmFyIHRlbXBsYXRlID0gdGhpcy5jYWNoZVtrZXldO1xuXG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICB2YXIgcGFydGlhbHMgPSB0ZW1wbGF0ZS5wYXJ0aWFscztcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gcGFydGlhbHMpIHtcbiAgICAgICAgZGVsZXRlIHBhcnRpYWxzW25hbWVdLmluc3RhbmNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cblxuICAgIHRlbXBsYXRlID0gdGhpcy5nZW5lcmF0ZSh0aGlzLnBhcnNlKHRoaXMuc2Nhbih0ZXh0LCBvcHRpb25zLmRlbGltaXRlcnMpLCB0ZXh0LCBvcHRpb25zKSwgdGV4dCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVba2V5XSA9IHRlbXBsYXRlO1xuICB9XG59KSh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgPyBleHBvcnRzIDogSG9nYW4pO1xuIiwiLypcbiAqICBDb3B5cmlnaHQgMjAxMSBUd2l0dGVyLCBJbmMuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBUaGlzIGZpbGUgaXMgZm9yIHVzZSB3aXRoIE5vZGUuanMuIFNlZSBkaXN0LyBmb3IgYnJvd3NlciBmaWxlcy5cblxudmFyIEhvZ2FuID0gcmVxdWlyZSgnLi9jb21waWxlcicpO1xuSG9nYW4uVGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlJykuVGVtcGxhdGU7XG5Ib2dhbi50ZW1wbGF0ZSA9IEhvZ2FuLlRlbXBsYXRlO1xubW9kdWxlLmV4cG9ydHMgPSBIb2dhbjtcbiIsIi8qXG4gKiAgQ29weXJpZ2h0IDIwMTEgVHdpdHRlciwgSW5jLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxudmFyIEhvZ2FuID0ge307XG5cbihmdW5jdGlvbiAoSG9nYW4pIHtcbiAgSG9nYW4uVGVtcGxhdGUgPSBmdW5jdGlvbiAoY29kZU9iaiwgdGV4dCwgY29tcGlsZXIsIG9wdGlvbnMpIHtcbiAgICBjb2RlT2JqID0gY29kZU9iaiB8fCB7fTtcbiAgICB0aGlzLnIgPSBjb2RlT2JqLmNvZGUgfHwgdGhpcy5yO1xuICAgIHRoaXMuYyA9IGNvbXBpbGVyO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy50ZXh0ID0gdGV4dCB8fCAnJztcbiAgICB0aGlzLnBhcnRpYWxzID0gY29kZU9iai5wYXJ0aWFscyB8fCB7fTtcbiAgICB0aGlzLnN1YnMgPSBjb2RlT2JqLnN1YnMgfHwge307XG4gICAgdGhpcy5idWYgPSAnJztcbiAgfVxuXG4gIEhvZ2FuLlRlbXBsYXRlLnByb3RvdHlwZSA9IHtcbiAgICAvLyByZW5kZXI6IHJlcGxhY2VkIGJ5IGdlbmVyYXRlZCBjb2RlLlxuICAgIHI6IGZ1bmN0aW9uIChjb250ZXh0LCBwYXJ0aWFscywgaW5kZW50KSB7IHJldHVybiAnJzsgfSxcblxuICAgIC8vIHZhcmlhYmxlIGVzY2FwaW5nXG4gICAgdjogaG9nYW5Fc2NhcGUsXG5cbiAgICAvLyB0cmlwbGUgc3RhY2hlXG4gICAgdDogY29lcmNlVG9TdHJpbmcsXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihjb250ZXh0LCBwYXJ0aWFscywgaW5kZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5yaShbY29udGV4dF0sIHBhcnRpYWxzIHx8IHt9LCBpbmRlbnQpO1xuICAgIH0sXG5cbiAgICAvLyByZW5kZXIgaW50ZXJuYWwgLS0gYSBob29rIGZvciBvdmVycmlkZXMgdGhhdCBjYXRjaGVzIHBhcnRpYWxzIHRvb1xuICAgIHJpOiBmdW5jdGlvbiAoY29udGV4dCwgcGFydGlhbHMsIGluZGVudCkge1xuICAgICAgcmV0dXJuIHRoaXMucihjb250ZXh0LCBwYXJ0aWFscywgaW5kZW50KTtcbiAgICB9LFxuXG4gICAgLy8gZW5zdXJlUGFydGlhbFxuICAgIGVwOiBmdW5jdGlvbihzeW1ib2wsIHBhcnRpYWxzKSB7XG4gICAgICB2YXIgcGFydGlhbCA9IHRoaXMucGFydGlhbHNbc3ltYm9sXTtcblxuICAgICAgLy8gY2hlY2sgdG8gc2VlIHRoYXQgaWYgd2UndmUgaW5zdGFudGlhdGVkIHRoaXMgcGFydGlhbCBiZWZvcmVcbiAgICAgIHZhciB0ZW1wbGF0ZSA9IHBhcnRpYWxzW3BhcnRpYWwubmFtZV07XG4gICAgICBpZiAocGFydGlhbC5pbnN0YW5jZSAmJiBwYXJ0aWFsLmJhc2UgPT0gdGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhcnRpYWwuaW5zdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCF0aGlzLmMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21waWxlciBhdmFpbGFibGUuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRlbXBsYXRlID0gdGhpcy5jLmNvbXBpbGUodGVtcGxhdGUsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIHVzZSB0aGlzIHRvIGNoZWNrIHdoZXRoZXIgdGhlIHBhcnRpYWxzIGRpY3Rpb25hcnkgaGFzIGNoYW5nZWRcbiAgICAgIHRoaXMucGFydGlhbHNbc3ltYm9sXS5iYXNlID0gdGVtcGxhdGU7XG5cbiAgICAgIGlmIChwYXJ0aWFsLnN1YnMpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGNvbnNpZGVyIHBhcmVudCB0ZW1wbGF0ZSBub3dcbiAgICAgICAgaWYgKCFwYXJ0aWFscy5zdGFja1RleHQpIHBhcnRpYWxzLnN0YWNrVGV4dCA9IHt9O1xuICAgICAgICBmb3IgKGtleSBpbiBwYXJ0aWFsLnN1YnMpIHtcbiAgICAgICAgICBpZiAoIXBhcnRpYWxzLnN0YWNrVGV4dFtrZXldKSB7XG4gICAgICAgICAgICBwYXJ0aWFscy5zdGFja1RleHRba2V5XSA9ICh0aGlzLmFjdGl2ZVN1YiAhPT0gdW5kZWZpbmVkICYmIHBhcnRpYWxzLnN0YWNrVGV4dFt0aGlzLmFjdGl2ZVN1Yl0pID8gcGFydGlhbHMuc3RhY2tUZXh0W3RoaXMuYWN0aXZlU3ViXSA6IHRoaXMudGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGUgPSBjcmVhdGVTcGVjaWFsaXplZFBhcnRpYWwodGVtcGxhdGUsIHBhcnRpYWwuc3VicywgcGFydGlhbC5wYXJ0aWFscyxcbiAgICAgICAgICB0aGlzLnN0YWNrU3VicywgdGhpcy5zdGFja1BhcnRpYWxzLCBwYXJ0aWFscy5zdGFja1RleHQpO1xuICAgICAgfVxuICAgICAgdGhpcy5wYXJ0aWFsc1tzeW1ib2xdLmluc3RhbmNlID0gdGVtcGxhdGU7XG5cbiAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9LFxuXG4gICAgLy8gdHJpZXMgdG8gZmluZCBhIHBhcnRpYWwgaW4gdGhlIGN1cnJlbnQgc2NvcGUgYW5kIHJlbmRlciBpdFxuICAgIHJwOiBmdW5jdGlvbihzeW1ib2wsIGNvbnRleHQsIHBhcnRpYWxzLCBpbmRlbnQpIHtcbiAgICAgIHZhciBwYXJ0aWFsID0gdGhpcy5lcChzeW1ib2wsIHBhcnRpYWxzKTtcbiAgICAgIGlmICghcGFydGlhbCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJ0aWFsLnJpKGNvbnRleHQsIHBhcnRpYWxzLCBpbmRlbnQpO1xuICAgIH0sXG5cbiAgICAvLyByZW5kZXIgYSBzZWN0aW9uXG4gICAgcnM6IGZ1bmN0aW9uKGNvbnRleHQsIHBhcnRpYWxzLCBzZWN0aW9uKSB7XG4gICAgICB2YXIgdGFpbCA9IGNvbnRleHRbY29udGV4dC5sZW5ndGggLSAxXTtcblxuICAgICAgaWYgKCFpc0FycmF5KHRhaWwpKSB7XG4gICAgICAgIHNlY3Rpb24oY29udGV4dCwgcGFydGlhbHMsIHRoaXMpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFpbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb250ZXh0LnB1c2godGFpbFtpXSk7XG4gICAgICAgIHNlY3Rpb24oY29udGV4dCwgcGFydGlhbHMsIHRoaXMpO1xuICAgICAgICBjb250ZXh0LnBvcCgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBtYXliZSBzdGFydCBhIHNlY3Rpb25cbiAgICBzOiBmdW5jdGlvbih2YWwsIGN0eCwgcGFydGlhbHMsIGludmVydGVkLCBzdGFydCwgZW5kLCB0YWdzKSB7XG4gICAgICB2YXIgcGFzcztcblxuICAgICAgaWYgKGlzQXJyYXkodmFsKSAmJiB2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB2YWwgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YWwgPSB0aGlzLm1zKHZhbCwgY3R4LCBwYXJ0aWFscywgaW52ZXJ0ZWQsIHN0YXJ0LCBlbmQsIHRhZ3MpO1xuICAgICAgfVxuXG4gICAgICBwYXNzID0gISF2YWw7XG5cbiAgICAgIGlmICghaW52ZXJ0ZWQgJiYgcGFzcyAmJiBjdHgpIHtcbiAgICAgICAgY3R4LnB1c2goKHR5cGVvZiB2YWwgPT0gJ29iamVjdCcpID8gdmFsIDogY3R4W2N0eC5sZW5ndGggLSAxXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXNzO1xuICAgIH0sXG5cbiAgICAvLyBmaW5kIHZhbHVlcyB3aXRoIGRvdHRlZCBuYW1lc1xuICAgIGQ6IGZ1bmN0aW9uKGtleSwgY3R4LCBwYXJ0aWFscywgcmV0dXJuRm91bmQpIHtcbiAgICAgIHZhciBmb3VuZCxcbiAgICAgICAgICBuYW1lcyA9IGtleS5zcGxpdCgnLicpLFxuICAgICAgICAgIHZhbCA9IHRoaXMuZihuYW1lc1swXSwgY3R4LCBwYXJ0aWFscywgcmV0dXJuRm91bmQpLFxuICAgICAgICAgIGRvTW9kZWxHZXQgPSB0aGlzLm9wdGlvbnMubW9kZWxHZXQsXG4gICAgICAgICAgY3ggPSBudWxsO1xuXG4gICAgICBpZiAoa2V5ID09PSAnLicgJiYgaXNBcnJheShjdHhbY3R4Lmxlbmd0aCAtIDJdKSkge1xuICAgICAgICB2YWwgPSBjdHhbY3R4Lmxlbmd0aCAtIDFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGZvdW5kID0gZmluZEluU2NvcGUobmFtZXNbaV0sIHZhbCwgZG9Nb2RlbEdldCk7XG4gICAgICAgICAgaWYgKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN4ID0gdmFsO1xuICAgICAgICAgICAgdmFsID0gZm91bmQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbCA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocmV0dXJuRm91bmQgJiYgIXZhbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmV0dXJuRm91bmQgJiYgdHlwZW9mIHZhbCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGN0eC5wdXNoKGN4KTtcbiAgICAgICAgdmFsID0gdGhpcy5tdih2YWwsIGN0eCwgcGFydGlhbHMpO1xuICAgICAgICBjdHgucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIC8vIGZpbmQgdmFsdWVzIHdpdGggbm9ybWFsIG5hbWVzXG4gICAgZjogZnVuY3Rpb24oa2V5LCBjdHgsIHBhcnRpYWxzLCByZXR1cm5Gb3VuZCkge1xuICAgICAgdmFyIHZhbCA9IGZhbHNlLFxuICAgICAgICAgIHYgPSBudWxsLFxuICAgICAgICAgIGZvdW5kID0gZmFsc2UsXG4gICAgICAgICAgZG9Nb2RlbEdldCA9IHRoaXMub3B0aW9ucy5tb2RlbEdldDtcblxuICAgICAgZm9yICh2YXIgaSA9IGN0eC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2ID0gY3R4W2ldO1xuICAgICAgICB2YWwgPSBmaW5kSW5TY29wZShrZXksIHYsIGRvTW9kZWxHZXQpO1xuICAgICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICByZXR1cm4gKHJldHVybkZvdW5kKSA/IGZhbHNlIDogXCJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXR1cm5Gb3VuZCAmJiB0eXBlb2YgdmFsID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsID0gdGhpcy5tdih2YWwsIGN0eCwgcGFydGlhbHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICAvLyBoaWdoZXIgb3JkZXIgdGVtcGxhdGVzXG4gICAgbHM6IGZ1bmN0aW9uKGZ1bmMsIGN4LCBwYXJ0aWFscywgdGV4dCwgdGFncykge1xuICAgICAgdmFyIG9sZFRhZ3MgPSB0aGlzLm9wdGlvbnMuZGVsaW1pdGVycztcblxuICAgICAgdGhpcy5vcHRpb25zLmRlbGltaXRlcnMgPSB0YWdzO1xuICAgICAgdGhpcy5iKHRoaXMuY3QoY29lcmNlVG9TdHJpbmcoZnVuYy5jYWxsKGN4LCB0ZXh0KSksIGN4LCBwYXJ0aWFscykpO1xuICAgICAgdGhpcy5vcHRpb25zLmRlbGltaXRlcnMgPSBvbGRUYWdzO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIGNvbXBpbGUgdGV4dFxuICAgIGN0OiBmdW5jdGlvbih0ZXh0LCBjeCwgcGFydGlhbHMpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZUxhbWJkYSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xhbWJkYSBmZWF0dXJlcyBkaXNhYmxlZC4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmMuY29tcGlsZSh0ZXh0LCB0aGlzLm9wdGlvbnMpLnJlbmRlcihjeCwgcGFydGlhbHMpO1xuICAgIH0sXG5cbiAgICAvLyB0ZW1wbGF0ZSByZXN1bHQgYnVmZmVyaW5nXG4gICAgYjogZnVuY3Rpb24ocykgeyB0aGlzLmJ1ZiArPSBzOyB9LFxuXG4gICAgZmw6IGZ1bmN0aW9uKCkgeyB2YXIgciA9IHRoaXMuYnVmOyB0aGlzLmJ1ZiA9ICcnOyByZXR1cm4gcjsgfSxcblxuICAgIC8vIG1ldGhvZCByZXBsYWNlIHNlY3Rpb25cbiAgICBtczogZnVuY3Rpb24oZnVuYywgY3R4LCBwYXJ0aWFscywgaW52ZXJ0ZWQsIHN0YXJ0LCBlbmQsIHRhZ3MpIHtcbiAgICAgIHZhciB0ZXh0U291cmNlLFxuICAgICAgICAgIGN4ID0gY3R4W2N0eC5sZW5ndGggLSAxXSxcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmNhbGwoY3gpO1xuXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmIChpbnZlcnRlZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRleHRTb3VyY2UgPSAodGhpcy5hY3RpdmVTdWIgJiYgdGhpcy5zdWJzVGV4dCAmJiB0aGlzLnN1YnNUZXh0W3RoaXMuYWN0aXZlU3ViXSkgPyB0aGlzLnN1YnNUZXh0W3RoaXMuYWN0aXZlU3ViXSA6IHRoaXMudGV4dDtcbiAgICAgICAgICByZXR1cm4gdGhpcy5scyhyZXN1bHQsIGN4LCBwYXJ0aWFscywgdGV4dFNvdXJjZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCksIHRhZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIC8vIG1ldGhvZCByZXBsYWNlIHZhcmlhYmxlXG4gICAgbXY6IGZ1bmN0aW9uKGZ1bmMsIGN0eCwgcGFydGlhbHMpIHtcbiAgICAgIHZhciBjeCA9IGN0eFtjdHgubGVuZ3RoIC0gMV07XG4gICAgICB2YXIgcmVzdWx0ID0gZnVuYy5jYWxsKGN4KTtcblxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdGhpcy5jdChjb2VyY2VUb1N0cmluZyhyZXN1bHQuY2FsbChjeCkpLCBjeCwgcGFydGlhbHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBzdWI6IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQsIHBhcnRpYWxzLCBpbmRlbnQpIHtcbiAgICAgIHZhciBmID0gdGhpcy5zdWJzW25hbWVdO1xuICAgICAgaWYgKGYpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVTdWIgPSBuYW1lO1xuICAgICAgICBmKGNvbnRleHQsIHBhcnRpYWxzLCB0aGlzLCBpbmRlbnQpO1xuICAgICAgICB0aGlzLmFjdGl2ZVN1YiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICB9O1xuXG4gIC8vRmluZCBhIGtleSBpbiBhbiBvYmplY3RcbiAgZnVuY3Rpb24gZmluZEluU2NvcGUoa2V5LCBzY29wZSwgZG9Nb2RlbEdldCkge1xuICAgIHZhciB2YWw7XG5cbiAgICBpZiAoc2NvcGUgJiYgdHlwZW9mIHNjb3BlID09ICdvYmplY3QnKSB7XG5cbiAgICAgIGlmIChzY29wZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsID0gc2NvcGVba2V5XTtcblxuICAgICAgLy8gdHJ5IGxvb2t1cCB3aXRoIGdldCBmb3IgYmFja2JvbmUgb3Igc2ltaWxhciBtb2RlbCBkYXRhXG4gICAgICB9IGVsc2UgaWYgKGRvTW9kZWxHZXQgJiYgc2NvcGUuZ2V0ICYmIHR5cGVvZiBzY29wZS5nZXQgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YWwgPSBzY29wZS5nZXQoa2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlU3BlY2lhbGl6ZWRQYXJ0aWFsKGluc3RhbmNlLCBzdWJzLCBwYXJ0aWFscywgc3RhY2tTdWJzLCBzdGFja1BhcnRpYWxzLCBzdGFja1RleHQpIHtcbiAgICBmdW5jdGlvbiBQYXJ0aWFsVGVtcGxhdGUoKSB7fTtcbiAgICBQYXJ0aWFsVGVtcGxhdGUucHJvdG90eXBlID0gaW5zdGFuY2U7XG4gICAgZnVuY3Rpb24gU3Vic3RpdHV0aW9ucygpIHt9O1xuICAgIFN1YnN0aXR1dGlvbnMucHJvdG90eXBlID0gaW5zdGFuY2Uuc3VicztcbiAgICB2YXIga2V5O1xuICAgIHZhciBwYXJ0aWFsID0gbmV3IFBhcnRpYWxUZW1wbGF0ZSgpO1xuICAgIHBhcnRpYWwuc3VicyA9IG5ldyBTdWJzdGl0dXRpb25zKCk7XG4gICAgcGFydGlhbC5zdWJzVGV4dCA9IHt9OyAgLy9oZWhlLiBzdWJzdGV4dC5cbiAgICBwYXJ0aWFsLmJ1ZiA9ICcnO1xuXG4gICAgc3RhY2tTdWJzID0gc3RhY2tTdWJzIHx8IHt9O1xuICAgIHBhcnRpYWwuc3RhY2tTdWJzID0gc3RhY2tTdWJzO1xuICAgIHBhcnRpYWwuc3Vic1RleHQgPSBzdGFja1RleHQ7XG4gICAgZm9yIChrZXkgaW4gc3Vicykge1xuICAgICAgaWYgKCFzdGFja1N1YnNba2V5XSkgc3RhY2tTdWJzW2tleV0gPSBzdWJzW2tleV07XG4gICAgfVxuICAgIGZvciAoa2V5IGluIHN0YWNrU3Vicykge1xuICAgICAgcGFydGlhbC5zdWJzW2tleV0gPSBzdGFja1N1YnNba2V5XTtcbiAgICB9XG5cbiAgICBzdGFja1BhcnRpYWxzID0gc3RhY2tQYXJ0aWFscyB8fCB7fTtcbiAgICBwYXJ0aWFsLnN0YWNrUGFydGlhbHMgPSBzdGFja1BhcnRpYWxzO1xuICAgIGZvciAoa2V5IGluIHBhcnRpYWxzKSB7XG4gICAgICBpZiAoIXN0YWNrUGFydGlhbHNba2V5XSkgc3RhY2tQYXJ0aWFsc1trZXldID0gcGFydGlhbHNba2V5XTtcbiAgICB9XG4gICAgZm9yIChrZXkgaW4gc3RhY2tQYXJ0aWFscykge1xuICAgICAgcGFydGlhbC5wYXJ0aWFsc1trZXldID0gc3RhY2tQYXJ0aWFsc1trZXldO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0aWFsO1xuICB9XG5cbiAgdmFyIHJBbXAgPSAvJi9nLFxuICAgICAgckx0ID0gLzwvZyxcbiAgICAgIHJHdCA9IC8+L2csXG4gICAgICByQXBvcyA9IC9cXCcvZyxcbiAgICAgIHJRdW90ID0gL1xcXCIvZyxcbiAgICAgIGhDaGFycyA9IC9bJjw+XFxcIlxcJ10vO1xuXG4gIGZ1bmN0aW9uIGNvZXJjZVRvU3RyaW5nKHZhbCkge1xuICAgIHJldHVybiBTdHJpbmcoKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkgPyAnJyA6IHZhbCk7XG4gIH1cblxuICBmdW5jdGlvbiBob2dhbkVzY2FwZShzdHIpIHtcbiAgICBzdHIgPSBjb2VyY2VUb1N0cmluZyhzdHIpO1xuICAgIHJldHVybiBoQ2hhcnMudGVzdChzdHIpID9cbiAgICAgIHN0clxuICAgICAgICAucmVwbGFjZShyQW1wLCAnJmFtcDsnKVxuICAgICAgICAucmVwbGFjZShyTHQsICcmbHQ7JylcbiAgICAgICAgLnJlcGxhY2Uockd0LCAnJmd0OycpXG4gICAgICAgIC5yZXBsYWNlKHJBcG9zLCAnJiMzOTsnKVxuICAgICAgICAucmVwbGFjZShyUXVvdCwgJyZxdW90OycpIDpcbiAgICAgIHN0cjtcbiAgfVxuXG4gIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcblxufSkodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnID8gZXhwb3J0cyA6IEhvZ2FuKTtcbiIsInZhciBuPWZ1bmN0aW9uKHQscyxyLGUpe3ZhciB1O3NbMF09MDtmb3IodmFyIGg9MTtoPHMubGVuZ3RoO2grKyl7dmFyIHA9c1toKytdLGE9c1toXT8oc1swXXw9cD8xOjIscltzW2grK11dKTpzWysraF07Mz09PXA/ZVswXT1hOjQ9PT1wP2VbMV09T2JqZWN0LmFzc2lnbihlWzFdfHx7fSxhKTo1PT09cD8oZVsxXT1lWzFdfHx7fSlbc1srK2hdXT1hOjY9PT1wP2VbMV1bc1srK2hdXSs9YStcIlwiOnA/KHU9dC5hcHBseShhLG4odCxhLHIsW1wiXCIsbnVsbF0pKSxlLnB1c2godSksYVswXT9zWzBdfD0yOihzW2gtMl09MCxzW2hdPXUpKTplLnB1c2goYSl9cmV0dXJuIGV9LHQ9bmV3IE1hcDtleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzKXt2YXIgcj10LmdldCh0aGlzKTtyZXR1cm4gcnx8KHI9bmV3IE1hcCx0LnNldCh0aGlzLHIpKSwocj1uKHRoaXMsci5nZXQocyl8fChyLnNldChzLHI9ZnVuY3Rpb24obil7Zm9yKHZhciB0LHMscj0xLGU9XCJcIix1PVwiXCIsaD1bMF0scD1mdW5jdGlvbihuKXsxPT09ciYmKG58fChlPWUucmVwbGFjZSgvXlxccypcXG5cXHMqfFxccypcXG5cXHMqJC9nLFwiXCIpKSk/aC5wdXNoKDAsbixlKTozPT09ciYmKG58fGUpPyhoLnB1c2goMyxuLGUpLHI9Mik6Mj09PXImJlwiLi4uXCI9PT1lJiZuP2gucHVzaCg0LG4sMCk6Mj09PXImJmUmJiFuP2gucHVzaCg1LDAsITAsZSk6cj49NSYmKChlfHwhbiYmNT09PXIpJiYoaC5wdXNoKHIsMCxlLHMpLHI9NiksbiYmKGgucHVzaChyLG4sMCxzKSxyPTYpKSxlPVwiXCJ9LGE9MDthPG4ubGVuZ3RoO2ErKyl7YSYmKDE9PT1yJiZwKCkscChhKSk7Zm9yKHZhciBsPTA7bDxuW2FdLmxlbmd0aDtsKyspdD1uW2FdW2xdLDE9PT1yP1wiPFwiPT09dD8ocCgpLGg9W2hdLHI9Myk6ZSs9dDo0PT09cj9cIi0tXCI9PT1lJiZcIj5cIj09PXQ/KHI9MSxlPVwiXCIpOmU9dCtlWzBdOnU/dD09PXU/dT1cIlwiOmUrPXQ6J1wiJz09PXR8fFwiJ1wiPT09dD91PXQ6XCI+XCI9PT10PyhwKCkscj0xKTpyJiYoXCI9XCI9PT10PyhyPTUscz1lLGU9XCJcIik6XCIvXCI9PT10JiYocjw1fHxcIj5cIj09PW5bYV1bbCsxXSk/KHAoKSwzPT09ciYmKGg9aFswXSkscj1oLChoPWhbMF0pLnB1c2goMiwwLHIpLHI9MCk6XCIgXCI9PT10fHxcIlxcdFwiPT09dHx8XCJcXG5cIj09PXR8fFwiXFxyXCI9PT10PyhwKCkscj0yKTplKz10KSwzPT09ciYmXCIhLS1cIj09PWUmJihyPTQsaD1oWzBdKX1yZXR1cm4gcCgpLGh9KHMpKSxyKSxhcmd1bWVudHMsW10pKS5sZW5ndGg+MT9yOnJbMF19XG4iLCJpbXBvcnR7aCBhcyByLENvbXBvbmVudCBhcyBvLHJlbmRlciBhcyB0fWZyb21cInByZWFjdFwiO2V4cG9ydHtoLHJlbmRlcixDb21wb25lbnR9ZnJvbVwicHJlYWN0XCI7aW1wb3J0IGUgZnJvbVwiaHRtXCI7dmFyIG09ZS5iaW5kKHIpO2V4cG9ydHttIGFzIGh0bWx9O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVwbGFjZSA9IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZTtcbnZhciBwZXJjZW50VHdlbnRpZXMgPSAvJTIwL2c7XG5cbnZhciBGb3JtYXQgPSB7XG4gICAgUkZDMTczODogJ1JGQzE3MzgnLFxuICAgIFJGQzM5ODY6ICdSRkMzOTg2J1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJ2RlZmF1bHQnOiBGb3JtYXQuUkZDMzk4NixcbiAgICBmb3JtYXR0ZXJzOiB7XG4gICAgICAgIFJGQzE3Mzg6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2UuY2FsbCh2YWx1ZSwgcGVyY2VudFR3ZW50aWVzLCAnKycpO1xuICAgICAgICB9LFxuICAgICAgICBSRkMzOTg2OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBSRkMxNzM4OiBGb3JtYXQuUkZDMTczOCxcbiAgICBSRkMzOTg2OiBGb3JtYXQuUkZDMzk4NlxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vc3RyaW5naWZ5Jyk7XG52YXIgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJyk7XG52YXIgZm9ybWF0cyA9IHJlcXVpcmUoJy4vZm9ybWF0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBmb3JtYXRzOiBmb3JtYXRzLFxuICAgIHBhcnNlOiBwYXJzZSxcbiAgICBzdHJpbmdpZnk6IHN0cmluZ2lmeVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxudmFyIGRlZmF1bHRzID0ge1xuICAgIGFsbG93RG90czogZmFsc2UsXG4gICAgYWxsb3dQcm90b3R5cGVzOiBmYWxzZSxcbiAgICBhcnJheUxpbWl0OiAyMCxcbiAgICBjaGFyc2V0OiAndXRmLTgnLFxuICAgIGNoYXJzZXRTZW50aW5lbDogZmFsc2UsXG4gICAgY29tbWE6IGZhbHNlLFxuICAgIGRlY29kZXI6IHV0aWxzLmRlY29kZSxcbiAgICBkZWxpbWl0ZXI6ICcmJyxcbiAgICBkZXB0aDogNSxcbiAgICBpZ25vcmVRdWVyeVByZWZpeDogZmFsc2UsXG4gICAgaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzOiBmYWxzZSxcbiAgICBwYXJhbWV0ZXJMaW1pdDogMTAwMCxcbiAgICBwYXJzZUFycmF5czogdHJ1ZSxcbiAgICBwbGFpbk9iamVjdHM6IGZhbHNlLFxuICAgIHN0cmljdE51bGxIYW5kbGluZzogZmFsc2Vcbn07XG5cbnZhciBpbnRlcnByZXROdW1lcmljRW50aXRpZXMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8mIyhcXGQrKTsvZywgZnVuY3Rpb24gKCQwLCBudW1iZXJTdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobnVtYmVyU3RyLCAxMCkpO1xuICAgIH0pO1xufTtcblxudmFyIHBhcnNlQXJyYXlWYWx1ZSA9IGZ1bmN0aW9uICh2YWwsIG9wdGlvbnMpIHtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnICYmIG9wdGlvbnMuY29tbWEgJiYgdmFsLmluZGV4T2YoJywnKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiB2YWwuc3BsaXQoJywnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsO1xufTtcblxuLy8gVGhpcyBpcyB3aGF0IGJyb3dzZXJzIHdpbGwgc3VibWl0IHdoZW4gdGhlIOKckyBjaGFyYWN0ZXIgb2NjdXJzIGluIGFuXG4vLyBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQgYm9keSBhbmQgdGhlIGVuY29kaW5nIG9mIHRoZSBwYWdlIGNvbnRhaW5pbmdcbi8vIHRoZSBmb3JtIGlzIGlzby04ODU5LTEsIG9yIHdoZW4gdGhlIHN1Ym1pdHRlZCBmb3JtIGhhcyBhbiBhY2NlcHQtY2hhcnNldFxuLy8gYXR0cmlidXRlIG9mIGlzby04ODU5LTEuIFByZXN1bWFibHkgYWxzbyB3aXRoIG90aGVyIGNoYXJzZXRzIHRoYXQgZG8gbm90IGNvbnRhaW5cbi8vIHRoZSDinJMgY2hhcmFjdGVyLCBzdWNoIGFzIHVzLWFzY2lpLlxudmFyIGlzb1NlbnRpbmVsID0gJ3V0Zjg9JTI2JTIzMTAwMDMlM0InOyAvLyBlbmNvZGVVUklDb21wb25lbnQoJyYjMTAwMDM7JylcblxuLy8gVGhlc2UgYXJlIHRoZSBwZXJjZW50LWVuY29kZWQgdXRmLTggb2N0ZXRzIHJlcHJlc2VudGluZyBhIGNoZWNrbWFyaywgaW5kaWNhdGluZyB0aGF0IHRoZSByZXF1ZXN0IGFjdHVhbGx5IGlzIHV0Zi04IGVuY29kZWQuXG52YXIgY2hhcnNldFNlbnRpbmVsID0gJ3V0Zjg9JUUyJTlDJTkzJzsgLy8gZW5jb2RlVVJJQ29tcG9uZW50KCfinJMnKVxuXG52YXIgcGFyc2VWYWx1ZXMgPSBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nVmFsdWVzKHN0ciwgb3B0aW9ucykge1xuICAgIHZhciBvYmogPSB7fTtcbiAgICB2YXIgY2xlYW5TdHIgPSBvcHRpb25zLmlnbm9yZVF1ZXJ5UHJlZml4ID8gc3RyLnJlcGxhY2UoL15cXD8vLCAnJykgOiBzdHI7XG4gICAgdmFyIGxpbWl0ID0gb3B0aW9ucy5wYXJhbWV0ZXJMaW1pdCA9PT0gSW5maW5pdHkgPyB1bmRlZmluZWQgOiBvcHRpb25zLnBhcmFtZXRlckxpbWl0O1xuICAgIHZhciBwYXJ0cyA9IGNsZWFuU3RyLnNwbGl0KG9wdGlvbnMuZGVsaW1pdGVyLCBsaW1pdCk7XG4gICAgdmFyIHNraXBJbmRleCA9IC0xOyAvLyBLZWVwIHRyYWNrIG9mIHdoZXJlIHRoZSB1dGY4IHNlbnRpbmVsIHdhcyBmb3VuZFxuICAgIHZhciBpO1xuXG4gICAgdmFyIGNoYXJzZXQgPSBvcHRpb25zLmNoYXJzZXQ7XG4gICAgaWYgKG9wdGlvbnMuY2hhcnNldFNlbnRpbmVsKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHBhcnRzW2ldLmluZGV4T2YoJ3V0Zjg9JykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAocGFydHNbaV0gPT09IGNoYXJzZXRTZW50aW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gJ3V0Zi04JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRzW2ldID09PSBpc29TZW50aW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gJ2lzby04ODU5LTEnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBza2lwSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIGkgPSBwYXJ0cy5sZW5ndGg7IC8vIFRoZSBlc2xpbnQgc2V0dGluZ3MgZG8gbm90IGFsbG93IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChpID09PSBza2lwSW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07XG5cbiAgICAgICAgdmFyIGJyYWNrZXRFcXVhbHNQb3MgPSBwYXJ0LmluZGV4T2YoJ109Jyk7XG4gICAgICAgIHZhciBwb3MgPSBicmFja2V0RXF1YWxzUG9zID09PSAtMSA/IHBhcnQuaW5kZXhPZignPScpIDogYnJhY2tldEVxdWFsc1BvcyArIDE7XG5cbiAgICAgICAgdmFyIGtleSwgdmFsO1xuICAgICAgICBpZiAocG9zID09PSAtMSkge1xuICAgICAgICAgICAga2V5ID0gb3B0aW9ucy5kZWNvZGVyKHBhcnQsIGRlZmF1bHRzLmRlY29kZXIsIGNoYXJzZXQsICdrZXknKTtcbiAgICAgICAgICAgIHZhbCA9IG9wdGlvbnMuc3RyaWN0TnVsbEhhbmRsaW5nID8gbnVsbCA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAga2V5ID0gb3B0aW9ucy5kZWNvZGVyKHBhcnQuc2xpY2UoMCwgcG9zKSwgZGVmYXVsdHMuZGVjb2RlciwgY2hhcnNldCwgJ2tleScpO1xuICAgICAgICAgICAgdmFsID0gdXRpbHMubWF5YmVNYXAoXG4gICAgICAgICAgICAgICAgcGFyc2VBcnJheVZhbHVlKHBhcnQuc2xpY2UocG9zICsgMSksIG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbmNvZGVkVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmRlY29kZXIoZW5jb2RlZFZhbCwgZGVmYXVsdHMuZGVjb2RlciwgY2hhcnNldCwgJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWwgJiYgb3B0aW9ucy5pbnRlcnByZXROdW1lcmljRW50aXRpZXMgJiYgY2hhcnNldCA9PT0gJ2lzby04ODU5LTEnKSB7XG4gICAgICAgICAgICB2YWwgPSBpbnRlcnByZXROdW1lcmljRW50aXRpZXModmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJ0LmluZGV4T2YoJ1tdPScpID4gLTEpIHtcbiAgICAgICAgICAgIHZhbCA9IGlzQXJyYXkodmFsKSA/IFt2YWxdIDogdmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhcy5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgb2JqW2tleV0gPSB1dGlscy5jb21iaW5lKG9ialtrZXldLCB2YWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xufTtcblxudmFyIHBhcnNlT2JqZWN0ID0gZnVuY3Rpb24gKGNoYWluLCB2YWwsIG9wdGlvbnMsIHZhbHVlc1BhcnNlZCkge1xuICAgIHZhciBsZWFmID0gdmFsdWVzUGFyc2VkID8gdmFsIDogcGFyc2VBcnJheVZhbHVlKHZhbCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBpID0gY2hhaW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIG9iajtcbiAgICAgICAgdmFyIHJvb3QgPSBjaGFpbltpXTtcblxuICAgICAgICBpZiAocm9vdCA9PT0gJ1tdJyAmJiBvcHRpb25zLnBhcnNlQXJyYXlzKSB7XG4gICAgICAgICAgICBvYmogPSBbXS5jb25jYXQobGVhZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvYmogPSBvcHRpb25zLnBsYWluT2JqZWN0cyA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICAgICAgICAgIHZhciBjbGVhblJvb3QgPSByb290LmNoYXJBdCgwKSA9PT0gJ1snICYmIHJvb3QuY2hhckF0KHJvb3QubGVuZ3RoIC0gMSkgPT09ICddJyA/IHJvb3Quc2xpY2UoMSwgLTEpIDogcm9vdDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KGNsZWFuUm9vdCwgMTApO1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnBhcnNlQXJyYXlzICYmIGNsZWFuUm9vdCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBvYmogPSB7IDA6IGxlYWYgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgIWlzTmFOKGluZGV4KVxuICAgICAgICAgICAgICAgICYmIHJvb3QgIT09IGNsZWFuUm9vdFxuICAgICAgICAgICAgICAgICYmIFN0cmluZyhpbmRleCkgPT09IGNsZWFuUm9vdFxuICAgICAgICAgICAgICAgICYmIGluZGV4ID49IDBcbiAgICAgICAgICAgICAgICAmJiAob3B0aW9ucy5wYXJzZUFycmF5cyAmJiBpbmRleCA8PSBvcHRpb25zLmFycmF5TGltaXQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBvYmogPSBbXTtcbiAgICAgICAgICAgICAgICBvYmpbaW5kZXhdID0gbGVhZjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xlYW5Sb290ICE9PSAnX19wcm90b19fJykge1xuICAgICAgICAgICAgICAgIG9ialtjbGVhblJvb3RdID0gbGVhZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxlYWYgPSBvYmo7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxlYWY7XG59O1xuXG52YXIgcGFyc2VLZXlzID0gZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZ0tleXMoZ2l2ZW5LZXksIHZhbCwgb3B0aW9ucywgdmFsdWVzUGFyc2VkKSB7XG4gICAgaWYgKCFnaXZlbktleSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJhbnNmb3JtIGRvdCBub3RhdGlvbiB0byBicmFja2V0IG5vdGF0aW9uXG4gICAgdmFyIGtleSA9IG9wdGlvbnMuYWxsb3dEb3RzID8gZ2l2ZW5LZXkucmVwbGFjZSgvXFwuKFteLltdKykvZywgJ1skMV0nKSA6IGdpdmVuS2V5O1xuXG4gICAgLy8gVGhlIHJlZ2V4IGNodW5rc1xuXG4gICAgdmFyIGJyYWNrZXRzID0gLyhcXFtbXltcXF1dKl0pLztcbiAgICB2YXIgY2hpbGQgPSAvKFxcW1teW1xcXV0qXSkvZztcblxuICAgIC8vIEdldCB0aGUgcGFyZW50XG5cbiAgICB2YXIgc2VnbWVudCA9IG9wdGlvbnMuZGVwdGggPiAwICYmIGJyYWNrZXRzLmV4ZWMoa2V5KTtcbiAgICB2YXIgcGFyZW50ID0gc2VnbWVudCA/IGtleS5zbGljZSgwLCBzZWdtZW50LmluZGV4KSA6IGtleTtcblxuICAgIC8vIFN0YXNoIHRoZSBwYXJlbnQgaWYgaXQgZXhpc3RzXG5cbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgLy8gSWYgd2UgYXJlbid0IHVzaW5nIHBsYWluIG9iamVjdHMsIG9wdGlvbmFsbHkgcHJlZml4IGtleXMgdGhhdCB3b3VsZCBvdmVyd3JpdGUgb2JqZWN0IHByb3RvdHlwZSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmICghb3B0aW9ucy5wbGFpbk9iamVjdHMgJiYgaGFzLmNhbGwoT2JqZWN0LnByb3RvdHlwZSwgcGFyZW50KSkge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmFsbG93UHJvdG90eXBlcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGtleXMucHVzaChwYXJlbnQpO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCBjaGlsZHJlbiBhcHBlbmRpbmcgdG8gdGhlIGFycmF5IHVudGlsIHdlIGhpdCBkZXB0aFxuXG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChvcHRpb25zLmRlcHRoID4gMCAmJiAoc2VnbWVudCA9IGNoaWxkLmV4ZWMoa2V5KSkgIT09IG51bGwgJiYgaSA8IG9wdGlvbnMuZGVwdGgpIHtcbiAgICAgICAgaSArPSAxO1xuICAgICAgICBpZiAoIW9wdGlvbnMucGxhaW5PYmplY3RzICYmIGhhcy5jYWxsKE9iamVjdC5wcm90b3R5cGUsIHNlZ21lbnRbMV0uc2xpY2UoMSwgLTEpKSkge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmFsbG93UHJvdG90eXBlcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBrZXlzLnB1c2goc2VnbWVudFsxXSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUncyBhIHJlbWFpbmRlciwganVzdCBhZGQgd2hhdGV2ZXIgaXMgbGVmdFxuXG4gICAgaWYgKHNlZ21lbnQpIHtcbiAgICAgICAga2V5cy5wdXNoKCdbJyArIGtleS5zbGljZShzZWdtZW50LmluZGV4KSArICddJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlT2JqZWN0KGtleXMsIHZhbCwgb3B0aW9ucywgdmFsdWVzUGFyc2VkKTtcbn07XG5cbnZhciBub3JtYWxpemVQYXJzZU9wdGlvbnMgPSBmdW5jdGlvbiBub3JtYWxpemVQYXJzZU9wdGlvbnMob3B0cykge1xuICAgIGlmICghb3B0cykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdHM7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuZGVjb2RlciAhPT0gbnVsbCAmJiBvcHRzLmRlY29kZXIgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0cy5kZWNvZGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0RlY29kZXIgaGFzIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRzLmNoYXJzZXQgIT09ICd1bmRlZmluZWQnICYmIG9wdHMuY2hhcnNldCAhPT0gJ3V0Zi04JyAmJiBvcHRzLmNoYXJzZXQgIT09ICdpc28tODg1OS0xJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgY2hhcnNldCBvcHRpb24gbXVzdCBiZSBlaXRoZXIgdXRmLTgsIGlzby04ODU5LTEsIG9yIHVuZGVmaW5lZCcpO1xuICAgIH1cbiAgICB2YXIgY2hhcnNldCA9IHR5cGVvZiBvcHRzLmNoYXJzZXQgPT09ICd1bmRlZmluZWQnID8gZGVmYXVsdHMuY2hhcnNldCA6IG9wdHMuY2hhcnNldDtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFsbG93RG90czogdHlwZW9mIG9wdHMuYWxsb3dEb3RzID09PSAndW5kZWZpbmVkJyA/IGRlZmF1bHRzLmFsbG93RG90cyA6ICEhb3B0cy5hbGxvd0RvdHMsXG4gICAgICAgIGFsbG93UHJvdG90eXBlczogdHlwZW9mIG9wdHMuYWxsb3dQcm90b3R5cGVzID09PSAnYm9vbGVhbicgPyBvcHRzLmFsbG93UHJvdG90eXBlcyA6IGRlZmF1bHRzLmFsbG93UHJvdG90eXBlcyxcbiAgICAgICAgYXJyYXlMaW1pdDogdHlwZW9mIG9wdHMuYXJyYXlMaW1pdCA9PT0gJ251bWJlcicgPyBvcHRzLmFycmF5TGltaXQgOiBkZWZhdWx0cy5hcnJheUxpbWl0LFxuICAgICAgICBjaGFyc2V0OiBjaGFyc2V0LFxuICAgICAgICBjaGFyc2V0U2VudGluZWw6IHR5cGVvZiBvcHRzLmNoYXJzZXRTZW50aW5lbCA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5jaGFyc2V0U2VudGluZWwgOiBkZWZhdWx0cy5jaGFyc2V0U2VudGluZWwsXG4gICAgICAgIGNvbW1hOiB0eXBlb2Ygb3B0cy5jb21tYSA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5jb21tYSA6IGRlZmF1bHRzLmNvbW1hLFxuICAgICAgICBkZWNvZGVyOiB0eXBlb2Ygb3B0cy5kZWNvZGVyID09PSAnZnVuY3Rpb24nID8gb3B0cy5kZWNvZGVyIDogZGVmYXVsdHMuZGVjb2RlcixcbiAgICAgICAgZGVsaW1pdGVyOiB0eXBlb2Ygb3B0cy5kZWxpbWl0ZXIgPT09ICdzdHJpbmcnIHx8IHV0aWxzLmlzUmVnRXhwKG9wdHMuZGVsaW1pdGVyKSA/IG9wdHMuZGVsaW1pdGVyIDogZGVmYXVsdHMuZGVsaW1pdGVyLFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW1wbGljaXQtY29lcmNpb24sIG5vLWV4dHJhLXBhcmVuc1xuICAgICAgICBkZXB0aDogKHR5cGVvZiBvcHRzLmRlcHRoID09PSAnbnVtYmVyJyB8fCBvcHRzLmRlcHRoID09PSBmYWxzZSkgPyArb3B0cy5kZXB0aCA6IGRlZmF1bHRzLmRlcHRoLFxuICAgICAgICBpZ25vcmVRdWVyeVByZWZpeDogb3B0cy5pZ25vcmVRdWVyeVByZWZpeCA9PT0gdHJ1ZSxcbiAgICAgICAgaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzOiB0eXBlb2Ygb3B0cy5pbnRlcnByZXROdW1lcmljRW50aXRpZXMgPT09ICdib29sZWFuJyA/IG9wdHMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzIDogZGVmYXVsdHMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzLFxuICAgICAgICBwYXJhbWV0ZXJMaW1pdDogdHlwZW9mIG9wdHMucGFyYW1ldGVyTGltaXQgPT09ICdudW1iZXInID8gb3B0cy5wYXJhbWV0ZXJMaW1pdCA6IGRlZmF1bHRzLnBhcmFtZXRlckxpbWl0LFxuICAgICAgICBwYXJzZUFycmF5czogb3B0cy5wYXJzZUFycmF5cyAhPT0gZmFsc2UsXG4gICAgICAgIHBsYWluT2JqZWN0czogdHlwZW9mIG9wdHMucGxhaW5PYmplY3RzID09PSAnYm9vbGVhbicgPyBvcHRzLnBsYWluT2JqZWN0cyA6IGRlZmF1bHRzLnBsYWluT2JqZWN0cyxcbiAgICAgICAgc3RyaWN0TnVsbEhhbmRsaW5nOiB0eXBlb2Ygb3B0cy5zdHJpY3ROdWxsSGFuZGxpbmcgPT09ICdib29sZWFuJyA/IG9wdHMuc3RyaWN0TnVsbEhhbmRsaW5nIDogZGVmYXVsdHMuc3RyaWN0TnVsbEhhbmRsaW5nXG4gICAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHN0ciwgb3B0cykge1xuICAgIHZhciBvcHRpb25zID0gbm9ybWFsaXplUGFyc2VPcHRpb25zKG9wdHMpO1xuXG4gICAgaWYgKHN0ciA9PT0gJycgfHwgc3RyID09PSBudWxsIHx8IHR5cGVvZiBzdHIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnBsYWluT2JqZWN0cyA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICB9XG5cbiAgICB2YXIgdGVtcE9iaiA9IHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnID8gcGFyc2VWYWx1ZXMoc3RyLCBvcHRpb25zKSA6IHN0cjtcbiAgICB2YXIgb2JqID0gb3B0aW9ucy5wbGFpbk9iamVjdHMgPyBPYmplY3QuY3JlYXRlKG51bGwpIDoge307XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGtleXMgYW5kIHNldHVwIHRoZSBuZXcgb2JqZWN0XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRlbXBPYmopO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgdmFyIG5ld09iaiA9IHBhcnNlS2V5cyhrZXksIHRlbXBPYmpba2V5XSwgb3B0aW9ucywgdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpO1xuICAgICAgICBvYmogPSB1dGlscy5tZXJnZShvYmosIG5ld09iaiwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHV0aWxzLmNvbXBhY3Qob2JqKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBmb3JtYXRzID0gcmVxdWlyZSgnLi9mb3JtYXRzJyk7XG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIGFycmF5UHJlZml4R2VuZXJhdG9ycyA9IHtcbiAgICBicmFja2V0czogZnVuY3Rpb24gYnJhY2tldHMocHJlZml4KSB7XG4gICAgICAgIHJldHVybiBwcmVmaXggKyAnW10nO1xuICAgIH0sXG4gICAgY29tbWE6ICdjb21tYScsXG4gICAgaW5kaWNlczogZnVuY3Rpb24gaW5kaWNlcyhwcmVmaXgsIGtleSkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgJ1snICsga2V5ICsgJ10nO1xuICAgIH0sXG4gICAgcmVwZWF0OiBmdW5jdGlvbiByZXBlYXQocHJlZml4KSB7XG4gICAgICAgIHJldHVybiBwcmVmaXg7XG4gICAgfVxufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xudmFyIHNwbGl0ID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdDtcbnZhciBwdXNoID0gQXJyYXkucHJvdG90eXBlLnB1c2g7XG52YXIgcHVzaFRvQXJyYXkgPSBmdW5jdGlvbiAoYXJyLCB2YWx1ZU9yQXJyYXkpIHtcbiAgICBwdXNoLmFwcGx5KGFyciwgaXNBcnJheSh2YWx1ZU9yQXJyYXkpID8gdmFsdWVPckFycmF5IDogW3ZhbHVlT3JBcnJheV0pO1xufTtcblxudmFyIHRvSVNPID0gRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmc7XG5cbnZhciBkZWZhdWx0Rm9ybWF0ID0gZm9ybWF0c1snZGVmYXVsdCddO1xudmFyIGRlZmF1bHRzID0ge1xuICAgIGFkZFF1ZXJ5UHJlZml4OiBmYWxzZSxcbiAgICBhbGxvd0RvdHM6IGZhbHNlLFxuICAgIGNoYXJzZXQ6ICd1dGYtOCcsXG4gICAgY2hhcnNldFNlbnRpbmVsOiBmYWxzZSxcbiAgICBkZWxpbWl0ZXI6ICcmJyxcbiAgICBlbmNvZGU6IHRydWUsXG4gICAgZW5jb2RlcjogdXRpbHMuZW5jb2RlLFxuICAgIGVuY29kZVZhbHVlc09ubHk6IGZhbHNlLFxuICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICBmb3JtYXR0ZXI6IGZvcm1hdHMuZm9ybWF0dGVyc1tkZWZhdWx0Rm9ybWF0XSxcbiAgICAvLyBkZXByZWNhdGVkXG4gICAgaW5kaWNlczogZmFsc2UsXG4gICAgc2VyaWFsaXplRGF0ZTogZnVuY3Rpb24gc2VyaWFsaXplRGF0ZShkYXRlKSB7XG4gICAgICAgIHJldHVybiB0b0lTTy5jYWxsKGRhdGUpO1xuICAgIH0sXG4gICAgc2tpcE51bGxzOiBmYWxzZSxcbiAgICBzdHJpY3ROdWxsSGFuZGxpbmc6IGZhbHNlXG59O1xuXG52YXIgaXNOb25OdWxsaXNoUHJpbWl0aXZlID0gZnVuY3Rpb24gaXNOb25OdWxsaXNoUHJpbWl0aXZlKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnXG4gICAgICAgIHx8IHR5cGVvZiB2ID09PSAnbnVtYmVyJ1xuICAgICAgICB8fCB0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgIHx8IHR5cGVvZiB2ID09PSAnc3ltYm9sJ1xuICAgICAgICB8fCB0eXBlb2YgdiA9PT0gJ2JpZ2ludCc7XG59O1xuXG52YXIgc3RyaW5naWZ5ID0gZnVuY3Rpb24gc3RyaW5naWZ5KFxuICAgIG9iamVjdCxcbiAgICBwcmVmaXgsXG4gICAgZ2VuZXJhdGVBcnJheVByZWZpeCxcbiAgICBzdHJpY3ROdWxsSGFuZGxpbmcsXG4gICAgc2tpcE51bGxzLFxuICAgIGVuY29kZXIsXG4gICAgZmlsdGVyLFxuICAgIHNvcnQsXG4gICAgYWxsb3dEb3RzLFxuICAgIHNlcmlhbGl6ZURhdGUsXG4gICAgZm9ybWF0LFxuICAgIGZvcm1hdHRlcixcbiAgICBlbmNvZGVWYWx1ZXNPbmx5LFxuICAgIGNoYXJzZXRcbikge1xuICAgIHZhciBvYmogPSBvYmplY3Q7XG4gICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb2JqID0gZmlsdGVyKHByZWZpeCwgb2JqKTtcbiAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgb2JqID0gc2VyaWFsaXplRGF0ZShvYmopO1xuICAgIH0gZWxzZSBpZiAoZ2VuZXJhdGVBcnJheVByZWZpeCA9PT0gJ2NvbW1hJyAmJiBpc0FycmF5KG9iaikpIHtcbiAgICAgICAgb2JqID0gdXRpbHMubWF5YmVNYXAob2JqLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VyaWFsaXplRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChvYmogPT09IG51bGwpIHtcbiAgICAgICAgaWYgKHN0cmljdE51bGxIYW5kbGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGVuY29kZXIgJiYgIWVuY29kZVZhbHVlc09ubHkgPyBlbmNvZGVyKHByZWZpeCwgZGVmYXVsdHMuZW5jb2RlciwgY2hhcnNldCwgJ2tleScsIGZvcm1hdCkgOiBwcmVmaXg7XG4gICAgICAgIH1cblxuICAgICAgICBvYmogPSAnJztcbiAgICB9XG5cbiAgICBpZiAoaXNOb25OdWxsaXNoUHJpbWl0aXZlKG9iaikgfHwgdXRpbHMuaXNCdWZmZXIob2JqKSkge1xuICAgICAgICBpZiAoZW5jb2Rlcikge1xuICAgICAgICAgICAgdmFyIGtleVZhbHVlID0gZW5jb2RlVmFsdWVzT25seSA/IHByZWZpeCA6IGVuY29kZXIocHJlZml4LCBkZWZhdWx0cy5lbmNvZGVyLCBjaGFyc2V0LCAna2V5JywgZm9ybWF0KTtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0ZUFycmF5UHJlZml4ID09PSAnY29tbWEnICYmIGVuY29kZVZhbHVlc09ubHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzQXJyYXkgPSBzcGxpdC5jYWxsKFN0cmluZyhvYmopLCAnLCcpO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXNKb2luZWQgPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlc0FycmF5Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlc0pvaW5lZCArPSAoaSA9PT0gMCA/ICcnIDogJywnKSArIGZvcm1hdHRlcihlbmNvZGVyKHZhbHVlc0FycmF5W2ldLCBkZWZhdWx0cy5lbmNvZGVyLCBjaGFyc2V0LCAndmFsdWUnLCBmb3JtYXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtmb3JtYXR0ZXIoa2V5VmFsdWUpICsgJz0nICsgdmFsdWVzSm9pbmVkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbZm9ybWF0dGVyKGtleVZhbHVlKSArICc9JyArIGZvcm1hdHRlcihlbmNvZGVyKG9iaiwgZGVmYXVsdHMuZW5jb2RlciwgY2hhcnNldCwgJ3ZhbHVlJywgZm9ybWF0KSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbZm9ybWF0dGVyKHByZWZpeCkgKyAnPScgKyBmb3JtYXR0ZXIoU3RyaW5nKG9iaikpXTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVzID0gW107XG5cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG5cbiAgICB2YXIgb2JqS2V5cztcbiAgICBpZiAoZ2VuZXJhdGVBcnJheVByZWZpeCA9PT0gJ2NvbW1hJyAmJiBpc0FycmF5KG9iaikpIHtcbiAgICAgICAgLy8gd2UgbmVlZCB0byBqb2luIGVsZW1lbnRzIGluXG4gICAgICAgIG9iaktleXMgPSBbeyB2YWx1ZTogb2JqLmxlbmd0aCA+IDAgPyBvYmouam9pbignLCcpIHx8IG51bGwgOiB2b2lkIHVuZGVmaW5lZCB9XTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZmlsdGVyKSkge1xuICAgICAgICBvYmpLZXlzID0gZmlsdGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICAgICAgb2JqS2V5cyA9IHNvcnQgPyBrZXlzLnNvcnQoc29ydCkgOiBrZXlzO1xuICAgIH1cblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqS2V5cy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIga2V5ID0gb2JqS2V5c1tqXTtcbiAgICAgICAgdmFyIHZhbHVlID0gdHlwZW9mIGtleSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGtleS52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgPyBrZXkudmFsdWUgOiBvYmpba2V5XTtcblxuICAgICAgICBpZiAoc2tpcE51bGxzICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBrZXlQcmVmaXggPSBpc0FycmF5KG9iailcbiAgICAgICAgICAgID8gdHlwZW9mIGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdmdW5jdGlvbicgPyBnZW5lcmF0ZUFycmF5UHJlZml4KHByZWZpeCwga2V5KSA6IHByZWZpeFxuICAgICAgICAgICAgOiBwcmVmaXggKyAoYWxsb3dEb3RzID8gJy4nICsga2V5IDogJ1snICsga2V5ICsgJ10nKTtcblxuICAgICAgICBwdXNoVG9BcnJheSh2YWx1ZXMsIHN0cmluZ2lmeShcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAga2V5UHJlZml4LFxuICAgICAgICAgICAgZ2VuZXJhdGVBcnJheVByZWZpeCxcbiAgICAgICAgICAgIHN0cmljdE51bGxIYW5kbGluZyxcbiAgICAgICAgICAgIHNraXBOdWxscyxcbiAgICAgICAgICAgIGVuY29kZXIsXG4gICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICBzb3J0LFxuICAgICAgICAgICAgYWxsb3dEb3RzLFxuICAgICAgICAgICAgc2VyaWFsaXplRGF0ZSxcbiAgICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgICAgIGZvcm1hdHRlcixcbiAgICAgICAgICAgIGVuY29kZVZhbHVlc09ubHksXG4gICAgICAgICAgICBjaGFyc2V0XG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXM7XG59O1xuXG52YXIgbm9ybWFsaXplU3RyaW5naWZ5T3B0aW9ucyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZ2lmeU9wdGlvbnMob3B0cykge1xuICAgIGlmICghb3B0cykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdHM7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuZW5jb2RlciAhPT0gbnVsbCAmJiB0eXBlb2Ygb3B0cy5lbmNvZGVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb3B0cy5lbmNvZGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0VuY29kZXIgaGFzIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGNoYXJzZXQgPSBvcHRzLmNoYXJzZXQgfHwgZGVmYXVsdHMuY2hhcnNldDtcbiAgICBpZiAodHlwZW9mIG9wdHMuY2hhcnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgb3B0cy5jaGFyc2V0ICE9PSAndXRmLTgnICYmIG9wdHMuY2hhcnNldCAhPT0gJ2lzby04ODU5LTEnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBjaGFyc2V0IG9wdGlvbiBtdXN0IGJlIGVpdGhlciB1dGYtOCwgaXNvLTg4NTktMSwgb3IgdW5kZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgdmFyIGZvcm1hdCA9IGZvcm1hdHNbJ2RlZmF1bHQnXTtcbiAgICBpZiAodHlwZW9mIG9wdHMuZm9ybWF0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoIWhhcy5jYWxsKGZvcm1hdHMuZm9ybWF0dGVycywgb3B0cy5mb3JtYXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGZvcm1hdCBvcHRpb24gcHJvdmlkZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybWF0ID0gb3B0cy5mb3JtYXQ7XG4gICAgfVxuICAgIHZhciBmb3JtYXR0ZXIgPSBmb3JtYXRzLmZvcm1hdHRlcnNbZm9ybWF0XTtcblxuICAgIHZhciBmaWx0ZXIgPSBkZWZhdWx0cy5maWx0ZXI7XG4gICAgaWYgKHR5cGVvZiBvcHRzLmZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBpc0FycmF5KG9wdHMuZmlsdGVyKSkge1xuICAgICAgICBmaWx0ZXIgPSBvcHRzLmZpbHRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGRRdWVyeVByZWZpeDogdHlwZW9mIG9wdHMuYWRkUXVlcnlQcmVmaXggPT09ICdib29sZWFuJyA/IG9wdHMuYWRkUXVlcnlQcmVmaXggOiBkZWZhdWx0cy5hZGRRdWVyeVByZWZpeCxcbiAgICAgICAgYWxsb3dEb3RzOiB0eXBlb2Ygb3B0cy5hbGxvd0RvdHMgPT09ICd1bmRlZmluZWQnID8gZGVmYXVsdHMuYWxsb3dEb3RzIDogISFvcHRzLmFsbG93RG90cyxcbiAgICAgICAgY2hhcnNldDogY2hhcnNldCxcbiAgICAgICAgY2hhcnNldFNlbnRpbmVsOiB0eXBlb2Ygb3B0cy5jaGFyc2V0U2VudGluZWwgPT09ICdib29sZWFuJyA/IG9wdHMuY2hhcnNldFNlbnRpbmVsIDogZGVmYXVsdHMuY2hhcnNldFNlbnRpbmVsLFxuICAgICAgICBkZWxpbWl0ZXI6IHR5cGVvZiBvcHRzLmRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyBkZWZhdWx0cy5kZWxpbWl0ZXIgOiBvcHRzLmRlbGltaXRlcixcbiAgICAgICAgZW5jb2RlOiB0eXBlb2Ygb3B0cy5lbmNvZGUgPT09ICdib29sZWFuJyA/IG9wdHMuZW5jb2RlIDogZGVmYXVsdHMuZW5jb2RlLFxuICAgICAgICBlbmNvZGVyOiB0eXBlb2Ygb3B0cy5lbmNvZGVyID09PSAnZnVuY3Rpb24nID8gb3B0cy5lbmNvZGVyIDogZGVmYXVsdHMuZW5jb2RlcixcbiAgICAgICAgZW5jb2RlVmFsdWVzT25seTogdHlwZW9mIG9wdHMuZW5jb2RlVmFsdWVzT25seSA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5lbmNvZGVWYWx1ZXNPbmx5IDogZGVmYXVsdHMuZW5jb2RlVmFsdWVzT25seSxcbiAgICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICAgIGZvcm1hdDogZm9ybWF0LFxuICAgICAgICBmb3JtYXR0ZXI6IGZvcm1hdHRlcixcbiAgICAgICAgc2VyaWFsaXplRGF0ZTogdHlwZW9mIG9wdHMuc2VyaWFsaXplRGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuc2VyaWFsaXplRGF0ZSA6IGRlZmF1bHRzLnNlcmlhbGl6ZURhdGUsXG4gICAgICAgIHNraXBOdWxsczogdHlwZW9mIG9wdHMuc2tpcE51bGxzID09PSAnYm9vbGVhbicgPyBvcHRzLnNraXBOdWxscyA6IGRlZmF1bHRzLnNraXBOdWxscyxcbiAgICAgICAgc29ydDogdHlwZW9mIG9wdHMuc29ydCA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuc29ydCA6IG51bGwsXG4gICAgICAgIHN0cmljdE51bGxIYW5kbGluZzogdHlwZW9mIG9wdHMuc3RyaWN0TnVsbEhhbmRsaW5nID09PSAnYm9vbGVhbicgPyBvcHRzLnN0cmljdE51bGxIYW5kbGluZyA6IGRlZmF1bHRzLnN0cmljdE51bGxIYW5kbGluZ1xuICAgIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIG9wdHMpIHtcbiAgICB2YXIgb2JqID0gb2JqZWN0O1xuICAgIHZhciBvcHRpb25zID0gbm9ybWFsaXplU3RyaW5naWZ5T3B0aW9ucyhvcHRzKTtcblxuICAgIHZhciBvYmpLZXlzO1xuICAgIHZhciBmaWx0ZXI7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICAgICAgICBvYmogPSBmaWx0ZXIoJycsIG9iaik7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9wdGlvbnMuZmlsdGVyKSkge1xuICAgICAgICBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICAgICAgb2JqS2V5cyA9IGZpbHRlcjtcbiAgICB9XG5cbiAgICB2YXIga2V5cyA9IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgdmFyIGFycmF5Rm9ybWF0O1xuICAgIGlmIChvcHRzICYmIG9wdHMuYXJyYXlGb3JtYXQgaW4gYXJyYXlQcmVmaXhHZW5lcmF0b3JzKSB7XG4gICAgICAgIGFycmF5Rm9ybWF0ID0gb3B0cy5hcnJheUZvcm1hdDtcbiAgICB9IGVsc2UgaWYgKG9wdHMgJiYgJ2luZGljZXMnIGluIG9wdHMpIHtcbiAgICAgICAgYXJyYXlGb3JtYXQgPSBvcHRzLmluZGljZXMgPyAnaW5kaWNlcycgOiAncmVwZWF0JztcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJheUZvcm1hdCA9ICdpbmRpY2VzJztcbiAgICB9XG5cbiAgICB2YXIgZ2VuZXJhdGVBcnJheVByZWZpeCA9IGFycmF5UHJlZml4R2VuZXJhdG9yc1thcnJheUZvcm1hdF07XG5cbiAgICBpZiAoIW9iaktleXMpIHtcbiAgICAgICAgb2JqS2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc29ydCkge1xuICAgICAgICBvYmpLZXlzLnNvcnQob3B0aW9ucy5zb3J0KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iaktleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IG9iaktleXNbaV07XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE51bGxzICYmIG9ialtrZXldID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwdXNoVG9BcnJheShrZXlzLCBzdHJpbmdpZnkoXG4gICAgICAgICAgICBvYmpba2V5XSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGdlbmVyYXRlQXJyYXlQcmVmaXgsXG4gICAgICAgICAgICBvcHRpb25zLnN0cmljdE51bGxIYW5kbGluZyxcbiAgICAgICAgICAgIG9wdGlvbnMuc2tpcE51bGxzLFxuICAgICAgICAgICAgb3B0aW9ucy5lbmNvZGUgPyBvcHRpb25zLmVuY29kZXIgOiBudWxsLFxuICAgICAgICAgICAgb3B0aW9ucy5maWx0ZXIsXG4gICAgICAgICAgICBvcHRpb25zLnNvcnQsXG4gICAgICAgICAgICBvcHRpb25zLmFsbG93RG90cyxcbiAgICAgICAgICAgIG9wdGlvbnMuc2VyaWFsaXplRGF0ZSxcbiAgICAgICAgICAgIG9wdGlvbnMuZm9ybWF0LFxuICAgICAgICAgICAgb3B0aW9ucy5mb3JtYXR0ZXIsXG4gICAgICAgICAgICBvcHRpb25zLmVuY29kZVZhbHVlc09ubHksXG4gICAgICAgICAgICBvcHRpb25zLmNoYXJzZXRcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgdmFyIGpvaW5lZCA9IGtleXMuam9pbihvcHRpb25zLmRlbGltaXRlcik7XG4gICAgdmFyIHByZWZpeCA9IG9wdGlvbnMuYWRkUXVlcnlQcmVmaXggPT09IHRydWUgPyAnPycgOiAnJztcblxuICAgIGlmIChvcHRpb25zLmNoYXJzZXRTZW50aW5lbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5jaGFyc2V0ID09PSAnaXNvLTg4NTktMScpIHtcbiAgICAgICAgICAgIC8vIGVuY29kZVVSSUNvbXBvbmVudCgnJiMxMDAwMzsnKSwgdGhlIFwibnVtZXJpYyBlbnRpdHlcIiByZXByZXNlbnRhdGlvbiBvZiBhIGNoZWNrbWFya1xuICAgICAgICAgICAgcHJlZml4ICs9ICd1dGY4PSUyNiUyMzEwMDAzJTNCJic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBlbmNvZGVVUklDb21wb25lbnQoJ+KckycpXG4gICAgICAgICAgICBwcmVmaXggKz0gJ3V0Zjg9JUUyJTlDJTkzJic7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gam9pbmVkLmxlbmd0aCA+IDAgPyBwcmVmaXggKyBqb2luZWQgOiAnJztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBmb3JtYXRzID0gcmVxdWlyZSgnLi9mb3JtYXRzJyk7XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG52YXIgaGV4VGFibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcnJheSA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgICAgICAgYXJyYXkucHVzaCgnJScgKyAoKGkgPCAxNiA/ICcwJyA6ICcnKSArIGkudG9TdHJpbmcoMTYpKS50b1VwcGVyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG59KCkpO1xuXG52YXIgY29tcGFjdFF1ZXVlID0gZnVuY3Rpb24gY29tcGFjdFF1ZXVlKHF1ZXVlKSB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdmFyIG9iaiA9IGl0ZW0ub2JqW2l0ZW0ucHJvcF07XG5cbiAgICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgdmFyIGNvbXBhY3RlZCA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2pdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBjb21wYWN0ZWQucHVzaChvYmpbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbS5vYmpbaXRlbS5wcm9wXSA9IGNvbXBhY3RlZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBhcnJheVRvT2JqZWN0ID0gZnVuY3Rpb24gYXJyYXlUb09iamVjdChzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2JqID0gb3B0aW9ucyAmJiBvcHRpb25zLnBsYWluT2JqZWN0cyA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtpXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9ialtpXSA9IHNvdXJjZVtpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG59O1xuXG52YXIgbWVyZ2UgPSBmdW5jdGlvbiBtZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgIC8qIGVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogMCAqL1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5wdXNoKHNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ICYmIHR5cGVvZiB0YXJnZXQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMgJiYgKG9wdGlvbnMucGxhaW5PYmplY3RzIHx8IG9wdGlvbnMuYWxsb3dQcm90b3R5cGVzKSkgfHwgIWhhcy5jYWxsKE9iamVjdC5wcm90b3R5cGUsIHNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbc291cmNlXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3RhcmdldCwgc291cmNlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgaWYgKCF0YXJnZXQgfHwgdHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIFt0YXJnZXRdLmNvbmNhdChzb3VyY2UpO1xuICAgIH1cblxuICAgIHZhciBtZXJnZVRhcmdldCA9IHRhcmdldDtcbiAgICBpZiAoaXNBcnJheSh0YXJnZXQpICYmICFpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgbWVyZ2VUYXJnZXQgPSBhcnJheVRvT2JqZWN0KHRhcmdldCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkodGFyZ2V0KSAmJiBpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgc291cmNlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgIGlmIChoYXMuY2FsbCh0YXJnZXQsIGkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSB0YXJnZXRbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEl0ZW0gJiYgdHlwZW9mIHRhcmdldEl0ZW0gPT09ICdvYmplY3QnICYmIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtpXSA9IG1lcmdlKHRhcmdldEl0ZW0sIGl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2ldID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICAgICAgICBpZiAoaGFzLmNhbGwoYWNjLCBrZXkpKSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IG1lcmdlKGFjY1trZXldLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgbWVyZ2VUYXJnZXQpO1xufTtcblxudmFyIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnblNpbmdsZVNvdXJjZSh0YXJnZXQsIHNvdXJjZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgYWNjW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB0YXJnZXQpO1xufTtcblxudmFyIGRlY29kZSA9IGZ1bmN0aW9uIChzdHIsIGRlY29kZXIsIGNoYXJzZXQpIHtcbiAgICB2YXIgc3RyV2l0aG91dFBsdXMgPSBzdHIucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgaWYgKGNoYXJzZXQgPT09ICdpc28tODg1OS0xJykge1xuICAgICAgICAvLyB1bmVzY2FwZSBuZXZlciB0aHJvd3MsIG5vIHRyeS4uLmNhdGNoIG5lZWRlZDpcbiAgICAgICAgcmV0dXJuIHN0cldpdGhvdXRQbHVzLnJlcGxhY2UoLyVbMC05YS1mXXsyfS9naSwgdW5lc2NhcGUpO1xuICAgIH1cbiAgICAvLyB1dGYtOFxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyV2l0aG91dFBsdXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHN0cldpdGhvdXRQbHVzO1xuICAgIH1cbn07XG5cbnZhciBlbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoc3RyLCBkZWZhdWx0RW5jb2RlciwgY2hhcnNldCwga2luZCwgZm9ybWF0KSB7XG4gICAgLy8gVGhpcyBjb2RlIHdhcyBvcmlnaW5hbGx5IHdyaXR0ZW4gYnkgQnJpYW4gV2hpdGUgKG1zY2RleCkgZm9yIHRoZSBpby5qcyBjb3JlIHF1ZXJ5c3RyaW5nIGxpYnJhcnkuXG4gICAgLy8gSXQgaGFzIGJlZW4gYWRhcHRlZCBoZXJlIGZvciBzdHJpY3RlciBhZGhlcmVuY2UgdG8gUkZDIDM5ODZcbiAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICAgIHZhciBzdHJpbmcgPSBzdHI7XG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzeW1ib2wnKSB7XG4gICAgICAgIHN0cmluZyA9IFN5bWJvbC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzdHIpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgc3RyaW5nID0gU3RyaW5nKHN0cik7XG4gICAgfVxuXG4gICAgaWYgKGNoYXJzZXQgPT09ICdpc28tODg1OS0xJykge1xuICAgICAgICByZXR1cm4gZXNjYXBlKHN0cmluZykucmVwbGFjZSgvJXVbMC05YS1mXXs0fS9naSwgZnVuY3Rpb24gKCQwKSB7XG4gICAgICAgICAgICByZXR1cm4gJyUyNiUyMycgKyBwYXJzZUludCgkMC5zbGljZSgyKSwgMTYpICsgJyUzQic7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBvdXQgPSAnJztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgYyA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGMgPT09IDB4MkQgLy8gLVxuICAgICAgICAgICAgfHwgYyA9PT0gMHgyRSAvLyAuXG4gICAgICAgICAgICB8fCBjID09PSAweDVGIC8vIF9cbiAgICAgICAgICAgIHx8IGMgPT09IDB4N0UgLy8gflxuICAgICAgICAgICAgfHwgKGMgPj0gMHgzMCAmJiBjIDw9IDB4MzkpIC8vIDAtOVxuICAgICAgICAgICAgfHwgKGMgPj0gMHg0MSAmJiBjIDw9IDB4NUEpIC8vIGEtelxuICAgICAgICAgICAgfHwgKGMgPj0gMHg2MSAmJiBjIDw9IDB4N0EpIC8vIEEtWlxuICAgICAgICAgICAgfHwgKGZvcm1hdCA9PT0gZm9ybWF0cy5SRkMxNzM4ICYmIChjID09PSAweDI4IHx8IGMgPT09IDB4MjkpKSAvLyAoIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBvdXQgKz0gc3RyaW5nLmNoYXJBdChpKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAgICAgICBvdXQgPSBvdXQgKyBoZXhUYWJsZVtjXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGMgPCAweDgwMCkge1xuICAgICAgICAgICAgb3V0ID0gb3V0ICsgKGhleFRhYmxlWzB4QzAgfCAoYyA+PiA2KV0gKyBoZXhUYWJsZVsweDgwIHwgKGMgJiAweDNGKV0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYyA8IDB4RDgwMCB8fCBjID49IDB4RTAwMCkge1xuICAgICAgICAgICAgb3V0ID0gb3V0ICsgKGhleFRhYmxlWzB4RTAgfCAoYyA+PiAxMildICsgaGV4VGFibGVbMHg4MCB8ICgoYyA+PiA2KSAmIDB4M0YpXSArIGhleFRhYmxlWzB4ODAgfCAoYyAmIDB4M0YpXSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGkgKz0gMTtcbiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKChjICYgMHgzRkYpIDw8IDEwKSB8IChzdHJpbmcuY2hhckNvZGVBdChpKSAmIDB4M0ZGKSk7XG4gICAgICAgIC8qIGVzbGludCBvcGVyYXRvci1saW5lYnJlYWs6IFsyLCBcImJlZm9yZVwiXSAqL1xuICAgICAgICBvdXQgKz0gaGV4VGFibGVbMHhGMCB8IChjID4+IDE4KV1cbiAgICAgICAgICAgICsgaGV4VGFibGVbMHg4MCB8ICgoYyA+PiAxMikgJiAweDNGKV1cbiAgICAgICAgICAgICsgaGV4VGFibGVbMHg4MCB8ICgoYyA+PiA2KSAmIDB4M0YpXVxuICAgICAgICAgICAgKyBoZXhUYWJsZVsweDgwIHwgKGMgJiAweDNGKV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbnZhciBjb21wYWN0ID0gZnVuY3Rpb24gY29tcGFjdCh2YWx1ZSkge1xuICAgIHZhciBxdWV1ZSA9IFt7IG9iajogeyBvOiB2YWx1ZSB9LCBwcm9wOiAnbycgfV07XG4gICAgdmFyIHJlZnMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBxdWV1ZVtpXTtcbiAgICAgICAgdmFyIG9iaiA9IGl0ZW0ub2JqW2l0ZW0ucHJvcF07XG5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2pdO1xuICAgICAgICAgICAgdmFyIHZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIHZhbCAhPT0gbnVsbCAmJiByZWZzLmluZGV4T2YodmFsKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHsgb2JqOiBvYmosIHByb3A6IGtleSB9KTtcbiAgICAgICAgICAgICAgICByZWZzLnB1c2godmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBhY3RRdWV1ZShxdWV1ZSk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuXG52YXIgaXNSZWdFeHAgPSBmdW5jdGlvbiBpc1JlZ0V4cChvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufTtcblxudmFyIGlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIob2JqKSB7XG4gICAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAhIShvYmouY29uc3RydWN0b3IgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopKTtcbn07XG5cbnZhciBjb21iaW5lID0gZnVuY3Rpb24gY29tYmluZShhLCBiKSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdChhLCBiKTtcbn07XG5cbnZhciBtYXliZU1hcCA9IGZ1bmN0aW9uIG1heWJlTWFwKHZhbCwgZm4pIHtcbiAgICBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIHZhciBtYXBwZWQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIG1hcHBlZC5wdXNoKGZuKHZhbFtpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXBwZWQ7XG4gICAgfVxuICAgIHJldHVybiBmbih2YWwpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgYXJyYXlUb09iamVjdDogYXJyYXlUb09iamVjdCxcbiAgICBhc3NpZ246IGFzc2lnbixcbiAgICBjb21iaW5lOiBjb21iaW5lLFxuICAgIGNvbXBhY3Q6IGNvbXBhY3QsXG4gICAgZGVjb2RlOiBkZWNvZGUsXG4gICAgZW5jb2RlOiBlbmNvZGUsXG4gICAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICAgIGlzUmVnRXhwOiBpc1JlZ0V4cCxcbiAgICBtYXliZU1hcDogbWF5YmVNYXAsXG4gICAgbWVyZ2U6IG1lcmdlXG59O1xuIiwidmFyIG4sbCx1LGksdCxvLHIsZj17fSxlPVtdLGM9L2FjaXR8ZXgoPzpzfGd8bnxwfCQpfHJwaHxncmlkfG93c3xtbmN8bnR3fGluZVtjaF18em9vfF5vcmR8aXRlcmEvaTtmdW5jdGlvbiBzKG4sbCl7Zm9yKHZhciB1IGluIGwpblt1XT1sW3VdO3JldHVybiBufWZ1bmN0aW9uIGEobil7dmFyIGw9bi5wYXJlbnROb2RlO2wmJmwucmVtb3ZlQ2hpbGQobil9ZnVuY3Rpb24gaChsLHUsaSl7dmFyIHQsbyxyLGY9e307Zm9yKHIgaW4gdSlcImtleVwiPT1yP3Q9dVtyXTpcInJlZlwiPT1yP289dVtyXTpmW3JdPXVbcl07aWYoYXJndW1lbnRzLmxlbmd0aD4yJiYoZi5jaGlsZHJlbj1hcmd1bWVudHMubGVuZ3RoPjM/bi5jYWxsKGFyZ3VtZW50cywyKTppKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBsJiZudWxsIT1sLmRlZmF1bHRQcm9wcylmb3IociBpbiBsLmRlZmF1bHRQcm9wcyl2b2lkIDA9PT1mW3JdJiYoZltyXT1sLmRlZmF1bHRQcm9wc1tyXSk7cmV0dXJuIHYobCxmLHQsbyxudWxsKX1mdW5jdGlvbiB2KG4saSx0LG8scil7dmFyIGY9e3R5cGU6bixwcm9wczppLGtleTp0LHJlZjpvLF9fazpudWxsLF9fOm51bGwsX19iOjAsX19lOm51bGwsX19kOnZvaWQgMCxfX2M6bnVsbCxfX2g6bnVsbCxjb25zdHJ1Y3Rvcjp2b2lkIDAsX192Om51bGw9PXI/Kyt1OnJ9O3JldHVybiBudWxsPT1yJiZudWxsIT1sLnZub2RlJiZsLnZub2RlKGYpLGZ9ZnVuY3Rpb24geSgpe3JldHVybntjdXJyZW50Om51bGx9fWZ1bmN0aW9uIHAobil7cmV0dXJuIG4uY2hpbGRyZW59ZnVuY3Rpb24gZChuLGwpe3RoaXMucHJvcHM9bix0aGlzLmNvbnRleHQ9bH1mdW5jdGlvbiBfKG4sbCl7aWYobnVsbD09bClyZXR1cm4gbi5fXz9fKG4uX18sbi5fXy5fX2suaW5kZXhPZihuKSsxKTpudWxsO2Zvcih2YXIgdTtsPG4uX19rLmxlbmd0aDtsKyspaWYobnVsbCE9KHU9bi5fX2tbbF0pJiZudWxsIT11Ll9fZSlyZXR1cm4gdS5fX2U7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygbi50eXBlP18obik6bnVsbH1mdW5jdGlvbiBrKG4pe3ZhciBsLHU7aWYobnVsbCE9KG49bi5fXykmJm51bGwhPW4uX19jKXtmb3Iobi5fX2U9bi5fX2MuYmFzZT1udWxsLGw9MDtsPG4uX19rLmxlbmd0aDtsKyspaWYobnVsbCE9KHU9bi5fX2tbbF0pJiZudWxsIT11Ll9fZSl7bi5fX2U9bi5fX2MuYmFzZT11Ll9fZTticmVha31yZXR1cm4gayhuKX19ZnVuY3Rpb24gYihuKXsoIW4uX19kJiYobi5fX2Q9ITApJiZ0LnB1c2gobikmJiFnLl9fcisrfHxvIT09bC5kZWJvdW5jZVJlbmRlcmluZykmJigobz1sLmRlYm91bmNlUmVuZGVyaW5nKXx8c2V0VGltZW91dCkoZyl9ZnVuY3Rpb24gZygpe2Zvcih2YXIgbjtnLl9fcj10Lmxlbmd0aDspbj10LnNvcnQoZnVuY3Rpb24obixsKXtyZXR1cm4gbi5fX3YuX19iLWwuX192Ll9fYn0pLHQ9W10sbi5zb21lKGZ1bmN0aW9uKG4pe3ZhciBsLHUsaSx0LG8scjtuLl9fZCYmKG89KHQ9KGw9bikuX192KS5fX2UsKHI9bC5fX1ApJiYodT1bXSwoaT1zKHt9LHQpKS5fX3Y9dC5fX3YrMSxqKHIsdCxpLGwuX19uLHZvaWQgMCE9PXIub3duZXJTVkdFbGVtZW50LG51bGwhPXQuX19oP1tvXTpudWxsLHUsbnVsbD09bz9fKHQpOm8sdC5fX2gpLHoodSx0KSx0Ll9fZSE9byYmayh0KSkpfSl9ZnVuY3Rpb24gdyhuLGwsdSxpLHQsbyxyLGMscyxhKXt2YXIgaCx5LGQsayxiLGcsdyx4PWkmJmkuX19rfHxlLEM9eC5sZW5ndGg7Zm9yKHUuX19rPVtdLGg9MDtoPGwubGVuZ3RoO2grKylpZihudWxsIT0oaz11Ll9fa1toXT1udWxsPT0oaz1sW2hdKXx8XCJib29sZWFuXCI9PXR5cGVvZiBrP251bGw6XCJzdHJpbmdcIj09dHlwZW9mIGt8fFwibnVtYmVyXCI9PXR5cGVvZiBrfHxcImJpZ2ludFwiPT10eXBlb2Ygaz92KG51bGwsayxudWxsLG51bGwsayk6QXJyYXkuaXNBcnJheShrKT92KHAse2NoaWxkcmVuOmt9LG51bGwsbnVsbCxudWxsKTprLl9fYj4wP3Yoay50eXBlLGsucHJvcHMsay5rZXksay5yZWY/ay5yZWY6bnVsbCxrLl9fdik6aykpe2lmKGsuX189dSxrLl9fYj11Ll9fYisxLG51bGw9PT0oZD14W2hdKXx8ZCYmay5rZXk9PWQua2V5JiZrLnR5cGU9PT1kLnR5cGUpeFtoXT12b2lkIDA7ZWxzZSBmb3IoeT0wO3k8Qzt5Kyspe2lmKChkPXhbeV0pJiZrLmtleT09ZC5rZXkmJmsudHlwZT09PWQudHlwZSl7eFt5XT12b2lkIDA7YnJlYWt9ZD1udWxsfWoobixrLGQ9ZHx8Zix0LG8scixjLHMsYSksYj1rLl9fZSwoeT1rLnJlZikmJmQucmVmIT15JiYod3x8KHc9W10pLGQucmVmJiZ3LnB1c2goZC5yZWYsbnVsbCxrKSx3LnB1c2goeSxrLl9fY3x8YixrKSksbnVsbCE9Yj8obnVsbD09ZyYmKGc9YiksXCJmdW5jdGlvblwiPT10eXBlb2Ygay50eXBlJiZrLl9faz09PWQuX19rP2suX19kPXM9bShrLHMsbik6cz1BKG4sayxkLHgsYixzKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB1LnR5cGUmJih1Ll9fZD1zKSk6cyYmZC5fX2U9PXMmJnMucGFyZW50Tm9kZSE9biYmKHM9XyhkKSl9Zm9yKHUuX19lPWcsaD1DO2gtLTspbnVsbCE9eFtoXSYmTih4W2hdLHhbaF0pO2lmKHcpZm9yKGg9MDtoPHcubGVuZ3RoO2grKylNKHdbaF0sd1srK2hdLHdbKytoXSl9ZnVuY3Rpb24gbShuLGwsdSl7Zm9yKHZhciBpLHQ9bi5fX2ssbz0wO3QmJm88dC5sZW5ndGg7bysrKShpPXRbb10pJiYoaS5fXz1uLGw9XCJmdW5jdGlvblwiPT10eXBlb2YgaS50eXBlP20oaSxsLHUpOkEodSxpLGksdCxpLl9fZSxsKSk7cmV0dXJuIGx9ZnVuY3Rpb24geChuLGwpe3JldHVybiBsPWx8fFtdLG51bGw9PW58fFwiYm9vbGVhblwiPT10eXBlb2Ygbnx8KEFycmF5LmlzQXJyYXkobik/bi5zb21lKGZ1bmN0aW9uKG4pe3gobixsKX0pOmwucHVzaChuKSksbH1mdW5jdGlvbiBBKG4sbCx1LGksdCxvKXt2YXIgcixmLGU7aWYodm9pZCAwIT09bC5fX2Qpcj1sLl9fZCxsLl9fZD12b2lkIDA7ZWxzZSBpZihudWxsPT11fHx0IT1vfHxudWxsPT10LnBhcmVudE5vZGUpbjppZihudWxsPT1vfHxvLnBhcmVudE5vZGUhPT1uKW4uYXBwZW5kQ2hpbGQodCkscj1udWxsO2Vsc2V7Zm9yKGY9byxlPTA7KGY9Zi5uZXh0U2libGluZykmJmU8aS5sZW5ndGg7ZSs9MilpZihmPT10KWJyZWFrIG47bi5pbnNlcnRCZWZvcmUodCxvKSxyPW99cmV0dXJuIHZvaWQgMCE9PXI/cjp0Lm5leHRTaWJsaW5nfWZ1bmN0aW9uIEMobixsLHUsaSx0KXt2YXIgbztmb3IobyBpbiB1KVwiY2hpbGRyZW5cIj09PW98fFwia2V5XCI9PT1vfHxvIGluIGx8fEgobixvLG51bGwsdVtvXSxpKTtmb3IobyBpbiBsKXQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGxbb118fFwiY2hpbGRyZW5cIj09PW98fFwia2V5XCI9PT1vfHxcInZhbHVlXCI9PT1vfHxcImNoZWNrZWRcIj09PW98fHVbb109PT1sW29dfHxIKG4sbyxsW29dLHVbb10saSl9ZnVuY3Rpb24gJChuLGwsdSl7XCItXCI9PT1sWzBdP24uc2V0UHJvcGVydHkobCx1KTpuW2xdPW51bGw9PXU/XCJcIjpcIm51bWJlclwiIT10eXBlb2YgdXx8Yy50ZXN0KGwpP3U6dStcInB4XCJ9ZnVuY3Rpb24gSChuLGwsdSxpLHQpe3ZhciBvO246aWYoXCJzdHlsZVwiPT09bClpZihcInN0cmluZ1wiPT10eXBlb2YgdSluLnN0eWxlLmNzc1RleHQ9dTtlbHNle2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpJiYobi5zdHlsZS5jc3NUZXh0PWk9XCJcIiksaSlmb3IobCBpbiBpKXUmJmwgaW4gdXx8JChuLnN0eWxlLGwsXCJcIik7aWYodSlmb3IobCBpbiB1KWkmJnVbbF09PT1pW2xdfHwkKG4uc3R5bGUsbCx1W2xdKX1lbHNlIGlmKFwib1wiPT09bFswXSYmXCJuXCI9PT1sWzFdKW89bCE9PShsPWwucmVwbGFjZSgvQ2FwdHVyZSQvLFwiXCIpKSxsPWwudG9Mb3dlckNhc2UoKWluIG4/bC50b0xvd2VyQ2FzZSgpLnNsaWNlKDIpOmwuc2xpY2UoMiksbi5sfHwobi5sPXt9KSxuLmxbbCtvXT11LHU/aXx8bi5hZGRFdmVudExpc3RlbmVyKGwsbz9UOkksbyk6bi5yZW1vdmVFdmVudExpc3RlbmVyKGwsbz9UOkksbyk7ZWxzZSBpZihcImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MXCIhPT1sKXtpZih0KWw9bC5yZXBsYWNlKC94bGluayhIfDpoKS8sXCJoXCIpLnJlcGxhY2UoL3NOYW1lJC8sXCJzXCIpO2Vsc2UgaWYoXCJocmVmXCIhPT1sJiZcImxpc3RcIiE9PWwmJlwiZm9ybVwiIT09bCYmXCJ0YWJJbmRleFwiIT09bCYmXCJkb3dubG9hZFwiIT09bCYmbCBpbiBuKXRyeXtuW2xdPW51bGw9PXU/XCJcIjp1O2JyZWFrIG59Y2F0Y2gobil7fVwiZnVuY3Rpb25cIj09dHlwZW9mIHV8fChudWxsPT11fHwhMT09PXUmJi0xPT1sLmluZGV4T2YoXCItXCIpP24ucmVtb3ZlQXR0cmlidXRlKGwpOm4uc2V0QXR0cmlidXRlKGwsdSkpfX1mdW5jdGlvbiBJKG4pe3RoaXMubFtuLnR5cGUrITFdKGwuZXZlbnQ/bC5ldmVudChuKTpuKX1mdW5jdGlvbiBUKG4pe3RoaXMubFtuLnR5cGUrITBdKGwuZXZlbnQ/bC5ldmVudChuKTpuKX1mdW5jdGlvbiBqKG4sdSxpLHQsbyxyLGYsZSxjKXt2YXIgYSxoLHYseSxfLGssYixnLG0seCxBLEMsJCxILEksVD11LnR5cGU7aWYodm9pZCAwIT09dS5jb25zdHJ1Y3RvcilyZXR1cm4gbnVsbDtudWxsIT1pLl9faCYmKGM9aS5fX2gsZT11Ll9fZT1pLl9fZSx1Ll9faD1udWxsLHI9W2VdKSwoYT1sLl9fYikmJmEodSk7dHJ5e246aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgVCl7aWYoZz11LnByb3BzLG09KGE9VC5jb250ZXh0VHlwZSkmJnRbYS5fX2NdLHg9YT9tP20ucHJvcHMudmFsdWU6YS5fXzp0LGkuX19jP2I9KGg9dS5fX2M9aS5fX2MpLl9fPWguX19FOihcInByb3RvdHlwZVwiaW4gVCYmVC5wcm90b3R5cGUucmVuZGVyP3UuX19jPWg9bmV3IFQoZyx4KToodS5fX2M9aD1uZXcgZChnLHgpLGguY29uc3RydWN0b3I9VCxoLnJlbmRlcj1PKSxtJiZtLnN1YihoKSxoLnByb3BzPWcsaC5zdGF0ZXx8KGguc3RhdGU9e30pLGguY29udGV4dD14LGguX19uPXQsdj1oLl9fZD0hMCxoLl9faD1bXSxoLl9zYj1bXSksbnVsbD09aC5fX3MmJihoLl9fcz1oLnN0YXRlKSxudWxsIT1ULmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyYmKGguX19zPT1oLnN0YXRlJiYoaC5fX3M9cyh7fSxoLl9fcykpLHMoaC5fX3MsVC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMoZyxoLl9fcykpKSx5PWgucHJvcHMsXz1oLnN0YXRlLHYpbnVsbD09VC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMmJm51bGwhPWguY29tcG9uZW50V2lsbE1vdW50JiZoLmNvbXBvbmVudFdpbGxNb3VudCgpLG51bGwhPWguY29tcG9uZW50RGlkTW91bnQmJmguX19oLnB1c2goaC5jb21wb25lbnREaWRNb3VudCk7ZWxzZXtpZihudWxsPT1ULmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyYmZyE9PXkmJm51bGwhPWguY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyYmaC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKGcseCksIWguX19lJiZudWxsIT1oLnNob3VsZENvbXBvbmVudFVwZGF0ZSYmITE9PT1oLnNob3VsZENvbXBvbmVudFVwZGF0ZShnLGguX19zLHgpfHx1Ll9fdj09PWkuX192KXtmb3IoaC5wcm9wcz1nLGguc3RhdGU9aC5fX3MsdS5fX3YhPT1pLl9fdiYmKGguX19kPSExKSxoLl9fdj11LHUuX19lPWkuX19lLHUuX19rPWkuX19rLHUuX19rLmZvckVhY2goZnVuY3Rpb24obil7biYmKG4uX189dSl9KSxBPTA7QTxoLl9zYi5sZW5ndGg7QSsrKWguX19oLnB1c2goaC5fc2JbQV0pO2guX3NiPVtdLGguX19oLmxlbmd0aCYmZi5wdXNoKGgpO2JyZWFrIG59bnVsbCE9aC5jb21wb25lbnRXaWxsVXBkYXRlJiZoLmNvbXBvbmVudFdpbGxVcGRhdGUoZyxoLl9fcyx4KSxudWxsIT1oLmNvbXBvbmVudERpZFVwZGF0ZSYmaC5fX2gucHVzaChmdW5jdGlvbigpe2guY29tcG9uZW50RGlkVXBkYXRlKHksXyxrKX0pfWlmKGguY29udGV4dD14LGgucHJvcHM9ZyxoLl9fdj11LGguX19QPW4sQz1sLl9fciwkPTAsXCJwcm90b3R5cGVcImluIFQmJlQucHJvdG90eXBlLnJlbmRlcil7Zm9yKGguc3RhdGU9aC5fX3MsaC5fX2Q9ITEsQyYmQyh1KSxhPWgucmVuZGVyKGgucHJvcHMsaC5zdGF0ZSxoLmNvbnRleHQpLEg9MDtIPGguX3NiLmxlbmd0aDtIKyspaC5fX2gucHVzaChoLl9zYltIXSk7aC5fc2I9W119ZWxzZSBkb3toLl9fZD0hMSxDJiZDKHUpLGE9aC5yZW5kZXIoaC5wcm9wcyxoLnN0YXRlLGguY29udGV4dCksaC5zdGF0ZT1oLl9fc313aGlsZShoLl9fZCYmKyskPDI1KTtoLnN0YXRlPWguX19zLG51bGwhPWguZ2V0Q2hpbGRDb250ZXh0JiYodD1zKHMoe30sdCksaC5nZXRDaGlsZENvbnRleHQoKSkpLHZ8fG51bGw9PWguZ2V0U25hcHNob3RCZWZvcmVVcGRhdGV8fChrPWguZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoeSxfKSksST1udWxsIT1hJiZhLnR5cGU9PT1wJiZudWxsPT1hLmtleT9hLnByb3BzLmNoaWxkcmVuOmEsdyhuLEFycmF5LmlzQXJyYXkoSSk/STpbSV0sdSxpLHQsbyxyLGYsZSxjKSxoLmJhc2U9dS5fX2UsdS5fX2g9bnVsbCxoLl9faC5sZW5ndGgmJmYucHVzaChoKSxiJiYoaC5fX0U9aC5fXz1udWxsKSxoLl9fZT0hMX1lbHNlIG51bGw9PXImJnUuX192PT09aS5fX3Y/KHUuX19rPWkuX19rLHUuX19lPWkuX19lKTp1Ll9fZT1MKGkuX19lLHUsaSx0LG8scixmLGMpOyhhPWwuZGlmZmVkKSYmYSh1KX1jYXRjaChuKXt1Ll9fdj1udWxsLChjfHxudWxsIT1yKSYmKHUuX19lPWUsdS5fX2g9ISFjLHJbci5pbmRleE9mKGUpXT1udWxsKSxsLl9fZShuLHUsaSl9fWZ1bmN0aW9uIHoobix1KXtsLl9fYyYmbC5fX2ModSxuKSxuLnNvbWUoZnVuY3Rpb24odSl7dHJ5e249dS5fX2gsdS5fX2g9W10sbi5zb21lKGZ1bmN0aW9uKG4pe24uY2FsbCh1KX0pfWNhdGNoKG4pe2wuX19lKG4sdS5fX3YpfX0pfWZ1bmN0aW9uIEwobCx1LGksdCxvLHIsZSxjKXt2YXIgcyxoLHYseT1pLnByb3BzLHA9dS5wcm9wcyxkPXUudHlwZSxrPTA7aWYoXCJzdmdcIj09PWQmJihvPSEwKSxudWxsIT1yKWZvcig7azxyLmxlbmd0aDtrKyspaWYoKHM9cltrXSkmJlwic2V0QXR0cmlidXRlXCJpbiBzPT0hIWQmJihkP3MubG9jYWxOYW1lPT09ZDozPT09cy5ub2RlVHlwZSkpe2w9cyxyW2tdPW51bGw7YnJlYWt9aWYobnVsbD09bCl7aWYobnVsbD09PWQpcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHApO2w9bz9kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLGQpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCxwLmlzJiZwKSxyPW51bGwsYz0hMX1pZihudWxsPT09ZCl5PT09cHx8YyYmbC5kYXRhPT09cHx8KGwuZGF0YT1wKTtlbHNle2lmKHI9ciYmbi5jYWxsKGwuY2hpbGROb2RlcyksaD0oeT1pLnByb3BzfHxmKS5kYW5nZXJvdXNseVNldElubmVySFRNTCx2PXAuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwsIWMpe2lmKG51bGwhPXIpZm9yKHk9e30saz0wO2s8bC5hdHRyaWJ1dGVzLmxlbmd0aDtrKyspeVtsLmF0dHJpYnV0ZXNba10ubmFtZV09bC5hdHRyaWJ1dGVzW2tdLnZhbHVlOyh2fHxoKSYmKHYmJihoJiZ2Ll9faHRtbD09aC5fX2h0bWx8fHYuX19odG1sPT09bC5pbm5lckhUTUwpfHwobC5pbm5lckhUTUw9diYmdi5fX2h0bWx8fFwiXCIpKX1pZihDKGwscCx5LG8sYyksdil1Ll9faz1bXTtlbHNlIGlmKGs9dS5wcm9wcy5jaGlsZHJlbix3KGwsQXJyYXkuaXNBcnJheShrKT9rOltrXSx1LGksdCxvJiZcImZvcmVpZ25PYmplY3RcIiE9PWQscixlLHI/clswXTppLl9fayYmXyhpLDApLGMpLG51bGwhPXIpZm9yKGs9ci5sZW5ndGg7ay0tOyludWxsIT1yW2tdJiZhKHJba10pO2N8fChcInZhbHVlXCJpbiBwJiZ2b2lkIDAhPT0oaz1wLnZhbHVlKSYmKGshPT1sLnZhbHVlfHxcInByb2dyZXNzXCI9PT1kJiYha3x8XCJvcHRpb25cIj09PWQmJmshPT15LnZhbHVlKSYmSChsLFwidmFsdWVcIixrLHkudmFsdWUsITEpLFwiY2hlY2tlZFwiaW4gcCYmdm9pZCAwIT09KGs9cC5jaGVja2VkKSYmayE9PWwuY2hlY2tlZCYmSChsLFwiY2hlY2tlZFwiLGsseS5jaGVja2VkLCExKSl9cmV0dXJuIGx9ZnVuY3Rpb24gTShuLHUsaSl7dHJ5e1wiZnVuY3Rpb25cIj09dHlwZW9mIG4/bih1KTpuLmN1cnJlbnQ9dX1jYXRjaChuKXtsLl9fZShuLGkpfX1mdW5jdGlvbiBOKG4sdSxpKXt2YXIgdCxvO2lmKGwudW5tb3VudCYmbC51bm1vdW50KG4pLCh0PW4ucmVmKSYmKHQuY3VycmVudCYmdC5jdXJyZW50IT09bi5fX2V8fE0odCxudWxsLHUpKSxudWxsIT0odD1uLl9fYykpe2lmKHQuY29tcG9uZW50V2lsbFVubW91bnQpdHJ5e3QuY29tcG9uZW50V2lsbFVubW91bnQoKX1jYXRjaChuKXtsLl9fZShuLHUpfXQuYmFzZT10Ll9fUD1udWxsLG4uX19jPXZvaWQgMH1pZih0PW4uX19rKWZvcihvPTA7bzx0Lmxlbmd0aDtvKyspdFtvXSYmTih0W29dLHUsaXx8XCJmdW5jdGlvblwiIT10eXBlb2Ygbi50eXBlKTtpfHxudWxsPT1uLl9fZXx8YShuLl9fZSksbi5fXz1uLl9fZT1uLl9fZD12b2lkIDB9ZnVuY3Rpb24gTyhuLGwsdSl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3Iobix1KX1mdW5jdGlvbiBQKHUsaSx0KXt2YXIgbyxyLGU7bC5fXyYmbC5fXyh1LGkpLHI9KG89XCJmdW5jdGlvblwiPT10eXBlb2YgdCk/bnVsbDp0JiZ0Ll9fa3x8aS5fX2ssZT1bXSxqKGksdT0oIW8mJnR8fGkpLl9faz1oKHAsbnVsbCxbdV0pLHJ8fGYsZix2b2lkIDAhPT1pLm93bmVyU1ZHRWxlbWVudCwhbyYmdD9bdF06cj9udWxsOmkuZmlyc3RDaGlsZD9uLmNhbGwoaS5jaGlsZE5vZGVzKTpudWxsLGUsIW8mJnQ/dDpyP3IuX19lOmkuZmlyc3RDaGlsZCxvKSx6KGUsdSl9ZnVuY3Rpb24gUyhuLGwpe1AobixsLFMpfWZ1bmN0aW9uIHEobCx1LGkpe3ZhciB0LG8scixmPXMoe30sbC5wcm9wcyk7Zm9yKHIgaW4gdSlcImtleVwiPT1yP3Q9dVtyXTpcInJlZlwiPT1yP289dVtyXTpmW3JdPXVbcl07cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MiYmKGYuY2hpbGRyZW49YXJndW1lbnRzLmxlbmd0aD4zP24uY2FsbChhcmd1bWVudHMsMik6aSksdihsLnR5cGUsZix0fHxsLmtleSxvfHxsLnJlZixudWxsKX1mdW5jdGlvbiBCKG4sbCl7dmFyIHU9e19fYzpsPVwiX19jQ1wiK3IrKyxfXzpuLENvbnN1bWVyOmZ1bmN0aW9uKG4sbCl7cmV0dXJuIG4uY2hpbGRyZW4obCl9LFByb3ZpZGVyOmZ1bmN0aW9uKG4pe3ZhciB1LGk7cmV0dXJuIHRoaXMuZ2V0Q2hpbGRDb250ZXh0fHwodT1bXSwoaT17fSlbbF09dGhpcyx0aGlzLmdldENoaWxkQ29udGV4dD1mdW5jdGlvbigpe3JldHVybiBpfSx0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZT1mdW5jdGlvbihuKXt0aGlzLnByb3BzLnZhbHVlIT09bi52YWx1ZSYmdS5zb21lKGIpfSx0aGlzLnN1Yj1mdW5jdGlvbihuKXt1LnB1c2gobik7dmFyIGw9bi5jb21wb25lbnRXaWxsVW5tb3VudDtuLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7dS5zcGxpY2UodS5pbmRleE9mKG4pLDEpLGwmJmwuY2FsbChuKX19KSxuLmNoaWxkcmVufX07cmV0dXJuIHUuUHJvdmlkZXIuX189dS5Db25zdW1lci5jb250ZXh0VHlwZT11fW49ZS5zbGljZSxsPXtfX2U6ZnVuY3Rpb24obixsLHUsaSl7Zm9yKHZhciB0LG8scjtsPWwuX187KWlmKCh0PWwuX19jKSYmIXQuX18pdHJ5e2lmKChvPXQuY29uc3RydWN0b3IpJiZudWxsIT1vLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvciYmKHQuc2V0U3RhdGUoby5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IobikpLHI9dC5fX2QpLG51bGwhPXQuY29tcG9uZW50RGlkQ2F0Y2gmJih0LmNvbXBvbmVudERpZENhdGNoKG4saXx8e30pLHI9dC5fX2QpLHIpcmV0dXJuIHQuX19FPXR9Y2F0Y2gobCl7bj1sfXRocm93IG59fSx1PTAsaT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbCE9biYmdm9pZCAwPT09bi5jb25zdHJ1Y3Rvcn0sZC5wcm90b3R5cGUuc2V0U3RhdGU9ZnVuY3Rpb24obixsKXt2YXIgdTt1PW51bGwhPXRoaXMuX19zJiZ0aGlzLl9fcyE9PXRoaXMuc3RhdGU/dGhpcy5fX3M6dGhpcy5fX3M9cyh7fSx0aGlzLnN0YXRlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYobj1uKHMoe30sdSksdGhpcy5wcm9wcykpLG4mJnModSxuKSxudWxsIT1uJiZ0aGlzLl9fdiYmKGwmJnRoaXMuX3NiLnB1c2gobCksYih0aGlzKSl9LGQucHJvdG90eXBlLmZvcmNlVXBkYXRlPWZ1bmN0aW9uKG4pe3RoaXMuX192JiYodGhpcy5fX2U9ITAsbiYmdGhpcy5fX2gucHVzaChuKSxiKHRoaXMpKX0sZC5wcm90b3R5cGUucmVuZGVyPXAsdD1bXSxnLl9fcj0wLHI9MDtleHBvcnR7ZCBhcyBDb21wb25lbnQscCBhcyBGcmFnbWVudCxxIGFzIGNsb25lRWxlbWVudCxCIGFzIGNyZWF0ZUNvbnRleHQsaCBhcyBjcmVhdGVFbGVtZW50LHkgYXMgY3JlYXRlUmVmLGgsUyBhcyBoeWRyYXRlLGkgYXMgaXNWYWxpZEVsZW1lbnQsbCBhcyBvcHRpb25zLFAgYXMgcmVuZGVyLHggYXMgdG9DaGlsZEFycmF5fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZWFjdC5tb2R1bGUuanMubWFwXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJpbXBvcnQgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiLi9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7XG4gIHZhciBrZXksIGk7XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG4gICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07XG4gICAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTtcbiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBjeCB9IGZyb20gJ0BhbGdvbGlhL3VpLWNvbXBvbmVudHMtc2hhcmVkJztcbmltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgSW50ZXJuYWxIaWdobGlnaHQgfSBmcm9tIFwiLi4vSW50ZXJuYWxIaWdobGlnaHQvSW50ZXJuYWxIaWdobGlnaHQuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBIaWdobGlnaHQoX3JlZikge1xuICB2YXIgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJGNsYXNzTmFtZXMsXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJjbGFzc05hbWVzXCJdKTtcblxuICByZXR1cm4gaChJbnRlcm5hbEhpZ2hsaWdodCwgX2V4dGVuZHMoe1xuICAgIGNsYXNzTmFtZXM6IHtcbiAgICAgIHJvb3Q6IGN4KCdhaXMtSGlnaGxpZ2h0JywgY2xhc3NOYW1lcy5yb290KSxcbiAgICAgIGhpZ2hsaWdodGVkOiBjeCgnYWlzLUhpZ2hsaWdodC1oaWdobGlnaHRlZCcsIGNsYXNzTmFtZXMuaGlnaGxpZ2h0ZWQpLFxuICAgICAgbm9uSGlnaGxpZ2h0ZWQ6IGN4KCdhaXMtSGlnaGxpZ2h0LW5vbkhpZ2hsaWdodGVkJywgY2xhc3NOYW1lcy5ub25IaWdobGlnaHRlZCksXG4gICAgICBzZXBhcmF0b3I6IGN4KCdhaXMtSGlnaGxpZ2h0LXNlcGFyYXRvcicsIGNsYXNzTmFtZXMuc2VwYXJhdG9yKVxuICAgIH1cbiAgfSwgcHJvcHMpKTtcbn0iLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cblxuaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgVGVtcGxhdGUgZnJvbSBcIi4uL1RlbXBsYXRlL1RlbXBsYXRlLmpzXCI7XG5cbnZhciBIaXRzID0gZnVuY3Rpb24gSGl0cyhfcmVmKSB7XG4gIHZhciByZXN1bHRzID0gX3JlZi5yZXN1bHRzLFxuICAgICAgaGl0cyA9IF9yZWYuaGl0cyxcbiAgICAgIGJpbmRFdmVudCA9IF9yZWYuYmluZEV2ZW50LFxuICAgICAgc2VuZEV2ZW50ID0gX3JlZi5zZW5kRXZlbnQsXG4gICAgICBjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgdGVtcGxhdGVQcm9wcyA9IF9yZWYudGVtcGxhdGVQcm9wcztcblxuICBpZiAocmVzdWx0cy5oaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBoKFRlbXBsYXRlLCBfZXh0ZW5kcyh7fSwgdGVtcGxhdGVQcm9wcywge1xuICAgICAgdGVtcGxhdGVLZXk6IFwiZW1wdHlcIixcbiAgICAgIHJvb3RQcm9wczoge1xuICAgICAgICBjbGFzc05hbWU6IGN4KGNzc0NsYXNzZXMucm9vdCwgY3NzQ2xhc3Nlcy5lbXB0eVJvb3QpXG4gICAgICB9LFxuICAgICAgZGF0YTogcmVzdWx0c1xuICAgIH0pKTtcbiAgfVxuXG4gIHJldHVybiBoKFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMucm9vdFxuICB9LCBoKFwib2xcIiwge1xuICAgIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5saXN0XG4gIH0sIGhpdHMubWFwKGZ1bmN0aW9uIChoaXQsIGluZGV4KSB7XG4gICAgcmV0dXJuIGgoVGVtcGxhdGUsIF9leHRlbmRzKHt9LCB0ZW1wbGF0ZVByb3BzLCB7XG4gICAgICB0ZW1wbGF0ZUtleTogXCJpdGVtXCIsXG4gICAgICByb290VGFnTmFtZTogXCJsaVwiLFxuICAgICAgcm9vdFByb3BzOiB7XG4gICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5pdGVtXG4gICAgICB9LFxuICAgICAga2V5OiBoaXQub2JqZWN0SUQsXG4gICAgICBkYXRhOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhpdCksIHt9LCB7XG4gICAgICAgIF9faGl0SW5kZXg6IGluZGV4XG4gICAgICB9KSxcbiAgICAgIGJpbmRFdmVudDogYmluZEV2ZW50LFxuICAgICAgc2VuZEV2ZW50OiBzZW5kRXZlbnRcbiAgICB9KSk7XG4gIH0pKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIaXRzOyIsImltcG9ydCB7IGNyZWF0ZUhpZ2hsaWdodENvbXBvbmVudCB9IGZyb20gJ0BhbGdvbGlhL3VpLWNvbXBvbmVudHMtaGlnaGxpZ2h0LXZkb20nO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgRnJhZ21lbnQgfSBmcm9tICdwcmVhY3QnO1xuZXhwb3J0IHZhciBJbnRlcm5hbEhpZ2hsaWdodCA9IGNyZWF0ZUhpZ2hsaWdodENvbXBvbmVudCh7XG4gIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG4gIEZyYWdtZW50OiBGcmFnbWVudFxufSk7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBpc1NwZWNpYWxDbGljayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcblxuZnVuY3Rpb24gUGFnaW5hdGlvbihwcm9wcykge1xuICBmdW5jdGlvbiBjcmVhdGVDbGlja0hhbmRsZXIocGFnZU51bWJlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChpc1NwZWNpYWxDbGljayhldmVudCkpIHtcbiAgICAgICAgLy8gZG8gbm90IGFsdGVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3JcbiAgICAgICAgLy8gaWYgb25lIHNwZWNpYWwga2V5IGlzIGRvd25cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcHJvcHMuc2V0Q3VycmVudFBhZ2UocGFnZU51bWJlcik7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBoKFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGN4KHByb3BzLmNzc0NsYXNzZXMucm9vdCwgX2RlZmluZVByb3BlcnR5KHt9LCBwcm9wcy5jc3NDbGFzc2VzLm5vUmVmaW5lbWVudFJvb3QsIHByb3BzLm5iUGFnZXMgPD0gMSkpXG4gIH0sIGgoXCJ1bFwiLCB7XG4gICAgY2xhc3NOYW1lOiBwcm9wcy5jc3NDbGFzc2VzLmxpc3RcbiAgfSwgcHJvcHMuc2hvd0ZpcnN0ICYmIGgoUGFnaW5hdGlvbkxpbmssIHtcbiAgICBhcmlhTGFiZWw6IFwiRmlyc3RcIixcbiAgICBjbGFzc05hbWU6IHByb3BzLmNzc0NsYXNzZXMuZmlyc3RQYWdlSXRlbSxcbiAgICBpc0Rpc2FibGVkOiBwcm9wcy5pc0ZpcnN0UGFnZSxcbiAgICBsYWJlbDogcHJvcHMudGVtcGxhdGVzLmZpcnN0LFxuICAgIHBhZ2VOdW1iZXI6IDAsXG4gICAgY3JlYXRlVVJMOiBwcm9wcy5jcmVhdGVVUkwsXG4gICAgY3NzQ2xhc3NlczogcHJvcHMuY3NzQ2xhc3NlcyxcbiAgICBjcmVhdGVDbGlja0hhbmRsZXI6IGNyZWF0ZUNsaWNrSGFuZGxlclxuICB9KSwgcHJvcHMuc2hvd1ByZXZpb3VzICYmIGgoUGFnaW5hdGlvbkxpbmssIHtcbiAgICBhcmlhTGFiZWw6IFwiUHJldmlvdXNcIixcbiAgICBjbGFzc05hbWU6IHByb3BzLmNzc0NsYXNzZXMucHJldmlvdXNQYWdlSXRlbSxcbiAgICBpc0Rpc2FibGVkOiBwcm9wcy5pc0ZpcnN0UGFnZSxcbiAgICBsYWJlbDogcHJvcHMudGVtcGxhdGVzLnByZXZpb3VzLFxuICAgIHBhZ2VOdW1iZXI6IHByb3BzLmN1cnJlbnRQYWdlIC0gMSxcbiAgICBjcmVhdGVVUkw6IHByb3BzLmNyZWF0ZVVSTCxcbiAgICBjc3NDbGFzc2VzOiBwcm9wcy5jc3NDbGFzc2VzLFxuICAgIGNyZWF0ZUNsaWNrSGFuZGxlcjogY3JlYXRlQ2xpY2tIYW5kbGVyXG4gIH0pLCBwcm9wcy5wYWdlcy5tYXAoZnVuY3Rpb24gKHBhZ2VOdW1iZXIpIHtcbiAgICByZXR1cm4gaChQYWdpbmF0aW9uTGluaywge1xuICAgICAga2V5OiBwYWdlTnVtYmVyLFxuICAgICAgYXJpYUxhYmVsOiBcIlwiLmNvbmNhdChwYWdlTnVtYmVyICsgMSksXG4gICAgICBjbGFzc05hbWU6IHByb3BzLmNzc0NsYXNzZXMucGFnZUl0ZW0sXG4gICAgICBpc1NlbGVjdGVkOiBwYWdlTnVtYmVyID09PSBwcm9wcy5jdXJyZW50UGFnZSxcbiAgICAgIGxhYmVsOiBcIlwiLmNvbmNhdChwYWdlTnVtYmVyICsgMSksXG4gICAgICBwYWdlTnVtYmVyOiBwYWdlTnVtYmVyLFxuICAgICAgY3JlYXRlVVJMOiBwcm9wcy5jcmVhdGVVUkwsXG4gICAgICBjc3NDbGFzc2VzOiBwcm9wcy5jc3NDbGFzc2VzLFxuICAgICAgY3JlYXRlQ2xpY2tIYW5kbGVyOiBjcmVhdGVDbGlja0hhbmRsZXJcbiAgICB9KTtcbiAgfSksIHByb3BzLnNob3dOZXh0ICYmIGgoUGFnaW5hdGlvbkxpbmssIHtcbiAgICBhcmlhTGFiZWw6IFwiTmV4dFwiLFxuICAgIGNsYXNzTmFtZTogcHJvcHMuY3NzQ2xhc3Nlcy5uZXh0UGFnZUl0ZW0sXG4gICAgaXNEaXNhYmxlZDogcHJvcHMuaXNMYXN0UGFnZSxcbiAgICBsYWJlbDogcHJvcHMudGVtcGxhdGVzLm5leHQsXG4gICAgcGFnZU51bWJlcjogcHJvcHMuY3VycmVudFBhZ2UgKyAxLFxuICAgIGNyZWF0ZVVSTDogcHJvcHMuY3JlYXRlVVJMLFxuICAgIGNzc0NsYXNzZXM6IHByb3BzLmNzc0NsYXNzZXMsXG4gICAgY3JlYXRlQ2xpY2tIYW5kbGVyOiBjcmVhdGVDbGlja0hhbmRsZXJcbiAgfSksIHByb3BzLnNob3dMYXN0ICYmIGgoUGFnaW5hdGlvbkxpbmssIHtcbiAgICBhcmlhTGFiZWw6IFwiTGFzdFwiLFxuICAgIGNsYXNzTmFtZTogcHJvcHMuY3NzQ2xhc3Nlcy5sYXN0UGFnZUl0ZW0sXG4gICAgaXNEaXNhYmxlZDogcHJvcHMuaXNMYXN0UGFnZSxcbiAgICBsYWJlbDogcHJvcHMudGVtcGxhdGVzLmxhc3QsXG4gICAgcGFnZU51bWJlcjogcHJvcHMubmJQYWdlcyAtIDEsXG4gICAgY3JlYXRlVVJMOiBwcm9wcy5jcmVhdGVVUkwsXG4gICAgY3NzQ2xhc3NlczogcHJvcHMuY3NzQ2xhc3NlcyxcbiAgICBjcmVhdGVDbGlja0hhbmRsZXI6IGNyZWF0ZUNsaWNrSGFuZGxlclxuICB9KSkpO1xufVxuXG5mdW5jdGlvbiBQYWdpbmF0aW9uTGluayhfcmVmKSB7XG4gIHZhciBsYWJlbCA9IF9yZWYubGFiZWwsXG4gICAgICBhcmlhTGFiZWwgPSBfcmVmLmFyaWFMYWJlbCxcbiAgICAgIHBhZ2VOdW1iZXIgPSBfcmVmLnBhZ2VOdW1iZXIsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIF9yZWYkaXNEaXNhYmxlZCA9IF9yZWYuaXNEaXNhYmxlZCxcbiAgICAgIGlzRGlzYWJsZWQgPSBfcmVmJGlzRGlzYWJsZWQgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc0Rpc2FibGVkLFxuICAgICAgX3JlZiRpc1NlbGVjdGVkID0gX3JlZi5pc1NlbGVjdGVkLFxuICAgICAgaXNTZWxlY3RlZCA9IF9yZWYkaXNTZWxlY3RlZCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGlzU2VsZWN0ZWQsXG4gICAgICBjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgY3JlYXRlVVJMID0gX3JlZi5jcmVhdGVVUkwsXG4gICAgICBjcmVhdGVDbGlja0hhbmRsZXIgPSBfcmVmLmNyZWF0ZUNsaWNrSGFuZGxlcjtcbiAgcmV0dXJuIGgoXCJsaVwiLCB7XG4gICAgY2xhc3NOYW1lOiBjeChjc3NDbGFzc2VzLml0ZW0sIGNsYXNzTmFtZSwgaXNEaXNhYmxlZCAmJiBjc3NDbGFzc2VzLmRpc2FibGVkSXRlbSwgaXNTZWxlY3RlZCAmJiBjc3NDbGFzc2VzLnNlbGVjdGVkSXRlbSlcbiAgfSwgaXNEaXNhYmxlZCA/IGgoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMubGluayxcbiAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgX19odG1sOiBsYWJlbFxuICAgIH1cbiAgfSkgOiBoKFwiYVwiLCB7XG4gICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmxpbmssXG4gICAgXCJhcmlhLWxhYmVsXCI6IGFyaWFMYWJlbCxcbiAgICBocmVmOiBjcmVhdGVVUkwocGFnZU51bWJlciksXG4gICAgb25DbGljazogY3JlYXRlQ2xpY2tIYW5kbGVyKHBhZ2VOdW1iZXIpLFxuICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgICBfX2h0bWw6IGxhYmVsXG4gICAgfVxuICB9KSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhZ2luYXRpb247IiwiZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsgdmFyIGtleSwgaTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IHsgY3ggfSBmcm9tICdAYWxnb2xpYS91aS1jb21wb25lbnRzLXNoYXJlZCc7XG5pbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IEludGVybmFsSGlnaGxpZ2h0IH0gZnJvbSBcIi4uL0ludGVybmFsSGlnaGxpZ2h0L0ludGVybmFsSGlnaGxpZ2h0LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gUmV2ZXJzZUhpZ2hsaWdodChfcmVmKSB7XG4gIHZhciBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNsYXNzTmFtZXNcIl0pO1xuXG4gIHJldHVybiBoKEludGVybmFsSGlnaGxpZ2h0LCBfZXh0ZW5kcyh7XG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgcm9vdDogY3goJ2Fpcy1SZXZlcnNlSGlnaGxpZ2h0JywgY2xhc3NOYW1lcy5yb290KSxcbiAgICAgIGhpZ2hsaWdodGVkOiBjeCgnYWlzLVJldmVyc2VIaWdobGlnaHQtaGlnaGxpZ2h0ZWQnLCBjbGFzc05hbWVzLmhpZ2hsaWdodGVkKSxcbiAgICAgIG5vbkhpZ2hsaWdodGVkOiBjeCgnYWlzLVJldmVyc2VIaWdobGlnaHQtbm9uSGlnaGxpZ2h0ZWQnLCBjbGFzc05hbWVzLm5vbkhpZ2hsaWdodGVkKSxcbiAgICAgIHNlcGFyYXRvcjogY3goJ2Fpcy1SZXZlcnNlSGlnaGxpZ2h0LXNlcGFyYXRvcicsIGNsYXNzTmFtZXMuc2VwYXJhdG9yKVxuICAgIH1cbiAgfSwgcHJvcHMpKTtcbn0iLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBjeCB9IGZyb20gJ0BhbGdvbGlhL3VpLWNvbXBvbmVudHMtc2hhcmVkJztcbmltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgSW50ZXJuYWxIaWdobGlnaHQgfSBmcm9tIFwiLi4vSW50ZXJuYWxIaWdobGlnaHQvSW50ZXJuYWxIaWdobGlnaHQuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBSZXZlcnNlU25pcHBldChfcmVmKSB7XG4gIHZhciBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNsYXNzTmFtZXNcIl0pO1xuXG4gIHJldHVybiBoKEludGVybmFsSGlnaGxpZ2h0LCBfZXh0ZW5kcyh7XG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgcm9vdDogY3goJ2Fpcy1SZXZlcnNlU25pcHBldCcsIGNsYXNzTmFtZXMucm9vdCksXG4gICAgICBoaWdobGlnaHRlZDogY3goJ2Fpcy1SZXZlcnNlU25pcHBldC1oaWdobGlnaHRlZCcsIGNsYXNzTmFtZXMuaGlnaGxpZ2h0ZWQpLFxuICAgICAgbm9uSGlnaGxpZ2h0ZWQ6IGN4KCdhaXMtUmV2ZXJzZVNuaXBwZXQtbm9uSGlnaGxpZ2h0ZWQnLCBjbGFzc05hbWVzLm5vbkhpZ2hsaWdodGVkKSxcbiAgICAgIHNlcGFyYXRvcjogY3goJ2Fpcy1SZXZlcnNlU25pcHBldC1zZXBhcmF0b3InLCBjbGFzc05hbWVzLnNlcGFyYXRvcilcbiAgICB9XG4gIH0sIHByb3BzKSk7XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBoLCBjcmVhdGVSZWYsIENvbXBvbmVudCB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuLi9UZW1wbGF0ZS9UZW1wbGF0ZS5qc1wiO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgcXVlcnk6ICcnLFxuICBzaG93U3VibWl0OiB0cnVlLFxuICBzaG93UmVzZXQ6IHRydWUsXG4gIHNob3dMb2FkaW5nSW5kaWNhdG9yOiB0cnVlLFxuICBhdXRvZm9jdXM6IGZhbHNlLFxuICBzZWFyY2hBc1lvdVR5cGU6IHRydWUsXG4gIGlzU2VhcmNoU3RhbGxlZDogZmFsc2UsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgb25DaGFuZ2U6IG5vb3AsXG4gIG9uU3VibWl0OiBub29wLFxuICBvblJlc2V0OiBub29wLFxuICByZWZpbmU6IG5vb3Bcbn07XG5cbnZhciBTZWFyY2hCb3ggPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFNlYXJjaEJveCwgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTZWFyY2hCb3gpO1xuXG4gIGZ1bmN0aW9uIFNlYXJjaEJveCgpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoQm94KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChhcmdzKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic3RhdGVcIiwge1xuICAgICAgcXVlcnk6IF90aGlzLnByb3BzLnF1ZXJ5LFxuICAgICAgZm9jdXNlZDogZmFsc2VcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJpbnB1dFwiLCBjcmVhdGVSZWYoKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwib25JbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHNlYXJjaEFzWW91VHlwZSA9IF90aGlzJHByb3BzLnNlYXJjaEFzWW91VHlwZSxcbiAgICAgICAgICByZWZpbmUgPSBfdGhpcyRwcm9wcy5yZWZpbmUsXG4gICAgICAgICAgb25DaGFuZ2UgPSBfdGhpcyRwcm9wcy5vbkNoYW5nZTtcbiAgICAgIHZhciBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcblxuICAgICAgaWYgKHNlYXJjaEFzWW91VHlwZSkge1xuICAgICAgICByZWZpbmUocXVlcnkpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHF1ZXJ5OiBxdWVyeVxuICAgICAgfSk7XG5cbiAgICAgIG9uQ2hhbmdlKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJvblN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBzZWFyY2hBc1lvdVR5cGUgPSBfdGhpcyRwcm9wczIuc2VhcmNoQXNZb3VUeXBlLFxuICAgICAgICAgIHJlZmluZSA9IF90aGlzJHByb3BzMi5yZWZpbmUsXG4gICAgICAgICAgb25TdWJtaXQgPSBfdGhpcyRwcm9wczIub25TdWJtaXQ7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgIGlmIChfdGhpcy5pbnB1dC5jdXJyZW50KSB7XG4gICAgICAgIF90aGlzLmlucHV0LmN1cnJlbnQuYmx1cigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXNlYXJjaEFzWW91VHlwZSkge1xuICAgICAgICByZWZpbmUoX3RoaXMuc3RhdGUucXVlcnkpO1xuICAgICAgfVxuXG4gICAgICBvblN1Ym1pdChldmVudCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwib25SZXNldFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICByZWZpbmUgPSBfdGhpcyRwcm9wczMucmVmaW5lLFxuICAgICAgICAgIG9uUmVzZXQgPSBfdGhpcyRwcm9wczMub25SZXNldDtcbiAgICAgIHZhciBxdWVyeSA9ICcnO1xuXG4gICAgICBpZiAoX3RoaXMuaW5wdXQuY3VycmVudCkge1xuICAgICAgICBfdGhpcy5pbnB1dC5jdXJyZW50LmZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIHJlZmluZShxdWVyeSk7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5XG4gICAgICB9KTtcblxuICAgICAgb25SZXNldChldmVudCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwib25CbHVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZm9jdXNlZDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm9uRm9jdXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c2VkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTZWFyY2hCb3gsIFt7XG4gICAga2V5OiBcInJlc2V0SW5wdXRcIixcbiAgICB2YWx1ZTpcbiAgICAvKipcbiAgICAgKiBUaGlzIHB1YmxpYyBtZXRob2QgaXMgdXNlZCBpbiB0aGUgUmVmaW5lbWVudExpc3QgU0ZGViBzZWFyY2ggYm94XG4gICAgICogdG8gcmVzZXQgdGhlIGlucHV0IHN0YXRlIHdoZW4gYW4gaXRlbSBpcyBzZWxlY3RlZC5cbiAgICAgKlxuICAgICAqIEBzZWUgUmVmaW5lbWVudExpc3QjY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1xuICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXNldElucHV0KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHF1ZXJ5OiAnJ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIC8qKlxuICAgICAgICogd2hlbiB0aGUgdXNlciBpcyB0eXBpbmcsIHdlIGRvbid0IHdhbnQgdG8gcmVwbGFjZSB0aGUgcXVlcnkgdHlwZWRcbiAgICAgICAqIGJ5IHRoZSB1c2VyIChzdGF0ZS5xdWVyeSkgd2l0aCB0aGUgcXVlcnkgZXhwb3NlZCBieSB0aGUgY29ubmVjdG9yIChwcm9wcy5xdWVyeSlcbiAgICAgICAqIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2FsZ29saWEvaW5zdGFudHNlYXJjaC5qcy9pc3N1ZXMvNDE0MVxuICAgICAgICovXG4gICAgICBpZiAoIXRoaXMuc3RhdGUuZm9jdXNlZCAmJiBuZXh0UHJvcHMucXVlcnkgIT09IHRoaXMuc3RhdGUucXVlcnkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcXVlcnk6IG5leHRQcm9wcy5xdWVyeVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNzc0NsYXNzZXMgPSBfdGhpcyRwcm9wczQuY3NzQ2xhc3NlcyxcbiAgICAgICAgICBwbGFjZWhvbGRlciA9IF90aGlzJHByb3BzNC5wbGFjZWhvbGRlcixcbiAgICAgICAgICBhdXRvZm9jdXMgPSBfdGhpcyRwcm9wczQuYXV0b2ZvY3VzLFxuICAgICAgICAgIHNob3dTdWJtaXQgPSBfdGhpcyRwcm9wczQuc2hvd1N1Ym1pdCxcbiAgICAgICAgICBzaG93UmVzZXQgPSBfdGhpcyRwcm9wczQuc2hvd1Jlc2V0LFxuICAgICAgICAgIHNob3dMb2FkaW5nSW5kaWNhdG9yID0gX3RoaXMkcHJvcHM0LnNob3dMb2FkaW5nSW5kaWNhdG9yLFxuICAgICAgICAgIHRlbXBsYXRlcyA9IF90aGlzJHByb3BzNC50ZW1wbGF0ZXMsXG4gICAgICAgICAgaXNTZWFyY2hTdGFsbGVkID0gX3RoaXMkcHJvcHM0LmlzU2VhcmNoU3RhbGxlZDtcbiAgICAgIHJldHVybiBoKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLnJvb3RcbiAgICAgIH0sIGgoXCJmb3JtXCIsIHtcbiAgICAgICAgYWN0aW9uOiBcIlwiLFxuICAgICAgICByb2xlOiBcInNlYXJjaFwiLFxuICAgICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMuZm9ybSxcbiAgICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSxcbiAgICAgICAgb25TdWJtaXQ6IHRoaXMub25TdWJtaXQsXG4gICAgICAgIG9uUmVzZXQ6IHRoaXMub25SZXNldFxuICAgICAgfSwgaChcImlucHV0XCIsIHtcbiAgICAgICAgcmVmOiB0aGlzLmlucHV0LFxuICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5xdWVyeSxcbiAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG4gICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5pbnB1dCxcbiAgICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgICAgICBhdXRvRm9jdXM6IGF1dG9mb2N1cyxcbiAgICAgICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICBhdXRvQ29ycmVjdDogXCJvZmZcIixcbiAgICAgICAgYXV0b0NhcGl0YWxpemU6IFwib2ZmXCIgLy8gQHRzLWV4cGVjdC1lcnJvciBgc3BlbGxDaGVja2AgYXR0cmlidXRlIGlzIG1pc3NpbmcgaW4gcHJlYWN0IEpTWCB0eXBlc1xuICAgICAgICAsXG4gICAgICAgIHNwZWxsQ2hlY2s6IFwiZmFsc2VcIixcbiAgICAgICAgbWF4TGVuZ3RoOiA1MTIsXG4gICAgICAgIG9uSW5wdXQ6IHRoaXMub25JbnB1dCxcbiAgICAgICAgb25CbHVyOiB0aGlzLm9uQmx1cixcbiAgICAgICAgb25Gb2N1czogdGhpcy5vbkZvY3VzXG4gICAgICB9KSwgaChUZW1wbGF0ZSwge1xuICAgICAgICB0ZW1wbGF0ZUtleTogXCJzdWJtaXRcIixcbiAgICAgICAgcm9vdFRhZ05hbWU6IFwiYnV0dG9uXCIsXG4gICAgICAgIHJvb3RQcm9wczoge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5zdWJtaXQsXG4gICAgICAgICAgdHlwZTogJ3N1Ym1pdCcsXG4gICAgICAgICAgdGl0bGU6ICdTdWJtaXQgdGhlIHNlYXJjaCBxdWVyeS4nLFxuICAgICAgICAgIGhpZGRlbjogIXNob3dTdWJtaXRcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzXG4gICAgICAgIH1cbiAgICAgIH0pLCBoKFRlbXBsYXRlLCB7XG4gICAgICAgIHRlbXBsYXRlS2V5OiBcInJlc2V0XCIsXG4gICAgICAgIHJvb3RUYWdOYW1lOiBcImJ1dHRvblwiLFxuICAgICAgICByb290UHJvcHM6IHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMucmVzZXQsXG4gICAgICAgICAgdHlwZTogJ3Jlc2V0JyxcbiAgICAgICAgICB0aXRsZTogJ0NsZWFyIHRoZSBzZWFyY2ggcXVlcnkuJyxcbiAgICAgICAgICBoaWRkZW46ICEoc2hvd1Jlc2V0ICYmIHRoaXMuc3RhdGUucXVlcnkudHJpbSgpICYmICFpc1NlYXJjaFN0YWxsZWQpXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlczogdGVtcGxhdGVzLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY3NzQ2xhc3NlczogY3NzQ2xhc3Nlc1xuICAgICAgICB9XG4gICAgICB9KSwgc2hvd0xvYWRpbmdJbmRpY2F0b3IgJiYgaChUZW1wbGF0ZSwge1xuICAgICAgICB0ZW1wbGF0ZUtleTogXCJsb2FkaW5nSW5kaWNhdG9yXCIsXG4gICAgICAgIHJvb3RUYWdOYW1lOiBcInNwYW5cIixcbiAgICAgICAgcm9vdFByb3BzOiB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmxvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgICAgaGlkZGVuOiAhaXNTZWFyY2hTdGFsbGVkXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlczogdGVtcGxhdGVzLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY3NzQ2xhc3NlczogY3NzQ2xhc3Nlc1xuICAgICAgICB9XG4gICAgICB9KSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTZWFyY2hCb3g7XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShTZWFyY2hCb3gsIFwiZGVmYXVsdFByb3BzXCIsIGRlZmF1bHRQcm9wcyk7XG5cbmV4cG9ydCBkZWZhdWx0IFNlYXJjaEJveDsiLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBjeCB9IGZyb20gJ0BhbGdvbGlhL3VpLWNvbXBvbmVudHMtc2hhcmVkJztcbmltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgSW50ZXJuYWxIaWdobGlnaHQgfSBmcm9tIFwiLi4vSW50ZXJuYWxIaWdobGlnaHQvSW50ZXJuYWxIaWdobGlnaHQuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBTbmlwcGV0KF9yZWYpIHtcbiAgdmFyIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRjbGFzc05hbWVzLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiY2xhc3NOYW1lc1wiXSk7XG5cbiAgcmV0dXJuIGgoSW50ZXJuYWxIaWdobGlnaHQsIF9leHRlbmRzKHtcbiAgICBjbGFzc05hbWVzOiB7XG4gICAgICByb290OiBjeCgnYWlzLVNuaXBwZXQnLCBjbGFzc05hbWVzLnJvb3QpLFxuICAgICAgaGlnaGxpZ2h0ZWQ6IGN4KCdhaXMtU25pcHBldC1oaWdobGlnaHRlZCcsIGNsYXNzTmFtZXMuaGlnaGxpZ2h0ZWQpLFxuICAgICAgbm9uSGlnaGxpZ2h0ZWQ6IGN4KCdhaXMtU25pcHBldC1ub25IaWdobGlnaHRlZCcsIGNsYXNzTmFtZXMubm9uSGlnaGxpZ2h0ZWQpLFxuICAgICAgc2VwYXJhdG9yOiBjeCgnYWlzLVNuaXBwZXQtc2VwYXJhdG9yJywgY2xhc3NOYW1lcy5zZXBhcmF0b3IpXG4gICAgfVxuICB9LCBwcm9wcykpO1xufSIsImZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBUZW1wbGF0ZSBmcm9tIFwiLi4vVGVtcGxhdGUvVGVtcGxhdGUuanNcIjtcblxudmFyIFN0YXRzID0gZnVuY3Rpb24gU3RhdHMoX3JlZikge1xuICB2YXIgbmJIaXRzID0gX3JlZi5uYkhpdHMsXG4gICAgICBuYlNvcnRlZEhpdHMgPSBfcmVmLm5iU29ydGVkSGl0cyxcbiAgICAgIGNzc0NsYXNzZXMgPSBfcmVmLmNzc0NsYXNzZXMsXG4gICAgICB0ZW1wbGF0ZVByb3BzID0gX3JlZi50ZW1wbGF0ZVByb3BzLFxuICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJuYkhpdHNcIiwgXCJuYlNvcnRlZEhpdHNcIiwgXCJjc3NDbGFzc2VzXCIsIFwidGVtcGxhdGVQcm9wc1wiXSk7XG5cbiAgcmV0dXJuIGgoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY3goY3NzQ2xhc3Nlcy5yb290KVxuICB9LCBoKFRlbXBsYXRlLCBfZXh0ZW5kcyh7fSwgdGVtcGxhdGVQcm9wcywge1xuICAgIHRlbXBsYXRlS2V5OiBcInRleHRcIixcbiAgICByb290VGFnTmFtZTogXCJzcGFuXCIsXG4gICAgcm9vdFByb3BzOiB7XG4gICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMudGV4dFxuICAgIH0sXG4gICAgZGF0YTogX29iamVjdFNwcmVhZCh7XG4gICAgICBoYXNNYW55U29ydGVkUmVzdWx0czogbmJTb3J0ZWRIaXRzICYmIG5iU29ydGVkSGl0cyA+IDEsXG4gICAgICBoYXNOb1NvcnRlZFJlc3VsdHM6IG5iU29ydGVkSGl0cyA9PT0gMCxcbiAgICAgIGhhc09uZVNvcnRlZFJlc3VsdHM6IG5iU29ydGVkSGl0cyA9PT0gMSxcbiAgICAgIGhhc01hbnlSZXN1bHRzOiBuYkhpdHMgPiAxLFxuICAgICAgaGFzTm9SZXN1bHRzOiBuYkhpdHMgPT09IDAsXG4gICAgICBoYXNPbmVSZXN1bHQ6IG5iSGl0cyA9PT0gMSxcbiAgICAgIG5iSGl0czogbmJIaXRzLFxuICAgICAgbmJTb3J0ZWRIaXRzOiBuYlNvcnRlZEhpdHMsXG4gICAgICBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzXG4gICAgfSwgcmVzdClcbiAgfSkpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXRzOyIsImZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgaCwgQ29tcG9uZW50IH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IHdhcm5pbmcsIGlzRXF1YWwgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyByZW5kZXJUZW1wbGF0ZSB9IGZyb20gXCIuLi8uLi9saWIvdGVtcGxhdGluZy9pbmRleC5qc1wiO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgZGF0YToge30sXG4gIHJvb3RUYWdOYW1lOiAnZGl2JyxcbiAgdXNlQ3VzdG9tQ29tcGlsZU9wdGlvbnM6IHt9LFxuICB0ZW1wbGF0ZXM6IHt9LFxuICB0ZW1wbGF0ZXNDb25maWc6IHt9XG59O1xuXG4vLyBAVE9ETzogVGVtcGxhdGUgc2hvdWxkIGJlIGEgZ2VuZXJpYyBhbmQgcmVjZWl2ZSBURGF0YSB0byBwYXNzIHRvIFRlbXBsYXRlcyAodG8gYXZvaWQgVFRlbXBsYXRlRGF0YSB0byBiZSBzZXQgYXMgYGFueWApXG52YXIgVGVtcGxhdGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFRlbXBsYXRlLCBfQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFRlbXBsYXRlKTtcblxuICBmdW5jdGlvbiBUZW1wbGF0ZSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGVtcGxhdGUpO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRlbXBsYXRlLCBbe1xuICAgIGtleTogXCJzaG91bGRDb21wb25lbnRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xuICAgICAgcmV0dXJuICFpc0VxdWFsKHRoaXMucHJvcHMuZGF0YSwgbmV4dFByb3BzLmRhdGEpIHx8IHRoaXMucHJvcHMudGVtcGxhdGVLZXkgIT09IG5leHRQcm9wcy50ZW1wbGF0ZUtleSB8fCAhaXNFcXVhbCh0aGlzLnByb3BzLnJvb3RQcm9wcywgbmV4dFByb3BzLnJvb3RQcm9wcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoT2JqZWN0LmtleXModGhpcy5wcm9wcy50ZW1wbGF0ZXMpLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5wcm9wcy50ZW1wbGF0ZXNba2V5XSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIH0pLCBcIkhvZ2FuLmpzIGFuZCBzdHJpbmctYmFzZWQgdGVtcGxhdGVzIGFyZSBkZXByZWNhdGVkIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQgaW4gSW5zdGFudFNlYXJjaC5qcyA1LnguXFxuXFxuWW91IGNhbiByZXBsYWNlIHRoZW0gd2l0aCBmdW5jdGlvbi1mb3JtIHRlbXBsYXRlcyBhbmQgdXNlIGVpdGhlciB0aGUgcHJvdmlkZWQgYGh0bWxgIGZ1bmN0aW9uIG9yIEpTWCB0ZW1wbGF0ZXMuXFxuXFxuU2VlOiBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL2J1aWxkaW5nLXNlYXJjaC11aS91cGdyYWRlLWd1aWRlcy9qcy8jdXBncmFkZS10ZW1wbGF0ZXNcIikgOiB2b2lkIDA7XG4gICAgICB2YXIgUm9vdFRhZ05hbWUgPSB0aGlzLnByb3BzLnJvb3RUYWdOYW1lO1xuICAgICAgdmFyIHVzZUN1c3RvbUNvbXBpbGVPcHRpb25zID0gdGhpcy5wcm9wcy51c2VDdXN0b21Db21waWxlT3B0aW9uc1t0aGlzLnByb3BzLnRlbXBsYXRlS2V5XTtcbiAgICAgIHZhciBjb21waWxlT3B0aW9ucyA9IHVzZUN1c3RvbUNvbXBpbGVPcHRpb25zID8gdGhpcy5wcm9wcy50ZW1wbGF0ZXNDb25maWcuY29tcGlsZU9wdGlvbnMgOiB7fTtcbiAgICAgIHZhciBjb250ZW50ID0gcmVuZGVyVGVtcGxhdGUoe1xuICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMucHJvcHMudGVtcGxhdGVzLFxuICAgICAgICB0ZW1wbGF0ZUtleTogdGhpcy5wcm9wcy50ZW1wbGF0ZUtleSxcbiAgICAgICAgY29tcGlsZU9wdGlvbnM6IGNvbXBpbGVPcHRpb25zLFxuICAgICAgICBoZWxwZXJzOiB0aGlzLnByb3BzLnRlbXBsYXRlc0NvbmZpZy5oZWxwZXJzLFxuICAgICAgICBkYXRhOiB0aGlzLnByb3BzLmRhdGEsXG4gICAgICAgIGJpbmRFdmVudDogdGhpcy5wcm9wcy5iaW5kRXZlbnQsXG4gICAgICAgIHNlbmRFdmVudDogdGhpcy5wcm9wcy5zZW5kRXZlbnRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoY29udGVudCA9PT0gbnVsbCkge1xuICAgICAgICAvLyBBZGRzIGEgbm9zY3JpcHQgdG8gdGhlIERPTSBidXQgdmlydHVhbCBET00gaXMgbnVsbFxuICAgICAgICAvLyBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL2NvbXBvbmVudC1zcGVjcy5odG1sI3JlbmRlclxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKF90eXBlb2YoY29udGVudCkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBoKFJvb3RUYWdOYW1lLCB0aGlzLnByb3BzLnJvb3RQcm9wcywgY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoKFJvb3RUYWdOYW1lLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5yb290UHJvcHMsIHtcbiAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICBfX2h0bWw6IGNvbnRlbnRcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUZW1wbGF0ZTtcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KFRlbXBsYXRlLCBcImRlZmF1bHRQcm9wc1wiLCBkZWZhdWx0UHJvcHMpO1xuXG5leHBvcnQgZGVmYXVsdCBUZW1wbGF0ZTsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IGFsZ29saWFzZWFyY2hIZWxwZXIgZnJvbSAnYWxnb2xpYXNlYXJjaC1oZWxwZXInO1xuaW1wb3J0IHsgY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3IsIGlzUGxhaW5PYmplY3QsIG1lcmdlU2VhcmNoUGFyYW1ldGVycywgbm9vcCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbi8qKlxuICogUmVmaW5lIHRoZSBnaXZlbiBzZWFyY2ggcGFyYW1ldGVycy5cbiAqL1xuXG52YXIgd2l0aFVzYWdlID0gY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3Ioe1xuICBuYW1lOiAnY29uZmlndXJlJyxcbiAgY29ubmVjdG9yOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gZ2V0SW5pdGlhbFNlYXJjaFBhcmFtZXRlcnMoc3RhdGUsIHdpZGdldFBhcmFtcykge1xuICAvLyBXZSBsZXZlcmFnZSB0aGUgaGVscGVyIGludGVybmFscyB0byByZW1vdmUgdGhlIGB3aWRnZXRQYXJhbXNgIGZyb21cbiAgLy8gdGhlIHN0YXRlLiBUaGUgZnVuY3Rpb24gYHNldFF1ZXJ5UGFyYW1ldGVyc2Agb21pdHMgdGhlIHZhbHVlcyB0aGF0XG4gIC8vIGFyZSBgdW5kZWZpbmVkYCBvbiB0aGUgbmV4dCBzdGF0ZS5cbiAgcmV0dXJuIHN0YXRlLnNldFF1ZXJ5UGFyYW1ldGVycyhPYmplY3Qua2V5cyh3aWRnZXRQYXJhbXMuc2VhcmNoUGFyYW1ldGVycykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFjYyksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGtleSwgdW5kZWZpbmVkKSk7XG4gIH0sIHt9KSk7XG59XG5cbnZhciBjb25uZWN0Q29uZmlndXJlID0gZnVuY3Rpb24gY29ubmVjdENvbmZpZ3VyZSgpIHtcbiAgdmFyIHJlbmRlckZuID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBub29wO1xuICB2YXIgdW5tb3VudEZuID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICByZXR1cm4gZnVuY3Rpb24gKHdpZGdldFBhcmFtcykge1xuICAgIGlmICghd2lkZ2V0UGFyYW1zIHx8ICFpc1BsYWluT2JqZWN0KHdpZGdldFBhcmFtcy5zZWFyY2hQYXJhbWV0ZXJzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHdpdGhVc2FnZSgnVGhlIGBzZWFyY2hQYXJhbWV0ZXJzYCBvcHRpb24gZXhwZWN0cyBhbiBvYmplY3QuJykpO1xuICAgIH1cblxuICAgIHZhciBjb25uZWN0b3JTdGF0ZSA9IHt9O1xuXG4gICAgZnVuY3Rpb24gcmVmaW5lKGhlbHBlcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWFyY2hQYXJhbWV0ZXJzKSB7XG4gICAgICAgIC8vIE1lcmdlIG5ldyBgc2VhcmNoUGFyYW1ldGVyc2Agd2l0aCB0aGUgb25lcyBzZXQgZnJvbSBvdGhlciB3aWRnZXRzXG4gICAgICAgIHZhciBhY3R1YWxTdGF0ZSA9IGdldEluaXRpYWxTZWFyY2hQYXJhbWV0ZXJzKGhlbHBlci5zdGF0ZSwgd2lkZ2V0UGFyYW1zKTtcbiAgICAgICAgdmFyIG5leHRTZWFyY2hQYXJhbWV0ZXJzID0gbWVyZ2VTZWFyY2hQYXJhbWV0ZXJzKGFjdHVhbFN0YXRlLCBuZXcgYWxnb2xpYXNlYXJjaEhlbHBlci5TZWFyY2hQYXJhbWV0ZXJzKHNlYXJjaFBhcmFtZXRlcnMpKTsgLy8gVXBkYXRlIG9yaWdpbmFsIGB3aWRnZXRQYXJhbXMuc2VhcmNoUGFyYW1ldGVyc2AgdG8gdGhlIG5ldyByZWZpbmVkIG9uZVxuXG4gICAgICAgIHdpZGdldFBhcmFtcy5zZWFyY2hQYXJhbWV0ZXJzID0gc2VhcmNoUGFyYW1ldGVyczsgLy8gVHJpZ2dlciBhIHNlYXJjaCB3aXRoIHRoZSByZXNvbHZlZCBzZWFyY2ggcGFyYW1ldGVyc1xuXG4gICAgICAgIGhlbHBlci5zZXRTdGF0ZShuZXh0U2VhcmNoUGFyYW1ldGVycykuc2VhcmNoKCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAkJHR5cGU6ICdhaXMuY29uZmlndXJlJyxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoaW5pdE9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IGluaXRPcHRpb25zLmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcbiAgICAgICAgcmVuZGVyRm4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldFdpZGdldFJlbmRlclN0YXRlKGluaXRPcHRpb25zKSksIHt9LCB7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBpbnN0YW50U2VhcmNoSW5zdGFuY2VcbiAgICAgICAgfSksIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlbmRlck9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IHJlbmRlck9wdGlvbnMuaW5zdGFudFNlYXJjaEluc3RhbmNlO1xuICAgICAgICByZW5kZXJGbihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZ2V0V2lkZ2V0UmVuZGVyU3RhdGUocmVuZGVyT3B0aW9ucykpLCB7fSwge1xuICAgICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogaW5zdGFudFNlYXJjaEluc3RhbmNlXG4gICAgICAgIH0pLCBmYWxzZSk7XG4gICAgICB9LFxuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZShfcmVmKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGU7XG4gICAgICAgIHVubW91bnRGbigpO1xuICAgICAgICByZXR1cm4gZ2V0SW5pdGlhbFNlYXJjaFBhcmFtZXRlcnMoc3RhdGUsIHdpZGdldFBhcmFtcyk7XG4gICAgICB9LFxuICAgICAgZ2V0UmVuZGVyU3RhdGU6IGZ1bmN0aW9uIGdldFJlbmRlclN0YXRlKHJlbmRlclN0YXRlLCByZW5kZXJPcHRpb25zKSB7XG4gICAgICAgIHZhciBfcmVuZGVyU3RhdGUkY29uZmlndXI7XG5cbiAgICAgICAgdmFyIHdpZGdldFJlbmRlclN0YXRlID0gdGhpcy5nZXRXaWRnZXRSZW5kZXJTdGF0ZShyZW5kZXJPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVuZGVyU3RhdGUpLCB7fSwge1xuICAgICAgICAgIGNvbmZpZ3VyZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB3aWRnZXRSZW5kZXJTdGF0ZSksIHt9LCB7XG4gICAgICAgICAgICB3aWRnZXRQYXJhbXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgd2lkZ2V0UmVuZGVyU3RhdGUud2lkZ2V0UGFyYW1zKSwge30sIHtcbiAgICAgICAgICAgICAgc2VhcmNoUGFyYW1ldGVyczogbWVyZ2VTZWFyY2hQYXJhbWV0ZXJzKG5ldyBhbGdvbGlhc2VhcmNoSGVscGVyLlNlYXJjaFBhcmFtZXRlcnMoKF9yZW5kZXJTdGF0ZSRjb25maWd1ciA9IHJlbmRlclN0YXRlLmNvbmZpZ3VyZSkgPT09IG51bGwgfHwgX3JlbmRlclN0YXRlJGNvbmZpZ3VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVuZGVyU3RhdGUkY29uZmlndXIud2lkZ2V0UGFyYW1zLnNlYXJjaFBhcmFtZXRlcnMpLCBuZXcgYWxnb2xpYXNlYXJjaEhlbHBlci5TZWFyY2hQYXJhbWV0ZXJzKHdpZGdldFJlbmRlclN0YXRlLndpZGdldFBhcmFtcy5zZWFyY2hQYXJhbWV0ZXJzKSkuZ2V0UXVlcnlQYXJhbXMoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRXaWRnZXRSZW5kZXJTdGF0ZTogZnVuY3Rpb24gZ2V0V2lkZ2V0UmVuZGVyU3RhdGUoX3JlZjIpIHtcbiAgICAgICAgdmFyIGhlbHBlciA9IF9yZWYyLmhlbHBlcjtcblxuICAgICAgICBpZiAoIWNvbm5lY3RvclN0YXRlLnJlZmluZSkge1xuICAgICAgICAgIGNvbm5lY3RvclN0YXRlLnJlZmluZSA9IHJlZmluZShoZWxwZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZWZpbmU6IGNvbm5lY3RvclN0YXRlLnJlZmluZSxcbiAgICAgICAgICB3aWRnZXRQYXJhbXM6IHdpZGdldFBhcmFtc1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGdldFdpZGdldFNlYXJjaFBhcmFtZXRlcnM6IGZ1bmN0aW9uIGdldFdpZGdldFNlYXJjaFBhcmFtZXRlcnMoc3RhdGUsIF9yZWYzKSB7XG4gICAgICAgIHZhciB1aVN0YXRlID0gX3JlZjMudWlTdGF0ZTtcbiAgICAgICAgcmV0dXJuIG1lcmdlU2VhcmNoUGFyYW1ldGVycyhzdGF0ZSwgbmV3IGFsZ29saWFzZWFyY2hIZWxwZXIuU2VhcmNoUGFyYW1ldGVycyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHVpU3RhdGUuY29uZmlndXJlKSwgd2lkZ2V0UGFyYW1zLnNlYXJjaFBhcmFtZXRlcnMpKSk7XG4gICAgICB9LFxuICAgICAgZ2V0V2lkZ2V0VWlTdGF0ZTogZnVuY3Rpb24gZ2V0V2lkZ2V0VWlTdGF0ZSh1aVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHVpU3RhdGUpLCB7fSwge1xuICAgICAgICAgIGNvbmZpZ3VyZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB1aVN0YXRlLmNvbmZpZ3VyZSksIHdpZGdldFBhcmFtcy5zZWFyY2hQYXJhbWV0ZXJzKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdENvbmZpZ3VyZTsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgZXNjYXBlSGl0cywgVEFHX1BMQUNFSE9MREVSLCBjaGVja1JlbmRlcmluZywgY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3IsIGFkZEFic29sdXRlUG9zaXRpb24sIGFkZFF1ZXJ5SUQsIGNyZWF0ZVNlbmRFdmVudEZvckhpdHMsIGNyZWF0ZUJpbmRFdmVudEZvckhpdHMsIG5vb3AgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG52YXIgd2l0aFVzYWdlID0gY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3Ioe1xuICBuYW1lOiAnaGl0cycsXG4gIGNvbm5lY3RvcjogdHJ1ZVxufSk7XG5cbnZhciBjb25uZWN0SGl0cyA9IGZ1bmN0aW9uIGNvbm5lY3RIaXRzKHJlbmRlckZuKSB7XG4gIHZhciB1bm1vdW50Rm4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG4gIGNoZWNrUmVuZGVyaW5nKHJlbmRlckZuLCB3aXRoVXNhZ2UoKSk7XG4gIHJldHVybiBmdW5jdGlvbiAod2lkZ2V0UGFyYW1zKSB7XG4gICAgdmFyIF9yZWYgPSB3aWRnZXRQYXJhbXMgfHwge30sXG4gICAgICAgIF9yZWYkZXNjYXBlSFRNTCA9IF9yZWYuZXNjYXBlSFRNTCxcbiAgICAgICAgZXNjYXBlSFRNTCA9IF9yZWYkZXNjYXBlSFRNTCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkZXNjYXBlSFRNTCxcbiAgICAgICAgX3JlZiR0cmFuc2Zvcm1JdGVtcyA9IF9yZWYudHJhbnNmb3JtSXRlbXMsXG4gICAgICAgIHRyYW5zZm9ybUl0ZW1zID0gX3JlZiR0cmFuc2Zvcm1JdGVtcyA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfSA6IF9yZWYkdHJhbnNmb3JtSXRlbXM7XG5cbiAgICB2YXIgc2VuZEV2ZW50O1xuICAgIHZhciBiaW5kRXZlbnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICQkdHlwZTogJ2Fpcy5oaXRzJyxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoaW5pdE9wdGlvbnMpIHtcbiAgICAgICAgcmVuZGVyRm4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldFdpZGdldFJlbmRlclN0YXRlKGluaXRPcHRpb25zKSksIHt9LCB7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBpbml0T3B0aW9ucy5pbnN0YW50U2VhcmNoSW5zdGFuY2VcbiAgICAgICAgfSksIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlbmRlck9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlbmRlclN0YXRlID0gdGhpcy5nZXRXaWRnZXRSZW5kZXJTdGF0ZShyZW5kZXJPcHRpb25zKTtcbiAgICAgICAgcmVuZGVyRm4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZW5kZXJTdGF0ZSksIHt9LCB7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiByZW5kZXJPcHRpb25zLmluc3RhbnRTZWFyY2hJbnN0YW5jZVxuICAgICAgICB9KSwgZmFsc2UpO1xuICAgICAgICByZW5kZXJTdGF0ZS5zZW5kRXZlbnQoJ3ZpZXcnLCByZW5kZXJTdGF0ZS5oaXRzKTtcbiAgICAgIH0sXG4gICAgICBnZXRSZW5kZXJTdGF0ZTogZnVuY3Rpb24gZ2V0UmVuZGVyU3RhdGUocmVuZGVyU3RhdGUsIHJlbmRlck9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVuZGVyU3RhdGUpLCB7fSwge1xuICAgICAgICAgIGhpdHM6IHRoaXMuZ2V0V2lkZ2V0UmVuZGVyU3RhdGUocmVuZGVyT3B0aW9ucylcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0V2lkZ2V0UmVuZGVyU3RhdGU6IGZ1bmN0aW9uIGdldFdpZGdldFJlbmRlclN0YXRlKF9yZWYyKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gX3JlZjIucmVzdWx0cyxcbiAgICAgICAgICAgIGhlbHBlciA9IF9yZWYyLmhlbHBlcixcbiAgICAgICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IF9yZWYyLmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcblxuICAgICAgICBpZiAoIXNlbmRFdmVudCkge1xuICAgICAgICAgIHNlbmRFdmVudCA9IGNyZWF0ZVNlbmRFdmVudEZvckhpdHMoe1xuICAgICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBpbnN0YW50U2VhcmNoSW5zdGFuY2UsXG4gICAgICAgICAgICBpbmRleDogaGVscGVyLmdldEluZGV4KCksXG4gICAgICAgICAgICB3aWRnZXRUeXBlOiB0aGlzLiQkdHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaW5kRXZlbnQpIHtcbiAgICAgICAgICBiaW5kRXZlbnQgPSBjcmVhdGVCaW5kRXZlbnRGb3JIaXRzKHtcbiAgICAgICAgICAgIGluZGV4OiBoZWxwZXIuZ2V0SW5kZXgoKSxcbiAgICAgICAgICAgIHdpZGdldFR5cGU6IHRoaXMuJCR0eXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0czogW10sXG4gICAgICAgICAgICByZXN1bHRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZW5kRXZlbnQ6IHNlbmRFdmVudCxcbiAgICAgICAgICAgIGJpbmRFdmVudDogYmluZEV2ZW50LFxuICAgICAgICAgICAgd2lkZ2V0UGFyYW1zOiB3aWRnZXRQYXJhbXNcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVzY2FwZUhUTUwgJiYgcmVzdWx0cy5oaXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHRzLmhpdHMgPSBlc2NhcGVIaXRzKHJlc3VsdHMuaGl0cyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGl0c1dpdGhBYnNvbHV0ZVBvc2l0aW9uID0gYWRkQWJzb2x1dGVQb3NpdGlvbihyZXN1bHRzLmhpdHMsIHJlc3VsdHMucGFnZSwgcmVzdWx0cy5oaXRzUGVyUGFnZSk7XG4gICAgICAgIHZhciBoaXRzV2l0aEFic29sdXRlUG9zaXRpb25BbmRRdWVyeUlEID0gYWRkUXVlcnlJRChoaXRzV2l0aEFic29sdXRlUG9zaXRpb24sIHJlc3VsdHMucXVlcnlJRCk7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZEhpdHMgPSB0cmFuc2Zvcm1JdGVtcyhoaXRzV2l0aEFic29sdXRlUG9zaXRpb25BbmRRdWVyeUlELCB7XG4gICAgICAgICAgcmVzdWx0czogcmVzdWx0c1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBoaXRzOiB0cmFuc2Zvcm1lZEhpdHMsXG4gICAgICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgICAgICBzZW5kRXZlbnQ6IHNlbmRFdmVudCxcbiAgICAgICAgICBiaW5kRXZlbnQ6IGJpbmRFdmVudCxcbiAgICAgICAgICB3aWRnZXRQYXJhbXM6IHdpZGdldFBhcmFtc1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoX3JlZjMpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gX3JlZjMuc3RhdGU7XG4gICAgICAgIHVubW91bnRGbigpO1xuXG4gICAgICAgIGlmICghZXNjYXBlSFRNTCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdGF0ZS5zZXRRdWVyeVBhcmFtZXRlcnMoT2JqZWN0LmtleXMoVEFHX1BMQUNFSE9MREVSKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYWNjKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCB1bmRlZmluZWQpKTtcbiAgICAgICAgfSwge30pKTtcbiAgICAgIH0sXG4gICAgICBnZXRXaWRnZXRTZWFyY2hQYXJhbWV0ZXJzOiBmdW5jdGlvbiBnZXRXaWRnZXRTZWFyY2hQYXJhbWV0ZXJzKHN0YXRlKSB7XG4gICAgICAgIGlmICghZXNjYXBlSFRNTCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdGF0ZS5zZXRRdWVyeVBhcmFtZXRlcnMoVEFHX1BMQUNFSE9MREVSKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdEhpdHM7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyByYW5nZSB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcblxudmFyIFBhZ2luYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBhZ2luYXRvcihwYXJhbXMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFnaW5hdG9yKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnRQYWdlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3RhbFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGFkZGluZ1wiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhcmFtcy5jdXJyZW50UGFnZTtcbiAgICB0aGlzLnRvdGFsID0gcGFyYW1zLnRvdGFsO1xuICAgIHRoaXMucGFkZGluZyA9IHBhcmFtcy5wYWRkaW5nO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFBhZ2luYXRvciwgW3tcbiAgICBrZXk6IFwicGFnZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFnZXMoKSB7XG4gICAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsLFxuICAgICAgICAgIGN1cnJlbnRQYWdlID0gdGhpcy5jdXJyZW50UGFnZSxcbiAgICAgICAgICBwYWRkaW5nID0gdGhpcy5wYWRkaW5nO1xuICAgICAgaWYgKHRvdGFsID09PSAwKSByZXR1cm4gWzBdO1xuICAgICAgdmFyIHRvdGFsRGlzcGxheWVkUGFnZXMgPSB0aGlzLm5iUGFnZXNEaXNwbGF5ZWQocGFkZGluZywgdG90YWwpO1xuXG4gICAgICBpZiAodG90YWxEaXNwbGF5ZWRQYWdlcyA9PT0gdG90YWwpIHtcbiAgICAgICAgcmV0dXJuIHJhbmdlKHtcbiAgICAgICAgICBlbmQ6IHRvdGFsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFkZGluZ0xlZnQgPSB0aGlzLmNhbGN1bGF0ZVBhZGRpbmdMZWZ0KGN1cnJlbnRQYWdlLCBwYWRkaW5nLCB0b3RhbCwgdG90YWxEaXNwbGF5ZWRQYWdlcyk7XG4gICAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gdG90YWxEaXNwbGF5ZWRQYWdlcyAtIHBhZGRpbmdMZWZ0O1xuICAgICAgdmFyIGZpcnN0ID0gY3VycmVudFBhZ2UgLSBwYWRkaW5nTGVmdDtcbiAgICAgIHZhciBsYXN0ID0gY3VycmVudFBhZ2UgKyBwYWRkaW5nUmlnaHQ7XG4gICAgICByZXR1cm4gcmFuZ2Uoe1xuICAgICAgICBzdGFydDogZmlyc3QsXG4gICAgICAgIGVuZDogbGFzdFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5iUGFnZXNEaXNwbGF5ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbmJQYWdlc0Rpc3BsYXllZChwYWRkaW5nLCB0b3RhbCkge1xuICAgICAgcmV0dXJuIE1hdGgubWluKDIgKiBwYWRkaW5nICsgMSwgdG90YWwpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYWxjdWxhdGVQYWRkaW5nTGVmdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVQYWRkaW5nTGVmdChjdXJyZW50LCBwYWRkaW5nLCB0b3RhbCwgdG90YWxEaXNwbGF5ZWRQYWdlcykge1xuICAgICAgaWYgKGN1cnJlbnQgPD0gcGFkZGluZykge1xuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnQgPj0gdG90YWwgLSBwYWRkaW5nKSB7XG4gICAgICAgIHJldHVybiB0b3RhbERpc3BsYXllZFBhZ2VzIC0gKHRvdGFsIC0gY3VycmVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYWRkaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc0xhc3RQYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzTGFzdFBhZ2UoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZSA9PT0gdGhpcy50b3RhbCAtIDEgfHwgdGhpcy50b3RhbCA9PT0gMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNGaXJzdFBhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaXJzdFBhZ2UoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZSA9PT0gMDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUGFnaW5hdG9yO1xufSgpO1xuXG5leHBvcnQgZGVmYXVsdCBQYWdpbmF0b3I7IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IGNoZWNrUmVuZGVyaW5nLCBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvciwgbm9vcCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCBQYWdpbmF0b3IgZnJvbSBcIi4vUGFnaW5hdG9yLmpzXCI7XG52YXIgd2l0aFVzYWdlID0gY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3Ioe1xuICBuYW1lOiAncGFnaW5hdGlvbicsXG4gIGNvbm5lY3RvcjogdHJ1ZVxufSk7XG5cbi8qKlxuICogKipQYWdpbmF0aW9uKiogY29ubmVjdG9yIHByb3ZpZGVzIHRoZSBsb2dpYyB0byBidWlsZCBhIHdpZGdldCB0aGF0IHdpbGwgbGV0IHRoZSB1c2VyXG4gKiBjaG9vc2UgdGhlIGN1cnJlbnQgcGFnZSBvZiB0aGUgcmVzdWx0cy5cbiAqXG4gKiBXaGVuIHVzaW5nIHRoZSBwYWdpbmF0aW9uIHdpdGggQWxnb2xpYSwgeW91IHNob3VsZCBiZSBhd2FyZSB0aGF0IHRoZSBlbmdpbmUgd29uJ3QgcHJvdmlkZSB5b3UgcGFnZXNcbiAqIGJleW9uZCB0aGUgMTAwMHRoIGhpdHMgYnkgZGVmYXVsdC4gWW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIFtBbGdvbGlhIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vd3d3LmFsZ29saWEuY29tL2RvYy9ndWlkZXMvc2VhcmNoaW5nL3BhZ2luYXRpb24vI3BhZ2luYXRpb24tbGltaXRhdGlvbnMpLlxuICovXG52YXIgY29ubmVjdFBhZ2luYXRpb24gPSBmdW5jdGlvbiBjb25uZWN0UGFnaW5hdGlvbihyZW5kZXJGbikge1xuICB2YXIgdW5tb3VudEZuID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICBjaGVja1JlbmRlcmluZyhyZW5kZXJGbiwgd2l0aFVzYWdlKCkpO1xuICByZXR1cm4gZnVuY3Rpb24gKHdpZGdldFBhcmFtcykge1xuICAgIHZhciBfcmVmID0gd2lkZ2V0UGFyYW1zIHx8IHt9LFxuICAgICAgICB0b3RhbFBhZ2VzID0gX3JlZi50b3RhbFBhZ2VzLFxuICAgICAgICBfcmVmJHBhZGRpbmcgPSBfcmVmLnBhZGRpbmcsXG4gICAgICAgIHBhZGRpbmcgPSBfcmVmJHBhZGRpbmcgPT09IHZvaWQgMCA/IDMgOiBfcmVmJHBhZGRpbmc7XG5cbiAgICB2YXIgcGFnZXIgPSBuZXcgUGFnaW5hdG9yKHtcbiAgICAgIGN1cnJlbnRQYWdlOiAwLFxuICAgICAgdG90YWw6IDAsXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSk7XG4gICAgdmFyIGNvbm5lY3RvclN0YXRlID0ge307XG5cbiAgICBmdW5jdGlvbiBnZXRNYXhQYWdlKF9yZWYyKSB7XG4gICAgICB2YXIgbmJQYWdlcyA9IF9yZWYyLm5iUGFnZXM7XG4gICAgICByZXR1cm4gdG90YWxQYWdlcyAhPT0gdW5kZWZpbmVkID8gTWF0aC5taW4odG90YWxQYWdlcywgbmJQYWdlcykgOiBuYlBhZ2VzO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAkJHR5cGU6ICdhaXMucGFnaW5hdGlvbicsXG4gICAgICBpbml0OiBmdW5jdGlvbiBpbml0KGluaXRPcHRpb25zKSB7XG4gICAgICAgIHZhciBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSBpbml0T3B0aW9ucy5pbnN0YW50U2VhcmNoSW5zdGFuY2U7XG4gICAgICAgIHJlbmRlckZuKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5nZXRXaWRnZXRSZW5kZXJTdGF0ZShpbml0T3B0aW9ucykpLCB7fSwge1xuICAgICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogaW5zdGFudFNlYXJjaEluc3RhbmNlXG4gICAgICAgIH0pLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyZW5kZXJPcHRpb25zKSB7XG4gICAgICAgIHZhciBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSByZW5kZXJPcHRpb25zLmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcbiAgICAgICAgcmVuZGVyRm4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldFdpZGdldFJlbmRlclN0YXRlKHJlbmRlck9wdGlvbnMpKSwge30sIHtcbiAgICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2U6IGluc3RhbnRTZWFyY2hJbnN0YW5jZVxuICAgICAgICB9KSwgZmFsc2UpO1xuICAgICAgfSxcbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoX3JlZjMpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gX3JlZjMuc3RhdGU7XG4gICAgICAgIHVubW91bnRGbigpO1xuICAgICAgICByZXR1cm4gc3RhdGUuc2V0UXVlcnlQYXJhbWV0ZXIoJ3BhZ2UnLCB1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIGdldFdpZGdldFVpU3RhdGU6IGZ1bmN0aW9uIGdldFdpZGdldFVpU3RhdGUodWlTdGF0ZSwgX3JlZjQpIHtcbiAgICAgICAgdmFyIHNlYXJjaFBhcmFtZXRlcnMgPSBfcmVmNC5zZWFyY2hQYXJhbWV0ZXJzO1xuICAgICAgICB2YXIgcGFnZSA9IHNlYXJjaFBhcmFtZXRlcnMucGFnZSB8fCAwO1xuXG4gICAgICAgIGlmICghcGFnZSkge1xuICAgICAgICAgIHJldHVybiB1aVN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdWlTdGF0ZSksIHt9LCB7XG4gICAgICAgICAgcGFnZTogcGFnZSArIDFcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0V2lkZ2V0U2VhcmNoUGFyYW1ldGVyczogZnVuY3Rpb24gZ2V0V2lkZ2V0U2VhcmNoUGFyYW1ldGVycyhzZWFyY2hQYXJhbWV0ZXJzLCBfcmVmNSkge1xuICAgICAgICB2YXIgdWlTdGF0ZSA9IF9yZWY1LnVpU3RhdGU7XG4gICAgICAgIHZhciBwYWdlID0gdWlTdGF0ZS5wYWdlID8gdWlTdGF0ZS5wYWdlIC0gMSA6IDA7XG4gICAgICAgIHJldHVybiBzZWFyY2hQYXJhbWV0ZXJzLnNldFF1ZXJ5UGFyYW1ldGVyKCdwYWdlJywgcGFnZSk7XG4gICAgICB9LFxuICAgICAgZ2V0V2lkZ2V0UmVuZGVyU3RhdGU6IGZ1bmN0aW9uIGdldFdpZGdldFJlbmRlclN0YXRlKF9yZWY2KSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gX3JlZjYucmVzdWx0cyxcbiAgICAgICAgICAgIGhlbHBlciA9IF9yZWY2LmhlbHBlcixcbiAgICAgICAgICAgIHN0YXRlID0gX3JlZjYuc3RhdGUsXG4gICAgICAgICAgICBjcmVhdGVVUkwgPSBfcmVmNi5jcmVhdGVVUkw7XG5cbiAgICAgICAgaWYgKCFjb25uZWN0b3JTdGF0ZS5yZWZpbmUpIHtcbiAgICAgICAgICBjb25uZWN0b3JTdGF0ZS5yZWZpbmUgPSBmdW5jdGlvbiAocGFnZSkge1xuICAgICAgICAgICAgaGVscGVyLnNldFBhZ2UocGFnZSk7XG4gICAgICAgICAgICBoZWxwZXIuc2VhcmNoKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29ubmVjdG9yU3RhdGUuY3JlYXRlVVJMKSB7XG4gICAgICAgICAgY29ubmVjdG9yU3RhdGUuY3JlYXRlVVJMID0gZnVuY3Rpb24gKGhlbHBlclN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVVSTChoZWxwZXJTdGF0ZS5zZXRQYWdlKHBhZ2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYWdlID0gc3RhdGUucGFnZSB8fCAwO1xuICAgICAgICB2YXIgbmJQYWdlcyA9IGdldE1heFBhZ2UocmVzdWx0cyB8fCB7XG4gICAgICAgICAgbmJQYWdlczogMFxuICAgICAgICB9KTtcbiAgICAgICAgcGFnZXIuY3VycmVudFBhZ2UgPSBwYWdlO1xuICAgICAgICBwYWdlci50b3RhbCA9IG5iUGFnZXM7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY3JlYXRlVVJMOiBjb25uZWN0b3JTdGF0ZS5jcmVhdGVVUkwoc3RhdGUpLFxuICAgICAgICAgIHJlZmluZTogY29ubmVjdG9yU3RhdGUucmVmaW5lLFxuICAgICAgICAgIGNhblJlZmluZTogbmJQYWdlcyA+IDEsXG4gICAgICAgICAgY3VycmVudFJlZmluZW1lbnQ6IHBhZ2UsXG4gICAgICAgICAgbmJIaXRzOiAocmVzdWx0cyA9PT0gbnVsbCB8fCByZXN1bHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHRzLm5iSGl0cykgfHwgMCxcbiAgICAgICAgICBuYlBhZ2VzOiBuYlBhZ2VzLFxuICAgICAgICAgIHBhZ2VzOiByZXN1bHRzID8gcGFnZXIucGFnZXMoKSA6IFtdLFxuICAgICAgICAgIGlzRmlyc3RQYWdlOiBwYWdlci5pc0ZpcnN0UGFnZSgpLFxuICAgICAgICAgIGlzTGFzdFBhZ2U6IHBhZ2VyLmlzTGFzdFBhZ2UoKSxcbiAgICAgICAgICB3aWRnZXRQYXJhbXM6IHdpZGdldFBhcmFtc1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGdldFJlbmRlclN0YXRlOiBmdW5jdGlvbiBnZXRSZW5kZXJTdGF0ZShyZW5kZXJTdGF0ZSwgcmVuZGVyT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZW5kZXJTdGF0ZSksIHt9LCB7XG4gICAgICAgICAgcGFnaW5hdGlvbjogdGhpcy5nZXRXaWRnZXRSZW5kZXJTdGF0ZShyZW5kZXJPcHRpb25zKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdFBhZ2luYXRpb247IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IGNoZWNrUmVuZGVyaW5nLCBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvciwgbm9vcCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbnZhciB3aXRoVXNhZ2UgPSBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvcih7XG4gIG5hbWU6ICdzZWFyY2gtYm94JyxcbiAgY29ubmVjdG9yOiB0cnVlXG59KTtcblxudmFyIGRlZmF1bHRRdWVyeUhvb2sgPSBmdW5jdGlvbiBkZWZhdWx0UXVlcnlIb29rKHF1ZXJ5LCBob29rKSB7XG4gIHJldHVybiBob29rKHF1ZXJ5KTtcbn07XG4vKipcbiAqICoqU2VhcmNoQm94KiogY29ubmVjdG9yIHByb3ZpZGVzIHRoZSBsb2dpYyB0byBidWlsZCBhIHdpZGdldCB0aGF0IHdpbGwgbGV0IHRoZSB1c2VyIHNlYXJjaCBmb3IgYSBxdWVyeS5cbiAqXG4gKiBUaGUgY29ubmVjdG9yIHByb3ZpZGVzIHRvIHRoZSByZW5kZXJpbmc6IGByZWZpbmUoKWAgdG8gc2V0IHRoZSBxdWVyeS4gVGhlIGJlaGF2aW91ciBvZiB0aGlzIGZ1bmN0aW9uXG4gKiBtYXkgYmUgaW1wYWN0ZWQgYnkgdGhlIGBxdWVyeUhvb2tgIHdpZGdldCBwYXJhbWV0ZXIuXG4gKi9cblxuXG52YXIgY29ubmVjdFNlYXJjaEJveCA9IGZ1bmN0aW9uIGNvbm5lY3RTZWFyY2hCb3gocmVuZGVyRm4pIHtcbiAgdmFyIHVubW91bnRGbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbm9vcDtcbiAgY2hlY2tSZW5kZXJpbmcocmVuZGVyRm4sIHdpdGhVc2FnZSgpKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICh3aWRnZXRQYXJhbXMpIHtcbiAgICB2YXIgX3JlZiA9IHdpZGdldFBhcmFtcyB8fCB7fSxcbiAgICAgICAgX3JlZiRxdWVyeUhvb2sgPSBfcmVmLnF1ZXJ5SG9vayxcbiAgICAgICAgcXVlcnlIb29rID0gX3JlZiRxdWVyeUhvb2sgPT09IHZvaWQgMCA/IGRlZmF1bHRRdWVyeUhvb2sgOiBfcmVmJHF1ZXJ5SG9vaztcblxuICAgIHZhciBfcmVmaW5lO1xuXG4gICAgdmFyIF9jbGVhcjtcblxuICAgIHJldHVybiB7XG4gICAgICAkJHR5cGU6ICdhaXMuc2VhcmNoQm94JyxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoaW5pdE9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IGluaXRPcHRpb25zLmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcbiAgICAgICAgcmVuZGVyRm4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldFdpZGdldFJlbmRlclN0YXRlKGluaXRPcHRpb25zKSksIHt9LCB7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBpbnN0YW50U2VhcmNoSW5zdGFuY2VcbiAgICAgICAgfSksIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlbmRlck9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IHJlbmRlck9wdGlvbnMuaW5zdGFudFNlYXJjaEluc3RhbmNlO1xuICAgICAgICByZW5kZXJGbihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZ2V0V2lkZ2V0UmVuZGVyU3RhdGUocmVuZGVyT3B0aW9ucykpLCB7fSwge1xuICAgICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogaW5zdGFudFNlYXJjaEluc3RhbmNlXG4gICAgICAgIH0pLCBmYWxzZSk7XG4gICAgICB9LFxuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZShfcmVmMikge1xuICAgICAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTtcbiAgICAgICAgdW5tb3VudEZuKCk7XG4gICAgICAgIHJldHVybiBzdGF0ZS5zZXRRdWVyeVBhcmFtZXRlcigncXVlcnknLCB1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIGdldFJlbmRlclN0YXRlOiBmdW5jdGlvbiBnZXRSZW5kZXJTdGF0ZShyZW5kZXJTdGF0ZSwgcmVuZGVyT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZW5kZXJTdGF0ZSksIHt9LCB7XG4gICAgICAgICAgc2VhcmNoQm94OiB0aGlzLmdldFdpZGdldFJlbmRlclN0YXRlKHJlbmRlck9wdGlvbnMpXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldFdpZGdldFJlbmRlclN0YXRlOiBmdW5jdGlvbiBnZXRXaWRnZXRSZW5kZXJTdGF0ZShfcmVmMykge1xuICAgICAgICB2YXIgaGVscGVyID0gX3JlZjMuaGVscGVyLFxuICAgICAgICAgICAgc2VhcmNoTWV0YWRhdGEgPSBfcmVmMy5zZWFyY2hNZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7XG5cbiAgICAgICAgaWYgKCFfcmVmaW5lKSB7XG4gICAgICAgICAgX3JlZmluZSA9IGZ1bmN0aW9uIF9yZWZpbmUocXVlcnkpIHtcbiAgICAgICAgICAgIHF1ZXJ5SG9vayhxdWVyeSwgZnVuY3Rpb24gKHEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlci5zZXRRdWVyeShxKS5zZWFyY2goKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBfY2xlYXIgPSBmdW5jdGlvbiBfY2xlYXIoKSB7XG4gICAgICAgICAgICBoZWxwZXIuc2V0UXVlcnkoJycpLnNlYXJjaCgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHF1ZXJ5OiBzdGF0ZS5xdWVyeSB8fCAnJyxcbiAgICAgICAgICByZWZpbmU6IF9yZWZpbmUsXG4gICAgICAgICAgY2xlYXI6IF9jbGVhcixcbiAgICAgICAgICB3aWRnZXRQYXJhbXM6IHdpZGdldFBhcmFtcyxcbiAgICAgICAgICBpc1NlYXJjaFN0YWxsZWQ6IHNlYXJjaE1ldGFkYXRhLmlzU2VhcmNoU3RhbGxlZFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGdldFdpZGdldFVpU3RhdGU6IGZ1bmN0aW9uIGdldFdpZGdldFVpU3RhdGUodWlTdGF0ZSwgX3JlZjQpIHtcbiAgICAgICAgdmFyIHNlYXJjaFBhcmFtZXRlcnMgPSBfcmVmNC5zZWFyY2hQYXJhbWV0ZXJzO1xuICAgICAgICB2YXIgcXVlcnkgPSBzZWFyY2hQYXJhbWV0ZXJzLnF1ZXJ5IHx8ICcnO1xuXG4gICAgICAgIGlmIChxdWVyeSA9PT0gJycgfHwgdWlTdGF0ZSAmJiB1aVN0YXRlLnF1ZXJ5ID09PSBxdWVyeSkge1xuICAgICAgICAgIHJldHVybiB1aVN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdWlTdGF0ZSksIHt9LCB7XG4gICAgICAgICAgcXVlcnk6IHF1ZXJ5XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldFdpZGdldFNlYXJjaFBhcmFtZXRlcnM6IGZ1bmN0aW9uIGdldFdpZGdldFNlYXJjaFBhcmFtZXRlcnMoc2VhcmNoUGFyYW1ldGVycywgX3JlZjUpIHtcbiAgICAgICAgdmFyIHVpU3RhdGUgPSBfcmVmNS51aVN0YXRlO1xuICAgICAgICByZXR1cm4gc2VhcmNoUGFyYW1ldGVycy5zZXRRdWVyeVBhcmFtZXRlcigncXVlcnknLCB1aVN0YXRlLnF1ZXJ5IHx8ICcnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdFNlYXJjaEJveDsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgY2hlY2tSZW5kZXJpbmcsIGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yLCBub29wIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xudmFyIHdpdGhVc2FnZSA9IGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yKHtcbiAgbmFtZTogJ3N0YXRzJyxcbiAgY29ubmVjdG9yOiB0cnVlXG59KTtcbi8qKlxuICogKipTdGF0cyoqIGNvbm5lY3RvciBwcm92aWRlcyB0aGUgbG9naWMgdG8gYnVpbGQgYSBjdXN0b20gd2lkZ2V0IHRoYXQgd2lsbCBkaXNwbGF5c1xuICogc2VhcmNoIHN0YXRpc3RpY3MgKGhpdHMgbnVtYmVyIGFuZCBwcm9jZXNzaW5nIHRpbWUpLlxuICovXG5cbnZhciBjb25uZWN0U3RhdHMgPSBmdW5jdGlvbiBjb25uZWN0U3RhdHMocmVuZGVyRm4pIHtcbiAgdmFyIHVubW91bnRGbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbm9vcDtcbiAgY2hlY2tSZW5kZXJpbmcocmVuZGVyRm4sIHdpdGhVc2FnZSgpKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICh3aWRnZXRQYXJhbXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJCR0eXBlOiAnYWlzLnN0YXRzJyxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoaW5pdE9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IGluaXRPcHRpb25zLmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcbiAgICAgICAgcmVuZGVyRm4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldFdpZGdldFJlbmRlclN0YXRlKGluaXRPcHRpb25zKSksIHt9LCB7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBpbnN0YW50U2VhcmNoSW5zdGFuY2VcbiAgICAgICAgfSksIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlbmRlck9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IHJlbmRlck9wdGlvbnMuaW5zdGFudFNlYXJjaEluc3RhbmNlO1xuICAgICAgICByZW5kZXJGbihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZ2V0V2lkZ2V0UmVuZGVyU3RhdGUocmVuZGVyT3B0aW9ucykpLCB7fSwge1xuICAgICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogaW5zdGFudFNlYXJjaEluc3RhbmNlXG4gICAgICAgIH0pLCBmYWxzZSk7XG4gICAgICB9LFxuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgdW5tb3VudEZuKCk7XG4gICAgICB9LFxuICAgICAgZ2V0UmVuZGVyU3RhdGU6IGZ1bmN0aW9uIGdldFJlbmRlclN0YXRlKHJlbmRlclN0YXRlLCByZW5kZXJPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlbmRlclN0YXRlKSwge30sIHtcbiAgICAgICAgICBzdGF0czogdGhpcy5nZXRXaWRnZXRSZW5kZXJTdGF0ZShyZW5kZXJPcHRpb25zKVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRXaWRnZXRSZW5kZXJTdGF0ZTogZnVuY3Rpb24gZ2V0V2lkZ2V0UmVuZGVyU3RhdGUoX3JlZikge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IF9yZWYucmVzdWx0cyxcbiAgICAgICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTtcblxuICAgICAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0c1BlclBhZ2U6IHN0YXRlLmhpdHNQZXJQYWdlLFxuICAgICAgICAgICAgbmJIaXRzOiAwLFxuICAgICAgICAgICAgbmJTb3J0ZWRIaXRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhcmVIaXRzU29ydGVkOiBmYWxzZSxcbiAgICAgICAgICAgIG5iUGFnZXM6IDAsXG4gICAgICAgICAgICBwYWdlOiBzdGF0ZS5wYWdlIHx8IDAsXG4gICAgICAgICAgICBwcm9jZXNzaW5nVGltZU1TOiAtMSxcbiAgICAgICAgICAgIHF1ZXJ5OiBzdGF0ZS5xdWVyeSB8fCAnJyxcbiAgICAgICAgICAgIHdpZGdldFBhcmFtczogd2lkZ2V0UGFyYW1zXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGl0c1BlclBhZ2U6IHJlc3VsdHMuaGl0c1BlclBhZ2UsXG4gICAgICAgICAgbmJIaXRzOiByZXN1bHRzLm5iSGl0cyxcbiAgICAgICAgICBuYlNvcnRlZEhpdHM6IHJlc3VsdHMubmJTb3J0ZWRIaXRzLFxuICAgICAgICAgIGFyZUhpdHNTb3J0ZWQ6IHR5cGVvZiByZXN1bHRzLmFwcGxpZWRSZWxldmFuY3lTdHJpY3RuZXNzICE9PSAndW5kZWZpbmVkJyAmJiByZXN1bHRzLmFwcGxpZWRSZWxldmFuY3lTdHJpY3RuZXNzID4gMCAmJiByZXN1bHRzLm5iU29ydGVkSGl0cyAhPT0gcmVzdWx0cy5uYkhpdHMsXG4gICAgICAgICAgbmJQYWdlczogcmVzdWx0cy5uYlBhZ2VzLFxuICAgICAgICAgIHBhZ2U6IHJlc3VsdHMucGFnZSxcbiAgICAgICAgICBwcm9jZXNzaW5nVGltZU1TOiByZXN1bHRzLnByb2Nlc3NpbmdUaW1lTVMsXG4gICAgICAgICAgcXVlcnk6IHJlc3VsdHMucXVlcnksXG4gICAgICAgICAgd2lkZ2V0UGFyYW1zOiB3aWRnZXRQYXJhbXNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdFN0YXRzOyIsImZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgSGlnaGxpZ2h0IGFzIEhpZ2hsaWdodFVpQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvSGlnaGxpZ2h0L0hpZ2hsaWdodC5qc1wiO1xuaW1wb3J0IHsgZ2V0UHJvcGVydHlCeVBhdGgsIHVuZXNjYXBlLCB0b0FycmF5LCB3YXJuaW5nLCBnZXRIaWdobGlnaHRlZFBhcnRzIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIEhpZ2hsaWdodChfcmVmKSB7XG4gIHZhciBoaXQgPSBfcmVmLmhpdCxcbiAgICAgIGF0dHJpYnV0ZSA9IF9yZWYuYXR0cmlidXRlLFxuICAgICAgY3NzQ2xhc3NlcyA9IF9yZWYuY3NzQ2xhc3NlcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImhpdFwiLCBcImF0dHJpYnV0ZVwiLCBcImNzc0NsYXNzZXNcIl0pO1xuXG4gIHZhciBwcm9wZXJ0eSA9IGdldFByb3BlcnR5QnlQYXRoKGhpdC5faGlnaGxpZ2h0UmVzdWx0LCBhdHRyaWJ1dGUpIHx8IFtdO1xuICB2YXIgcHJvcGVydGllcyA9IHRvQXJyYXkocHJvcGVydHkpO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoQm9vbGVhbihwcm9wZXJ0aWVzLmxlbmd0aCksIFwiQ291bGQgbm90IGVuYWJsZSBoaWdobGlnaHQgZm9yIFxcXCJcIi5jb25jYXQoYXR0cmlidXRlLnRvU3RyaW5nKCksIFwiXFxcIiwgd2lsbCBkaXNwbGF5IGFuIGVtcHR5IHN0cmluZy5cXG5QbGVhc2UgY2hlY2sgd2hldGhlciB0aGlzIGF0dHJpYnV0ZSBleGlzdHMgYW5kIGlzIGVpdGhlciBzZWFyY2hhYmxlIG9yIHNwZWNpZmllZCBpbiBgYXR0cmlidXRlc1RvSGlnaGxpZ2h0YC5cXG5cXG5TZWU6IGh0dHBzOi8vYWxnLmxpL2hpZ2hsaWdodGluZ1xcblwiKSkgOiB2b2lkIDA7XG4gIHZhciBwYXJ0cyA9IHByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChfcmVmMikge1xuICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlO1xuICAgIHJldHVybiBnZXRIaWdobGlnaHRlZFBhcnRzKHVuZXNjYXBlKHZhbHVlIHx8ICcnKSk7XG4gIH0pO1xuICByZXR1cm4gaChIaWdobGlnaHRVaUNvbXBvbmVudCwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgcGFydHM6IHBhcnRzLFxuICAgIGNsYXNzTmFtZXM6IGNzc0NsYXNzZXNcbiAgfSkpO1xufSIsImZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IFJldmVyc2VIaWdobGlnaHQgYXMgUmV2ZXJzZUhpZ2hsaWdodFVpQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvUmV2ZXJzZUhpZ2hsaWdodC9SZXZlcnNlSGlnaGxpZ2h0LmpzXCI7XG5pbXBvcnQgeyBnZXRQcm9wZXJ0eUJ5UGF0aCwgdW5lc2NhcGUsIHRvQXJyYXksIHdhcm5pbmcsIGdldEhpZ2hsaWdodGVkUGFydHMgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gUmV2ZXJzZUhpZ2hsaWdodChfcmVmKSB7XG4gIHZhciBoaXQgPSBfcmVmLmhpdCxcbiAgICAgIGF0dHJpYnV0ZSA9IF9yZWYuYXR0cmlidXRlLFxuICAgICAgY3NzQ2xhc3NlcyA9IF9yZWYuY3NzQ2xhc3NlcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImhpdFwiLCBcImF0dHJpYnV0ZVwiLCBcImNzc0NsYXNzZXNcIl0pO1xuXG4gIHZhciBwcm9wZXJ0eSA9IGdldFByb3BlcnR5QnlQYXRoKGhpdC5faGlnaGxpZ2h0UmVzdWx0LCBhdHRyaWJ1dGUpIHx8IFtdO1xuICB2YXIgcHJvcGVydGllcyA9IHRvQXJyYXkocHJvcGVydHkpO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoQm9vbGVhbihwcm9wZXJ0aWVzLmxlbmd0aCksIFwiQ291bGQgbm90IGVuYWJsZSBoaWdobGlnaHQgZm9yIFxcXCJcIi5jb25jYXQoYXR0cmlidXRlLnRvU3RyaW5nKCksIFwiXFxcIiwgd2lsbCBkaXNwbGF5IGFuIGVtcHR5IHN0cmluZy5cXG5QbGVhc2UgY2hlY2sgd2hldGhlciB0aGlzIGF0dHJpYnV0ZSBleGlzdHMgYW5kIGlzIGVpdGhlciBzZWFyY2hhYmxlIG9yIHNwZWNpZmllZCBpbiBgYXR0cmlidXRlc1RvSGlnaGxpZ2h0YC5cXG5cXG5TZWU6IGh0dHBzOi8vYWxnLmxpL2hpZ2hsaWdodGluZ1xcblwiKSkgOiB2b2lkIDA7XG4gIHZhciBwYXJ0cyA9IHByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChfcmVmMikge1xuICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlO1xuICAgIHJldHVybiBnZXRIaWdobGlnaHRlZFBhcnRzKHVuZXNjYXBlKHZhbHVlIHx8ICcnKSkubWFwKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIGlzSGlnaGxpZ2h0ZWQgPSBfcmVmMy5pc0hpZ2hsaWdodGVkLFxuICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjMsIFtcImlzSGlnaGxpZ2h0ZWRcIl0pO1xuXG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXN0KSwge30sIHtcbiAgICAgICAgaXNIaWdobGlnaHRlZDogIWlzSGlnaGxpZ2h0ZWRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGgoUmV2ZXJzZUhpZ2hsaWdodFVpQ29tcG9uZW50LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBwYXJ0czogcGFydHMsXG4gICAgY2xhc3NOYW1lczogY3NzQ2xhc3Nlc1xuICB9KSk7XG59IiwiZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgUmV2ZXJzZVNuaXBwZXQgYXMgUmV2ZXJzZVNuaXBwZXRVaUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL1JldmVyc2VTbmlwcGV0L1JldmVyc2VTbmlwcGV0LmpzXCI7XG5pbXBvcnQgeyBnZXRQcm9wZXJ0eUJ5UGF0aCwgdW5lc2NhcGUsIHRvQXJyYXksIHdhcm5pbmcsIGdldEhpZ2hsaWdodGVkUGFydHMgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gUmV2ZXJzZVNuaXBwZXQoX3JlZikge1xuICB2YXIgaGl0ID0gX3JlZi5oaXQsXG4gICAgICBhdHRyaWJ1dGUgPSBfcmVmLmF0dHJpYnV0ZSxcbiAgICAgIGNzc0NsYXNzZXMgPSBfcmVmLmNzc0NsYXNzZXMsXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJoaXRcIiwgXCJhdHRyaWJ1dGVcIiwgXCJjc3NDbGFzc2VzXCJdKTtcblxuICB2YXIgcHJvcGVydHkgPSBnZXRQcm9wZXJ0eUJ5UGF0aChoaXQuX3NuaXBwZXRSZXN1bHQsIGF0dHJpYnV0ZSkgfHwgW107XG4gIHZhciBwcm9wZXJ0aWVzID0gdG9BcnJheShwcm9wZXJ0eSk7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyhCb29sZWFuKHByb3BlcnRpZXMubGVuZ3RoKSwgXCJDb3VsZCBub3QgZW5hYmxlIHNuaXBwZXQgZm9yIFxcXCJcIi5jb25jYXQoYXR0cmlidXRlLnRvU3RyaW5nKCksIFwiXFxcIiwgd2lsbCBkaXNwbGF5IGFuIGVtcHR5IHN0cmluZy5cXG5QbGVhc2UgY2hlY2sgd2hldGhlciB0aGlzIGF0dHJpYnV0ZSBleGlzdHMgYW5kIGlzIHNwZWNpZmllZCBpbiBgYXR0cmlidXRlc1RvU25pcHBldGAuXFxuXFxuU2VlOiBodHRwczovL2FsZy5saS9oaWdobGlnaHRpbmdcXG5cIikpIDogdm9pZCAwO1xuICB2YXIgcGFydHMgPSBwcm9wZXJ0aWVzLm1hcChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICB2YXIgdmFsdWUgPSBfcmVmMi52YWx1ZTtcbiAgICByZXR1cm4gZ2V0SGlnaGxpZ2h0ZWRQYXJ0cyh1bmVzY2FwZSh2YWx1ZSB8fCAnJykpLm1hcChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgIHZhciBpc0hpZ2hsaWdodGVkID0gX3JlZjMuaXNIaWdobGlnaHRlZCxcbiAgICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYzLCBbXCJpc0hpZ2hsaWdodGVkXCJdKTtcblxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVzdCksIHt9LCB7XG4gICAgICAgIGlzSGlnaGxpZ2h0ZWQ6ICFpc0hpZ2hsaWdodGVkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBoKFJldmVyc2VTbmlwcGV0VWlDb21wb25lbnQsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHBhcnRzOiBwYXJ0cyxcbiAgICBjbGFzc05hbWVzOiBjc3NDbGFzc2VzXG4gIH0pKTtcbn0iLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IFNuaXBwZXQgYXMgU25pcHBldFVpQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvU25pcHBldC9TbmlwcGV0LmpzXCI7XG5pbXBvcnQgeyBnZXRQcm9wZXJ0eUJ5UGF0aCwgdW5lc2NhcGUsIHRvQXJyYXksIHdhcm5pbmcsIGdldEhpZ2hsaWdodGVkUGFydHMgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gU25pcHBldChfcmVmKSB7XG4gIHZhciBoaXQgPSBfcmVmLmhpdCxcbiAgICAgIGF0dHJpYnV0ZSA9IF9yZWYuYXR0cmlidXRlLFxuICAgICAgY3NzQ2xhc3NlcyA9IF9yZWYuY3NzQ2xhc3NlcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImhpdFwiLCBcImF0dHJpYnV0ZVwiLCBcImNzc0NsYXNzZXNcIl0pO1xuXG4gIHZhciBwcm9wZXJ0eSA9IGdldFByb3BlcnR5QnlQYXRoKGhpdC5fc25pcHBldFJlc3VsdCwgYXR0cmlidXRlKSB8fCBbXTtcbiAgdmFyIHByb3BlcnRpZXMgPSB0b0FycmF5KHByb3BlcnR5KTtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB3YXJuaW5nKEJvb2xlYW4ocHJvcGVydGllcy5sZW5ndGgpLCBcIkNvdWxkIG5vdCBlbmFibGUgc25pcHBldCBmb3IgXFxcIlwiLmNvbmNhdChhdHRyaWJ1dGUudG9TdHJpbmcoKSwgXCJcXFwiLCB3aWxsIGRpc3BsYXkgYW4gZW1wdHkgc3RyaW5nLlxcblBsZWFzZSBjaGVjayB3aGV0aGVyIHRoaXMgYXR0cmlidXRlIGV4aXN0cyBhbmQgaXMgc3BlY2lmaWVkIGluIGBhdHRyaWJ1dGVzVG9TbmlwcGV0YC5cXG5cXG5TZWU6IGh0dHBzOi8vYWxnLmxpL2hpZ2hsaWdodGluZ1xcblwiKSkgOiB2b2lkIDA7XG4gIHZhciBwYXJ0cyA9IHByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChfcmVmMikge1xuICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlO1xuICAgIHJldHVybiBnZXRIaWdobGlnaHRlZFBhcnRzKHVuZXNjYXBlKHZhbHVlIHx8ICcnKSk7XG4gIH0pO1xuICByZXR1cm4gaChTbmlwcGV0VWlDb21wb25lbnQsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHBhcnRzOiBwYXJ0cyxcbiAgICBjbGFzc05hbWVzOiBjc3NDbGFzc2VzXG4gIH0pKTtcbn0iLCJpbXBvcnQgeyB3YXJuaW5nIH0gZnJvbSBcIi4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xuZXhwb3J0IHZhciBBTk9OWU1PVVNfVE9LRU5fQ09PS0lFX0tFWSA9ICdfQUxHT0xJQSc7XG5cbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBcIlwiLmNvbmNhdChuYW1lLCBcIj1cIik7XG4gIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV07XG5cbiAgICB3aGlsZSAoY29va2llLmNoYXJBdCgwKSA9PT0gJyAnKSB7XG4gICAgICBjb29raWUgPSBjb29raWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIGlmIChjb29raWUuaW5kZXhPZihwcmVmaXgpID09PSAwKSB7XG4gICAgICByZXR1cm4gY29va2llLnN1YnN0cmluZyhwcmVmaXgubGVuZ3RoLCBjb29raWUubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5zaWdodHNBbm9ueW1vdXNVc2VyVG9rZW5JbnRlcm5hbCgpIHtcbiAgcmV0dXJuIGdldENvb2tpZShBTk9OWU1PVVNfVE9LRU5fQ09PS0lFX0tFWSk7XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBzdGlsbCBzdXBwb3J0ZWQgaW4gNC54IHJlbGVhc2VzLCBidXQgbm90IGZ1cnRoZXIuIEl0IGlzIHJlcGxhY2VkIGJ5IHRoZSBgaW5zaWdodHNgIG1pZGRsZXdhcmUuIEZvciBtb3JlIGluZm9ybWF0aW9uLCB2aXNpdCBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL2dldHRpbmctaW5zaWdodHMtYW5kLWFuYWx5dGljcy9zZWFyY2gtYW5hbHl0aWNzL2NsaWNrLXRocm91Z2gtYW5kLWNvbnZlcnNpb25zL2hvdy10by9zZW5kLWNsaWNrLWFuZC1jb252ZXJzaW9uLWV2ZW50cy13aXRoLWluc3RhbnRzZWFyY2gvanMvXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0SW5zaWdodHNBbm9ueW1vdXNVc2VyVG9rZW4oKSB7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyhmYWxzZSwgXCJgZ2V0SW5zaWdodHNBbm9ueW1vdXNVc2VyVG9rZW5gIGZ1bmN0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IGlzIHN0aWxsIHN1cHBvcnRlZCBpbiA0LnggcmVsZWFzZXMsIGJ1dCBub3QgZnVydGhlci4gSXQgaXMgcmVwbGFjZWQgYnkgdGhlIGBpbnNpZ2h0c2AgbWlkZGxld2FyZS5cXG5cXG5Gb3IgbW9yZSBpbmZvcm1hdGlvbiwgdmlzaXQgaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL2d1aWRlcy9nZXR0aW5nLWluc2lnaHRzLWFuZC1hbmFseXRpY3Mvc2VhcmNoLWFuYWx5dGljcy9jbGljay10aHJvdWdoLWFuZC1jb252ZXJzaW9ucy9ob3ctdG8vc2VuZC1jbGljay1hbmQtY29udmVyc2lvbi1ldmVudHMtd2l0aC1pbnN0YW50c2VhcmNoL2pzL1wiKSA6IHZvaWQgMDtcbiAgcmV0dXJuIGdldEluc2lnaHRzQW5vbnltb3VzVXNlclRva2VuSW50ZXJuYWwoKTtcbn0iLCJpbXBvcnQgeyBjb21wb25lbnQgfSBmcm9tIFwiLi4vbGliL3N1aXQuanNcIjtcbmltcG9ydCB7IGdldFByb3BlcnR5QnlQYXRoLCBUQUdfUkVQTEFDRU1FTlQsIHdhcm5pbmcgfSBmcm9tIFwiLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG52YXIgc3VpdCA9IGNvbXBvbmVudCgnSGlnaGxpZ2h0Jyk7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoaWdobGlnaHQoX3JlZikge1xuICB2YXIgYXR0cmlidXRlID0gX3JlZi5hdHRyaWJ1dGUsXG4gICAgICBfcmVmJGhpZ2hsaWdodGVkVGFnTmEgPSBfcmVmLmhpZ2hsaWdodGVkVGFnTmFtZSxcbiAgICAgIGhpZ2hsaWdodGVkVGFnTmFtZSA9IF9yZWYkaGlnaGxpZ2h0ZWRUYWdOYSA9PT0gdm9pZCAwID8gJ21hcmsnIDogX3JlZiRoaWdobGlnaHRlZFRhZ05hLFxuICAgICAgaGl0ID0gX3JlZi5oaXQsXG4gICAgICBfcmVmJGNzc0NsYXNzZXMgPSBfcmVmLmNzc0NsYXNzZXMsXG4gICAgICBjc3NDbGFzc2VzID0gX3JlZiRjc3NDbGFzc2VzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkY3NzQ2xhc3NlcztcbiAgdmFyIGhpZ2hsaWdodEF0dHJpYnV0ZVJlc3VsdCA9IGdldFByb3BlcnR5QnlQYXRoKGhpdC5faGlnaGxpZ2h0UmVzdWx0LCBhdHRyaWJ1dGUpOyAvLyBATUFKT1IgZmFsbGJhY2sgdG8gYXR0cmlidXRlIHZhbHVlIGlmIGhpZ2hsaWdodCBpcyBub3QgZm91bmRcblxuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoaGlnaGxpZ2h0QXR0cmlidXRlUmVzdWx0LCBcIkNvdWxkIG5vdCBlbmFibGUgaGlnaGxpZ2h0IGZvciBcXFwiXCIuY29uY2F0KGF0dHJpYnV0ZSwgXCJcXFwiLCB3aWxsIGRpc3BsYXkgYW4gZW1wdHkgc3RyaW5nLlxcblBsZWFzZSBjaGVjayB3aGV0aGVyIHRoaXMgYXR0cmlidXRlIGV4aXN0cyBhbmQgaXMgZWl0aGVyIHNlYXJjaGFibGUgb3Igc3BlY2lmaWVkIGluIGBhdHRyaWJ1dGVzVG9IaWdobGlnaHRgLlxcblxcblNlZTogaHR0cHM6Ly9hbGcubGkvaGlnaGxpZ2h0aW5nXFxuXCIpKSA6IHZvaWQgMDtcblxuICB2YXIgX3JlZjIgPSBoaWdobGlnaHRBdHRyaWJ1dGVSZXN1bHQgfHwge30sXG4gICAgICBfcmVmMiR2YWx1ZSA9IF9yZWYyLnZhbHVlLFxuICAgICAgYXR0cmlidXRlVmFsdWUgPSBfcmVmMiR2YWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMiR2YWx1ZTsgLy8gY3ggaXMgbm90IHVzZWQsIHNpbmNlIGl0IHdvdWxkIGJlIGJ1bmRsZWQgYXMgYSBkZXBlbmRlbmN5IGZvciBWdWUgJiBBbmd1bGFyXG5cblxuICB2YXIgY2xhc3NOYW1lID0gc3VpdCh7XG4gICAgZGVzY2VuZGFudE5hbWU6ICdoaWdobGlnaHRlZCdcbiAgfSkgKyAoY3NzQ2xhc3Nlcy5oaWdobGlnaHRlZCA/IFwiIFwiLmNvbmNhdChjc3NDbGFzc2VzLmhpZ2hsaWdodGVkKSA6ICcnKTtcbiAgcmV0dXJuIGF0dHJpYnV0ZVZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChUQUdfUkVQTEFDRU1FTlQuaGlnaGxpZ2h0UHJlVGFnLCAnZycpLCBcIjxcIi5jb25jYXQoaGlnaGxpZ2h0ZWRUYWdOYW1lLCBcIiBjbGFzcz1cXFwiXCIpLmNvbmNhdChjbGFzc05hbWUsIFwiXFxcIj5cIikpLnJlcGxhY2UobmV3IFJlZ0V4cChUQUdfUkVQTEFDRU1FTlQuaGlnaGxpZ2h0UG9zdFRhZywgJ2cnKSwgXCI8L1wiLmNvbmNhdChoaWdobGlnaHRlZFRhZ05hbWUsIFwiPlwiKSk7XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5pbXBvcnQgeyB3YXJuaW5nLCBzZXJpYWxpemVQYXlsb2FkLCBkZXNlcmlhbGl6ZVBheWxvYWQgfSBmcm9tIFwiLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcmVhZERhdGFBdHRyaWJ1dGVzKGRvbUVsZW1lbnQpIHtcbiAgdmFyIG1ldGhvZCA9IGRvbUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWluc2lnaHRzLW1ldGhvZCcpO1xuICB2YXIgc2VyaWFsaXplZFBheWxvYWQgPSBkb21FbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pbnNpZ2h0cy1wYXlsb2FkJyk7XG5cbiAgaWYgKHR5cGVvZiBzZXJpYWxpemVkUGF5bG9hZCAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBpbnNpZ2h0cyBoZWxwZXIgZXhwZWN0cyBgZGF0YS1pbnNpZ2h0cy1wYXlsb2FkYCB0byBiZSBhIGJhc2U2NC1lbmNvZGVkIEpTT04gc3RyaW5nLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICB2YXIgcGF5bG9hZCA9IGRlc2VyaWFsaXplUGF5bG9hZChzZXJpYWxpemVkUGF5bG9hZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgcGF5bG9hZDogcGF5bG9hZFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5zaWdodHMgaGVscGVyIHdhcyB1bmFibGUgdG8gcGFyc2UgYGRhdGEtaW5zaWdodHMtcGF5bG9hZGAuJyk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNEYXRhQXR0cmlidXRlcyhkb21FbGVtZW50KSB7XG4gIHJldHVybiBkb21FbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1pbnNpZ2h0cy1tZXRob2QnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZURhdGFBdHRyaWJ1dGVzKF9yZWYpIHtcbiAgdmFyIG1ldGhvZCA9IF9yZWYubWV0aG9kLFxuICAgICAgcGF5bG9hZCA9IF9yZWYucGF5bG9hZDtcblxuICBpZiAoX3R5cGVvZihwYXlsb2FkKSAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgaW5zaWdodHMgaGVscGVyIGV4cGVjdHMgdGhlIHBheWxvYWQgdG8gYmUgYW4gb2JqZWN0LlwiKTtcbiAgfVxuXG4gIHZhciBzZXJpYWxpemVkUGF5bG9hZDtcblxuICB0cnkge1xuICAgIHNlcmlhbGl6ZWRQYXlsb2FkID0gc2VyaWFsaXplUGF5bG9hZChwYXlsb2FkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgSlNPTiBzZXJpYWxpemUgdGhlIHBheWxvYWQgb2JqZWN0LlwiKTtcbiAgfVxuXG4gIHJldHVybiBcImRhdGEtaW5zaWdodHMtbWV0aG9kPVxcXCJcIi5jb25jYXQobWV0aG9kLCBcIlxcXCIgZGF0YS1pbnNpZ2h0cy1wYXlsb2FkPVxcXCJcIikuY29uY2F0KHNlcmlhbGl6ZWRQYXlsb2FkLCBcIlxcXCJcIik7XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBzdGlsbCBzdXBwb3J0ZWQgaW4gNC54IHJlbGVhc2VzLCBidXQgbm90IGZ1cnRoZXIuIEl0IGlzIHJlcGxhY2VkIGJ5IHRoZSBgaW5zaWdodHNgIG1pZGRsZXdhcmUuIEZvciBtb3JlIGluZm9ybWF0aW9uLCB2aXNpdCBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL2dldHRpbmctaW5zaWdodHMtYW5kLWFuYWx5dGljcy9zZWFyY2gtYW5hbHl0aWNzL2NsaWNrLXRocm91Z2gtYW5kLWNvbnZlcnNpb25zL2hvdy10by9zZW5kLWNsaWNrLWFuZC1jb252ZXJzaW9uLWV2ZW50cy13aXRoLWluc3RhbnRzZWFyY2gvanMvXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5zaWdodHMobWV0aG9kLCBwYXlsb2FkKSB7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyhmYWxzZSwgXCJgaW5zaWdodHNgIGZ1bmN0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IGlzIHN0aWxsIHN1cHBvcnRlZCBpbiA0LnggcmVsZWFzZXMsIGJ1dCBub3QgZnVydGhlci4gSXQgaXMgcmVwbGFjZWQgYnkgdGhlIGBpbnNpZ2h0c2AgbWlkZGxld2FyZS5cXG5cXG5Gb3IgbW9yZSBpbmZvcm1hdGlvbiwgdmlzaXQgaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL2d1aWRlcy9nZXR0aW5nLWluc2lnaHRzLWFuZC1hbmFseXRpY3Mvc2VhcmNoLWFuYWx5dGljcy9jbGljay10aHJvdWdoLWFuZC1jb252ZXJzaW9ucy9ob3ctdG8vc2VuZC1jbGljay1hbmQtY29udmVyc2lvbi1ldmVudHMtd2l0aC1pbnN0YW50c2VhcmNoL2pzL1wiKSA6IHZvaWQgMDtcbiAgcmV0dXJuIHdyaXRlRGF0YUF0dHJpYnV0ZXMoe1xuICAgIG1ldGhvZDogbWV0aG9kLFxuICAgIHBheWxvYWQ6IHBheWxvYWRcbiAgfSk7XG59IiwiaW1wb3J0IHsgVEFHX1JFUExBQ0VNRU5ULCBnZXRQcm9wZXJ0eUJ5UGF0aCwgZ2V0SGlnaGxpZ2h0ZWRQYXJ0cywgcmV2ZXJzZUhpZ2hsaWdodGVkUGFydHMsIGNvbmNhdEhpZ2hsaWdodGVkUGFydHMsIHdhcm5pbmcgfSBmcm9tIFwiLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjb21wb25lbnQgfSBmcm9tIFwiLi4vbGliL3N1aXQuanNcIjtcbnZhciBzdWl0ID0gY29tcG9uZW50KCdSZXZlcnNlSGlnaGxpZ2h0Jyk7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXZlcnNlSGlnaGxpZ2h0KF9yZWYpIHtcbiAgdmFyIGF0dHJpYnV0ZSA9IF9yZWYuYXR0cmlidXRlLFxuICAgICAgX3JlZiRoaWdobGlnaHRlZFRhZ05hID0gX3JlZi5oaWdobGlnaHRlZFRhZ05hbWUsXG4gICAgICBoaWdobGlnaHRlZFRhZ05hbWUgPSBfcmVmJGhpZ2hsaWdodGVkVGFnTmEgPT09IHZvaWQgMCA/ICdtYXJrJyA6IF9yZWYkaGlnaGxpZ2h0ZWRUYWdOYSxcbiAgICAgIGhpdCA9IF9yZWYuaGl0LFxuICAgICAgX3JlZiRjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgY3NzQ2xhc3NlcyA9IF9yZWYkY3NzQ2xhc3NlcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJGNzc0NsYXNzZXM7XG4gIHZhciBoaWdobGlnaHRBdHRyaWJ1dGVSZXN1bHQgPSBnZXRQcm9wZXJ0eUJ5UGF0aChoaXQuX2hpZ2hsaWdodFJlc3VsdCwgYXR0cmlidXRlKTsgLy8gQE1BSk9SIGZhbGxiYWNrIHRvIGF0dHJpYnV0ZSB2YWx1ZSBpZiBoaWdobGlnaHQgaXMgbm90IGZvdW5kXG5cbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB3YXJuaW5nKGhpZ2hsaWdodEF0dHJpYnV0ZVJlc3VsdCwgXCJDb3VsZCBub3QgZW5hYmxlIHJldmVyc2UgaGlnaGxpZ2h0IGZvciBcXFwiXCIuY29uY2F0KGF0dHJpYnV0ZSwgXCJcXFwiLCB3aWxsIGRpc3BsYXkgYW4gZW1wdHkgc3RyaW5nLlxcblBsZWFzZSBjaGVjayB3aGV0aGVyIHRoaXMgYXR0cmlidXRlIGV4aXN0cyBhbmQgaXMgZWl0aGVyIHNlYXJjaGFibGUgb3Igc3BlY2lmaWVkIGluIGBhdHRyaWJ1dGVzVG9IaWdobGlnaHRgLlxcblxcblNlZTogaHR0cHM6Ly9hbGcubGkvaGlnaGxpZ2h0aW5nXFxuXCIpKSA6IHZvaWQgMDtcblxuICB2YXIgX3JlZjIgPSBoaWdobGlnaHRBdHRyaWJ1dGVSZXN1bHQgfHwge30sXG4gICAgICBfcmVmMiR2YWx1ZSA9IF9yZWYyLnZhbHVlLFxuICAgICAgYXR0cmlidXRlVmFsdWUgPSBfcmVmMiR2YWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMiR2YWx1ZTsgLy8gY3ggaXMgbm90IHVzZWQsIHNpbmNlIGl0IHdvdWxkIGJlIGJ1bmRsZWQgYXMgYSBkZXBlbmRlbmN5IGZvciBWdWUgJiBBbmd1bGFyXG5cblxuICB2YXIgY2xhc3NOYW1lID0gc3VpdCh7XG4gICAgZGVzY2VuZGFudE5hbWU6ICdoaWdobGlnaHRlZCdcbiAgfSkgKyAoY3NzQ2xhc3Nlcy5oaWdobGlnaHRlZCA/IFwiIFwiLmNvbmNhdChjc3NDbGFzc2VzLmhpZ2hsaWdodGVkKSA6ICcnKTtcbiAgdmFyIHJldmVyc2VIaWdobGlnaHRlZFZhbHVlID0gY29uY2F0SGlnaGxpZ2h0ZWRQYXJ0cyhyZXZlcnNlSGlnaGxpZ2h0ZWRQYXJ0cyhnZXRIaWdobGlnaHRlZFBhcnRzKGF0dHJpYnV0ZVZhbHVlKSkpO1xuICByZXR1cm4gcmV2ZXJzZUhpZ2hsaWdodGVkVmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKFRBR19SRVBMQUNFTUVOVC5oaWdobGlnaHRQcmVUYWcsICdnJyksIFwiPFwiLmNvbmNhdChoaWdobGlnaHRlZFRhZ05hbWUsIFwiIGNsYXNzPVxcXCJcIikuY29uY2F0KGNsYXNzTmFtZSwgXCJcXFwiPlwiKSkucmVwbGFjZShuZXcgUmVnRXhwKFRBR19SRVBMQUNFTUVOVC5oaWdobGlnaHRQb3N0VGFnLCAnZycpLCBcIjwvXCIuY29uY2F0KGhpZ2hsaWdodGVkVGFnTmFtZSwgXCI+XCIpKTtcbn0iLCJpbXBvcnQgeyBUQUdfUkVQTEFDRU1FTlQsIGdldFByb3BlcnR5QnlQYXRoLCBnZXRIaWdobGlnaHRlZFBhcnRzLCByZXZlcnNlSGlnaGxpZ2h0ZWRQYXJ0cywgY29uY2F0SGlnaGxpZ2h0ZWRQYXJ0cywgd2FybmluZyB9IGZyb20gXCIuLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gXCIuLi9saWIvc3VpdC5qc1wiO1xudmFyIHN1aXQgPSBjb21wb25lbnQoJ1JldmVyc2VTbmlwcGV0Jyk7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXZlcnNlU25pcHBldChfcmVmKSB7XG4gIHZhciBhdHRyaWJ1dGUgPSBfcmVmLmF0dHJpYnV0ZSxcbiAgICAgIF9yZWYkaGlnaGxpZ2h0ZWRUYWdOYSA9IF9yZWYuaGlnaGxpZ2h0ZWRUYWdOYW1lLFxuICAgICAgaGlnaGxpZ2h0ZWRUYWdOYW1lID0gX3JlZiRoaWdobGlnaHRlZFRhZ05hID09PSB2b2lkIDAgPyAnbWFyaycgOiBfcmVmJGhpZ2hsaWdodGVkVGFnTmEsXG4gICAgICBoaXQgPSBfcmVmLmhpdCxcbiAgICAgIF9yZWYkY3NzQ2xhc3NlcyA9IF9yZWYuY3NzQ2xhc3NlcyxcbiAgICAgIGNzc0NsYXNzZXMgPSBfcmVmJGNzc0NsYXNzZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRjc3NDbGFzc2VzO1xuICB2YXIgc25pcHBldEF0dHJpYnV0ZVJlc3VsdCA9IGdldFByb3BlcnR5QnlQYXRoKGhpdC5fc25pcHBldFJlc3VsdCwgYXR0cmlidXRlKTsgLy8gQE1BSk9SIGZhbGxiYWNrIHRvIGF0dHJpYnV0ZSB2YWx1ZSBpZiBzbmlwcGV0IGlzIG5vdCBmb3VuZFxuXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyhzbmlwcGV0QXR0cmlidXRlUmVzdWx0LCBcIkNvdWxkIG5vdCBlbmFibGUgcmV2ZXJzZSBzbmlwcGV0IGZvciBcXFwiXCIuY29uY2F0KGF0dHJpYnV0ZSwgXCJcXFwiLCB3aWxsIGRpc3BsYXkgYW4gZW1wdHkgc3RyaW5nLlxcblBsZWFzZSBjaGVjayB3aGV0aGVyIHRoaXMgYXR0cmlidXRlIGV4aXN0cyBhbmQgaXMgc3BlY2lmaWVkIGluIGBhdHRyaWJ1dGVzVG9TbmlwcGV0YC5cXG5cXG5TZWU6IGh0dHBzOi8vYWxnLmxpL2hpZ2hsaWdodGluZ1xcblwiKSkgOiB2b2lkIDA7XG5cbiAgdmFyIF9yZWYyID0gc25pcHBldEF0dHJpYnV0ZVJlc3VsdCB8fCB7fSxcbiAgICAgIF9yZWYyJHZhbHVlID0gX3JlZjIudmFsdWUsXG4gICAgICBhdHRyaWJ1dGVWYWx1ZSA9IF9yZWYyJHZhbHVlID09PSB2b2lkIDAgPyAnJyA6IF9yZWYyJHZhbHVlOyAvLyBjeCBpcyBub3QgdXNlZCwgc2luY2UgaXQgd291bGQgYmUgYnVuZGxlZCBhcyBhIGRlcGVuZGVuY3kgZm9yIFZ1ZSAmIEFuZ3VsYXJcblxuXG4gIHZhciBjbGFzc05hbWUgPSBzdWl0KHtcbiAgICBkZXNjZW5kYW50TmFtZTogJ2hpZ2hsaWdodGVkJ1xuICB9KSArIChjc3NDbGFzc2VzLmhpZ2hsaWdodGVkID8gXCIgXCIuY29uY2F0KGNzc0NsYXNzZXMuaGlnaGxpZ2h0ZWQpIDogJycpO1xuICB2YXIgcmV2ZXJzZUhpZ2hsaWdodGVkVmFsdWUgPSBjb25jYXRIaWdobGlnaHRlZFBhcnRzKHJldmVyc2VIaWdobGlnaHRlZFBhcnRzKGdldEhpZ2hsaWdodGVkUGFydHMoYXR0cmlidXRlVmFsdWUpKSk7XG4gIHJldHVybiByZXZlcnNlSGlnaGxpZ2h0ZWRWYWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoVEFHX1JFUExBQ0VNRU5ULmhpZ2hsaWdodFByZVRhZywgJ2cnKSwgXCI8XCIuY29uY2F0KGhpZ2hsaWdodGVkVGFnTmFtZSwgXCIgY2xhc3M9XFxcIlwiKS5jb25jYXQoY2xhc3NOYW1lLCBcIlxcXCI+XCIpKS5yZXBsYWNlKG5ldyBSZWdFeHAoVEFHX1JFUExBQ0VNRU5ULmhpZ2hsaWdodFBvc3RUYWcsICdnJyksIFwiPC9cIi5jb25jYXQoaGlnaGxpZ2h0ZWRUYWdOYW1lLCBcIj5cIikpO1xufSIsImltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gXCIuLi9saWIvc3VpdC5qc1wiO1xuaW1wb3J0IHsgVEFHX1JFUExBQ0VNRU5ULCBnZXRQcm9wZXJ0eUJ5UGF0aCwgd2FybmluZyB9IGZyb20gXCIuLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbnZhciBzdWl0ID0gY29tcG9uZW50KCdTbmlwcGV0Jyk7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzbmlwcGV0KF9yZWYpIHtcbiAgdmFyIGF0dHJpYnV0ZSA9IF9yZWYuYXR0cmlidXRlLFxuICAgICAgX3JlZiRoaWdobGlnaHRlZFRhZ05hID0gX3JlZi5oaWdobGlnaHRlZFRhZ05hbWUsXG4gICAgICBoaWdobGlnaHRlZFRhZ05hbWUgPSBfcmVmJGhpZ2hsaWdodGVkVGFnTmEgPT09IHZvaWQgMCA/ICdtYXJrJyA6IF9yZWYkaGlnaGxpZ2h0ZWRUYWdOYSxcbiAgICAgIGhpdCA9IF9yZWYuaGl0LFxuICAgICAgX3JlZiRjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgY3NzQ2xhc3NlcyA9IF9yZWYkY3NzQ2xhc3NlcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJGNzc0NsYXNzZXM7XG4gIHZhciBzbmlwcGV0QXR0cmlidXRlUmVzdWx0ID0gZ2V0UHJvcGVydHlCeVBhdGgoaGl0Ll9zbmlwcGV0UmVzdWx0LCBhdHRyaWJ1dGUpOyAvLyBATUFKT1IgZmFsbGJhY2sgdG8gYXR0cmlidXRlIHZhbHVlIGlmIHNuaXBwZXQgaXMgbm90IGZvdW5kXG5cbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB3YXJuaW5nKHNuaXBwZXRBdHRyaWJ1dGVSZXN1bHQsIFwiQ291bGQgbm90IGVuYWJsZSBzbmlwcGV0IGZvciBcXFwiXCIuY29uY2F0KGF0dHJpYnV0ZSwgXCJcXFwiLCB3aWxsIGRpc3BsYXkgYW4gZW1wdHkgc3RyaW5nLlxcblBsZWFzZSBjaGVjayB3aGV0aGVyIHRoaXMgYXR0cmlidXRlIGV4aXN0cyBhbmQgaXMgc3BlY2lmaWVkIGluIGBhdHRyaWJ1dGVzVG9TbmlwcGV0YC5cXG5cXG5TZWU6IGh0dHBzOi8vYWxnLmxpL2hpZ2hsaWdodGluZ1xcblwiKSkgOiB2b2lkIDA7XG5cbiAgdmFyIF9yZWYyID0gc25pcHBldEF0dHJpYnV0ZVJlc3VsdCB8fCB7fSxcbiAgICAgIF9yZWYyJHZhbHVlID0gX3JlZjIudmFsdWUsXG4gICAgICBhdHRyaWJ1dGVWYWx1ZSA9IF9yZWYyJHZhbHVlID09PSB2b2lkIDAgPyAnJyA6IF9yZWYyJHZhbHVlOyAvLyBjeCBpcyBub3QgdXNlZCwgc2luY2UgaXQgd291bGQgYmUgYnVuZGxlZCBhcyBhIGRlcGVuZGVuY3kgZm9yIFZ1ZSAmIEFuZ3VsYXJcblxuXG4gIHZhciBjbGFzc05hbWUgPSBzdWl0KHtcbiAgICBkZXNjZW5kYW50TmFtZTogJ2hpZ2hsaWdodGVkJ1xuICB9KSArIChjc3NDbGFzc2VzLmhpZ2hsaWdodGVkID8gXCIgXCIuY29uY2F0KGNzc0NsYXNzZXMuaGlnaGxpZ2h0ZWQpIDogJycpO1xuICByZXR1cm4gYXR0cmlidXRlVmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKFRBR19SRVBMQUNFTUVOVC5oaWdobGlnaHRQcmVUYWcsICdnJyksIFwiPFwiLmNvbmNhdChoaWdobGlnaHRlZFRhZ05hbWUsIFwiIGNsYXNzPVxcXCJcIikuY29uY2F0KGNsYXNzTmFtZSwgXCJcXFwiPlwiKSkucmVwbGFjZShuZXcgUmVnRXhwKFRBR19SRVBMQUNFTUVOVC5oaWdobGlnaHRQb3N0VGFnLCAnZycpLCBcIjwvXCIuY29uY2F0KGhpZ2hsaWdodGVkVGFnTmFtZSwgXCI+XCIpKTtcbn0iLCJpbXBvcnQgSW5zdGFudFNlYXJjaCBmcm9tIFwiLi9saWIvSW5zdGFudFNlYXJjaC5qc1wiO1xuaW1wb3J0IHZlcnNpb24gZnJvbSBcIi4vbGliL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IHNuaXBwZXQsIHJldmVyc2VTbmlwcGV0LCBoaWdobGlnaHQsIHJldmVyc2VIaWdobGlnaHQsIGluc2lnaHRzLCBnZXRJbnNpZ2h0c0Fub255bW91c1VzZXJUb2tlbiB9IGZyb20gXCIuL2hlbHBlcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNyZWF0ZUluZmluaXRlSGl0c1Nlc3Npb25TdG9yYWdlQ2FjaGUgfSBmcm9tIFwiLi9saWIvaW5maW5pdGVIaXRzQ2FjaGUvaW5kZXguanNcIjtcbmltcG9ydCB7IGRlcHJlY2F0ZSB9IGZyb20gXCIuL2xpYi91dGlscy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEluc3RhbnRTZWFyY2ggaXMgdGhlIG1haW4gY29tcG9uZW50IG9mIEluc3RhbnRTZWFyY2guanMuIFRoaXMgb2JqZWN0XG4gKiBtYW5hZ2VzIHRoZSB3aWRnZXQgYW5kIGxldHMgeW91IGFkZCBuZXcgb25lcy5cbiAqXG4gKiBUd28gcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQgdG8gZ2V0IHlvdSBzdGFydGVkIHdpdGggSW5zdGFudFNlYXJjaC5qczpcbiAqICAtIGBpbmRleE5hbWVgOiB0aGUgbWFpbiBpbmRleCB0aGF0IHlvdSB3aWxsIHVzZSBmb3IgeW91ciBuZXcgc2VhcmNoIFVJXG4gKiAgLSBgc2VhcmNoQ2xpZW50YDogdGhlIHNlYXJjaCBjbGllbnQgdG8gcGx1ZyB0byBJbnN0YW50U2VhcmNoLmpzXG4gKlxuICogVGhlIFtzZWFyY2ggY2xpZW50IHByb3ZpZGVkIGJ5IEFsZ29saWFdKGFsZ29saWEuY29tL2RvYy9hcGktY2xpZW50L2dldHRpbmctc3RhcnRlZC93aGF0LWlzLXRoZS1hcGktY2xpZW50L2phdmFzY3JpcHQvKVxuICogbmVlZHMgYW4gYGFwcElkYCBhbmQgYW4gYGFwaUtleWAuIFRob3NlIHBhcmFtZXRlcnMgY2FuIGJlIGZvdW5kIGluIHlvdXJcbiAqIFtBbGdvbGlhIGRhc2hib2FyZF0oaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vYXBpLWtleXMpLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIGdldCB1cCBhbmQgcnVubmluZyBxdWlja2x5IHdpdGggSW5zdGFudFNlYXJjaC5qcywgaGF2ZSBhXG4gKiBsb29rIGF0IHRoZSBbZ2V0dGluZyBzdGFydGVkXShodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL2J1aWxkaW5nLXNlYXJjaC11aS9nZXR0aW5nLXN0YXJ0ZWQvanMvKS5cbiAqL1xudmFyIGluc3RhbnRzZWFyY2ggPSBmdW5jdGlvbiBpbnN0YW50c2VhcmNoKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG5ldyBJbnN0YW50U2VhcmNoKG9wdGlvbnMpO1xufTtcblxuaW5zdGFudHNlYXJjaC52ZXJzaW9uID0gdmVyc2lvbjtcbmluc3RhbnRzZWFyY2guY3JlYXRlSW5maW5pdGVIaXRzU2Vzc2lvblN0b3JhZ2VDYWNoZSA9IGRlcHJlY2F0ZShjcmVhdGVJbmZpbml0ZUhpdHNTZXNzaW9uU3RvcmFnZUNhY2hlLCBcImltcG9ydCB7IGNyZWF0ZUluZmluaXRlSGl0c1Nlc3Npb25TdG9yYWdlQ2FjaGUgfSBmcm9tICdpbnN0YW50c2VhcmNoLmpzL2VzL2xpYi9pbmZpbml0ZUhpdHNDYWNoZSdcIik7XG5pbnN0YW50c2VhcmNoLmhpZ2hsaWdodCA9IGRlcHJlY2F0ZShoaWdobGlnaHQsIFwiaW1wb3J0IHsgaGlnaGxpZ2h0IH0gZnJvbSAnaW5zdGFudHNlYXJjaC5qcy9lcy9oZWxwZXJzJ1wiKTtcbmluc3RhbnRzZWFyY2gucmV2ZXJzZUhpZ2hsaWdodCA9IGRlcHJlY2F0ZShyZXZlcnNlSGlnaGxpZ2h0LCBcImltcG9ydCB7IHJldmVyc2VIaWdobGlnaHQgfSBmcm9tICdpbnN0YW50c2VhcmNoLmpzL2VzL2hlbHBlcnMnXCIpO1xuaW5zdGFudHNlYXJjaC5zbmlwcGV0ID0gZGVwcmVjYXRlKHNuaXBwZXQsIFwiaW1wb3J0IHsgc25pcHBldCB9IGZyb20gJ2luc3RhbnRzZWFyY2guanMvZXMvaGVscGVycydcIik7XG5pbnN0YW50c2VhcmNoLnJldmVyc2VTbmlwcGV0ID0gZGVwcmVjYXRlKHJldmVyc2VTbmlwcGV0LCBcImltcG9ydCB7IHJldmVyc2VTbmlwcGV0IH0gZnJvbSAnaW5zdGFudHNlYXJjaC5qcy9lcy9oZWxwZXJzJ1wiKTtcbmluc3RhbnRzZWFyY2guaW5zaWdodHMgPSBpbnNpZ2h0cztcbmluc3RhbnRzZWFyY2guZ2V0SW5zaWdodHNBbm9ueW1vdXNVc2VyVG9rZW4gPSBnZXRJbnNpZ2h0c0Fub255bW91c1VzZXJUb2tlbjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0YW50c2VhcmNoLCAnd2lkZ2V0cycsIHtcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwiXFxcImluc3RhbnRzZWFyY2gud2lkZ2V0c1xcXCIgYXJlIG5vdCBhdmFpbGFibGUgZnJvbSB0aGUgRVMgYnVpbGQuXFxuXFxuVG8gaW1wb3J0IHRoZSB3aWRnZXRzOlxcblxcbmltcG9ydCB7IHNlYXJjaEJveCB9IGZyb20gJ2luc3RhbnRzZWFyY2guanMvZXMvd2lkZ2V0cydcIik7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3RhbnRzZWFyY2gsICdjb25uZWN0b3JzJywge1xuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJcXFwiaW5zdGFudHNlYXJjaC5jb25uZWN0b3JzXFxcIiBhcmUgbm90IGF2YWlsYWJsZSBmcm9tIHRoZSBFUyBidWlsZC5cXG5cXG5UbyBpbXBvcnQgdGhlIGNvbm5lY3RvcnM6XFxuXFxuaW1wb3J0IHsgY29ubmVjdFNlYXJjaEJveCB9IGZyb20gJ2luc3RhbnRzZWFyY2guanMvZXMvY29ubmVjdG9ycydcIik7XG4gIH1cbn0pO1xuZXhwb3J0IGRlZmF1bHQgaW5zdGFudHNlYXJjaDtcbmV4cG9ydCAqIGZyb20gXCIuL3R5cGVzL2luZGV4LmpzXCI7XG4iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgYWxnb2xpYXNlYXJjaEhlbHBlciBmcm9tICdhbGdvbGlhc2VhcmNoLWhlbHBlcic7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ0BhbGdvbGlhL2V2ZW50cyc7XG5pbXBvcnQgaW5kZXggZnJvbSBcIi4uL3dpZGdldHMvaW5kZXgvaW5kZXguanNcIjtcbmltcG9ydCB2ZXJzaW9uIGZyb20gXCIuL3ZlcnNpb24uanNcIjtcbmltcG9ydCBjcmVhdGVIZWxwZXJzIGZyb20gXCIuL2NyZWF0ZUhlbHBlcnMuanNcIjtcbmltcG9ydCB7IGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yLCBjcmVhdGVEb2N1bWVudGF0aW9uTGluaywgZGVmZXIsIG5vb3AsIHdhcm5pbmcsIHNldEluZGV4SGVscGVyU3RhdGUgfSBmcm9tIFwiLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUm91dGVyTWlkZGxld2FyZSB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9jcmVhdGVSb3V0ZXJNaWRkbGV3YXJlLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVNZXRhZGF0YU1pZGRsZXdhcmUsIGlzTWV0YWRhdGFFbmFibGVkIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL2NyZWF0ZU1ldGFkYXRhTWlkZGxld2FyZS5qc1wiO1xudmFyIHdpdGhVc2FnZSA9IGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yKHtcbiAgbmFtZTogJ2luc3RhbnRzZWFyY2gnXG59KTtcblxuZnVuY3Rpb24gZGVmYXVsdENyZWF0ZVVSTCgpIHtcbiAgcmV0dXJuICcjJztcbn0gLy8gdGhpcyBwdXJwb3NlbHkgYnJlYWtzIHR5cGVzY3JpcHQncyB0eXBlIGluZmVyZW5jZSB0byBlbnN1cmUgaXQncyBub3QgdXNlZFxuLy8gYXMgaXQncyB1c2VkIGZvciBhIGRlZmF1bHQgcGFyYW1ldGVyIGZvciBleGFtcGxlXG4vLyBzb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTQ4MjkjaXNzdWVjb21tZW50LTUwNDA0MjU0NlxuXG5cbi8qKlxuICogVGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgSW5zdGFudFNlYXJjaC4gVGhpcyBpc1xuICogY3JlYXRlZCB1c2luZyB0aGUgYGluc3RhbnRzZWFyY2hgIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiBJdCBlbWl0cyB0aGUgJ3JlbmRlcicgZXZlbnQgZXZlcnkgdGltZSBhIHNlYXJjaCBpcyBkb25lXG4gKi9cbnZhciBJbnN0YW50U2VhcmNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gIF9pbmhlcml0cyhJbnN0YW50U2VhcmNoLCBfRXZlbnRFbWl0dGVyKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEluc3RhbnRTZWFyY2gpO1xuXG4gIGZ1bmN0aW9uIEluc3RhbnRTZWFyY2gob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnN0YW50U2VhcmNoKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcyk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiY2xpZW50XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaW5kZXhOYW1lXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaW5zaWdodHNDbGllbnRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJvblN0YXRlQ2hhbmdlXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImhlbHBlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm1haW5IZWxwZXJcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJtYWluSW5kZXhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJzdGFydGVkXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwidGVtcGxhdGVzQ29uZmlnXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwicmVuZGVyU3RhdGVcIiwge30pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIl9zdGFsbGVkU2VhcmNoRGVsYXlcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJfc2VhcmNoU3RhbGxlZFRpbWVyXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiX2luaXRpYWxVaVN0YXRlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiX2luaXRpYWxSZXN1bHRzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiX2NyZWF0ZVVSTFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIl9zZWFyY2hGdW5jdGlvblwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIl9tYWluSGVscGVyU2VhcmNoXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwibWlkZGxld2FyZVwiLCBbXSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2VuZEV2ZW50VG9JbnNpZ2h0c1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInN0YXR1c1wiLCAnaWRsZScpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImVycm9yXCIsIHVuZGVmaW5lZCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2NoZWR1bGVTZWFyY2hcIiwgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgX3RoaXMubWFpbkhlbHBlci5zZWFyY2goKTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2NoZWR1bGVSZW5kZXJcIiwgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNob3VsZFJlc2V0U3RhdHVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlO1xuXG4gICAgICBpZiAoIV90aGlzLm1haW5IZWxwZXIuaGFzUGVuZGluZ1JlcXVlc3RzKCkpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLl9zZWFyY2hTdGFsbGVkVGltZXIpO1xuICAgICAgICBfdGhpcy5fc2VhcmNoU3RhbGxlZFRpbWVyID0gbnVsbDtcblxuICAgICAgICBpZiAoc2hvdWxkUmVzZXRTdGF0dXMpIHtcbiAgICAgICAgICBfdGhpcy5zdGF0dXMgPSAnaWRsZSc7XG4gICAgICAgICAgX3RoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgX3RoaXMubWFpbkluZGV4LnJlbmRlcih7XG4gICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcylcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5lbWl0KCdyZW5kZXInKTtcbiAgICB9KSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwib25JbnRlcm5hbFN0YXRlQ2hhbmdlXCIsIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBuZXh0VWlTdGF0ZSA9IF90aGlzLm1haW5JbmRleC5nZXRXaWRnZXRVaVN0YXRlKHt9KTtcblxuICAgICAgX3RoaXMubWlkZGxld2FyZS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IF9yZWYuaW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLm9uU3RhdGVDaGFuZ2Uoe1xuICAgICAgICAgIHVpU3RhdGU6IG5leHRVaVN0YXRlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSkpO1xuXG4gICAgdmFyIF9vcHRpb25zJGluZGV4TmFtZSA9IG9wdGlvbnMuaW5kZXhOYW1lLFxuICAgICAgICBpbmRleE5hbWUgPSBfb3B0aW9ucyRpbmRleE5hbWUgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0aW9ucyRpbmRleE5hbWUsXG4gICAgICAgIG51bWJlckxvY2FsZSA9IG9wdGlvbnMubnVtYmVyTG9jYWxlLFxuICAgICAgICBfb3B0aW9ucyRpbml0aWFsVWlTdGEgPSBvcHRpb25zLmluaXRpYWxVaVN0YXRlLFxuICAgICAgICBpbml0aWFsVWlTdGF0ZSA9IF9vcHRpb25zJGluaXRpYWxVaVN0YSA9PT0gdm9pZCAwID8ge30gOiBfb3B0aW9ucyRpbml0aWFsVWlTdGEsXG4gICAgICAgIF9vcHRpb25zJHJvdXRpbmcgPSBvcHRpb25zLnJvdXRpbmcsXG4gICAgICAgIHJvdXRpbmcgPSBfb3B0aW9ucyRyb3V0aW5nID09PSB2b2lkIDAgPyBudWxsIDogX29wdGlvbnMkcm91dGluZyxcbiAgICAgICAgc2VhcmNoRnVuY3Rpb24gPSBvcHRpb25zLnNlYXJjaEZ1bmN0aW9uLFxuICAgICAgICBfb3B0aW9ucyRzdGFsbGVkU2VhcmMgPSBvcHRpb25zLnN0YWxsZWRTZWFyY2hEZWxheSxcbiAgICAgICAgc3RhbGxlZFNlYXJjaERlbGF5ID0gX29wdGlvbnMkc3RhbGxlZFNlYXJjID09PSB2b2lkIDAgPyAyMDAgOiBfb3B0aW9ucyRzdGFsbGVkU2VhcmMsXG4gICAgICAgIF9vcHRpb25zJHNlYXJjaENsaWVudCA9IG9wdGlvbnMuc2VhcmNoQ2xpZW50LFxuICAgICAgICBzZWFyY2hDbGllbnQgPSBfb3B0aW9ucyRzZWFyY2hDbGllbnQgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0aW9ucyRzZWFyY2hDbGllbnQsXG4gICAgICAgIF9vcHRpb25zJGluc2lnaHRzQ2xpZSA9IG9wdGlvbnMuaW5zaWdodHNDbGllbnQsXG4gICAgICAgIGluc2lnaHRzQ2xpZW50ID0gX29wdGlvbnMkaW5zaWdodHNDbGllID09PSB2b2lkIDAgPyBudWxsIDogX29wdGlvbnMkaW5zaWdodHNDbGllLFxuICAgICAgICBfb3B0aW9ucyRvblN0YXRlQ2hhbmcgPSBvcHRpb25zLm9uU3RhdGVDaGFuZ2UsXG4gICAgICAgIG9uU3RhdGVDaGFuZ2UgPSBfb3B0aW9ucyRvblN0YXRlQ2hhbmcgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0aW9ucyRvblN0YXRlQ2hhbmc7XG5cbiAgICBpZiAoaW5kZXhOYW1lID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYGluZGV4TmFtZWAgb3B0aW9uIGlzIHJlcXVpcmVkLicpKTtcbiAgICB9XG5cbiAgICBpZiAoc2VhcmNoQ2xpZW50ID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYHNlYXJjaENsaWVudGAgb3B0aW9uIGlzIHJlcXVpcmVkLicpKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNlYXJjaENsaWVudC5zZWFyY2ggIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBgc2VhcmNoQ2xpZW50YCBtdXN0IGltcGxlbWVudCBhIGBzZWFyY2hgIG1ldGhvZC5cXG5cXG5TZWU6IGh0dHBzOi8vd3d3LmFsZ29saWEuY29tL2RvYy9ndWlkZXMvYnVpbGRpbmctc2VhcmNoLXVpL2dvaW5nLWZ1cnRoZXIvYmFja2VuZC1zZWFyY2gvaW4tZGVwdGgvYmFja2VuZC1pbnN0YW50c2VhcmNoL2pzL1wiKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNlYXJjaENsaWVudC5hZGRBbGdvbGlhQWdlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHNlYXJjaENsaWVudC5hZGRBbGdvbGlhQWdlbnQoXCJpbnN0YW50c2VhcmNoLmpzIChcIi5jb25jYXQodmVyc2lvbiwgXCIpXCIpKTtcbiAgICB9XG5cbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoaW5zaWdodHNDbGllbnQgPT09IG51bGwsIFwiYGluc2lnaHRzQ2xpZW50YCBwcm9wZXJ0eSBoYXMgYmVlbiBkZXByZWNhdGVkLiBJdCBpcyBzdGlsbCBzdXBwb3J0ZWQgaW4gNC54IHJlbGVhc2VzLCBidXQgbm90IGZ1cnRoZXIuIEl0IGlzIHJlcGxhY2VkIGJ5IHRoZSBgaW5zaWdodHNgIG1pZGRsZXdhcmUuXFxuXFxuRm9yIG1vcmUgaW5mb3JtYXRpb24sIHZpc2l0IGh0dHBzOi8vd3d3LmFsZ29saWEuY29tL2RvYy9ndWlkZXMvZ2V0dGluZy1pbnNpZ2h0cy1hbmQtYW5hbHl0aWNzL3NlYXJjaC1hbmFseXRpY3MvY2xpY2stdGhyb3VnaC1hbmQtY29udmVyc2lvbnMvaG93LXRvL3NlbmQtY2xpY2stYW5kLWNvbnZlcnNpb24tZXZlbnRzLXdpdGgtaW5zdGFudHNlYXJjaC9qcy9cIikgOiB2b2lkIDA7XG5cbiAgICBpZiAoaW5zaWdodHNDbGllbnQgJiYgdHlwZW9mIGluc2lnaHRzQ2xpZW50ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYGluc2lnaHRzQ2xpZW50YCBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24uJykpO1xuICAgIH1cblxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyghb3B0aW9ucy5zZWFyY2hQYXJhbWV0ZXJzLCBcIlRoZSBgc2VhcmNoUGFyYW1ldGVyc2Agb3B0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgbm90IGJlIHN1cHBvcnRlZCBpbiBJbnN0YW50U2VhcmNoLmpzIDQueC5cXG5cXG5Zb3UgY2FuIHJlcGxhY2UgaXQgd2l0aCB0aGUgYGNvbmZpZ3VyZWAgd2lkZ2V0OlxcblxcbmBgYFxcbnNlYXJjaC5hZGRXaWRnZXRzKFtcXG4gIGNvbmZpZ3VyZShcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5zZWFyY2hQYXJhbWV0ZXJzLCBudWxsLCAyKSwgXCIpXFxuXSk7XFxuYGBgXFxuXFxuU2VlIFwiKS5jb25jYXQoY3JlYXRlRG9jdW1lbnRhdGlvbkxpbmsoe1xuICAgICAgbmFtZTogJ2NvbmZpZ3VyZSdcbiAgICB9KSkpIDogdm9pZCAwO1xuICAgIF90aGlzLmNsaWVudCA9IHNlYXJjaENsaWVudDtcbiAgICBfdGhpcy5pbnNpZ2h0c0NsaWVudCA9IGluc2lnaHRzQ2xpZW50O1xuICAgIF90aGlzLmluZGV4TmFtZSA9IGluZGV4TmFtZTtcbiAgICBfdGhpcy5oZWxwZXIgPSBudWxsO1xuICAgIF90aGlzLm1haW5IZWxwZXIgPSBudWxsO1xuICAgIF90aGlzLm1haW5JbmRleCA9IGluZGV4KHtcbiAgICAgIGluZGV4TmFtZTogaW5kZXhOYW1lXG4gICAgfSk7XG4gICAgX3RoaXMub25TdGF0ZUNoYW5nZSA9IG9uU3RhdGVDaGFuZ2U7XG4gICAgX3RoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIF90aGlzLnRlbXBsYXRlc0NvbmZpZyA9IHtcbiAgICAgIGhlbHBlcnM6IGNyZWF0ZUhlbHBlcnMoe1xuICAgICAgICBudW1iZXJMb2NhbGU6IG51bWJlckxvY2FsZVxuICAgICAgfSksXG4gICAgICBjb21waWxlT3B0aW9uczoge31cbiAgICB9O1xuICAgIF90aGlzLl9zdGFsbGVkU2VhcmNoRGVsYXkgPSBzdGFsbGVkU2VhcmNoRGVsYXk7XG4gICAgX3RoaXMuX3NlYXJjaFN0YWxsZWRUaW1lciA9IG51bGw7XG4gICAgX3RoaXMuX2NyZWF0ZVVSTCA9IGRlZmF1bHRDcmVhdGVVUkw7XG4gICAgX3RoaXMuX2luaXRpYWxVaVN0YXRlID0gaW5pdGlhbFVpU3RhdGU7XG4gICAgX3RoaXMuX2luaXRpYWxSZXN1bHRzID0gbnVsbDtcblxuICAgIGlmIChzZWFyY2hGdW5jdGlvbikge1xuICAgICAgX3RoaXMuX3NlYXJjaEZ1bmN0aW9uID0gc2VhcmNoRnVuY3Rpb247XG4gICAgfVxuXG4gICAgX3RoaXMuc2VuZEV2ZW50VG9JbnNpZ2h0cyA9IG5vb3A7XG5cbiAgICBpZiAocm91dGluZykge1xuICAgICAgdmFyIHJvdXRlck9wdGlvbnMgPSB0eXBlb2Ygcm91dGluZyA9PT0gJ2Jvb2xlYW4nID8gdW5kZWZpbmVkIDogcm91dGluZztcblxuICAgICAgX3RoaXMudXNlKGNyZWF0ZVJvdXRlck1pZGRsZXdhcmUocm91dGVyT3B0aW9ucykpO1xuICAgIH1cblxuICAgIGlmIChpc01ldGFkYXRhRW5hYmxlZCgpKSB7XG4gICAgICBfdGhpcy51c2UoY3JlYXRlTWV0YWRhdGFNaWRkbGV3YXJlKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogSG9va3MgYSBtaWRkbGV3YXJlIGludG8gdGhlIEluc3RhbnRTZWFyY2ggbGlmZWN5Y2xlLlxuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhJbnN0YW50U2VhcmNoLCBbe1xuICAgIGtleTogXCJfaXNTZWFyY2hTdGFsbGVkXCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHNlYXJjaC4gQ2FuIGJlIFwiaWRsZVwiLCBcImxvYWRpbmdcIiwgXCJzdGFsbGVkXCIsIG9yIFwiZXJyb3JcIi5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IHJldHVybmVkIGVycm9yIGZyb20gdGhlIFNlYXJjaCBBUEkuXG4gICAgICogVGhlIGVycm9yIGdldHMgY2xlYXJlZCB3aGVuIHRoZSBuZXh0IHZhbGlkIHNlYXJjaCByZXNwb25zZSBpcyByZW5kZXJlZC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHVzZSBgc3RhdHVzID09PSAnc3RhbGxlZCdgIGluc3RlYWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoZmFsc2UsIFwiYEluc3RhbnRTZWFyY2guX2lzU2VhcmNoU3RhbGxlZGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIEluc3RhbnRTZWFyY2guanMgNS4wLlxcblxcblVzZSBgSW5zdGFudFNlYXJjaC5zdGF0dXMgPT09IFxcXCJzdGFsbGVkXFxcImAgaW5zdGVhZC5cIikgOiB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdGFsbGVkJztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVzZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWlkZGxld2FyZSA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgbWlkZGxld2FyZVtfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld01pZGRsZXdhcmVMaXN0ID0gbWlkZGxld2FyZS5tYXAoZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHZhciBuZXdNaWRkbGV3YXJlID0gX29iamVjdFNwcmVhZCh7XG4gICAgICAgICAgc3Vic2NyaWJlOiBub29wLFxuICAgICAgICAgIHN0YXJ0ZWQ6IG5vb3AsXG4gICAgICAgICAgdW5zdWJzY3JpYmU6IG5vb3AsXG4gICAgICAgICAgb25TdGF0ZUNoYW5nZTogbm9vcFxuICAgICAgICB9LCBmbih7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBfdGhpczJcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIF90aGlzMi5taWRkbGV3YXJlLnB1c2goe1xuICAgICAgICAgIGNyZWF0b3I6IGZuLFxuICAgICAgICAgIGluc3RhbmNlOiBuZXdNaWRkbGV3YXJlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXdNaWRkbGV3YXJlO1xuICAgICAgfSk7IC8vIElmIHRoZSBpbnN0YW5jZSBoYXMgYWxyZWFkeSBzdGFydGVkLCB3ZSBkaXJlY3RseSBzdWJzY3JpYmUgdGhlXG4gICAgICAvLyBtaWRkbGV3YXJlIHNvIHRoZXkncmUgbm90aWZpZWQgb2YgY2hhbmdlcy5cblxuICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICBuZXdNaWRkbGV3YXJlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgbS5zdWJzY3JpYmUoKTtcbiAgICAgICAgICBtLnN0YXJ0ZWQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbWlkZGxld2FyZSBmcm9tIHRoZSBJbnN0YW50U2VhcmNoIGxpZmVjeWNsZS5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInVudXNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVudXNlKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBtaWRkbGV3YXJlVG9VbnVzZSA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBtaWRkbGV3YXJlVG9VbnVzZVtfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1pZGRsZXdhcmUuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlVG9VbnVzZS5pbmNsdWRlcyhtLmNyZWF0b3IpO1xuICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICByZXR1cm4gbS5pbnN0YW5jZS51bnN1YnNjcmliZSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmUuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHJldHVybiAhbWlkZGxld2FyZVRvVW51c2UuaW5jbHVkZXMobS5jcmVhdG9yKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSAvLyBAbWFqb3Igd2Ugc2hpcHBlZCB3aXRoIEVYUEVSSU1FTlRBTF91c2UsIGJ1dCBoYXZlIGNoYW5nZWQgdGhhdCB0byBqdXN0IGB1c2VgIG5vd1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiRVhQRVJJTUVOVEFMX3VzZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBFWFBFUklNRU5UQUxfdXNlKCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB3YXJuaW5nKGZhbHNlLCAnVGhlIG1pZGRsZXdhcmUgQVBJIGlzIG5vdyBjb25zaWRlcmVkIHN0YWJsZSwgc28gd2UgcmVjb21tZW5kIHJlcGxhY2luZyBgRVhQRVJJTUVOVEFMX3VzZWAgd2l0aCBgdXNlYCBiZWZvcmUgdXBncmFkaW5nIHRvIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uJykgOiB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy51c2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHdpZGdldCB0byB0aGUgc2VhcmNoIGluc3RhbmNlLlxuICAgICAqIEEgd2lkZ2V0IGNhbiBiZSBhZGRlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIEluc3RhbnRTZWFyY2ggaGFzIHN0YXJ0ZWQuXG4gICAgICogQHBhcmFtIHdpZGdldCBUaGUgd2lkZ2V0IHRvIGFkZCB0byBJbnN0YW50U2VhcmNoLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBtZXRob2Qgd2lsbCBzdGlsbCBiZSBzdXBwb3J0ZWQgaW4gNC54IHJlbGVhc2VzLCBidXQgbm90IGZ1cnRoZXIuIEl0IGlzIHJlcGxhY2VkIGJ5IGBhZGRXaWRnZXRzKFt3aWRnZXRdKWAuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJhZGRXaWRnZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkV2lkZ2V0KHdpZGdldCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB3YXJuaW5nKGZhbHNlLCAnYWRkV2lkZ2V0IHdpbGwgc3RpbGwgYmUgc3VwcG9ydGVkIGluIDQueCByZWxlYXNlcywgYnV0IG5vdCBmdXJ0aGVyLiBJdCBpcyByZXBsYWNlZCBieSBgYWRkV2lkZ2V0cyhbd2lkZ2V0XSlgJykgOiB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy5hZGRXaWRnZXRzKFt3aWRnZXRdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBtdWx0aXBsZSB3aWRnZXRzIHRvIHRoZSBzZWFyY2ggaW5zdGFuY2UuXG4gICAgICogV2lkZ2V0cyBjYW4gYmUgYWRkZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciBJbnN0YW50U2VhcmNoIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSB3aWRnZXRzIFRoZSBhcnJheSBvZiB3aWRnZXRzIHRvIGFkZCB0byBJbnN0YW50U2VhcmNoLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkV2lkZ2V0c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRXaWRnZXRzKHdpZGdldHMpIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh3aWRnZXRzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYGFkZFdpZGdldHNgIG1ldGhvZCBleHBlY3RzIGFuIGFycmF5IG9mIHdpZGdldHMuIFBsZWFzZSB1c2UgYGFkZFdpZGdldGAuJykpO1xuICAgICAgfVxuXG4gICAgICBpZiAod2lkZ2V0cy5zb21lKGZ1bmN0aW9uICh3aWRnZXQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB3aWRnZXQuaW5pdCAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygd2lkZ2V0LnJlbmRlciAhPT0gJ2Z1bmN0aW9uJztcbiAgICAgIH0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSB3aWRnZXQgZGVmaW5pdGlvbiBleHBlY3RzIGEgYHJlbmRlcmAgYW5kL29yIGFuIGBpbml0YCBtZXRob2QuJykpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1haW5JbmRleC5hZGRXaWRnZXRzKHdpZGdldHMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSB3aWRnZXQgZnJvbSB0aGUgc2VhcmNoIGluc3RhbmNlLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIHdpbGwgc3RpbGwgYmUgc3VwcG9ydGVkIGluIDQueCByZWxlYXNlcywgYnV0IG5vdCBmdXJ0aGVyLiBJdCBpcyByZXBsYWNlZCBieSBgcmVtb3ZlV2lkZ2V0cyhbd2lkZ2V0XSlgXG4gICAgICogQHBhcmFtIHdpZGdldCBUaGUgd2lkZ2V0IGluc3RhbmNlIHRvIHJlbW92ZSBmcm9tIEluc3RhbnRTZWFyY2guXG4gICAgICpcbiAgICAgKiBUaGUgd2lkZ2V0IG11c3QgaW1wbGVtZW50IGEgYGRpc3Bvc2UoKWAgbWV0aG9kIHRvIGNsZWFyIGl0cyBzdGF0ZS5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZVdpZGdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVXaWRnZXQod2lkZ2V0KSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHdhcm5pbmcoZmFsc2UsICdyZW1vdmVXaWRnZXQgd2lsbCBzdGlsbCBiZSBzdXBwb3J0ZWQgaW4gNC54IHJlbGVhc2VzLCBidXQgbm90IGZ1cnRoZXIuIEl0IGlzIHJlcGxhY2VkIGJ5IGByZW1vdmVXaWRnZXRzKFt3aWRnZXRdKWAnKSA6IHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZVdpZGdldHMoW3dpZGdldF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIG11bHRpcGxlIHdpZGdldHMgZnJvbSB0aGUgc2VhcmNoIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSB3aWRnZXRzIEFycmF5IG9mIHdpZGdldHMgaW5zdGFuY2VzIHRvIHJlbW92ZSBmcm9tIEluc3RhbnRTZWFyY2guXG4gICAgICpcbiAgICAgKiBUaGUgd2lkZ2V0cyBtdXN0IGltcGxlbWVudCBhIGBkaXNwb3NlKClgIG1ldGhvZCB0byBjbGVhciB0aGVpciBzdGF0ZXMuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVXaWRnZXRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVdpZGdldHMod2lkZ2V0cykge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHdpZGdldHMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSBgcmVtb3ZlV2lkZ2V0c2AgbWV0aG9kIGV4cGVjdHMgYW4gYXJyYXkgb2Ygd2lkZ2V0cy4gUGxlYXNlIHVzZSBgcmVtb3ZlV2lkZ2V0YC4nKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aWRnZXRzLnNvbWUoZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHdpZGdldC5kaXNwb3NlICE9PSAnZnVuY3Rpb24nO1xuICAgICAgfSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHdpdGhVc2FnZSgnVGhlIHdpZGdldCBkZWZpbml0aW9uIGV4cGVjdHMgYSBgZGlzcG9zZWAgbWV0aG9kLicpKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYWluSW5kZXgucmVtb3ZlV2lkZ2V0cyh3aWRnZXRzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmRzIHRoZSBpbml0aWFsaXphdGlvbiBvZiBJbnN0YW50U2VhcmNoLmpzIGFuZCB0cmlnZ2VycyB0aGVcbiAgICAgKiBmaXJzdCBzZWFyY2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIHdpZGdldHMgaGF2ZSBiZWVuIGFkZGVkXG4gICAgICogdG8gdGhlIGluc3RhbmNlIG9mIEluc3RhbnRTZWFyY2guanMuIEluc3RhbnRTZWFyY2guanMgYWxzbyBzdXBwb3J0cyBhZGRpbmcgYW5kIHJlbW92aW5nXG4gICAgICogd2lkZ2V0cyBhZnRlciB0aGUgc3RhcnQgYXMgYW4gKipFWFBFUklNRU5UQUwqKiBmZWF0dXJlLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYHN0YXJ0YCBtZXRob2QgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgb25jZS4nKSk7XG4gICAgICB9IC8vIFRoaXMgSGVscGVyIGlzIHVzZWQgZm9yIHRoZSBxdWVyaWVzLCB3ZSBkb24ndCBjYXJlIGFib3V0IGl0cyBzdGF0ZS4gVGhlXG4gICAgICAvLyBzdGF0ZXMgYXJlIG1hbmFnZWQgYXQgdGhlIGBpbmRleGAgbGV2ZWwuIFdlIHVzZSB0aGlzIEhlbHBlciB0byBjcmVhdGVcbiAgICAgIC8vIERlcml2ZWRIZWxwZXIgc2NvcGVkIGludG8gdGhlIGBpbmRleGAgd2lkZ2V0cy5cbiAgICAgIC8vIEluIFZ1ZSBJbnN0YW50U2VhcmNoJyBoeWRyYXRlLCBhIG1haW4gaGVscGVyIGdldHMgc2V0IGJlZm9yZSBzdGFydCwgc29cbiAgICAgIC8vIHdlIG5lZWQgdG8gcmVzcGVjdCB0aGlzIGhlbHBlciBhcyBhIHdheSB0byBrZWVwIGFsbCBsaXN0ZW5lcnMgY29ycmVjdC5cblxuXG4gICAgICB2YXIgbWFpbkhlbHBlciA9IHRoaXMubWFpbkhlbHBlciB8fCBhbGdvbGlhc2VhcmNoSGVscGVyKHRoaXMuY2xpZW50LCB0aGlzLmluZGV4TmFtZSk7XG5cbiAgICAgIG1haW5IZWxwZXIuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMuc3RhdHVzID0gJ2xvYWRpbmcnOyAvLyBATUFKT1I6IHVzZSBzY2hlZHVsZVJlbmRlciBoZXJlXG4gICAgICAgIC8vIEZvciBub3csIHdpZGdldHMgZG9uJ3QgZXhwZWN0IHRvIGJlIHJlbmRlcmVkIGF0IHRoZSBzdGFydCBvZiBgbG9hZGluZ2AsXG4gICAgICAgIC8vIHNvIGl0IHdvdWxkIGJlIGEgYnJlYWtpbmcgY2hhbmdlIHRvIGFkZCBhbiBleHRyYSByZW5kZXIuIFdlIGRvbid0IGhhdmVcbiAgICAgICAgLy8gdGhlc2UgZ3VhcmFudGVlcyBhYm91dCB0aGUgcmVuZGVyIGV2ZW50LCB0aHVzIGVtaXR0aW5nIGl0IG9uY2UgbW9yZVxuICAgICAgICAvLyBpc24ndCBhIGJyZWFraW5nIGNoYW5nZS5cblxuICAgICAgICBfdGhpczMuZW1pdCgncmVuZGVyJyk7IC8vIFRoaXMgc29sdXRpb24gYWxsb3dzIHVzIHRvIGtlZXAgdGhlIGV4YWN0IHNhbWUgQVBJIGZvciB0aGUgdXNlcnMgYnV0XG4gICAgICAgIC8vIHVuZGVyIHRoZSBob29kLCB3ZSBoYXZlIGEgZGlmZmVyZW50IGltcGxlbWVudGF0aW9uLiBJdCBzaG91bGQgYmVcbiAgICAgICAgLy8gY29tcGxldGVseSB0cmFuc3BhcmVudCBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNvZGViYXNlLiBPbmx5IHRoaXMgbW9kdWxlXG4gICAgICAgIC8vIGlzIGltcGFjdGVkLlxuXG5cbiAgICAgICAgcmV0dXJuIG1haW5IZWxwZXIuc2VhcmNoT25seVdpdGhEZXJpdmVkSGVscGVycygpO1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuX3NlYXJjaEZ1bmN0aW9uKSB7XG4gICAgICAgIC8vIHRoaXMgY2xpZW50IGlzbid0IHVzZWQgdG8gYWN0dWFsbHkgc2VhcmNoLCBidXQgcmVxdWlyZWQgZm9yIHRoZSBoZWxwZXJcbiAgICAgICAgLy8gdG8gbm90IHRocm93IGVycm9yc1xuICAgICAgICB2YXIgZmFrZUNsaWVudCA9IHtcbiAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShub29wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX21haW5IZWxwZXJTZWFyY2ggPSBtYWluSGVscGVyLnNlYXJjaC5iaW5kKG1haW5IZWxwZXIpO1xuXG4gICAgICAgIG1haW5IZWxwZXIuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBtYWluSW5kZXhIZWxwZXIgPSBfdGhpczMubWFpbkluZGV4LmdldEhlbHBlcigpO1xuXG4gICAgICAgICAgdmFyIHNlYXJjaEZ1bmN0aW9uSGVscGVyID0gYWxnb2xpYXNlYXJjaEhlbHBlcihmYWtlQ2xpZW50LCBtYWluSW5kZXhIZWxwZXIuc3RhdGUuaW5kZXgsIG1haW5JbmRleEhlbHBlci5zdGF0ZSk7XG4gICAgICAgICAgc2VhcmNoRnVuY3Rpb25IZWxwZXIub25jZSgnc2VhcmNoJywgZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTtcbiAgICAgICAgICAgIG1haW5JbmRleEhlbHBlci5vdmVycmlkZVN0YXRlV2l0aG91dFRyaWdnZXJpbmdDaGFuZ2VFdmVudChzdGF0ZSk7XG5cbiAgICAgICAgICAgIF90aGlzMy5fbWFpbkhlbHBlclNlYXJjaCgpO1xuICAgICAgICAgIH0pOyAvLyBGb3J3YXJkIHN0YXRlIGNoYW5nZXMgZnJvbSBgc2VhcmNoRnVuY3Rpb25IZWxwZXJgIHRvIGBtYWluSW5kZXhIZWxwZXJgXG5cbiAgICAgICAgICBzZWFyY2hGdW5jdGlvbkhlbHBlci5vbignY2hhbmdlJywgZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBfcmVmMy5zdGF0ZTtcbiAgICAgICAgICAgIG1haW5JbmRleEhlbHBlci5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBfdGhpczMuX3NlYXJjaEZ1bmN0aW9uKHNlYXJjaEZ1bmN0aW9uSGVscGVyKTtcblxuICAgICAgICAgIHJldHVybiBtYWluSGVscGVyO1xuICAgICAgICB9O1xuICAgICAgfSAvLyBPbmx5IHRoZSBcIm1haW5cIiBIZWxwZXIgZW1pdHMgdGhlIGBlcnJvcmAgZXZlbnQgdnMgdGhlIG9uZSBmb3IgYHNlYXJjaGBcbiAgICAgIC8vIGFuZCBgcmVzdWx0c2AgdGhhdCBhcmUgYWxzbyBlbWl0dGVkIG9uIHRoZSBkZXJpdmVkIG9uZS5cblxuXG4gICAgICBtYWluSGVscGVyLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChfcmVmNCkge1xuICAgICAgICB2YXIgZXJyb3IgPSBfcmVmNC5lcnJvcjtcblxuICAgICAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgIC8vIHR5cGVzY3JpcHQgbGllcyBoZXJlLCBlcnJvciBpcyBpbiBzb21lIGNhc2VzIHsgbmFtZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgfVxuICAgICAgICAgIHZhciBlcnIgPSBlcnJvcjtcbiAgICAgICAgICBlcnJvciA9IE9iamVjdC5rZXlzKGVycikucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICAgICAgYWNjW2tleV0gPSBlcnJba2V5XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSwgbmV3IEVycm9yKGVyci5tZXNzYWdlKSk7XG4gICAgICAgIH0gLy8gSWYgYW4gZXJyb3IgaXMgZW1pdHRlZCwgaXQgaXMgcmUtdGhyb3duIGJ5IGV2ZW50cy4gSW4gcHJldmlvdXMgdmVyc2lvbnNcbiAgICAgICAgLy8gd2UgZW1pdHRlZCB7ZXJyb3J9LCB3aGljaCBpcyB0aHJvd24gYXM6XG4gICAgICAgIC8vIFwiVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFxcXCJlcnJvclxcXCIgZXZlbnQuIChbb2JqZWN0IE9iamVjdF0pXCJcbiAgICAgICAgLy8gVG8gYXZvaWQgYnJlYWtpbmcgY2hhbmdlcywgd2UgbWFrZSB0aGUgZXJyb3IgYXZhaWxhYmxlIGluIGJvdGhcbiAgICAgICAgLy8gYGVycm9yYCBhbmQgYGVycm9yLmVycm9yYFxuICAgICAgICAvLyBATUFKT1IgZW1pdCBvbmx5IGVycm9yXG5cblxuICAgICAgICBlcnJvci5lcnJvciA9IGVycm9yO1xuICAgICAgICBfdGhpczMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgX3RoaXMzLnN0YXR1cyA9ICdlcnJvcic7XG5cbiAgICAgICAgX3RoaXMzLnNjaGVkdWxlUmVuZGVyKGZhbHNlKTsgLy8gVGhpcyBuZWVkcyB0byBleGVjdXRlIGxhc3QgYmVjYXVzZSBpdCB0aHJvd3MgdGhlIGVycm9yLlxuXG5cbiAgICAgICAgX3RoaXMzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1haW5IZWxwZXIgPSBtYWluSGVscGVyO1xuICAgICAgdGhpcy5taWRkbGV3YXJlLmZvckVhY2goZnVuY3Rpb24gKF9yZWY1KSB7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IF9yZWY1Lmluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5zdWJzY3JpYmUoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYWluSW5kZXguaW5pdCh7XG4gICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogdGhpcyxcbiAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICB1aVN0YXRlOiB0aGlzLl9pbml0aWFsVWlTdGF0ZVxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLl9pbml0aWFsUmVzdWx0cykge1xuICAgICAgICB2YXIgb3JpZ2luYWxTY2hlZHVsZVNlYXJjaCA9IHRoaXMuc2NoZWR1bGVTZWFyY2g7IC8vIFdlIGRvbid0IHNjaGVkdWxlIGEgZmlyc3Qgc2VhcmNoIHdoZW4gaW5pdGlhbCByZXN1bHRzIGFyZSBwcm92aWRlZFxuICAgICAgICAvLyBiZWNhdXNlIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmVzdWx0cyB0byByZW5kZXIuIFRoaXMgc2tpcHMgdGhlIGluaXRpYWxcbiAgICAgICAgLy8gbmV0d29yayByZXF1ZXN0IG9uIHRoZSBicm93c2VyIG9uIGBzdGFydGAuXG5cbiAgICAgICAgdGhpcy5zY2hlZHVsZVNlYXJjaCA9IGRlZmVyKG5vb3ApOyAvLyBXZSBhbHNvIHNraXAgdGhlIGluaXRpYWwgbmV0d29yayByZXF1ZXN0IHdoZW4gd2lkZ2V0cyBhcmUgZHluYW1pY2FsbHlcbiAgICAgICAgLy8gYWRkZWQgaW4gdGhlIGZpcnN0IHRpY2sgKHRoYXQncyB0aGUgY2FzZSBpbiBhbGwgdGhlIGZyYW1ld29yay1iYXNlZCBmbGF2b3JzKS5cbiAgICAgICAgLy8gV2hlbiB3ZSBhZGQgYSB3aWRnZXQgdG8gYGluZGV4YCwgaXQgY2FsbHMgYHNjaGVkdWxlU2VhcmNoYC4gV2UgY2FuIHJlbHlcbiAgICAgICAgLy8gb24gb3VyIGBkZWZlcmAgdXRpbCB0byByZXN0b3JlIHRoZSBvcmlnaW5hbCBgc2NoZWR1bGVTZWFyY2hgIHZhbHVlIG9uY2VcbiAgICAgICAgLy8gd2lkZ2V0cyBhcmUgYWRkZWQgdG8gaG9vayBiYWNrIHRvIHRoZSByZWd1bGFyIGxpZmVjeWNsZS5cblxuICAgICAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMzLnNjaGVkdWxlU2VhcmNoID0gb3JpZ2luYWxTY2hlZHVsZVNlYXJjaDtcbiAgICAgICAgfSkoKTtcbiAgICAgIH0gLy8gV2Ugb25seSBzY2hlZHVsZSBhIHNlYXJjaCB3aGVuIHdpZGdldHMgaGF2ZSBiZWVuIGFkZGVkIGJlZm9yZSBgc3RhcnQoKWBcbiAgICAgIC8vIGJlY2F1c2UgdGhlcmUgYXJlIGxpc3RlbmVycyB0aGF0IGNhbiB1c2UgdGhlc2UgcmVzdWx0cy5cbiAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSB1c2VmdWwgaW4gZnJhbWV3b3JrLWJhc2VkIGZsYXZvcnMgdGhhdCB3YWl0IGZvclxuICAgICAgLy8gZHluYW1pY2FsbHktYWRkZWQgd2lkZ2V0cyB0byB0cmlnZ2VyIGEgbmV0d29yayByZXF1ZXN0LiBJdCBhdm9pZHNcbiAgICAgIC8vIGhhdmluZyB0byBiYXRjaCB0aGlzIGluaXRpYWwgbmV0d29yayByZXF1ZXN0IHdpdGggdGhlIG9uZSBjb21pbmcgZnJvbVxuICAgICAgLy8gYGFkZFdpZGdldHMoKWAuXG4gICAgICAvLyBMYXRlciwgd2UgY291bGQgYWxzbyBza2lwIGBpbmRleCgpYCB3aWRnZXRzIGFuZCB3aWRnZXRzIHRoYXQgZG9uJ3QgcmVhZFxuICAgICAgLy8gdGhlIHJlc3VsdHMsIGJ1dCB0aGlzIGlzIGFuIG9wdGltaXphdGlvbiB0aGF0IGhhcyBhIHZlcnkgbG93IGltcGFjdCBmb3Igbm93LlxuICAgICAgZWxzZSBpZiAodGhpcy5tYWluSW5kZXguZ2V0V2lkZ2V0cygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlU2VhcmNoKCk7XG4gICAgICAgIH0gLy8gS2VlcCB0aGUgcHJldmlvdXMgcmVmZXJlbmNlIGZvciBsZWdhY3kgcHVycG9zZSwgc29tZSBwYXR0ZXJuIHVzZVxuICAgICAgLy8gdGhlIGRpcmVjdCBIZWxwZXIgYWNjZXNzIGBzZWFyY2guaGVscGVyYCAoZS5nIG11bHRpLWluZGV4KS5cblxuXG4gICAgICB0aGlzLmhlbHBlciA9IHRoaXMubWFpbkluZGV4LmdldEhlbHBlcigpOyAvLyB0cmFjayB3ZSBzdGFydGVkIHRoZSBzZWFyY2ggaWYgd2UgYWRkIG1vcmUgd2lkZ2V0cyxcbiAgICAgIC8vIHRvIGluaXQgdGhlbSBkaXJlY3RseSBhZnRlciBhZGRcblxuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMubWlkZGxld2FyZS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNikge1xuICAgICAgICB2YXIgaW5zdGFuY2UgPSBfcmVmNi5pbnN0YW5jZTtcbiAgICAgICAgaW5zdGFuY2Uuc3RhcnRlZCgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHdpZGdldHMgd2l0aG91dCB0cmlnZ2VyaW5nIGEgc2VhcmNoIGFmdGVyd2FyZHMuIFRoaXMgaXMgYW4gKipFWFBFUklNRU5UQUwqKiBmZWF0dXJlLFxuICAgICAqIGlmIHlvdSBmaW5kIGFuIGlzc3VlIHdpdGggaXQsIHBsZWFzZVxuICAgICAqIFtvcGVuIGFuIGlzc3VlXShodHRwczovL2dpdGh1Yi5jb20vYWxnb2xpYS9pbnN0YW50c2VhcmNoLmpzL2lzc3Vlcy9uZXc/dGl0bGU9UHJvYmxlbSUyMHdpdGglMjBkaXNwb3NlKS5cbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9IFRoaXMgbWV0aG9kIGRvZXMgbm90IHJldHVybiBhbnl0aGluZ1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZGlzcG9zZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5zY2hlZHVsZVNlYXJjaC5jYW5jZWwoKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVSZW5kZXIuY2FuY2VsKCk7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fc2VhcmNoU3RhbGxlZFRpbWVyKTtcbiAgICAgIHRoaXMucmVtb3ZlV2lkZ2V0cyh0aGlzLm1haW5JbmRleC5nZXRXaWRnZXRzKCkpO1xuICAgICAgdGhpcy5tYWluSW5kZXguZGlzcG9zZSgpOyAvLyBZb3UgY2FuIG5vdCBzdGFydCBhbiBpbnN0YW5jZSB0d28gdGltZXMsIHRoZXJlZm9yZSBhIGRpc3Bvc2VkIGluc3RhbmNlXG4gICAgICAvLyBuZWVkcyB0byBzZXQgc3RhcnRlZCBhcyBmYWxzZSBvdGhlcndpc2UgdGhpcyBjYW4gbm90IGJlIHJlc3RhcnRlZCBhdCBhXG4gICAgICAvLyBsYXRlciBwb2ludC5cblxuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7IC8vIFRoZSBoZWxwZXIgbmVlZHMgdG8gYmUgcmVzZXQgdG8gcGVyZm9ybSB0aGUgbmV4dCBzZWFyY2ggZnJvbSBhIGZyZXNoIHN0YXRlLlxuICAgICAgLy8gSWYgbm90IHJlc2V0LCBpdCB3b3VsZCB1c2UgdGhlIHN0YXRlIHN0b3JlZCBiZWZvcmUgY2FsbGluZyBgZGlzcG9zZSgpYC5cblxuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMubWFpbkhlbHBlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMubWFpbkhlbHBlciA9IG51bGw7XG4gICAgICB0aGlzLmhlbHBlciA9IG51bGw7XG4gICAgICB0aGlzLm1pZGRsZXdhcmUuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjcpIHtcbiAgICAgICAgdmFyIGluc3RhbmNlID0gX3JlZjcuaW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2NoZWR1bGVTdGFsbGVkUmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNjaGVkdWxlU3RhbGxlZFJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMuX3NlYXJjaFN0YWxsZWRUaW1lcikge1xuICAgICAgICB0aGlzLl9zZWFyY2hTdGFsbGVkVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczQuc3RhdHVzID0gJ3N0YWxsZWQnO1xuXG4gICAgICAgICAgX3RoaXM0LnNjaGVkdWxlUmVuZGVyKCk7XG4gICAgICAgIH0sIHRoaXMuX3N0YWxsZWRTZWFyY2hEZWxheSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgVUkgc3RhdGUgYW5kIHRyaWdnZXIgYSBzZWFyY2guXG4gICAgICogQHBhcmFtIHVpU3RhdGUgVGhlIG5leHQgVUkgc3RhdGUgb3IgYSBmdW5jdGlvbiBjb21wdXRpbmcgaXQgZnJvbSB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAqIEBwYXJhbSBjYWxsT25TdGF0ZUNoYW5nZSBwcml2YXRlIHBhcmFtZXRlciB1c2VkIHRvIGtub3cgaWYgdGhlIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBhIHN0YXRlIGNoYW5nZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2V0VWlTdGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVaVN0YXRlKHVpU3RhdGUpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB2YXIgY2FsbE9uU3RhdGVDaGFuZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7XG5cbiAgICAgIGlmICghdGhpcy5tYWluSGVscGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSBgc3RhcnRgIG1ldGhvZCBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIGBzZXRVaVN0YXRlYC4nKSk7XG4gICAgICB9IC8vIFdlIHJlZnJlc2ggdGhlIGluZGV4IFVJIHN0YXRlIHRvIHVwZGF0ZSB0aGUgbG9jYWwgVUkgc3RhdGUgdGhhdCB0aGVcbiAgICAgIC8vIG1haW4gaW5kZXggcGFzc2VzIHRvIHRoZSBmdW5jdGlvbiBmb3JtIG9mIGBzZXRVaVN0YXRlYC5cblxuXG4gICAgICB0aGlzLm1haW5JbmRleC5yZWZyZXNoVWlTdGF0ZSgpO1xuICAgICAgdmFyIG5leHRVaVN0YXRlID0gdHlwZW9mIHVpU3RhdGUgPT09ICdmdW5jdGlvbicgPyB1aVN0YXRlKHRoaXMubWFpbkluZGV4LmdldFdpZGdldFVpU3RhdGUoe30pKSA6IHVpU3RhdGU7XG5cbiAgICAgIGlmICh0aGlzLm9uU3RhdGVDaGFuZ2UgJiYgY2FsbE9uU3RhdGVDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKHtcbiAgICAgICAgICB1aVN0YXRlOiBuZXh0VWlTdGF0ZSxcbiAgICAgICAgICBzZXRVaVN0YXRlOiBmdW5jdGlvbiBzZXRVaVN0YXRlKGZpbmFsVWlTdGF0ZSkge1xuICAgICAgICAgICAgc2V0SW5kZXhIZWxwZXJTdGF0ZSh0eXBlb2YgZmluYWxVaVN0YXRlID09PSAnZnVuY3Rpb24nID8gZmluYWxVaVN0YXRlKG5leHRVaVN0YXRlKSA6IGZpbmFsVWlTdGF0ZSwgX3RoaXM1Lm1haW5JbmRleCk7XG5cbiAgICAgICAgICAgIF90aGlzNS5zY2hlZHVsZVNlYXJjaCgpO1xuXG4gICAgICAgICAgICBfdGhpczUub25JbnRlcm5hbFN0YXRlQ2hhbmdlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEluZGV4SGVscGVyU3RhdGUobmV4dFVpU3RhdGUsIHRoaXMubWFpbkluZGV4KTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZVNlYXJjaCgpO1xuICAgICAgICB0aGlzLm9uSW50ZXJuYWxTdGF0ZUNoYW5nZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRVaVN0YXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVpU3RhdGUoKSB7XG4gICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgIC8vIFdlIHJlZnJlc2ggdGhlIGluZGV4IFVJIHN0YXRlIHRvIG1ha2Ugc3VyZSBjaGFuZ2VzIGZyb20gYHJlZmluZWAgYXJlIHRha2VuIGluIGFjY291bnRcbiAgICAgICAgdGhpcy5tYWluSW5kZXgucmVmcmVzaFVpU3RhdGUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMubWFpbkluZGV4LmdldFdpZGdldFVpU3RhdGUoe30pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVVUkxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVVJMKCkge1xuICAgICAgdmFyIG5leHRTdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSBgc3RhcnRgIG1ldGhvZCBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIGBjcmVhdGVVUkxgLicpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVVSTChuZXh0U3RhdGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZWZyZXNoXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICBpZiAoIXRoaXMubWFpbkhlbHBlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYHN0YXJ0YCBtZXRob2QgbmVlZHMgdG8gYmUgY2FsbGVkIGJlZm9yZSBgcmVmcmVzaGAuJykpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1haW5IZWxwZXIuY2xlYXJDYWNoZSgpLnNlYXJjaCgpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBJbnN0YW50U2VhcmNoO1xufShFdmVudEVtaXR0ZXIpO1xuXG5leHBvcnQgZGVmYXVsdCBJbnN0YW50U2VhcmNoOyIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBoaWdobGlnaHQgYXMgX2hpZ2hsaWdodCwgcmV2ZXJzZUhpZ2hsaWdodCBhcyBfcmV2ZXJzZUhpZ2hsaWdodCwgc25pcHBldCBhcyBfc25pcHBldCwgcmV2ZXJzZVNuaXBwZXQgYXMgX3JldmVyc2VTbmlwcGV0LCBpbnNpZ2h0cyBhcyBfaW5zaWdodHMgfSBmcm9tIFwiLi4vaGVscGVycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0TnVtYmVyIGFzIF9mb3JtYXROdW1iZXIgfSBmcm9tIFwiLi9mb3JtYXROdW1iZXIuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhvZ2FuSGVscGVycyhfcmVmKSB7XG4gIHZhciBudW1iZXJMb2NhbGUgPSBfcmVmLm51bWJlckxvY2FsZTtcbiAgcmV0dXJuIHtcbiAgICBmb3JtYXROdW1iZXI6IGZ1bmN0aW9uIGZvcm1hdE51bWJlcih2YWx1ZSwgcmVuZGVyKSB7XG4gICAgICByZXR1cm4gX2Zvcm1hdE51bWJlcihOdW1iZXIocmVuZGVyKHZhbHVlKSksIG51bWJlckxvY2FsZSk7XG4gICAgfSxcbiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIGhpZ2hsaWdodChvcHRpb25zLCByZW5kZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBoaWdobGlnaHRPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlcihfaGlnaGxpZ2h0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaGlnaGxpZ2h0T3B0aW9ucyksIHt9LCB7XG4gICAgICAgICAgaGl0OiB0aGlzXG4gICAgICAgIH0pKSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXG5UaGUgaGlnaGxpZ2h0IGhlbHBlciBleHBlY3RzIGEgSlNPTiBvYmplY3Qgb2YgdGhlIGZvcm1hdDpcXG57IFxcXCJhdHRyaWJ1dGVcXFwiOiBcXFwibmFtZVxcXCIsIFxcXCJoaWdobGlnaHRlZFRhZ05hbWVcXFwiOiBcXFwibWFya1xcXCIgfVwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJldmVyc2VIaWdobGlnaHQ6IGZ1bmN0aW9uIHJldmVyc2VIaWdobGlnaHQob3B0aW9ucywgcmVuZGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcmV2ZXJzZUhpZ2hsaWdodE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVuZGVyKF9yZXZlcnNlSGlnaGxpZ2h0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmV2ZXJzZUhpZ2hsaWdodE9wdGlvbnMpLCB7fSwge1xuICAgICAgICAgIGhpdDogdGhpc1xuICAgICAgICB9KSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFxuICBUaGUgcmV2ZXJzZUhpZ2hsaWdodCBoZWxwZXIgZXhwZWN0cyBhIEpTT04gb2JqZWN0IG9mIHRoZSBmb3JtYXQ6XFxuICB7IFxcXCJhdHRyaWJ1dGVcXFwiOiBcXFwibmFtZVxcXCIsIFxcXCJoaWdobGlnaHRlZFRhZ05hbWVcXFwiOiBcXFwibWFya1xcXCIgfVwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNuaXBwZXQ6IGZ1bmN0aW9uIHNuaXBwZXQob3B0aW9ucywgcmVuZGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgc25pcHBldE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVuZGVyKF9zbmlwcGV0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc25pcHBldE9wdGlvbnMpLCB7fSwge1xuICAgICAgICAgIGhpdDogdGhpc1xuICAgICAgICB9KSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFxuVGhlIHNuaXBwZXQgaGVscGVyIGV4cGVjdHMgYSBKU09OIG9iamVjdCBvZiB0aGUgZm9ybWF0OlxcbnsgXFxcImF0dHJpYnV0ZVxcXCI6IFxcXCJuYW1lXFxcIiwgXFxcImhpZ2hsaWdodGVkVGFnTmFtZVxcXCI6IFxcXCJtYXJrXFxcIiB9XCIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcmV2ZXJzZVNuaXBwZXQ6IGZ1bmN0aW9uIHJldmVyc2VTbmlwcGV0KG9wdGlvbnMsIHJlbmRlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJldmVyc2VTbmlwcGV0T3B0aW9ucyA9IEpTT04ucGFyc2Uob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiByZW5kZXIoX3JldmVyc2VTbmlwcGV0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmV2ZXJzZVNuaXBwZXRPcHRpb25zKSwge30sIHtcbiAgICAgICAgICBoaXQ6IHRoaXNcbiAgICAgICAgfSkpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcbiAgVGhlIHJldmVyc2VTbmlwcGV0IGhlbHBlciBleHBlY3RzIGEgSlNPTiBvYmplY3Qgb2YgdGhlIGZvcm1hdDpcXG4gIHsgXFxcImF0dHJpYnV0ZVxcXCI6IFxcXCJuYW1lXFxcIiwgXFxcImhpZ2hsaWdodGVkVGFnTmFtZVxcXCI6IFxcXCJtYXJrXFxcIiB9XCIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5zaWdodHM6IGZ1bmN0aW9uIGluc2lnaHRzKG9wdGlvbnMsIHJlbmRlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIF9KU09OJHBhcnNlID0gSlNPTi5wYXJzZShvcHRpb25zKSxcbiAgICAgICAgICAgIG1ldGhvZCA9IF9KU09OJHBhcnNlLm1ldGhvZCxcbiAgICAgICAgICAgIHBheWxvYWQgPSBfSlNPTiRwYXJzZS5wYXlsb2FkO1xuXG4gICAgICAgIHJldHVybiByZW5kZXIoX2luc2lnaHRzKG1ldGhvZCwgX29iamVjdFNwcmVhZCh7XG4gICAgICAgICAgb2JqZWN0SURzOiBbdGhpcy5vYmplY3RJRF1cbiAgICAgICAgfSwgcGF5bG9hZCkpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcblRoZSBpbnNpZ2h0cyBoZWxwZXIgZXhwZWN0cyBhIEpTT04gb2JqZWN0IG9mIHRoZSBmb3JtYXQ6XFxueyBcXFwibWV0aG9kXFxcIjogXFxcIm1ldGhvZC1uYW1lXFxcIiwgXFxcInBheWxvYWRcXFwiOiB7IFxcXCJldmVudE5hbWVcXFwiOiBcXFwibmFtZSBvZiB0aGUgZXZlbnRcXFwiIH0gfVwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE51bWJlcih2YWx1ZSwgbnVtYmVyTG9jYWxlKSB7XG4gIHJldHVybiB2YWx1ZS50b0xvY2FsZVN0cmluZyhudW1iZXJMb2NhbGUpO1xufSIsImZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCB7IGlzRXF1YWwsIHNhZmVseVJ1bk9uQnJvd3NlciB9IGZyb20gXCIuLi91dGlscy9pbmRleC5qc1wiO1xuXG5mdW5jdGlvbiBnZXRTdGF0ZVdpdGhvdXRQYWdlKHN0YXRlKSB7XG4gIHZhciBfcmVmID0gc3RhdGUgfHwge30sXG4gICAgICBwYWdlID0gX3JlZi5wYWdlLFxuICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJwYWdlXCJdKTtcblxuICByZXR1cm4gcmVzdDtcbn1cblxudmFyIEtFWSA9ICdhaXMuaW5maW5pdGVIaXRzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUluZmluaXRlSGl0c1Nlc3Npb25TdG9yYWdlQ2FjaGUoKSB7XG4gIHJldHVybiB7XG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZChfcmVmMikge1xuICAgICAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGU7XG4gICAgICB2YXIgc2Vzc2lvblN0b3JhZ2UgPSBzYWZlbHlSdW5PbkJyb3dzZXIoZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICAgIHZhciB3aW5kb3cgPSBfcmVmMy53aW5kb3c7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2U7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGNhY2hlID0gSlNPTi5wYXJzZSggLy8gQHRzLWV4cGVjdC1lcnJvciBKU09OLnBhcnNlKCkgcmVxdWlyZXMgYSBzdHJpbmcsIGJ1dCBpdCBhY3R1YWxseSBhY2NlcHRzIG51bGwsIHRvby5cbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShLRVkpKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlICYmIGlzRXF1YWwoY2FjaGUuc3RhdGUsIGdldFN0YXRlV2l0aG91dFBhZ2Uoc3RhdGUpKSA/IGNhY2hlLmhpdHMgOiBudWxsO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShLRVkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikgey8vIGRvIG5vdGhpbmdcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShfcmVmNCkge1xuICAgICAgdmFyIHN0YXRlID0gX3JlZjQuc3RhdGUsXG4gICAgICAgICAgaGl0cyA9IF9yZWY0LmhpdHM7XG4gICAgICB2YXIgc2Vzc2lvblN0b3JhZ2UgPSBzYWZlbHlSdW5PbkJyb3dzZXIoZnVuY3Rpb24gKF9yZWY1KSB7XG4gICAgICAgIHZhciB3aW5kb3cgPSBfcmVmNS53aW5kb3c7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2U7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oS0VZLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RhdGU6IGdldFN0YXRlV2l0aG91dFBhZ2Uoc3RhdGUpLFxuICAgICAgICAgIGhpdHM6IGhpdHNcbiAgICAgICAgfSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHsvLyBkbyBub3RoaW5nXG4gICAgICB9XG4gICAgfVxuICB9O1xufSIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyB1bmlxLCBmaW5kLCBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvciwgd2FybmluZyB9IGZyb20gXCIuLi91dGlscy9pbmRleC5qc1wiO1xuXG52YXIgZ2V0U2VsZWN0ZWRIaXRzID0gZnVuY3Rpb24gZ2V0U2VsZWN0ZWRIaXRzKGhpdHMsIHNlbGVjdGVkT2JqZWN0SURzKSB7XG4gIHJldHVybiBzZWxlY3RlZE9iamVjdElEcy5tYXAoZnVuY3Rpb24gKG9iamVjdElEKSB7XG4gICAgdmFyIGhpdCA9IGZpbmQoaGl0cywgZnVuY3Rpb24gKGgpIHtcbiAgICAgIHJldHVybiBoLm9iamVjdElEID09PSBvYmplY3RJRDtcbiAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgaGl0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgb2JqZWN0SUQgXFxcIlwiLmNvbmNhdChvYmplY3RJRCwgXCJcXFwiIHBhc3NlZCB0byBgY2xpY2tlZE9iamVjdElEc0FmdGVyU2VhcmNoYCBpbiB0aGUgcmV0dXJuZWQgaGl0cy4gVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW5mZXIgdGhlIGFic29sdXRlIHBvc2l0aW9uIGFuZCB0aGUgcXVlcnkgSUQuXCIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGl0O1xuICB9KTtcbn07XG5cbnZhciBnZXRRdWVyeUlEID0gZnVuY3Rpb24gZ2V0UXVlcnlJRChzZWxlY3RlZEhpdHMpIHtcbiAgdmFyIHF1ZXJ5SURzID0gdW5pcShzZWxlY3RlZEhpdHMubWFwKGZ1bmN0aW9uIChoaXQpIHtcbiAgICByZXR1cm4gaGl0Ll9fcXVlcnlJRDtcbiAgfSkpO1xuXG4gIGlmIChxdWVyeUlEcy5sZW5ndGggPiAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnNpZ2h0cyBjdXJyZW50bHkgYWxsb3dzIGEgc2luZ2xlIGBxdWVyeUlEYC4gVGhlIGBvYmplY3RJRHNgIHByb3ZpZGVkIG1hcCB0byBtdWx0aXBsZSBgcXVlcnlJRGBzLicpO1xuICB9XG5cbiAgdmFyIHF1ZXJ5SUQgPSBxdWVyeUlEc1swXTtcblxuICBpZiAodHlwZW9mIHF1ZXJ5SUQgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGluZmVyIGBxdWVyeUlEYC4gRW5zdXJlIEluc3RhbnRTZWFyY2ggYGNsaWNrQW5hbHl0aWNzOiB0cnVlYCB3YXMgYWRkZWQgd2l0aCB0aGUgQ29uZmlndXJlIHdpZGdldC5cXG5cXG5TZWU6IGh0dHBzOi8vYWxnLmxpL2xOaVpaN1wiKTtcbiAgfVxuXG4gIHJldHVybiBxdWVyeUlEO1xufTtcblxudmFyIGdldFBvc2l0aW9ucyA9IGZ1bmN0aW9uIGdldFBvc2l0aW9ucyhzZWxlY3RlZEhpdHMpIHtcbiAgcmV0dXJuIHNlbGVjdGVkSGl0cy5tYXAoZnVuY3Rpb24gKGhpdCkge1xuICAgIHJldHVybiBoaXQuX19wb3NpdGlvbjtcbiAgfSk7XG59O1xuXG5leHBvcnQgdmFyIGluZmVyUGF5bG9hZCA9IGZ1bmN0aW9uIGluZmVyUGF5bG9hZChfcmVmKSB7XG4gIHZhciBtZXRob2QgPSBfcmVmLm1ldGhvZCxcbiAgICAgIHJlc3VsdHMgPSBfcmVmLnJlc3VsdHMsXG4gICAgICBoaXRzID0gX3JlZi5oaXRzLFxuICAgICAgb2JqZWN0SURzID0gX3JlZi5vYmplY3RJRHM7XG4gIHZhciBpbmRleCA9IHJlc3VsdHMuaW5kZXg7XG4gIHZhciBzZWxlY3RlZEhpdHMgPSBnZXRTZWxlY3RlZEhpdHMoaGl0cywgb2JqZWN0SURzKTtcbiAgdmFyIHF1ZXJ5SUQgPSBnZXRRdWVyeUlEKHNlbGVjdGVkSGl0cyk7XG5cbiAgc3dpdGNoIChtZXRob2QpIHtcbiAgICBjYXNlICdjbGlja2VkT2JqZWN0SURzQWZ0ZXJTZWFyY2gnOlxuICAgICAge1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gZ2V0UG9zaXRpb25zKHNlbGVjdGVkSGl0cyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgIHF1ZXJ5SUQ6IHF1ZXJ5SUQsXG4gICAgICAgICAgb2JqZWN0SURzOiBvYmplY3RJRHMsXG4gICAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnNcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ2NvbnZlcnRlZE9iamVjdElEc0FmdGVyU2VhcmNoJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgcXVlcnlJRDogcXVlcnlJRCxcbiAgICAgICAgb2JqZWN0SURzOiBvYmplY3RJRHNcbiAgICAgIH07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgbWV0aG9kIHBhc3NlZCB0byBpbnNpZ2h0czogXFxcIlwiLmNvbmNhdChtZXRob2QsIFwiXFxcIi5cIikpO1xuICB9XG59O1xuXG52YXIgd3JhcEluc2lnaHRzQ2xpZW50ID0gZnVuY3Rpb24gd3JhcEluc2lnaHRzQ2xpZW50KGFhLCByZXN1bHRzLCBoaXRzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBheWxvYWRzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIHBheWxvYWRzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgcGF5bG9hZCA9IHBheWxvYWRzWzBdO1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyhmYWxzZSwgXCJgaW5zaWdodHNgIGZ1bmN0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IGlzIHN0aWxsIHN1cHBvcnRlZCBpbiA0LnggcmVsZWFzZXMsIGJ1dCBub3QgZnVydGhlci4gSXQgaXMgcmVwbGFjZWQgYnkgdGhlIGBpbnNpZ2h0c2AgbWlkZGxld2FyZS5cXG5cXG5Gb3IgbW9yZSBpbmZvcm1hdGlvbiwgdmlzaXQgaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL2d1aWRlcy9nZXR0aW5nLWluc2lnaHRzLWFuZC1hbmFseXRpY3Mvc2VhcmNoLWFuYWx5dGljcy9jbGljay10aHJvdWdoLWFuZC1jb252ZXJzaW9ucy9ob3ctdG8vc2VuZC1jbGljay1hbmQtY29udmVyc2lvbi1ldmVudHMtd2l0aC1pbnN0YW50c2VhcmNoL2pzL1wiKSA6IHZvaWQgMDtcblxuICAgIGlmICghYWEpIHtcbiAgICAgIHZhciB3aXRoSW5zdGFudFNlYXJjaFVzYWdlID0gY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3Ioe1xuICAgICAgICBuYW1lOiAnaW5zdGFudHNlYXJjaCdcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHdpdGhJbnN0YW50U2VhcmNoVXNhZ2UoJ1RoZSBgaW5zaWdodHNDbGllbnRgIG9wdGlvbiBoYXMgbm90IGJlZW4gcHJvdmlkZWQgdG8gYGluc3RhbnRzZWFyY2hgLicpKTtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGF5bG9hZC5vYmplY3RJRHMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBgb2JqZWN0SURzYCB0byBiZSBhbiBhcnJheS4nKTtcbiAgICB9XG5cbiAgICB2YXIgaW5mZXJyZWRQYXlsb2FkID0gaW5mZXJQYXlsb2FkKHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgIGhpdHM6IGhpdHMsXG4gICAgICBvYmplY3RJRHM6IHBheWxvYWQub2JqZWN0SURzXG4gICAgfSk7XG4gICAgYWEobWV0aG9kLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGluZmVycmVkUGF5bG9hZCksIHBheWxvYWQpKTtcbiAgfTtcbn07XG4vKipcbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBzdGlsbCBzdXBwb3J0ZWQgaW4gNC54IHJlbGVhc2VzLCBidXQgbm90IGZ1cnRoZXIuIEl0IGlzIHJlcGxhY2VkIGJ5IHRoZSBgaW5zaWdodHNgIG1pZGRsZXdhcmUuIEZvciBtb3JlIGluZm9ybWF0aW9uLCB2aXNpdCBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL2dldHRpbmctaW5zaWdodHMtYW5kLWFuYWx5dGljcy9zZWFyY2gtYW5hbHl0aWNzL2NsaWNrLXRocm91Z2gtYW5kLWNvbnZlcnNpb25zL2hvdy10by9zZW5kLWNsaWNrLWFuZC1jb252ZXJzaW9uLWV2ZW50cy13aXRoLWluc3RhbnRzZWFyY2gvanMvXG4gKiBJdCBwYXNzZXMgYGluc2lnaHRzYCB0byBgSGl0c1dpdGhJbnNpZ2h0c0xpc3RlbmVyYCBhbmQgYEluZmluaXRlSGl0c1dpdGhJbnNpZ2h0c0xpc3RlbmVyYC5cbiAqL1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdpdGhJbnNpZ2h0cyhjb25uZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJGbiwgdW5tb3VudEZuKSB7XG4gICAgcmV0dXJuIGNvbm5lY3RvcihmdW5jdGlvbiAocmVuZGVyT3B0aW9ucywgaXNGaXJzdFJlbmRlcikge1xuICAgICAgdmFyIHJlc3VsdHMgPSByZW5kZXJPcHRpb25zLnJlc3VsdHMsXG4gICAgICAgICAgaGl0cyA9IHJlbmRlck9wdGlvbnMuaGl0cyxcbiAgICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSByZW5kZXJPcHRpb25zLmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcblxuICAgICAgaWYgKHJlc3VsdHMgJiYgaGl0cyAmJiBpbnN0YW50U2VhcmNoSW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIGluc2lnaHRzID0gd3JhcEluc2lnaHRzQ2xpZW50KGluc3RhbnRTZWFyY2hJbnN0YW5jZS5pbnNpZ2h0c0NsaWVudCwgcmVzdWx0cywgaGl0cyk7XG4gICAgICAgIHJldHVybiByZW5kZXJGbihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlbmRlck9wdGlvbnMpLCB7fSwge1xuICAgICAgICAgIGluc2lnaHRzOiBpbnNpZ2h0c1xuICAgICAgICB9KSwgaXNGaXJzdFJlbmRlcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZW5kZXJGbihyZW5kZXJPcHRpb25zLCBpc0ZpcnN0UmVuZGVyKTtcbiAgICB9LCB1bm1vdW50Rm4pO1xuICB9O1xufSIsImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgZGVzZXJpYWxpemVQYXlsb2FkIH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyByZWFkRGF0YUF0dHJpYnV0ZXMsIGhhc0RhdGFBdHRyaWJ1dGVzIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvaW5zaWdodHMuanNcIjtcblxudmFyIGZpbmRJbnNpZ2h0c1RhcmdldCA9IGZ1bmN0aW9uIGZpbmRJbnNpZ2h0c1RhcmdldChzdGFydEVsZW1lbnQsIGVuZEVsZW1lbnQsIHZhbGlkYXRvcikge1xuICB2YXIgZWxlbWVudCA9IHN0YXJ0RWxlbWVudDtcblxuICB3aGlsZSAoZWxlbWVudCAmJiAhdmFsaWRhdG9yKGVsZW1lbnQpKSB7XG4gICAgaWYgKGVsZW1lbnQgPT09IGVuZEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbnZhciBwYXJzZUluc2lnaHRzRXZlbnQgPSBmdW5jdGlvbiBwYXJzZUluc2lnaHRzRXZlbnQoZWxlbWVudCkge1xuICB2YXIgc2VyaWFsaXplZFBheWxvYWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pbnNpZ2h0cy1ldmVudCcpO1xuXG4gIGlmICh0eXBlb2Ygc2VyaWFsaXplZFBheWxvYWQgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5zaWdodHMgbWlkZGxld2FyZSBleHBlY3RzIGBkYXRhLWluc2lnaHRzLWV2ZW50YCB0byBiZSBhIGJhc2U2NC1lbmNvZGVkIEpTT04gc3RyaW5nLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVQYXlsb2FkKHNlcmlhbGl6ZWRQYXlsb2FkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBpbnNpZ2h0cyBtaWRkbGV3YXJlIHdhcyB1bmFibGUgdG8gcGFyc2UgYGRhdGEtaW5zaWdodHMtZXZlbnRgLicpO1xuICB9XG59O1xuXG52YXIgaW5zaWdodHNMaXN0ZW5lciA9IGZ1bmN0aW9uIGluc2lnaHRzTGlzdGVuZXIoQmFzZUNvbXBvbmVudCkge1xuICBmdW5jdGlvbiBXaXRoSW5zaWdodHNMaXN0ZW5lcihwcm9wcykge1xuICAgIHZhciBoYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICBpZiAocHJvcHMuc2VuZEV2ZW50KSB7XG4gICAgICAgIC8vIG5ldyB3YXkgd2l0aCBpbnNpZ2h0cyBtaWRkbGV3YXJlXG4gICAgICAgIHZhciB0YXJnZXRXaXRoRXZlbnQgPSBmaW5kSW5zaWdodHNUYXJnZXQoZXZlbnQudGFyZ2V0LCBldmVudC5jdXJyZW50VGFyZ2V0LCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1pbnNpZ2h0cy1ldmVudCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGFyZ2V0V2l0aEV2ZW50KSB7XG4gICAgICAgICAgdmFyIHBheWxvYWQgPSBwYXJzZUluc2lnaHRzRXZlbnQodGFyZ2V0V2l0aEV2ZW50KTtcbiAgICAgICAgICBwYXlsb2FkLmZvckVhY2goZnVuY3Rpb24gKHNpbmdsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzLnNlbmRFdmVudChzaW5nbGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IC8vIG9sZCB3YXksIGUuZy4gaW5zdGFudHNlYXJjaC5pbnNpZ2h0cyhcImNsaWNrZWRPYmplY3RJRHNBZnRlclNlYXJjaFwiLCB7IC4uIH0pXG5cblxuICAgICAgdmFyIGluc2lnaHRzVGFyZ2V0ID0gZmluZEluc2lnaHRzVGFyZ2V0KGV2ZW50LnRhcmdldCwgZXZlbnQuY3VycmVudFRhcmdldCwgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGhhc0RhdGFBdHRyaWJ1dGVzKGVsZW1lbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbnNpZ2h0c1RhcmdldCkge1xuICAgICAgICB2YXIgX3JlYWREYXRhQXR0cmlidXRlcyA9IHJlYWREYXRhQXR0cmlidXRlcyhpbnNpZ2h0c1RhcmdldCksXG4gICAgICAgICAgICBtZXRob2QgPSBfcmVhZERhdGFBdHRyaWJ1dGVzLm1ldGhvZCxcbiAgICAgICAgICAgIF9wYXlsb2FkID0gX3JlYWREYXRhQXR0cmlidXRlcy5wYXlsb2FkO1xuXG4gICAgICAgIHByb3BzLmluc2lnaHRzKG1ldGhvZCwgX3BheWxvYWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gaChcImRpdlwiLCB7XG4gICAgICBvbkNsaWNrOiBoYW5kbGVDbGlja1xuICAgIH0sIGgoQmFzZUNvbXBvbmVudCwgcHJvcHMpKTtcbiAgfVxuXG4gIHJldHVybiBXaXRoSW5zaWdodHNMaXN0ZW5lcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluc2lnaHRzTGlzdGVuZXI7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuaW1wb3J0IHsgc2FmZWx5UnVuT25Ccm93c2VyIH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4LmpzXCI7XG5cbnZhciBzZXRXaW5kb3dUaXRsZSA9IGZ1bmN0aW9uIHNldFdpbmRvd1RpdGxlKHRpdGxlKSB7XG4gIGlmICh0aXRsZSkge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbiBicm93c2VycyBzbyB3ZSBjYW4gZGlzYWJsZSB0aGlzIGNoZWNrLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICB3aW5kb3cuZG9jdW1lbnQudGl0bGUgPSB0aXRsZTtcbiAgfVxufTtcblxudmFyIEJyb3dzZXJIaXN0b3J5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGEgbmV3IHN0b3JhZ2UgcHJvdmlkZXIgdGhhdCBzeW5jcyB0aGUgc2VhcmNoIHN0YXRlIHRvIHRoZSBVUkxcbiAgICogdXNpbmcgd2ViIEFQSXMgKGB3aW5kb3cubG9jYXRpb24ucHVzaFN0YXRlYCBhbmQgYG9ucG9wc3RhdGVgIGV2ZW50KS5cbiAgICovXG4gIGZ1bmN0aW9uIEJyb3dzZXJIaXN0b3J5KF9yZWYpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHdpbmRvd1RpdGxlID0gX3JlZi53aW5kb3dUaXRsZSxcbiAgICAgICAgX3JlZiR3cml0ZURlbGF5ID0gX3JlZi53cml0ZURlbGF5LFxuICAgICAgICB3cml0ZURlbGF5ID0gX3JlZiR3cml0ZURlbGF5ID09PSB2b2lkIDAgPyA0MDAgOiBfcmVmJHdyaXRlRGVsYXksXG4gICAgICAgIGNyZWF0ZVVSTCA9IF9yZWYuY3JlYXRlVVJMLFxuICAgICAgICBwYXJzZVVSTCA9IF9yZWYucGFyc2VVUkwsXG4gICAgICAgIGdldExvY2F0aW9uID0gX3JlZi5nZXRMb2NhdGlvbjtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCcm93c2VySGlzdG9yeSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3aW5kb3dUaXRsZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVEZWxheVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX2NyZWF0ZVVSTFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGFyc2VVUkxcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldExvY2F0aW9uXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3cml0ZVRpbWVyXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpblBvcFN0YXRlXCIsIGZhbHNlKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzRGlzcG9zZWRcIiwgZmFsc2UpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibGF0ZXN0QWNrbm93bGVkZ2VkSGlzdG9yeVwiLCAwKTtcblxuICAgIHRoaXMud2luZG93VGl0bGUgPSB3aW5kb3dUaXRsZTtcbiAgICB0aGlzLndyaXRlVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53cml0ZURlbGF5ID0gd3JpdGVEZWxheTtcbiAgICB0aGlzLl9jcmVhdGVVUkwgPSBjcmVhdGVVUkw7XG4gICAgdGhpcy5wYXJzZVVSTCA9IHBhcnNlVVJMO1xuICAgIHRoaXMuZ2V0TG9jYXRpb24gPSBnZXRMb2NhdGlvbjtcbiAgICBzYWZlbHlSdW5PbkJyb3dzZXIoZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICB2YXIgd2luZG93ID0gX3JlZjIud2luZG93O1xuXG4gICAgICB2YXIgdGl0bGUgPSBfdGhpcy53aW5kb3dUaXRsZSAmJiBfdGhpcy53aW5kb3dUaXRsZShfdGhpcy5yZWFkKCkpO1xuXG4gICAgICBzZXRXaW5kb3dUaXRsZSh0aXRsZSk7XG4gICAgICBfdGhpcy5sYXRlc3RBY2tub3dsZWRnZWRIaXN0b3J5ID0gd2luZG93Lmhpc3RvcnkubGVuZ3RoO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgVVJMIGFuZCByZXR1cm5zIGEgc3luY2FibGUgVUkgc2VhcmNoIHN0YXRlLlxuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhCcm93c2VySGlzdG9yeSwgW3tcbiAgICBrZXk6IFwicmVhZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VVUkwoe1xuICAgICAgICBxc01vZHVsZTogcXMsXG4gICAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBzZWFyY2ggc3RhdGUgaW50byB0aGUgVVJMLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid3JpdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gd3JpdGUocm91dGVTdGF0ZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHNhZmVseVJ1bk9uQnJvd3NlcihmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgdmFyIHdpbmRvdyA9IF9yZWYzLndpbmRvdztcblxuICAgICAgICB2YXIgdXJsID0gX3RoaXMyLmNyZWF0ZVVSTChyb3V0ZVN0YXRlKTtcblxuICAgICAgICB2YXIgdGl0bGUgPSBfdGhpczIud2luZG93VGl0bGUgJiYgX3RoaXMyLndpbmRvd1RpdGxlKHJvdXRlU3RhdGUpO1xuXG4gICAgICAgIGlmIChfdGhpczIud3JpdGVUaW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpczIud3JpdGVUaW1lcik7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIud3JpdGVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNldFdpbmRvd1RpdGxlKHRpdGxlKTtcblxuICAgICAgICAgIGlmIChfdGhpczIuc2hvdWxkV3JpdGUodXJsKSkge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHJvdXRlU3RhdGUsIHRpdGxlIHx8ICcnLCB1cmwpO1xuICAgICAgICAgICAgX3RoaXMyLmxhdGVzdEFja25vd2xlZGdlZEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeS5sZW5ndGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMyLmluUG9wU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICBfdGhpczIud3JpdGVUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSwgX3RoaXMyLndyaXRlRGVsYXkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYSBjYWxsYmFjayBvbiB0aGUgYG9ucG9wc3RhdGVgIGV2ZW50IG9mIHRoZSBoaXN0b3J5IEFQSSBvZiB0aGUgY3VycmVudCBwYWdlLlxuICAgICAqIEl0IGVuYWJsZXMgdGhlIFVSTCBzeW5jIHRvIGtlZXAgdHJhY2sgb2YgdGhlIGNoYW5nZXMuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJvblVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblVwZGF0ZShjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX29uUG9wU3RhdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKF90aGlzMy53cml0ZVRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzMy53cml0ZVRpbWVyKTtcbiAgICAgICAgICBfdGhpczMud3JpdGVUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMy5pblBvcFN0YXRlID0gdHJ1ZTtcbiAgICAgICAgdmFyIHJvdXRlU3RhdGUgPSBldmVudC5zdGF0ZTsgLy8gQXQgaW5pdGlhbCBsb2FkLCB0aGUgc3RhdGUgaXMgcmVhZCBmcm9tIHRoZSBVUkwgd2l0aG91dCB1cGRhdGUuXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0aGUgc3RhdGUgb2JqZWN0IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSwgd2UgZmFsbGJhY2sgYW5kIHJlYWQgdGhlIFVSTC5cblxuICAgICAgICBpZiAoIXJvdXRlU3RhdGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhfdGhpczMucmVhZCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhyb3V0ZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2FmZWx5UnVuT25Ccm93c2VyKGZ1bmN0aW9uIChfcmVmNCkge1xuICAgICAgICB2YXIgd2luZG93ID0gX3JlZjQud2luZG93O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBfdGhpczMuX29uUG9wU3RhdGUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjb21wbGV0ZSBVUkwgZnJvbSBhIGdpdmVuIHN5bmNhYmxlIFVJIHN0YXRlLlxuICAgICAqXG4gICAgICogSXQgYWx3YXlzIGdlbmVyYXRlcyB0aGUgZnVsbCBVUkwsIG5vdCBhIHJlbGF0aXZlIG9uZS5cbiAgICAgKiBUaGlzIGFsbG93cyB0byBoYW5kbGUgY2FzZXMgbGlrZSB1c2luZyBhIDxiYXNlIGhyZWY+LlxuICAgICAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2FsZ29saWEvaW5zdGFudHNlYXJjaC5qcy9pc3N1ZXMvNzkwXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVVUkxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVVJMKHJvdXRlU3RhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVVUkwoe1xuICAgICAgICBxc01vZHVsZTogcXMsXG4gICAgICAgIHJvdXRlU3RhdGU6IHJvdXRlU3RhdGUsXG4gICAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lciBhbmQgY2xlYW5zIHVwIHRoZSBVUkwuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkaXNwb3NlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHNhZmVseVJ1bk9uQnJvd3NlcihmdW5jdGlvbiAoX3JlZjUpIHtcbiAgICAgICAgdmFyIHdpbmRvdyA9IF9yZWY1LndpbmRvdztcblxuICAgICAgICBpZiAoX3RoaXM0Ll9vblBvcFN0YXRlKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgX3RoaXM0Ll9vblBvcFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLndyaXRlVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud3JpdGVUaW1lcik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMud3JpdGUoe30pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzaG91bGRXcml0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRXcml0ZSh1cmwpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gc2FmZWx5UnVuT25Ccm93c2VyKGZ1bmN0aW9uIChfcmVmNikge1xuICAgICAgICB2YXIgd2luZG93ID0gX3JlZjYud2luZG93O1xuICAgICAgICAvLyBXZSBkbyB3YW50IHRvIGBwdXNoU3RhdGVgIGlmOlxuICAgICAgICAvLyAtIHRoZSByb3V0ZXIgaXMgbm90IGRpc3Bvc2VkLCBJUy5qcyBuZWVkcyB0byB1cGRhdGUgdGhlIFVSTFxuICAgICAgICAvLyBPUlxuICAgICAgICAvLyAtIHRoZSBsYXN0IHdyaXRlIHdhcyBmcm9tIEluc3RhbnRTZWFyY2guanNcbiAgICAgICAgLy8gKHVubGlrZSBhIFNQQSwgd2hlcmUgaXQgd291bGQgaGF2ZSBsYXN0IHdyaXR0ZW4pXG4gICAgICAgIHZhciBsYXN0UHVzaFdhc0J5SVNBZnRlckRpc3Bvc2UgPSAhKF90aGlzNS5pc0Rpc3Bvc2VkICYmIF90aGlzNS5sYXRlc3RBY2tub3dsZWRnZWRIaXN0b3J5ICE9PSB3aW5kb3cuaGlzdG9yeS5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gKC8vIFdoZW4gdGhlIGxhc3Qgc3RhdGUgY2hhbmdlIHdhcyB0aHJvdWdoIHBvcHN0YXRlLCB0aGUgSVMuanMgc3RhdGUgY2hhbmdlcyxcbiAgICAgICAgICAvLyBidXQgdGhhdCBzaG91bGQgbm90IHdyaXRlIHRoZSBVUkwuXG4gICAgICAgICAgIV90aGlzNS5pblBvcFN0YXRlICYmIC8vIFdoZW4gdGhlIHByZXZpb3VzIHB1c2hTdGF0ZSBhZnRlciBkaXNwb3NlIHdhcyBieSBJUy5qcywgd2Ugd2FudCB0byB3cml0ZSB0aGUgVVJMLlxuICAgICAgICAgIGxhc3RQdXNoV2FzQnlJU0FmdGVyRGlzcG9zZSAmJiAvLyBXaGVuIHRoZSBVUkwgaXMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgb25lLCB3ZSBkbyBub3Qgd2FudCB0byB3cml0ZSBpdC5cbiAgICAgICAgICB1cmwgIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQnJvd3Nlckhpc3Rvcnk7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhpc3RvcnlSb3V0ZXIoKSB7XG4gIHZhciBfcmVmNyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICBfcmVmNyRjcmVhdGVVUkwgPSBfcmVmNy5jcmVhdGVVUkwsXG4gICAgICBjcmVhdGVVUkwgPSBfcmVmNyRjcmVhdGVVUkwgPT09IHZvaWQgMCA/IGZ1bmN0aW9uIChfcmVmOCkge1xuICAgIHZhciBxc01vZHVsZSA9IF9yZWY4LnFzTW9kdWxlLFxuICAgICAgICByb3V0ZVN0YXRlID0gX3JlZjgucm91dGVTdGF0ZSxcbiAgICAgICAgbG9jYXRpb24gPSBfcmVmOC5sb2NhdGlvbjtcbiAgICB2YXIgcHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbCxcbiAgICAgICAgaG9zdG5hbWUgPSBsb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgX2xvY2F0aW9uJHBvcnQgPSBsb2NhdGlvbi5wb3J0LFxuICAgICAgICBwb3J0ID0gX2xvY2F0aW9uJHBvcnQgPT09IHZvaWQgMCA/ICcnIDogX2xvY2F0aW9uJHBvcnQsXG4gICAgICAgIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuICAgIHZhciBxdWVyeVN0cmluZyA9IHFzTW9kdWxlLnN0cmluZ2lmeShyb3V0ZVN0YXRlKTtcbiAgICB2YXIgcG9ydFdpdGhQcmVmaXggPSBwb3J0ID09PSAnJyA/ICcnIDogXCI6XCIuY29uY2F0KHBvcnQpOyAvLyBJRSA8PSAxMSBoYXMgbm8gcHJvcGVyIGBsb2NhdGlvbi5vcmlnaW5gIHNvIHdlIGNhbm5vdCByZWx5IG9uIGl0LlxuXG4gICAgLy8gSUUgPD0gMTEgaGFzIG5vIHByb3BlciBgbG9jYXRpb24ub3JpZ2luYCBzbyB3ZSBjYW5ub3QgcmVseSBvbiBpdC5cbiAgICBpZiAoIXF1ZXJ5U3RyaW5nKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQocHJvdG9jb2wsIFwiLy9cIikuY29uY2F0KGhvc3RuYW1lKS5jb25jYXQocG9ydFdpdGhQcmVmaXgpLmNvbmNhdChwYXRobmFtZSkuY29uY2F0KGhhc2gpO1xuICAgIH1cblxuICAgIHJldHVybiBcIlwiLmNvbmNhdChwcm90b2NvbCwgXCIvL1wiKS5jb25jYXQoaG9zdG5hbWUpLmNvbmNhdChwb3J0V2l0aFByZWZpeCkuY29uY2F0KHBhdGhuYW1lLCBcIj9cIikuY29uY2F0KHF1ZXJ5U3RyaW5nKS5jb25jYXQoaGFzaCk7XG4gIH0gOiBfcmVmNyRjcmVhdGVVUkwsXG4gICAgICBfcmVmNyRwYXJzZVVSTCA9IF9yZWY3LnBhcnNlVVJMLFxuICAgICAgcGFyc2VVUkwgPSBfcmVmNyRwYXJzZVVSTCA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKF9yZWY5KSB7XG4gICAgdmFyIHFzTW9kdWxlID0gX3JlZjkucXNNb2R1bGUsXG4gICAgICAgIGxvY2F0aW9uID0gX3JlZjkubG9jYXRpb247XG4gICAgLy8gYHFzYCBieSBkZWZhdWx0IGNvbnZlcnRzIGFycmF5cyB3aXRoIG1vcmUgdGhhbiAyMCBpdGVtcyB0byBhbiBvYmplY3QuXG4gICAgLy8gV2Ugd2FudCB0byBhdm9pZCB0aGlzIGJlY2F1c2UgdGhlIGRhdGEgc3RydWN0dXJlIG1hbmlwdWxhdGVkIGNhbiB0aGVyZWZvcmUgdmFyeS5cbiAgICAvLyBTZXR0aW5nIHRoZSBsaW1pdCB0byBgMTAwYCBzZWVtcyBhIGdvb2QgbnVtYmVyIGJlY2F1c2UgdGhlIGVuZ2luZSdzIGRlZmF1bHQgaXMgMTAwXG4gICAgLy8gKGl0IGNhbiBnbyB1cCB0byAxMDAwIGJ1dCBpdCBpcyB2ZXJ5IHVubGlrZWx5IHRvIHNlbGVjdCBtb3JlIHRoYW4gMTAwIGl0ZW1zIGluIHRoZSBVSSkuXG4gICAgLy9cbiAgICAvLyBVc2luZyBhbiBgYXJyYXlMaW1pdGAgb2YgYG5gIGFsbG93cyBgbiArIDFgIGl0ZW1zLlxuICAgIC8vXG4gICAgLy8gU2VlOlxuICAgIC8vICAgLSBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL3FzI3BhcnNpbmctYXJyYXlzXG4gICAgLy8gICAtIGh0dHBzOi8vd3d3LmFsZ29saWEuY29tL2RvYy9hcGktcmVmZXJlbmNlL2FwaS1wYXJhbWV0ZXJzL21heFZhbHVlc1BlckZhY2V0L1xuICAgIHJldHVybiBxc01vZHVsZS5wYXJzZShsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSksIHtcbiAgICAgIGFycmF5TGltaXQ6IDk5XG4gICAgfSk7XG4gIH0gOiBfcmVmNyRwYXJzZVVSTCxcbiAgICAgIF9yZWY3JHdyaXRlRGVsYXkgPSBfcmVmNy53cml0ZURlbGF5LFxuICAgICAgd3JpdGVEZWxheSA9IF9yZWY3JHdyaXRlRGVsYXkgPT09IHZvaWQgMCA/IDQwMCA6IF9yZWY3JHdyaXRlRGVsYXksXG4gICAgICB3aW5kb3dUaXRsZSA9IF9yZWY3LndpbmRvd1RpdGxlLFxuICAgICAgX3JlZjckZ2V0TG9jYXRpb24gPSBfcmVmNy5nZXRMb2NhdGlvbixcbiAgICAgIGdldExvY2F0aW9uID0gX3JlZjckZ2V0TG9jYXRpb24gPT09IHZvaWQgMCA/IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gc2FmZWx5UnVuT25Ccm93c2VyKGZ1bmN0aW9uIChfcmVmMTApIHtcbiAgICAgIHZhciB3aW5kb3cgPSBfcmVmMTAud2luZG93O1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbjtcbiAgICB9LCB7XG4gICAgICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gcHJvdmlkZSBgZ2V0TG9jYXRpb25gIHRvIHRoZSBgaGlzdG9yeWAgcm91dGVyIGluIGVudmlyb25tZW50cyB3aGVyZSBgd2luZG93YCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSA6IF9yZWY3JGdldExvY2F0aW9uO1xuXG4gIHJldHVybiBuZXcgQnJvd3Nlckhpc3Rvcnkoe1xuICAgIGNyZWF0ZVVSTDogY3JlYXRlVVJMLFxuICAgIHBhcnNlVVJMOiBwYXJzZVVSTCxcbiAgICB3cml0ZURlbGF5OiB3cml0ZURlbGF5LFxuICAgIHdpbmRvd1RpdGxlOiB3aW5kb3dUaXRsZSxcbiAgICBnZXRMb2NhdGlvbjogZ2V0TG9jYXRpb25cbiAgfSk7XG59IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIGdldEluZGV4U3RhdGVXaXRob3V0Q29uZmlndXJlKHVpU3RhdGUpIHtcbiAgdmFyIGNvbmZpZ3VyZSA9IHVpU3RhdGUuY29uZmlndXJlLFxuICAgICAgdHJhY2tlZFVpU3RhdGUgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXModWlTdGF0ZSwgW1wiY29uZmlndXJlXCJdKTtcblxuICByZXR1cm4gdHJhY2tlZFVpU3RhdGU7XG59IC8vIHRlY2huaWNhbGx5IGEgVVJMIGNvdWxkIGNvbnRhaW4gYW55IGtleSwgc2luY2UgdXNlcnMgcHJvdmlkZSBpdCxcbi8vIHdoaWNoIGlzIHdoeSB0aGUgaW5wdXQgdG8gdGhpcyBmdW5jdGlvbiBpcyBVaVN0YXRlLCBub3Qgc29tZXRoaW5nXG4vLyB3aGljaCBleGNsdWRlcyBcImNvbmZpZ3VyZVwiIGFzIHRoaXMgZnVuY3Rpb24gZG9lcy5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzaW1wbGVTdGF0ZU1hcHBpbmcoKSB7XG4gIHJldHVybiB7XG4gICAgc3RhdGVUb1JvdXRlOiBmdW5jdGlvbiBzdGF0ZVRvUm91dGUodWlTdGF0ZSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHVpU3RhdGUpLnJlZHVjZShmdW5jdGlvbiAoc3RhdGUsIGluZGV4SWQpIHtcbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBpbmRleElkLCBnZXRJbmRleFN0YXRlV2l0aG91dENvbmZpZ3VyZSh1aVN0YXRlW2luZGV4SWRdKSkpO1xuICAgICAgfSwge30pO1xuICAgIH0sXG4gICAgcm91dGVUb1N0YXRlOiBmdW5jdGlvbiByb3V0ZVRvU3RhdGUoKSB7XG4gICAgICB2YXIgcm91dGVTdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocm91dGVTdGF0ZSkucmVkdWNlKGZ1bmN0aW9uIChzdGF0ZSwgaW5kZXhJZCkge1xuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGluZGV4SWQsIGdldEluZGV4U3RhdGVXaXRob3V0Q29uZmlndXJlKHJvdXRlU3RhdGVbaW5kZXhJZF0pKSk7XG4gICAgICB9LCB7fSk7XG4gICAgfVxuICB9O1xufSIsInZhciBOQU1FU1BBQ0UgPSAnYWlzJztcbmV4cG9ydCB2YXIgY29tcG9uZW50ID0gZnVuY3Rpb24gY29tcG9uZW50KGNvbXBvbmVudE5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIGRlc2NlbmRhbnROYW1lID0gX3JlZi5kZXNjZW5kYW50TmFtZSxcbiAgICAgICAgbW9kaWZpZXJOYW1lID0gX3JlZi5tb2RpZmllck5hbWU7XG5cbiAgICB2YXIgZGVzY2VuZGVudCA9IGRlc2NlbmRhbnROYW1lID8gXCItXCIuY29uY2F0KGRlc2NlbmRhbnROYW1lKSA6ICcnO1xuICAgIHZhciBtb2RpZmllciA9IG1vZGlmaWVyTmFtZSA/IFwiLS1cIi5jb25jYXQobW9kaWZpZXJOYW1lKSA6ICcnO1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChOQU1FU1BBQ0UsIFwiLVwiKS5jb25jYXQoY29tcG9uZW50TmFtZSkuY29uY2F0KGRlc2NlbmRlbnQpLmNvbmNhdChtb2RpZmllcik7XG4gIH07XG59OyIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCB7IHVuaXEgfSBmcm9tIFwiLi4vdXRpbHMvdW5pcS5qc1wiO1xuXG5mdW5jdGlvbiBwcmVwYXJlVGVtcGxhdGVzKCAvLyBjYW4gbm90IHVzZSA9IHt9IGhlcmUsIHNpbmNlIHRoZSB0ZW1wbGF0ZSBjb3VsZCBoYXZlIGRpZmZlcmVudCBjb25zdHJhaW50c1xuZGVmYXVsdFRlbXBsYXRlcykge1xuICB2YXIgdGVtcGxhdGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgdmFyIGFsbEtleXMgPSB1bmlxKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoT2JqZWN0LmtleXMoZGVmYXVsdFRlbXBsYXRlcyB8fCB7fSkpLCBfdG9Db25zdW1hYmxlQXJyYXkoT2JqZWN0LmtleXModGVtcGxhdGVzKSkpKTtcbiAgcmV0dXJuIGFsbEtleXMucmVkdWNlKGZ1bmN0aW9uIChjb25maWcsIGtleSkge1xuICAgIHZhciBkZWZhdWx0VGVtcGxhdGUgPSBkZWZhdWx0VGVtcGxhdGVzID8gZGVmYXVsdFRlbXBsYXRlc1trZXldIDogdW5kZWZpbmVkO1xuICAgIHZhciBjdXN0b21UZW1wbGF0ZSA9IHRlbXBsYXRlc1trZXldO1xuICAgIHZhciBpc0N1c3RvbVRlbXBsYXRlID0gY3VzdG9tVGVtcGxhdGUgIT09IHVuZGVmaW5lZCAmJiBjdXN0b21UZW1wbGF0ZSAhPT0gZGVmYXVsdFRlbXBsYXRlO1xuICAgIGNvbmZpZy50ZW1wbGF0ZXNba2V5XSA9IGlzQ3VzdG9tVGVtcGxhdGUgPyBjdXN0b21UZW1wbGF0ZSAvLyB0eXBlc2NyaXB0IGRvZXNuJ3QgcmVjb2duaXplIHRoYXQgdGhpcyBjb25kaXRpb24gYXNzZXJ0cyBjdXN0b21UZW1wbGF0ZSBpcyBkZWZpbmVkXG4gICAgOiBkZWZhdWx0VGVtcGxhdGU7XG4gICAgY29uZmlnLnVzZUN1c3RvbUNvbXBpbGVPcHRpb25zW2tleV0gPSBpc0N1c3RvbVRlbXBsYXRlO1xuICAgIHJldHVybiBjb25maWc7XG4gIH0sIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgdGVtcGxhdGVzOiB7fSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgdXNlQ3VzdG9tQ29tcGlsZU9wdGlvbnM6IHt9XG4gIH0pO1xufVxuLyoqXG4gKiBQcmVwYXJlcyBhbiBvYmplY3QgdG8gYmUgcGFzc2VkIHRvIHRoZSBUZW1wbGF0ZSB3aWRnZXRcbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlVGVtcGxhdGVQcm9wcyhfcmVmKSB7XG4gIHZhciBkZWZhdWx0VGVtcGxhdGVzID0gX3JlZi5kZWZhdWx0VGVtcGxhdGVzLFxuICAgICAgdGVtcGxhdGVzID0gX3JlZi50ZW1wbGF0ZXMsXG4gICAgICB0ZW1wbGF0ZXNDb25maWcgPSBfcmVmLnRlbXBsYXRlc0NvbmZpZztcbiAgdmFyIHByZXBhcmVkVGVtcGxhdGVzID0gcHJlcGFyZVRlbXBsYXRlcyhkZWZhdWx0VGVtcGxhdGVzLCB0ZW1wbGF0ZXMpO1xuICByZXR1cm4gX29iamVjdFNwcmVhZCh7XG4gICAgdGVtcGxhdGVzQ29uZmlnOiB0ZW1wbGF0ZXNDb25maWdcbiAgfSwgcHJlcGFyZWRUZW1wbGF0ZXMpO1xufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCBob2dhbiBmcm9tICdob2dhbi5qcyc7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnaHRtL3ByZWFjdCc7XG5pbXBvcnQgeyBIaWdobGlnaHQsIFJldmVyc2VIaWdobGlnaHQsIFJldmVyc2VTbmlwcGV0LCBTbmlwcGV0IH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvY29tcG9uZW50cy9pbmRleC5qc1wiO1xuXG4vLyBXZSBhZGQgYWxsIG91ciB0ZW1wbGF0ZSBoZWxwZXIgbWV0aG9kcyB0byB0aGUgdGVtcGxhdGUgYXMgbGFtYmRhcy4gTm90ZVxuLy8gdGhhdCBsYW1iZGFzIGluIE11c3RhY2hlIGFyZSBzdXBwb3NlZCB0byBhY2NlcHQgYSBzZWNvbmQgYXJndW1lbnQgb2Zcbi8vIGByZW5kZXJgIHRvIGdldCB0aGUgcmVuZGVyZWQgdmFsdWUsIG5vdCB0aGUgbGl0ZXJhbCBge3t2YWx1ZX19YC4gQnV0XG4vLyB0aGlzIGlzIGN1cnJlbnRseSBicm9rZW4gKHNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdpdHRlci9ob2dhbi5qcy9pc3N1ZXMvMjIyKS5cbmZ1bmN0aW9uIHRyYW5zZm9ybUhlbHBlcnNUb0hvZ2FuKCkge1xuICB2YXIgaGVscGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBjb21waWxlT3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkO1xuICByZXR1cm4gT2JqZWN0LmtleXMoaGVscGVycykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGhlbHBlcktleSkge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFjYyksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGhlbHBlcktleSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gaG9nYW4uY29tcGlsZSh2YWx1ZSwgY29tcGlsZU9wdGlvbnMpLnJlbmRlcihfdGhpcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGhlbHBlcnNbaGVscGVyS2V5XS5jYWxsKGRhdGEsIHRleHQsIHJlbmRlcik7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfSwge30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVGVtcGxhdGUoX3JlZikge1xuICB2YXIgdGVtcGxhdGVzID0gX3JlZi50ZW1wbGF0ZXMsXG4gICAgICB0ZW1wbGF0ZUtleSA9IF9yZWYudGVtcGxhdGVLZXksXG4gICAgICBjb21waWxlT3B0aW9ucyA9IF9yZWYuY29tcGlsZU9wdGlvbnMsXG4gICAgICBoZWxwZXJzID0gX3JlZi5oZWxwZXJzLFxuICAgICAgZGF0YSA9IF9yZWYuZGF0YSxcbiAgICAgIGJpbmRFdmVudCA9IF9yZWYuYmluZEV2ZW50LFxuICAgICAgc2VuZEV2ZW50ID0gX3JlZi5zZW5kRXZlbnQ7XG4gIHZhciB0ZW1wbGF0ZSA9IHRlbXBsYXRlc1t0ZW1wbGF0ZUtleV07XG5cbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHRlbXBsYXRlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGVtcGxhdGUgbXVzdCBiZSAnc3RyaW5nJyBvciAnZnVuY3Rpb24nLCB3YXMgJ1wiLmNvbmNhdChfdHlwZW9mKHRlbXBsYXRlKSwgXCInIChrZXk6IFwiKS5jb25jYXQodGVtcGxhdGVLZXksIFwiKVwiKSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gQE1BSk9SIG5vIGxvbmdlciBwYXNzIGJpbmRFdmVudCB3aGVuIHN0cmluZyB0ZW1wbGF0ZXMgYXJlIHJlbW92ZWRcbiAgICB2YXIgcGFyYW1zID0gYmluZEV2ZW50IHx8IHt9O1xuICAgIHBhcmFtcy5odG1sID0gaHRtbDtcbiAgICBwYXJhbXMuc2VuZEV2ZW50ID0gc2VuZEV2ZW50O1xuICAgIHBhcmFtcy5jb21wb25lbnRzID0ge1xuICAgICAgSGlnaGxpZ2h0OiBIaWdobGlnaHQsXG4gICAgICBSZXZlcnNlSGlnaGxpZ2h0OiBSZXZlcnNlSGlnaGxpZ2h0LFxuICAgICAgU25pcHBldDogU25pcHBldCxcbiAgICAgIFJldmVyc2VTbmlwcGV0OiBSZXZlcnNlU25pcHBldFxuICAgIH07XG4gICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEsIHBhcmFtcyk7XG4gIH1cblxuICB2YXIgdHJhbnNmb3JtZWRIZWxwZXJzID0gdHJhbnNmb3JtSGVscGVyc1RvSG9nYW4oaGVscGVycywgY29tcGlsZU9wdGlvbnMsIGRhdGEpO1xuICByZXR1cm4gaG9nYW4uY29tcGlsZSh0ZW1wbGF0ZSwgY29tcGlsZU9wdGlvbnMpLnJlbmRlcihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwge1xuICAgIGhlbHBlcnM6IHRyYW5zZm9ybWVkSGVscGVyc1xuICB9KSkucmVwbGFjZSgvWyBcXG5cXHJcXHRcXGZcXHhBMF0rL2csIGZ1bmN0aW9uIChzcGFjZXMpIHtcbiAgICByZXR1cm4gc3BhY2VzLnJlcGxhY2UoLyhefFxceEEwKylbXlxceEEwXSsvZywgJyQxICcpO1xuICB9KS50cmltKCk7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemUodGV4dCkge1xuICByZXR1cm4gdGV4dC50b1N0cmluZygpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC50b1N0cmluZygpLnNsaWNlKDEpO1xufSIsImZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tIFwiLi9jYXBpdGFsaXplLmpzXCI7XG5pbXBvcnQgeyB3YXJuaW5nIH0gZnJvbSBcIi4vbG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBrZXlzIH0gZnJvbSBcIi4vdHlwZWRPYmplY3QuanNcIjsgLy8gU29tZSBjb25uZWN0b3JzIGFyZSByZXNwb25zaWJsZSBmb3IgbXVsdGlwbGUgd2lkZ2V0cyBzbyB3ZSBuZWVkXG4vLyB0byBtYXAgdGhlbS5cblxuZnVuY3Rpb24gZ2V0V2lkZ2V0TmFtZXMoY29ubmVjdG9yTmFtZSkge1xuICBzd2l0Y2ggKGNvbm5lY3Rvck5hbWUpIHtcbiAgICBjYXNlICdyYW5nZSc6XG4gICAgICByZXR1cm4gW107XG5cbiAgICBjYXNlICdtZW51JzpcbiAgICAgIHJldHVybiBbJ21lbnUnLCAnbWVudVNlbGVjdCddO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbY29ubmVjdG9yTmFtZV07XG4gIH1cbn1cblxudmFyIHN0YXRlVG9XaWRnZXRzTWFwID0ge1xuICBxdWVyeToge1xuICAgIGNvbm5lY3RvcnM6IFsnY29ubmVjdFNlYXJjaEJveCddLFxuICAgIHdpZGdldHM6IFsnYWlzLnNlYXJjaEJveCcsICdhaXMuYXV0b2NvbXBsZXRlJywgJ2Fpcy52b2ljZVNlYXJjaCddXG4gIH0sXG4gIHJlZmluZW1lbnRMaXN0OiB7XG4gICAgY29ubmVjdG9yczogWydjb25uZWN0UmVmaW5lbWVudExpc3QnXSxcbiAgICB3aWRnZXRzOiBbJ2Fpcy5yZWZpbmVtZW50TGlzdCddXG4gIH0sXG4gIG1lbnU6IHtcbiAgICBjb25uZWN0b3JzOiBbJ2Nvbm5lY3RNZW51J10sXG4gICAgd2lkZ2V0czogWydhaXMubWVudSddXG4gIH0sXG4gIGhpZXJhcmNoaWNhbE1lbnU6IHtcbiAgICBjb25uZWN0b3JzOiBbJ2Nvbm5lY3RIaWVyYXJjaGljYWxNZW51J10sXG4gICAgd2lkZ2V0czogWydhaXMuaGllcmFyY2hpY2FsTWVudSddXG4gIH0sXG4gIG51bWVyaWNNZW51OiB7XG4gICAgY29ubmVjdG9yczogWydjb25uZWN0TnVtZXJpY01lbnUnXSxcbiAgICB3aWRnZXRzOiBbJ2Fpcy5udW1lcmljTWVudSddXG4gIH0sXG4gIHJhdGluZ01lbnU6IHtcbiAgICBjb25uZWN0b3JzOiBbJ2Nvbm5lY3RSYXRpbmdNZW51J10sXG4gICAgd2lkZ2V0czogWydhaXMucmF0aW5nTWVudSddXG4gIH0sXG4gIHJhbmdlOiB7XG4gICAgY29ubmVjdG9yczogWydjb25uZWN0UmFuZ2UnXSxcbiAgICB3aWRnZXRzOiBbJ2Fpcy5yYW5nZUlucHV0JywgJ2Fpcy5yYW5nZVNsaWRlcicsICdhaXMucmFuZ2UnXVxuICB9LFxuICB0b2dnbGU6IHtcbiAgICBjb25uZWN0b3JzOiBbJ2Nvbm5lY3RUb2dnbGVSZWZpbmVtZW50J10sXG4gICAgd2lkZ2V0czogWydhaXMudG9nZ2xlUmVmaW5lbWVudCddXG4gIH0sXG4gIGdlb1NlYXJjaDoge1xuICAgIGNvbm5lY3RvcnM6IFsnY29ubmVjdEdlb1NlYXJjaCddLFxuICAgIHdpZGdldHM6IFsnYWlzLmdlb1NlYXJjaCddXG4gIH0sXG4gIHNvcnRCeToge1xuICAgIGNvbm5lY3RvcnM6IFsnY29ubmVjdFNvcnRCeSddLFxuICAgIHdpZGdldHM6IFsnYWlzLnNvcnRCeSddXG4gIH0sXG4gIHBhZ2U6IHtcbiAgICBjb25uZWN0b3JzOiBbJ2Nvbm5lY3RQYWdpbmF0aW9uJ10sXG4gICAgd2lkZ2V0czogWydhaXMucGFnaW5hdGlvbicsICdhaXMuaW5maW5pdGVIaXRzJ11cbiAgfSxcbiAgaGl0c1BlclBhZ2U6IHtcbiAgICBjb25uZWN0b3JzOiBbJ2Nvbm5lY3RIaXRzUGVyUGFnZSddLFxuICAgIHdpZGdldHM6IFsnYWlzLmhpdHNQZXJQYWdlJ11cbiAgfSxcbiAgY29uZmlndXJlOiB7XG4gICAgY29ubmVjdG9yczogWydjb25uZWN0Q29uZmlndXJlJ10sXG4gICAgd2lkZ2V0czogWydhaXMuY29uZmlndXJlJ11cbiAgfSxcbiAgcGxhY2VzOiB7XG4gICAgY29ubmVjdG9yczogW10sXG4gICAgd2lkZ2V0czogWydhaXMucGxhY2VzJ11cbiAgfVxufTtcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0luZGV4VWlTdGF0ZShfcmVmKSB7XG4gIHZhciBpbmRleCA9IF9yZWYuaW5kZXgsXG4gICAgICBpbmRleFVpU3RhdGUgPSBfcmVmLmluZGV4VWlTdGF0ZTtcbiAgdmFyIG1vdW50ZWRXaWRnZXRzID0gaW5kZXguZ2V0V2lkZ2V0cygpLm1hcChmdW5jdGlvbiAod2lkZ2V0KSB7XG4gICAgcmV0dXJuIHdpZGdldC4kJHR5cGU7XG4gIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgdmFyIG1pc3NpbmdXaWRnZXRzID0ga2V5cyhpbmRleFVpU3RhdGUpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwYXJhbWV0ZXIpIHtcbiAgICB2YXIgd2lkZ2V0VWlTdGF0ZSA9IHN0YXRlVG9XaWRnZXRzTWFwW3BhcmFtZXRlcl07XG5cbiAgICBpZiAoIXdpZGdldFVpU3RhdGUpIHtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfVxuXG4gICAgdmFyIHJlcXVpcmVkV2lkZ2V0cyA9IHdpZGdldFVpU3RhdGUud2lkZ2V0cztcblxuICAgIGlmIChyZXF1aXJlZFdpZGdldHMgJiYgIXJlcXVpcmVkV2lkZ2V0cy5zb21lKGZ1bmN0aW9uIChyZXF1aXJlZFdpZGdldCkge1xuICAgICAgcmV0dXJuIG1vdW50ZWRXaWRnZXRzLmluY2x1ZGVzKHJlcXVpcmVkV2lkZ2V0KTtcbiAgICB9KSkge1xuICAgICAgYWNjLnB1c2goW3BhcmFtZXRlciwge1xuICAgICAgICBjb25uZWN0b3JzOiB3aWRnZXRVaVN0YXRlLmNvbm5lY3RvcnMsXG4gICAgICAgIHdpZGdldHM6IHdpZGdldFVpU3RhdGUud2lkZ2V0cy5tYXAoZnVuY3Rpb24gKHdpZGdldElkZW50aWZpZXIpIHtcbiAgICAgICAgICByZXR1cm4gd2lkZ2V0SWRlbnRpZmllci5zcGxpdCgnYWlzLicpWzFdO1xuICAgICAgICB9KVxuICAgICAgfV0pO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIFtdKTtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyB3YXJuaW5nKG1pc3NpbmdXaWRnZXRzLmxlbmd0aCA9PT0gMCwgXCJUaGUgVUkgc3RhdGUgZm9yIHRoZSBpbmRleCBcXFwiXCIuY29uY2F0KGluZGV4LmdldEluZGV4SWQoKSwgXCJcXFwiIGlzIG5vdCBjb25zaXN0ZW50IHdpdGggdGhlIHdpZGdldHMgbW91bnRlZC5cXG5cXG5UaGlzIGNhbiBoYXBwZW4gd2hlbiB0aGUgVUkgc3RhdGUgaXMgc3BlY2lmaWVkIHZpYSBgaW5pdGlhbFVpU3RhdGVgLCBgcm91dGluZ2Agb3IgYHNldFVpU3RhdGVgIGJ1dCB0aGF0IHRoZSB3aWRnZXRzIHJlc3BvbnNpYmxlIGZvciB0aGlzIHN0YXRlIHdlcmUgbm90IGFkZGVkLiBUaGlzIHJlc3VsdHMgaW4gdGhvc2UgcXVlcnkgcGFyYW1ldGVycyBub3QgYmVpbmcgc2VudCB0byB0aGUgQVBJLlxcblxcblRvIGZ1bGx5IHJlZmxlY3QgdGhlIHN0YXRlLCBzb21lIHdpZGdldHMgbmVlZCB0byBiZSBhZGRlZCB0byB0aGUgaW5kZXggXFxcIlwiKS5jb25jYXQoaW5kZXguZ2V0SW5kZXhJZCgpLCBcIlxcXCI6XFxuXFxuXCIpLmNvbmNhdChtaXNzaW5nV2lkZ2V0cy5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgdmFyIF9yZWY0O1xuXG4gICAgdmFyIF9yZWYzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjIsIDIpLFxuICAgICAgICBzdGF0ZVBhcmFtZXRlciA9IF9yZWYzWzBdLFxuICAgICAgICB3aWRnZXRzID0gX3JlZjNbMV0ud2lkZ2V0cztcblxuICAgIHJldHVybiBcIi0gYFwiLmNvbmNhdChzdGF0ZVBhcmFtZXRlciwgXCJgIG5lZWRzIG9uZSBvZiB0aGVzZSB3aWRnZXRzOiBcIikuY29uY2F0KChfcmVmNCA9IFtdKS5jb25jYXQuYXBwbHkoX3JlZjQsIF90b0NvbnN1bWFibGVBcnJheSh3aWRnZXRzLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV0dXJuIGdldFdpZGdldE5hbWVzKG5hbWUpO1xuICAgIH0pKSkubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KG5hbWUsIFwiXFxcIlwiKTtcbiAgICB9KS5qb2luKCcsICcpKTtcbiAgfSkuam9pbignXFxuJyksIFwiXFxuXFxuSWYgeW91IGRvIG5vdCB3aXNoIHRvIGRpc3BsYXkgd2lkZ2V0cyBidXQgc3RpbGwgd2FudCB0byBzdXBwb3J0IHRoZWlyIHNlYXJjaCBwYXJhbWV0ZXJzLCB5b3UgY2FuIG1vdW50IFxcXCJ2aXJ0dWFsIHdpZGdldHNcXFwiIHRoYXQgZG9uJ3QgcmVuZGVyIGFueXRoaW5nOlxcblxcbmBgYFxcblwiKS5jb25jYXQobWlzc2luZ1dpZGdldHMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmNSkge1xuICAgIHZhciBfcmVmNiA9IF9zbGljZWRUb0FycmF5KF9yZWY1LCAyKSxcbiAgICAgICAgX3N0YXRlUGFyYW1ldGVyID0gX3JlZjZbMF0sXG4gICAgICAgIGNvbm5lY3RvcnMgPSBfcmVmNlsxXS5jb25uZWN0b3JzO1xuXG4gICAgcmV0dXJuIGNvbm5lY3RvcnMubGVuZ3RoID4gMDtcbiAgfSkubWFwKGZ1bmN0aW9uIChfcmVmNykge1xuICAgIHZhciBfcmVmOCA9IF9zbGljZWRUb0FycmF5KF9yZWY3LCAyKSxcbiAgICAgICAgX3N0YXRlUGFyYW1ldGVyID0gX3JlZjhbMF0sXG4gICAgICAgIF9yZWY4JCA9IF9yZWY4WzFdLFxuICAgICAgICBjb25uZWN0b3JzID0gX3JlZjgkLmNvbm5lY3RvcnMsXG4gICAgICAgIHdpZGdldHMgPSBfcmVmOCQud2lkZ2V0cztcblxuICAgIHZhciBjYXBpdGFsaXplZFdpZGdldCA9IGNhcGl0YWxpemUod2lkZ2V0c1swXSk7XG4gICAgdmFyIGNvbm5lY3Rvck5hbWUgPSBjb25uZWN0b3JzWzBdO1xuICAgIHJldHVybiBcImNvbnN0IHZpcnR1YWxcIi5jb25jYXQoY2FwaXRhbGl6ZWRXaWRnZXQsIFwiID0gXCIpLmNvbmNhdChjb25uZWN0b3JOYW1lLCBcIigoKSA9PiBudWxsKTtcIik7XG4gIH0pLmpvaW4oJ1xcbicpLCBcIlxcblxcbnNlYXJjaC5hZGRXaWRnZXRzKFtcXG4gIFwiKS5jb25jYXQobWlzc2luZ1dpZGdldHMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmOSkge1xuICAgIHZhciBfcmVmMTAgPSBfc2xpY2VkVG9BcnJheShfcmVmOSwgMiksXG4gICAgICAgIF9zdGF0ZVBhcmFtZXRlciA9IF9yZWYxMFswXSxcbiAgICAgICAgY29ubmVjdG9ycyA9IF9yZWYxMFsxXS5jb25uZWN0b3JzO1xuXG4gICAgcmV0dXJuIGNvbm5lY3RvcnMubGVuZ3RoID4gMDtcbiAgfSkubWFwKGZ1bmN0aW9uIChfcmVmMTEpIHtcbiAgICB2YXIgX3JlZjEyID0gX3NsaWNlZFRvQXJyYXkoX3JlZjExLCAyKSxcbiAgICAgICAgX3N0YXRlUGFyYW1ldGVyID0gX3JlZjEyWzBdLFxuICAgICAgICB3aWRnZXRzID0gX3JlZjEyWzFdLndpZGdldHM7XG5cbiAgICB2YXIgY2FwaXRhbGl6ZWRXaWRnZXQgPSBjYXBpdGFsaXplKHdpZGdldHNbMF0pO1xuICAgIHJldHVybiBcInZpcnR1YWxcIi5jb25jYXQoY2FwaXRhbGl6ZWRXaWRnZXQsIFwiKHsgLyogLi4uICovIH0pXCIpO1xuICB9KS5qb2luKCcsXFxuICAnKSwgXCJcXG5dKTtcXG5gYGBcXG5cXG5JZiB5b3UncmUgdXNpbmcgY3VzdG9tIHdpZGdldHMgdGhhdCBkbyBzZXQgdGhlc2UgcXVlcnkgcGFyYW1ldGVycywgd2UgcmVjb21tZW5kIHVzaW5nIGNvbm5lY3RvcnMgaW5zdGVhZC5cXG5cXG5TZWUgaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL2d1aWRlcy9idWlsZGluZy1zZWFyY2gtdWkvd2lkZ2V0cy9jdXN0b21pemUtYW4tZXhpc3Rpbmctd2lkZ2V0L2pzLyNjdXN0b21pemUtdGhlLWNvbXBsZXRlLXVpLW9mLXRoZS13aWRnZXRzXCIpKSA6IHZvaWQgMDtcbn0iLCJpbXBvcnQgeyBnZXRPYmplY3RUeXBlIH0gZnJvbSBcIi4vZ2V0T2JqZWN0VHlwZS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmVuZGVyaW5nKHJlbmRlcmluZywgdXNhZ2UpIHtcbiAgaWYgKHJlbmRlcmluZyA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiByZW5kZXJpbmcgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVuZGVyIGZ1bmN0aW9uIGlzIG5vdCB2YWxpZCAocmVjZWl2ZWQgdHlwZSBcIi5jb25jYXQoZ2V0T2JqZWN0VHlwZShyZW5kZXJpbmcpLCBcIikuXFxuXFxuXCIpLmNvbmNhdCh1c2FnZSkpO1xuICB9XG59IiwiaW1wb3J0IHsgVEFHX1JFUExBQ0VNRU5UIH0gZnJvbSBcIi4vZXNjYXBlLWhpZ2hsaWdodC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdEhpZ2hsaWdodGVkUGFydHMocGFydHMpIHtcbiAgdmFyIGhpZ2hsaWdodFByZVRhZyA9IFRBR19SRVBMQUNFTUVOVC5oaWdobGlnaHRQcmVUYWcsXG4gICAgICBoaWdobGlnaHRQb3N0VGFnID0gVEFHX1JFUExBQ0VNRU5ULmhpZ2hsaWdodFBvc3RUYWc7XG4gIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24gKHBhcnQpIHtcbiAgICByZXR1cm4gcGFydC5pc0hpZ2hsaWdodGVkID8gaGlnaGxpZ2h0UHJlVGFnICsgcGFydC52YWx1ZSArIGhpZ2hsaWdodFBvc3RUYWcgOiBwYXJ0LnZhbHVlO1xuICB9KS5qb2luKCcnKTtcbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmltcG9ydCB7IHNlcmlhbGl6ZVBheWxvYWQgfSBmcm9tIFwiLi9zZXJpYWxpemVyLmpzXCI7XG5cbmZ1bmN0aW9uIGNodW5rKGFycikge1xuICB2YXIgY2h1bmtTaXplID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAyMDtcbiAgdmFyIGNodW5rcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5jZWlsKGFyci5sZW5ndGggLyBjaHVua1NpemUpOyBpKyspIHtcbiAgICBjaHVua3MucHVzaChhcnIuc2xpY2UoaSAqIGNodW5rU2l6ZSwgKGkgKyAxKSAqIGNodW5rU2l6ZSkpO1xuICB9XG5cbiAgcmV0dXJuIGNodW5rcztcbn1cblxudmFyIGJ1aWxkUGF5bG9hZHMgPSBmdW5jdGlvbiBidWlsZFBheWxvYWRzKF9yZWYpIHtcbiAgdmFyIGluZGV4ID0gX3JlZi5pbmRleCxcbiAgICAgIHdpZGdldFR5cGUgPSBfcmVmLndpZGdldFR5cGUsXG4gICAgICBtZXRob2ROYW1lID0gX3JlZi5tZXRob2ROYW1lLFxuICAgICAgYXJncyA9IF9yZWYuYXJncyxcbiAgICAgIGlzU2VhcmNoU3RhbGxlZCA9IF9yZWYuaXNTZWFyY2hTdGFsbGVkO1xuXG4gIC8vIHdoZW4gdGhlcmUncyBvbmx5IG9uZSBhcmd1bWVudCwgdGhhdCBtZWFucyBpdCdzIGN1c3RvbVxuICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgX3R5cGVvZihhcmdzWzBdKSA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gW2FyZ3NbMF1dO1xuICB9XG5cbiAgdmFyIGV2ZW50VHlwZSA9IGFyZ3NbMF07XG4gIHZhciBoaXRzID0gYXJnc1sxXTtcbiAgdmFyIGV2ZW50TmFtZSA9IGFyZ3NbMl07XG5cbiAgaWYgKCFoaXRzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwYXNzIGhpdCBvciBoaXRzIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgbGlrZTpcXG4gIFwiLmNvbmNhdChtZXRob2ROYW1lLCBcIihldmVudFR5cGUsIGhpdCk7XFxuICBcIikpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgaWYgKChldmVudFR5cGUgPT09ICdjbGljaycgfHwgZXZlbnRUeXBlID09PSAnY29udmVyc2lvbicpICYmICFldmVudE5hbWUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBuZWVkIHRvIHBhc3MgZXZlbnROYW1lIGFzIHRoZSB0aGlyZCBhcmd1bWVudCBmb3IgJ2NsaWNrJyBvciAnY29udmVyc2lvbicgZXZlbnRzIGxpa2U6XFxuICBcIi5jb25jYXQobWV0aG9kTmFtZSwgXCIoJ2NsaWNrJywgaGl0LCAnUHJvZHVjdCBQdXJjaGFzZWQnKTtcXG5cXG4gIFRvIGxlYXJuIG1vcmUgYWJvdXQgZXZlbnQgbmFtaW5nOiBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvZ3VpZGVzL2dldHRpbmctaW5zaWdodHMtYW5kLWFuYWx5dGljcy9zZWFyY2gtYW5hbHl0aWNzL2NsaWNrLXRocm91Z2gtYW5kLWNvbnZlcnNpb25zL2luLWRlcHRoL2NsaWNrcy1jb252ZXJzaW9ucy1iZXN0LXByYWN0aWNlcy9cXG4gIFwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICB2YXIgaGl0c0FycmF5ID0gQXJyYXkuaXNBcnJheShoaXRzKSA/IHJlbW92ZUVzY2FwZWRGcm9tSGl0cyhoaXRzKSA6IFtoaXRzXTtcblxuICBpZiAoaGl0c0FycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHZhciBxdWVyeUlEID0gaGl0c0FycmF5WzBdLl9fcXVlcnlJRDtcbiAgdmFyIGhpdHNDaHVua3MgPSBjaHVuayhoaXRzQXJyYXkpO1xuICB2YXIgb2JqZWN0SURzQnlDaHVuayA9IGhpdHNDaHVua3MubWFwKGZ1bmN0aW9uIChiYXRjaCkge1xuICAgIHJldHVybiBiYXRjaC5tYXAoZnVuY3Rpb24gKGhpdCkge1xuICAgICAgcmV0dXJuIGhpdC5vYmplY3RJRDtcbiAgICB9KTtcbiAgfSk7XG4gIHZhciBwb3NpdGlvbnNCeUNodW5rID0gaGl0c0NodW5rcy5tYXAoZnVuY3Rpb24gKGJhdGNoKSB7XG4gICAgcmV0dXJuIGJhdGNoLm1hcChmdW5jdGlvbiAoaGl0KSB7XG4gICAgICByZXR1cm4gaGl0Ll9fcG9zaXRpb247XG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmIChldmVudFR5cGUgPT09ICd2aWV3Jykge1xuICAgIGlmIChpc1NlYXJjaFN0YWxsZWQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGl0c0NodW5rcy5tYXAoZnVuY3Rpb24gKGJhdGNoLCBpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbnNpZ2h0c01ldGhvZDogJ3ZpZXdlZE9iamVjdElEcycsXG4gICAgICAgIHdpZGdldFR5cGU6IHdpZGdldFR5cGUsXG4gICAgICAgIGV2ZW50VHlwZTogZXZlbnRUeXBlLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgZXZlbnROYW1lOiBldmVudE5hbWUgfHwgJ0hpdHMgVmlld2VkJyxcbiAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgb2JqZWN0SURzOiBvYmplY3RJRHNCeUNodW5rW2ldXG4gICAgICAgIH0sXG4gICAgICAgIGhpdHM6IGJhdGNoXG4gICAgICB9O1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gJ2NsaWNrJykge1xuICAgIHJldHVybiBoaXRzQ2h1bmtzLm1hcChmdW5jdGlvbiAoYmF0Y2gsIGkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluc2lnaHRzTWV0aG9kOiAnY2xpY2tlZE9iamVjdElEc0FmdGVyU2VhcmNoJyxcbiAgICAgICAgd2lkZ2V0VHlwZTogd2lkZ2V0VHlwZSxcbiAgICAgICAgZXZlbnRUeXBlOiBldmVudFR5cGUsXG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICBldmVudE5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgcXVlcnlJRDogcXVlcnlJRCxcbiAgICAgICAgICBvYmplY3RJRHM6IG9iamVjdElEc0J5Q2h1bmtbaV0sXG4gICAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnNCeUNodW5rW2ldXG4gICAgICAgIH0sXG4gICAgICAgIGhpdHM6IGJhdGNoXG4gICAgICB9O1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gJ2NvbnZlcnNpb24nKSB7XG4gICAgcmV0dXJuIGhpdHNDaHVua3MubWFwKGZ1bmN0aW9uIChiYXRjaCwgaSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5zaWdodHNNZXRob2Q6ICdjb252ZXJ0ZWRPYmplY3RJRHNBZnRlclNlYXJjaCcsXG4gICAgICAgIHdpZGdldFR5cGU6IHdpZGdldFR5cGUsXG4gICAgICAgIGV2ZW50VHlwZTogZXZlbnRUeXBlLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgZXZlbnROYW1lOiBldmVudE5hbWUsXG4gICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgIHF1ZXJ5SUQ6IHF1ZXJ5SUQsXG4gICAgICAgICAgb2JqZWN0SURzOiBvYmplY3RJRHNCeUNodW5rW2ldXG4gICAgICAgIH0sXG4gICAgICAgIGhpdHM6IGJhdGNoXG4gICAgICB9O1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZXZlbnRUeXBlKFxcXCJcIi5jb25jYXQoZXZlbnRUeXBlLCBcIlxcXCIpIGlzIG5vdCBzdXBwb3J0ZWQuXFxuICAgIElmIHlvdSB3YW50IHRvIHNlbmQgYSBjdXN0b20gcGF5bG9hZCwgeW91IGNhbiBwYXNzIG9uZSBvYmplY3Q6IFwiKS5jb25jYXQobWV0aG9kTmFtZSwgXCIoY3VzdG9tUGF5bG9hZCk7XFxuICAgIFwiKSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5mdW5jdGlvbiByZW1vdmVFc2NhcGVkRnJvbUhpdHMoaGl0cykge1xuICAvLyByZW1vdmUgYGhpdHMuX19lc2NhcGVkYCB3aXRob3V0IG11dGF0aW5nXG4gIHJldHVybiBoaXRzLnNsaWNlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZW5kRXZlbnRGb3JIaXRzKF9yZWYyKSB7XG4gIHZhciBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSBfcmVmMi5pbnN0YW50U2VhcmNoSW5zdGFuY2UsXG4gICAgICBpbmRleCA9IF9yZWYyLmluZGV4LFxuICAgICAgd2lkZ2V0VHlwZSA9IF9yZWYyLndpZGdldFR5cGU7XG5cbiAgdmFyIHNlbmRFdmVudEZvckhpdHMgPSBmdW5jdGlvbiBzZW5kRXZlbnRGb3JIaXRzKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgcGF5bG9hZHMgPSBidWlsZFBheWxvYWRzKHtcbiAgICAgIHdpZGdldFR5cGU6IHdpZGdldFR5cGUsXG4gICAgICBpbmRleDogaW5kZXgsXG4gICAgICBtZXRob2ROYW1lOiAnc2VuZEV2ZW50JyxcbiAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICBpc1NlYXJjaFN0YWxsZWQ6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS5zdGF0dXMgPT09ICdzdGFsbGVkJ1xuICAgIH0pO1xuICAgIHBheWxvYWRzLmZvckVhY2goZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBpbnN0YW50U2VhcmNoSW5zdGFuY2Uuc2VuZEV2ZW50VG9JbnNpZ2h0cyhwYXlsb2FkKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gc2VuZEV2ZW50Rm9ySGl0cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCaW5kRXZlbnRGb3JIaXRzKF9yZWYzKSB7XG4gIHZhciBpbmRleCA9IF9yZWYzLmluZGV4LFxuICAgICAgd2lkZ2V0VHlwZSA9IF9yZWYzLndpZGdldFR5cGU7XG5cbiAgdmFyIGJpbmRFdmVudEZvckhpdHMgPSBmdW5jdGlvbiBiaW5kRXZlbnRGb3JIaXRzKCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHZhciBwYXlsb2FkcyA9IGJ1aWxkUGF5bG9hZHMoe1xuICAgICAgd2lkZ2V0VHlwZTogd2lkZ2V0VHlwZSxcbiAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgIG1ldGhvZE5hbWU6ICdiaW5kRXZlbnQnLFxuICAgICAgYXJnczogYXJncyxcbiAgICAgIGlzU2VhcmNoU3RhbGxlZDogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gcGF5bG9hZHMubGVuZ3RoID8gXCJkYXRhLWluc2lnaHRzLWV2ZW50PVwiLmNvbmNhdChzZXJpYWxpemVQYXlsb2FkKHBheWxvYWRzKSkgOiAnJztcbiAgfTtcblxuICByZXR1cm4gYmluZEV2ZW50Rm9ySGl0cztcbn0iLCJ2YXIgbmV4dE1pY3JvVGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmVyKGNhbGxiYWNrKSB7XG4gIHZhciBwcm9ncmVzcyA9IG51bGw7XG4gIHZhciBjYW5jZWxsZWQgPSBmYWxzZTtcblxuICB2YXIgZm4gPSBmdW5jdGlvbiBmbigpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKHByb2dyZXNzICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcHJvZ3Jlc3MgPSBuZXh0TWljcm9UYXNrLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcHJvZ3Jlc3MgPSBudWxsO1xuXG4gICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgIGNhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgZm4ud2FpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocHJvZ3Jlc3MgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGRlZmVycmVkIGZ1bmN0aW9uIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcgYHdhaXQoKWAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvZ3Jlc3M7XG4gIH07XG5cbiAgZm4uY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChwcm9ncmVzcyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gIH07XG5cbiAgcmV0dXJuIGZuO1xufSIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEb2N1bWVudGF0aW9uTGluayhfcmVmKSB7XG4gIHZhciBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgX3JlZiRjb25uZWN0b3IgPSBfcmVmLmNvbm5lY3RvcixcbiAgICAgIGNvbm5lY3RvciA9IF9yZWYkY29ubmVjdG9yID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkY29ubmVjdG9yO1xuICByZXR1cm4gWydodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvYXBpLXJlZmVyZW5jZS93aWRnZXRzLycsIG5hbWUsICcvanMvJywgY29ubmVjdG9yID8gJyNjb25uZWN0b3InIDogJyddLmpvaW4oJycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgd2lkZ2V0cyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICB3aWRnZXRzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgdmFyIGxpbmtzID0gd2lkZ2V0cy5tYXAoZnVuY3Rpb24gKHdpZGdldCkge1xuICAgIHJldHVybiBjcmVhdGVEb2N1bWVudGF0aW9uTGluayh3aWRnZXQpO1xuICB9KS5qb2luKCcsICcpO1xuICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gW21lc3NhZ2UsIFwiU2VlIGRvY3VtZW50YXRpb246IFwiLmNvbmNhdChsaW5rcyldLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG5cXG4nKTtcbiAgfTtcbn0iLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgZXNjYXBlIH0gZnJvbSBcIi4vZXNjYXBlLWh0bWwuanNcIjtcbmltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tIFwiLi9pc1BsYWluT2JqZWN0LmpzXCI7XG5leHBvcnQgdmFyIFRBR19QTEFDRUhPTERFUiA9IHtcbiAgaGlnaGxpZ2h0UHJlVGFnOiAnX19haXMtaGlnaGxpZ2h0X18nLFxuICBoaWdobGlnaHRQb3N0VGFnOiAnX18vYWlzLWhpZ2hsaWdodF9fJ1xufTtcbmV4cG9ydCB2YXIgVEFHX1JFUExBQ0VNRU5UID0ge1xuICBoaWdobGlnaHRQcmVUYWc6ICc8bWFyaz4nLFxuICBoaWdobGlnaHRQb3N0VGFnOiAnPC9tYXJrPidcbn07XG5cbmZ1bmN0aW9uIHJlcGxhY2VUYWdzQW5kRXNjYXBlKHZhbHVlKSB7XG4gIHJldHVybiBlc2NhcGUodmFsdWUpLnJlcGxhY2UobmV3IFJlZ0V4cChUQUdfUExBQ0VIT0xERVIuaGlnaGxpZ2h0UHJlVGFnLCAnZycpLCBUQUdfUkVQTEFDRU1FTlQuaGlnaGxpZ2h0UHJlVGFnKS5yZXBsYWNlKG5ldyBSZWdFeHAoVEFHX1BMQUNFSE9MREVSLmhpZ2hsaWdodFBvc3RUYWcsICdnJyksIFRBR19SRVBMQUNFTUVOVC5oaWdobGlnaHRQb3N0VGFnKTtcbn1cblxuZnVuY3Rpb24gcmVjdXJzaXZlRXNjYXBlKGlucHV0KSB7XG4gIGlmIChpc1BsYWluT2JqZWN0KGlucHV0KSAmJiB0eXBlb2YgaW5wdXQudmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGlucHV0KS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhY2MpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBrZXksIHJlY3Vyc2l2ZUVzY2FwZShpbnB1dFtrZXldKSkpO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIHJldHVybiBpbnB1dC5tYXAocmVjdXJzaXZlRXNjYXBlKTtcbiAgfVxuXG4gIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlucHV0KSwge30sIHtcbiAgICB2YWx1ZTogcmVwbGFjZVRhZ3NBbmRFc2NhcGUoaW5wdXQudmFsdWUpXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlSGl0cyhoaXRzKSB7XG4gIGlmIChoaXRzLl9fZXNjYXBlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gV2UgZG9uJ3Qgb3ZlcnJpZGUgdGhlIHZhbHVlIG9uIGhpdCBiZWNhdXNlIGl0IHdpbGwgbXV0YXRlIHRoZSByYXcgcmVzdWx0c1xuICAgIC8vIGluc3RlYWQgd2UgbWFrZSBhIHNoYWxsb3cgY29weSBhbmQgd2UgYXNzaWduIHRoZSBlc2NhcGVkIHZhbHVlcyBvbiBpdC5cbiAgICBoaXRzID0gaGl0cy5tYXAoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBoaXQgPSBfZXh0ZW5kcyh7fSwgX3JlZik7XG5cbiAgICAgIGlmIChoaXQuX2hpZ2hsaWdodFJlc3VsdCkge1xuICAgICAgICBoaXQuX2hpZ2hsaWdodFJlc3VsdCA9IHJlY3Vyc2l2ZUVzY2FwZShoaXQuX2hpZ2hsaWdodFJlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoaXQuX3NuaXBwZXRSZXN1bHQpIHtcbiAgICAgICAgaGl0Ll9zbmlwcGV0UmVzdWx0ID0gcmVjdXJzaXZlRXNjYXBlKGhpdC5fc25pcHBldFJlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoaXQ7XG4gICAgfSk7XG4gICAgaGl0cy5fX2VzY2FwZWQgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGhpdHM7XG59XG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlRmFjZXRzKGZhY2V0SGl0cykge1xuICByZXR1cm4gZmFjZXRIaXRzLm1hcChmdW5jdGlvbiAoaCkge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGgpLCB7fSwge1xuICAgICAgaGlnaGxpZ2h0ZWQ6IHJlcGxhY2VUYWdzQW5kRXNjYXBlKGguaGlnaGxpZ2h0ZWQpXG4gICAgfSk7XG4gIH0pO1xufSIsIi8qKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyB0YWtlbiBmcm9tIExvZGFzaCBpbXBsZW1lbnRhdGlvbi5cbiAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi80LjE3LjExLW5wbS9lc2NhcGUuanNcbiAqL1xuLy8gVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxudmFyIGh0bWxFbnRpdGllcyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7J1xufTsgLy8gVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuXG5cbnZhciByZWdleFVuZXNjYXBlZEh0bWwgPSAvWyY8PlwiJ10vZztcbnZhciByZWdleEhhc1VuZXNjYXBlZEh0bWwgPSBSZWdFeHAocmVnZXhVbmVzY2FwZWRIdG1sLnNvdXJjZSk7XG4vKipcbiAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIFwiJlwiLCBcIjxcIiwgXCI+XCIsICdcIicsIGFuZCBcIidcIiBpbiBgc3RyaW5nYCB0byB0aGVpclxuICogY29ycmVzcG9uZGluZyBIVE1MIGVudGl0aWVzLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICYmIHJlZ2V4SGFzVW5lc2NhcGVkSHRtbC50ZXN0KHZhbHVlKSA/IHZhbHVlLnJlcGxhY2UocmVnZXhVbmVzY2FwZWRIdG1sLCBmdW5jdGlvbiAoY2hhcmFjdGVyKSB7XG4gICAgcmV0dXJuIGh0bWxFbnRpdGllc1tjaGFyYWN0ZXJdO1xuICB9KSA6IHZhbHVlO1xufVxuLyoqXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIHRha2VuIGZyb20gTG9kYXNoIGltcGxlbWVudGF0aW9uLlxuICogU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iLzQuMTcuMTEtbnBtL3VuZXNjYXBlLmpzXG4gKi9cbi8vIFVzZWQgdG8gbWFwIEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cblxudmFyIGh0bWxDaGFyYWN0ZXJzID0ge1xuICAnJmFtcDsnOiAnJicsXG4gICcmbHQ7JzogJzwnLFxuICAnJmd0Oyc6ICc+JyxcbiAgJyZxdW90Oyc6ICdcIicsXG4gICcmIzM5Oyc6IFwiJ1wiXG59OyAvLyBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy5cblxudmFyIHJlZ2V4RXNjYXBlZEh0bWwgPSAvJihhbXB8cXVvdHxsdHxndHwjMzkpOy9nO1xudmFyIHJlZ2V4SGFzRXNjYXBlZEh0bWwgPSBSZWdFeHAocmVnZXhFc2NhcGVkSHRtbC5zb3VyY2UpO1xuLyoqXG4gKiBDb252ZXJ0cyB0aGUgSFRNTCBlbnRpdGllcyBcIiZcIiwgXCI8XCIsIFwiPlwiLCAnXCInLCBhbmQgXCInXCIgaW4gYHN0cmluZ2AgdG8gdGhlaXJcbiAqIGNoYXJhY3RlcnMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZXNjYXBlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiByZWdleEhhc0VzY2FwZWRIdG1sLnRlc3QodmFsdWUpID8gdmFsdWUucmVwbGFjZShyZWdleEVzY2FwZWRIdG1sLCBmdW5jdGlvbiAoY2hhcmFjdGVyKSB7XG4gICAgcmV0dXJuIGh0bWxDaGFyYWN0ZXJzW2NoYXJhY3Rlcl07XG4gIH0pIDogdmFsdWU7XG59IiwiLy8gV2UgYXJlbid0IHVzaW5nIHRoZSBuYXRpdmUgYEFycmF5LnByb3RvdHlwZS5maW5kYCBiZWNhdXNlIHRoZSByZWZhY3RvciBhd2F5IGZyb20gTG9kYXNoIGlzIG5vdFxuLy8gcHVibGlzaGVkIGFzIGEgbWFqb3IgdmVyc2lvbi5cbi8vIFJlbHlpbmcgb24gdGhlIGBmaW5kYCBwb2x5ZmlsbCBvbiB1c2VyLWxhbmQsIHdoaWNoIGJlZm9yZSB3YXMgb25seSByZXF1aXJlZCBmb3IgbmljaGUgdXNlLWNhc2VzLFxuLy8gd2FzIGRlY2lkZWQgYXMgdG9vIHJpc2t5LlxuLy8gQE1BSk9SIFJlcGxhY2Ugd2l0aCB0aGUgbmF0aXZlIGBBcnJheS5wcm90b3R5cGUuZmluZGAgbWV0aG9kXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9maW5kXG5leHBvcnQgZnVuY3Rpb24gZmluZChpdGVtcywgcHJlZGljYXRlKSB7XG4gIHZhciB2YWx1ZTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWUgPSBpdGVtc1tpXTsgLy8gaW5saW5lZCBmb3IgcGVyZm9ybWFuY2U6IGlmIChDYWxsKHByZWRpY2F0ZSwgdGhpc0FyZywgW3ZhbHVlLCBpLCBsaXN0XSkpIHtcblxuICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGksIGl0ZW1zKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59IiwiLy8gV2UgYXJlbid0IHVzaW5nIHRoZSBuYXRpdmUgYEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXhgIGJlY2F1c2UgdGhlIHJlZmFjdG9yIGF3YXkgZnJvbSBMb2Rhc2ggaXMgbm90XG4vLyBwdWJsaXNoZWQgYXMgYSBtYWpvciB2ZXJzaW9uLlxuLy8gUmVseWluZyBvbiB0aGUgYGZpbmRJbmRleGAgcG9seWZpbGwgb24gdXNlci1sYW5kLCB3aGljaCBiZWZvcmUgd2FzIG9ubHkgcmVxdWlyZWQgZm9yIG5pY2hlIHVzZS1jYXNlcyxcbi8vIHdhcyBkZWNpZGVkIGFzIHRvbyByaXNreS5cbi8vIEBNQUpPUiBSZXBsYWNlIHdpdGggdGhlIG5hdGl2ZSBgQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleGAgbWV0aG9kXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9maW5kSW5kZXhcbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIGNvbXBhcmF0b3IpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY29tcGFyYXRvcihhcnJheVtpXSkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMTtcbn0iLCJpbXBvcnQgeyBpc0RvbUVsZW1lbnQgfSBmcm9tIFwiLi9pc0RvbUVsZW1lbnQuanNcIjtcbi8qKlxuICogUmV0dXJuIHRoZSBjb250YWluZXIuIElmIGl0J3MgYSBzdHJpbmcsIGl0IGlzIGNvbnNpZGVyZWQgYVxuICogY3NzIHNlbGVjdG9yIGFuZCByZXRyaWV2ZXMgdGhlIGZpcnN0IG1hdGNoaW5nIGVsZW1lbnQuIE90aGVyd2lzZVxuICogdGVzdCBpZiBpdCB2YWxpZGF0ZXMgdGhhdCBpdCdzIGEgY29ycmVjdCBET01FbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfEhUTUxFbGVtZW50fSBzZWxlY3Rvck9ySFRNTEVsZW1lbnQgQ1NTIFNlbGVjdG9yIG9yIGNvbnRhaW5lciBub2RlLlxuICogQHJldHVybiB7SFRNTEVsZW1lbnR9IENvbnRhaW5lciBub2RlXG4gKiBAdGhyb3dzIEVycm9yIHdoZW4gdGhlIHR5cGUgaXMgbm90IGNvcnJlY3RcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGFpbmVyTm9kZShzZWxlY3Rvck9ySFRNTEVsZW1lbnQpIHtcbiAgdmFyIGlzU2VsZWN0b3JTdHJpbmcgPSB0eXBlb2Ygc2VsZWN0b3JPckhUTUxFbGVtZW50ID09PSAnc3RyaW5nJztcbiAgdmFyIGRvbUVsZW1lbnQgPSBpc1NlbGVjdG9yU3RyaW5nID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvck9ySFRNTEVsZW1lbnQpIDogc2VsZWN0b3JPckhUTUxFbGVtZW50O1xuXG4gIGlmICghaXNEb21FbGVtZW50KGRvbUVsZW1lbnQpKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9ICdDb250YWluZXIgbXVzdCBiZSBgc3RyaW5nYCBvciBgSFRNTEVsZW1lbnRgLic7XG5cbiAgICBpZiAoaXNTZWxlY3RvclN0cmluZykge1xuICAgICAgZXJyb3JNZXNzYWdlICs9IFwiIFVuYWJsZSB0byBmaW5kIFwiLmNvbmNhdChzZWxlY3Rvck9ySFRNTEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICB9XG5cbiAgcmV0dXJuIGRvbUVsZW1lbnQ7XG59IiwiaW1wb3J0IHsgdW5lc2NhcGUgfSBmcm9tIFwiLi9lc2NhcGUtaHRtbC5qc1wiO1xudmFyIGhhc0FscGhhbnVtZXJpYyA9IG5ldyBSZWdFeHAoL1xcdy9pKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRIaWdobGlnaHRGcm9tU2libGluZ3MocGFydHMsIGkpIHtcbiAgdmFyIF9wYXJ0cywgX3BhcnRzMjtcblxuICB2YXIgY3VycmVudCA9IHBhcnRzW2ldO1xuICB2YXIgaXNOZXh0SGlnaGxpZ2h0ZWQgPSAoKF9wYXJ0cyA9IHBhcnRzW2kgKyAxXSkgPT09IG51bGwgfHwgX3BhcnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGFydHMuaXNIaWdobGlnaHRlZCkgfHwgdHJ1ZTtcbiAgdmFyIGlzUHJldmlvdXNIaWdobGlnaHRlZCA9ICgoX3BhcnRzMiA9IHBhcnRzW2kgLSAxXSkgPT09IG51bGwgfHwgX3BhcnRzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BhcnRzMi5pc0hpZ2hsaWdodGVkKSB8fCB0cnVlO1xuXG4gIGlmICghaGFzQWxwaGFudW1lcmljLnRlc3QodW5lc2NhcGUoY3VycmVudC52YWx1ZSkpICYmIGlzUHJldmlvdXNIaWdobGlnaHRlZCA9PT0gaXNOZXh0SGlnaGxpZ2h0ZWQpIHtcbiAgICByZXR1cm4gaXNQcmV2aW91c0hpZ2hsaWdodGVkO1xuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnQuaXNIaWdobGlnaHRlZDtcbn0iLCJpbXBvcnQgeyBUQUdfUkVQTEFDRU1FTlQgfSBmcm9tIFwiLi9lc2NhcGUtaGlnaGxpZ2h0LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gZ2V0SGlnaGxpZ2h0ZWRQYXJ0cyhoaWdobGlnaHRlZFZhbHVlKSB7XG4gIHZhciBoaWdobGlnaHRQb3N0VGFnID0gVEFHX1JFUExBQ0VNRU5ULmhpZ2hsaWdodFBvc3RUYWcsXG4gICAgICBoaWdobGlnaHRQcmVUYWcgPSBUQUdfUkVQTEFDRU1FTlQuaGlnaGxpZ2h0UHJlVGFnO1xuICB2YXIgc3BsaXRCeVByZVRhZyA9IGhpZ2hsaWdodGVkVmFsdWUuc3BsaXQoaGlnaGxpZ2h0UHJlVGFnKTtcbiAgdmFyIGZpcnN0VmFsdWUgPSBzcGxpdEJ5UHJlVGFnLnNoaWZ0KCk7XG4gIHZhciBlbGVtZW50cyA9ICFmaXJzdFZhbHVlID8gW10gOiBbe1xuICAgIHZhbHVlOiBmaXJzdFZhbHVlLFxuICAgIGlzSGlnaGxpZ2h0ZWQ6IGZhbHNlXG4gIH1dO1xuICBzcGxpdEJ5UHJlVGFnLmZvckVhY2goZnVuY3Rpb24gKHNwbGl0KSB7XG4gICAgdmFyIHNwbGl0QnlQb3N0VGFnID0gc3BsaXQuc3BsaXQoaGlnaGxpZ2h0UG9zdFRhZyk7XG4gICAgZWxlbWVudHMucHVzaCh7XG4gICAgICB2YWx1ZTogc3BsaXRCeVBvc3RUYWdbMF0sXG4gICAgICBpc0hpZ2hsaWdodGVkOiB0cnVlXG4gICAgfSk7XG5cbiAgICBpZiAoc3BsaXRCeVBvc3RUYWdbMV0gIT09ICcnKSB7XG4gICAgICBlbGVtZW50cy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHNwbGl0QnlQb3N0VGFnWzFdLFxuICAgICAgICBpc0hpZ2hsaWdodGVkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGVsZW1lbnRzO1xufSIsImV4cG9ydCBmdW5jdGlvbiBnZXRPYmplY3RUeXBlKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkuc2xpY2UoOCwgLTEpO1xufSIsImV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wZXJ0eUJ5UGF0aChvYmplY3QsIHBhdGgpIHtcbiAgdmFyIHBhcnRzID0gQXJyYXkuaXNBcnJheShwYXRoKSA/IHBhdGggOiBwYXRoLnNwbGl0KCcuJyk7XG4gIHJldHVybiBwYXJ0cy5yZWR1Y2UoZnVuY3Rpb24gKGN1cnJlbnQsIGtleSkge1xuICAgIHJldHVybiBjdXJyZW50ICYmIGN1cnJlbnRba2V5XTtcbiAgfSwgb2JqZWN0KTtcbn0iLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFic29sdXRlUG9zaXRpb24oaGl0cywgcGFnZSwgaGl0c1BlclBhZ2UpIHtcbiAgcmV0dXJuIGhpdHMubWFwKGZ1bmN0aW9uIChoaXQsIGlkeCkge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhpdCksIHt9LCB7XG4gICAgICBfX3Bvc2l0aW9uOiBoaXRzUGVyUGFnZSAqIHBhZ2UgKyBpZHggKyAxXG4gICAgfSk7XG4gIH0pO1xufSIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUXVlcnlJRChoaXRzLCBxdWVyeUlEKSB7XG4gIGlmICghcXVlcnlJRCkge1xuICAgIHJldHVybiBoaXRzO1xuICB9XG5cbiAgcmV0dXJuIGhpdHMubWFwKGZ1bmN0aW9uIChoaXQpIHtcbiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBoaXQpLCB7fSwge1xuICAgICAgX19xdWVyeUlEOiBxdWVyeUlEXG4gICAgfSk7XG4gIH0pO1xufSIsImV4cG9ydCBmdW5jdGlvbiBpc0RvbUVsZW1lbnQob2JqZWN0KSB7XG4gIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBCb29sZWFuKG9iamVjdCkgJiYgb2JqZWN0Lm5vZGVUeXBlID4gMDtcbn0iLCJmdW5jdGlvbiBpc1ByaW1pdGl2ZShvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gT2JqZWN0KG9iaik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsKGZpcnN0LCBzZWNvbmQpIHtcbiAgaWYgKGZpcnN0ID09PSBzZWNvbmQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChpc1ByaW1pdGl2ZShmaXJzdCkgfHwgaXNQcmltaXRpdmUoc2Vjb25kKSB8fCB0eXBlb2YgZmlyc3QgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHNlY29uZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kO1xuICB9XG5cbiAgaWYgKE9iamVjdC5rZXlzKGZpcnN0KS5sZW5ndGggIT09IE9iamVjdC5rZXlzKHNlY29uZCkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyhmaXJzdCk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykge1xuICAgIHZhciBrZXkgPSBfT2JqZWN0JGtleXNbX2ldO1xuXG4gICAgaWYgKCEoa2V5IGluIHNlY29uZCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRXF1YWwoZmlyc3Rba2V5XSwgc2Vjb25kW2tleV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGlzSW5kZXhXaWRnZXQod2lkZ2V0KSB7XG4gIHJldHVybiB3aWRnZXQuJCR0eXBlID09PSAnYWlzLmluZGV4Jztcbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbi8qKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyB0YWtlbiBmcm9tIExvZGFzaCBpbXBsZW1lbnRhdGlvbi5cbiAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi9tYXN0ZXIvaXNQbGFpbk9iamVjdC5qc1xuICovXG5mdW5jdGlvbiBnZXRUYWcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyAnW29iamVjdCBVbmRlZmluZWRdJyA6ICdbb2JqZWN0IE51bGxdJztcbiAgfVxuXG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIF90eXBlb2YodmFsdWUpID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QuXG4gKlxuICogQSBwbGFpbiBvYmplY3QgaXMgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgdGhlIGBPYmplY3RgXG4gKiBjb25zdHJ1Y3RvciBvciB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fCBnZXRUYWcodmFsdWUpICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB2YXIgcHJvdG8gPSB2YWx1ZTtcblxuICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAhPT0gbnVsbCkge1xuICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBwcm90bztcbn0iLCJleHBvcnQgZnVuY3Rpb24gaXNTcGVjaWFsQ2xpY2soZXZlbnQpIHtcbiAgdmFyIGlzTWlkZGxlQ2xpY2sgPSBldmVudC5idXR0b24gPT09IDE7XG4gIHJldHVybiBpc01pZGRsZUNsaWNrIHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuc2hpZnRLZXk7XG59IiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gXCIuL25vb3AuanNcIjtcblxuLyoqXG4gKiBMb2dzIGEgd2FybmluZyB3aGVuIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudCBvbmx5LlxuICovXG52YXIgZGVwcmVjYXRlID0gZnVuY3Rpb24gZGVwcmVjYXRlKGZuLCBtZXNzYWdlKSB7XG4gIHJldHVybiBmbjtcbn07XG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nXG4gKiBUaGlzIGlzIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudCBvbmx5LlxuICovXG5cblxudmFyIHdhcm4gPSBub29wO1xuLyoqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgY29uZGl0aW9uIGlzIG5vdCBtZXQuXG4gKiBUaGlzIGlzIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudCBvbmx5LlxuICovXG5cbnZhciBfd2FybmluZyA9IG5vb3A7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICB3YXJuID0gZnVuY3Rpb24gd2FybihtZXNzYWdlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oXCJbSW5zdGFudFNlYXJjaC5qc106IFwiLmNvbmNhdChtZXNzYWdlLnRyaW0oKSkpO1xuICB9O1xuXG4gIGRlcHJlY2F0ZSA9IGZ1bmN0aW9uIGRlcHJlY2F0ZShmbiwgbWVzc2FnZSkge1xuICAgIHZhciBoYXNBbHJlYWR5UHJpbnRlZCA9IGZhbHNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWhhc0FscmVhZHlQcmludGVkKSB7XG4gICAgICAgIGhhc0FscmVhZHlQcmludGVkID0gdHJ1ZTtcbiAgICAgICAgd2FybihtZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIF93YXJuaW5nID0gZnVuY3Rpb24gd2FybmluZyhjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGhhc0FscmVhZHlQcmludGVkID0gX3dhcm5pbmcuY2FjaGVbbWVzc2FnZV07XG5cbiAgICBpZiAoIWhhc0FscmVhZHlQcmludGVkKSB7XG4gICAgICBfd2FybmluZy5jYWNoZVttZXNzYWdlXSA9IHRydWU7XG4gICAgICB3YXJuKG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBfd2FybmluZy5jYWNoZSA9IHt9O1xufVxuXG5leHBvcnQgeyB3YXJuLCBkZXByZWNhdGUsIF93YXJuaW5nIGFzIHdhcm5pbmcgfTsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsgdmFyIGtleSwgaTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IHsgZmluZEluZGV4IH0gZnJvbSBcIi4vZmluZEluZGV4LmpzXCI7XG5pbXBvcnQgeyB1bmlxIH0gZnJvbSBcIi4vdW5pcS5qc1wiO1xuXG52YXIgbWVyZ2VXaXRoUmVzdCA9IGZ1bmN0aW9uIG1lcmdlV2l0aFJlc3QobGVmdCwgcmlnaHQpIHtcbiAgdmFyIGZhY2V0cyA9IHJpZ2h0LmZhY2V0cyxcbiAgICAgIGRpc2p1bmN0aXZlRmFjZXRzID0gcmlnaHQuZGlzanVuY3RpdmVGYWNldHMsXG4gICAgICBmYWNldHNSZWZpbmVtZW50cyA9IHJpZ2h0LmZhY2V0c1JlZmluZW1lbnRzLFxuICAgICAgZmFjZXRzRXhjbHVkZXMgPSByaWdodC5mYWNldHNFeGNsdWRlcyxcbiAgICAgIGRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMgPSByaWdodC5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzLFxuICAgICAgbnVtZXJpY1JlZmluZW1lbnRzID0gcmlnaHQubnVtZXJpY1JlZmluZW1lbnRzLFxuICAgICAgdGFnUmVmaW5lbWVudHMgPSByaWdodC50YWdSZWZpbmVtZW50cyxcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0cyA9IHJpZ2h0LmhpZXJhcmNoaWNhbEZhY2V0cyxcbiAgICAgIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzID0gcmlnaHQuaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMsXG4gICAgICBydWxlQ29udGV4dHMgPSByaWdodC5ydWxlQ29udGV4dHMsXG4gICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHJpZ2h0LCBbXCJmYWNldHNcIiwgXCJkaXNqdW5jdGl2ZUZhY2V0c1wiLCBcImZhY2V0c1JlZmluZW1lbnRzXCIsIFwiZmFjZXRzRXhjbHVkZXNcIiwgXCJkaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzXCIsIFwibnVtZXJpY1JlZmluZW1lbnRzXCIsIFwidGFnUmVmaW5lbWVudHNcIiwgXCJoaWVyYXJjaGljYWxGYWNldHNcIiwgXCJoaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c1wiLCBcInJ1bGVDb250ZXh0c1wiXSk7XG5cbiAgcmV0dXJuIGxlZnQuc2V0UXVlcnlQYXJhbWV0ZXJzKHJlc3QpO1xufTsgLy8gTWVyZ2UgZmFjZXRzXG5cblxudmFyIG1lcmdlRmFjZXRzID0gZnVuY3Rpb24gbWVyZ2VGYWNldHMobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIHJpZ2h0LmZhY2V0cy5yZWR1Y2UoZnVuY3Rpb24gKF8sIG5hbWUpIHtcbiAgICByZXR1cm4gXy5hZGRGYWNldChuYW1lKTtcbiAgfSwgbGVmdCk7XG59O1xuXG52YXIgbWVyZ2VEaXNqdW5jdGl2ZUZhY2V0cyA9IGZ1bmN0aW9uIG1lcmdlRGlzanVuY3RpdmVGYWNldHMobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIHJpZ2h0LmRpc2p1bmN0aXZlRmFjZXRzLnJlZHVjZShmdW5jdGlvbiAoXywgbmFtZSkge1xuICAgIHJldHVybiBfLmFkZERpc2p1bmN0aXZlRmFjZXQobmFtZSk7XG4gIH0sIGxlZnQpO1xufTtcblxudmFyIG1lcmdlSGllcmFyY2hpY2FsRmFjZXRzID0gZnVuY3Rpb24gbWVyZ2VIaWVyYXJjaGljYWxGYWNldHMobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIGxlZnQuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICBoaWVyYXJjaGljYWxGYWNldHM6IHJpZ2h0LmhpZXJhcmNoaWNhbEZhY2V0cy5yZWR1Y2UoZnVuY3Rpb24gKGZhY2V0cywgZmFjZXQpIHtcbiAgICAgIHZhciBpbmRleCA9IGZpbmRJbmRleChmYWNldHMsIGZ1bmN0aW9uIChfKSB7XG4gICAgICAgIHJldHVybiBfLm5hbWUgPT09IGZhY2V0Lm5hbWU7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZmFjZXRzLmNvbmNhdChmYWNldCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBuZXh0RmFjZXRzID0gZmFjZXRzLnNsaWNlKCk7XG4gICAgICBuZXh0RmFjZXRzLnNwbGljZShpbmRleCwgMSwgZmFjZXQpO1xuICAgICAgcmV0dXJuIG5leHRGYWNldHM7XG4gICAgfSwgbGVmdC5oaWVyYXJjaGljYWxGYWNldHMpXG4gIH0pO1xufTsgLy8gTWVyZ2UgZmFjZXQgcmVmaW5lbWVudHNcblxuXG52YXIgbWVyZ2VUYWdSZWZpbmVtZW50cyA9IGZ1bmN0aW9uIG1lcmdlVGFnUmVmaW5lbWVudHMobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIHJpZ2h0LnRhZ1JlZmluZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoXywgdmFsdWUpIHtcbiAgICByZXR1cm4gXy5hZGRUYWdSZWZpbmVtZW50KHZhbHVlKTtcbiAgfSwgbGVmdCk7XG59O1xuXG52YXIgbWVyZ2VGYWNldFJlZmluZW1lbnRzID0gZnVuY3Rpb24gbWVyZ2VGYWNldFJlZmluZW1lbnRzKGxlZnQsIHJpZ2h0KSB7XG4gIHJldHVybiBsZWZ0LnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgZmFjZXRzUmVmaW5lbWVudHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbGVmdC5mYWNldHNSZWZpbmVtZW50cyksIHJpZ2h0LmZhY2V0c1JlZmluZW1lbnRzKVxuICB9KTtcbn07XG5cbnZhciBtZXJnZUZhY2V0c0V4Y2x1ZGVzID0gZnVuY3Rpb24gbWVyZ2VGYWNldHNFeGNsdWRlcyhsZWZ0LCByaWdodCkge1xuICByZXR1cm4gbGVmdC5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgIGZhY2V0c0V4Y2x1ZGVzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxlZnQuZmFjZXRzRXhjbHVkZXMpLCByaWdodC5mYWNldHNFeGNsdWRlcylcbiAgfSk7XG59O1xuXG52YXIgbWVyZ2VEaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzID0gZnVuY3Rpb24gbWVyZ2VEaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzKGxlZnQsIHJpZ2h0KSB7XG4gIHJldHVybiBsZWZ0LnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgZGlzanVuY3RpdmVGYWNldHNSZWZpbmVtZW50czogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBsZWZ0LmRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMpLCByaWdodC5kaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzKVxuICB9KTtcbn07XG5cbnZhciBtZXJnZU51bWVyaWNSZWZpbmVtZW50cyA9IGZ1bmN0aW9uIG1lcmdlTnVtZXJpY1JlZmluZW1lbnRzKGxlZnQsIHJpZ2h0KSB7XG4gIHJldHVybiBsZWZ0LnNldFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgbnVtZXJpY1JlZmluZW1lbnRzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxlZnQubnVtZXJpY1JlZmluZW1lbnRzKSwgcmlnaHQubnVtZXJpY1JlZmluZW1lbnRzKVxuICB9KTtcbn07XG5cbnZhciBtZXJnZUhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzID0gZnVuY3Rpb24gbWVyZ2VIaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50cyhsZWZ0LCByaWdodCkge1xuICByZXR1cm4gbGVmdC5zZXRRdWVyeVBhcmFtZXRlcnMoe1xuICAgIGhpZXJhcmNoaWNhbEZhY2V0c1JlZmluZW1lbnRzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxlZnQuaGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMpLCByaWdodC5oaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50cylcbiAgfSk7XG59O1xuXG52YXIgbWVyZ2VSdWxlQ29udGV4dHMgPSBmdW5jdGlvbiBtZXJnZVJ1bGVDb250ZXh0cyhsZWZ0LCByaWdodCkge1xuICB2YXIgcnVsZUNvbnRleHRzID0gdW5pcShbXS5jb25jYXQobGVmdC5ydWxlQ29udGV4dHMpLmNvbmNhdChyaWdodC5ydWxlQ29udGV4dHMpLmZpbHRlcihCb29sZWFuKSk7XG5cbiAgaWYgKHJ1bGVDb250ZXh0cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIGxlZnQuc2V0UXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgIHJ1bGVDb250ZXh0czogcnVsZUNvbnRleHRzXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gbGVmdDtcbn07XG5cbmV4cG9ydCB2YXIgbWVyZ2VTZWFyY2hQYXJhbWV0ZXJzID0gZnVuY3Rpb24gbWVyZ2VTZWFyY2hQYXJhbWV0ZXJzKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcGFyYW1ldGVycyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBwYXJhbWV0ZXJzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtZXRlcnMucmVkdWNlKGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgIHZhciBoaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c01lcmdlZCA9IG1lcmdlSGllcmFyY2hpY2FsRmFjZXRzUmVmaW5lbWVudHMobGVmdCwgcmlnaHQpO1xuICAgIHZhciBoaWVyYXJjaGljYWxGYWNldHNNZXJnZWQgPSBtZXJnZUhpZXJhcmNoaWNhbEZhY2V0cyhoaWVyYXJjaGljYWxGYWNldHNSZWZpbmVtZW50c01lcmdlZCwgcmlnaHQpO1xuICAgIHZhciB0YWdSZWZpbmVtZW50c01lcmdlZCA9IG1lcmdlVGFnUmVmaW5lbWVudHMoaGllcmFyY2hpY2FsRmFjZXRzTWVyZ2VkLCByaWdodCk7XG4gICAgdmFyIG51bWVyaWNSZWZpbmVtZW50c01lcmdlZCA9IG1lcmdlTnVtZXJpY1JlZmluZW1lbnRzKHRhZ1JlZmluZW1lbnRzTWVyZ2VkLCByaWdodCk7XG4gICAgdmFyIGRpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHNNZXJnZWQgPSBtZXJnZURpc2p1bmN0aXZlRmFjZXRzUmVmaW5lbWVudHMobnVtZXJpY1JlZmluZW1lbnRzTWVyZ2VkLCByaWdodCk7XG4gICAgdmFyIGZhY2V0c0V4Y2x1ZGVzTWVyZ2VkID0gbWVyZ2VGYWNldHNFeGNsdWRlcyhkaXNqdW5jdGl2ZUZhY2V0c1JlZmluZW1lbnRzTWVyZ2VkLCByaWdodCk7XG4gICAgdmFyIGZhY2V0UmVmaW5lbWVudHNNZXJnZWQgPSBtZXJnZUZhY2V0UmVmaW5lbWVudHMoZmFjZXRzRXhjbHVkZXNNZXJnZWQsIHJpZ2h0KTtcbiAgICB2YXIgZGlzanVuY3RpdmVGYWNldHNNZXJnZWQgPSBtZXJnZURpc2p1bmN0aXZlRmFjZXRzKGZhY2V0UmVmaW5lbWVudHNNZXJnZWQsIHJpZ2h0KTtcbiAgICB2YXIgcnVsZUNvbnRleHRzTWVyZ2VkID0gbWVyZ2VSdWxlQ29udGV4dHMoZGlzanVuY3RpdmVGYWNldHNNZXJnZWQsIHJpZ2h0KTtcbiAgICB2YXIgZmFjZXRzTWVyZ2VkID0gbWVyZ2VGYWNldHMocnVsZUNvbnRleHRzTWVyZ2VkLCByaWdodCk7XG4gICAgcmV0dXJuIG1lcmdlV2l0aFJlc3QoZmFjZXRzTWVyZ2VkLCByaWdodCk7XG4gIH0pO1xufTsiLCJleHBvcnQgZnVuY3Rpb24gbm9vcCgpIHt9IiwiZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2UoX3JlZikge1xuICB2YXIgX3JlZiRzdGFydCA9IF9yZWYuc3RhcnQsXG4gICAgICBzdGFydCA9IF9yZWYkc3RhcnQgPT09IHZvaWQgMCA/IDAgOiBfcmVmJHN0YXJ0LFxuICAgICAgZW5kID0gX3JlZi5lbmQsXG4gICAgICBfcmVmJHN0ZXAgPSBfcmVmLnN0ZXAsXG4gICAgICBzdGVwID0gX3JlZiRzdGVwID09PSB2b2lkIDAgPyAxIDogX3JlZiRzdGVwO1xuICAvLyBXZSBjYW4ndCBkaXZpZGUgYnkgMCBzbyB3ZSByZS1hc3NpZ24gdGhlIHN0ZXAgdG8gMSBpZiBpdCBoYXBwZW5zLlxuICB2YXIgbGltaXRTdGVwID0gc3RlcCA9PT0gMCA/IDEgOiBzdGVwOyAvLyBJbiBzb21lIGNhc2VzIHRoZSBhcnJheSB0byBjcmVhdGUgaGFzIGEgZGVjaW1hbCBsZW5ndGguXG4gIC8vIFdlIHRoZXJlZm9yZSBuZWVkIHRvIHJvdW5kIHRoZSB2YWx1ZS5cbiAgLy8gRXhhbXBsZTpcbiAgLy8gICB7IHN0YXJ0OiAxLCBlbmQ6IDUwMDAsIHN0ZXA6IDUwMCB9XG4gIC8vICAgPT4gQXJyYXkgbGVuZ3RoID0gKDUwMDAgLSAxKSAvIDUwMCA9IDkuOTk4XG5cbiAgdmFyIGFycmF5TGVuZ3RoID0gTWF0aC5yb3VuZCgoZW5kIC0gc3RhcnQpIC8gbGltaXRTdGVwKTtcbiAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheShBcnJheShhcnJheUxlbmd0aCkpLm1hcChmdW5jdGlvbiAoXywgY3VycmVudCkge1xuICAgIHJldHVybiBzdGFydCArIGN1cnJlbnQgKiBsaW1pdFN0ZXA7XG4gIH0pO1xufSIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbml0QXJncyhpbnN0YW50U2VhcmNoSW5zdGFuY2UsIHBhcmVudCwgdWlTdGF0ZSkge1xuICB2YXIgaGVscGVyID0gcGFyZW50LmdldEhlbHBlcigpO1xuICByZXR1cm4ge1xuICAgIHVpU3RhdGU6IHVpU3RhdGUsXG4gICAgaGVscGVyOiBoZWxwZXIsXG4gICAgcGFyZW50OiBwYXJlbnQsXG4gICAgaW5zdGFudFNlYXJjaEluc3RhbmNlOiBpbnN0YW50U2VhcmNoSW5zdGFuY2UsXG4gICAgc3RhdGU6IGhlbHBlci5zdGF0ZSxcbiAgICByZW5kZXJTdGF0ZTogaW5zdGFudFNlYXJjaEluc3RhbmNlLnJlbmRlclN0YXRlLFxuICAgIHRlbXBsYXRlc0NvbmZpZzogaW5zdGFudFNlYXJjaEluc3RhbmNlLnRlbXBsYXRlc0NvbmZpZyxcbiAgICBjcmVhdGVVUkw6IHBhcmVudC5jcmVhdGVVUkwsXG4gICAgc2NvcGVkUmVzdWx0czogW10sXG4gICAgc2VhcmNoTWV0YWRhdGE6IHtcbiAgICAgIGlzU2VhcmNoU3RhbGxlZDogaW5zdGFudFNlYXJjaEluc3RhbmNlLnN0YXR1cyA9PT0gJ3N0YWxsZWQnXG4gICAgfSxcbiAgICBzdGF0dXM6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS5zdGF0dXMsXG4gICAgZXJyb3I6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS5lcnJvclxuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlckFyZ3MoaW5zdGFudFNlYXJjaEluc3RhbmNlLCBwYXJlbnQpIHtcbiAgdmFyIHJlc3VsdHMgPSBwYXJlbnQuZ2V0UmVzdWx0cygpO1xuICByZXR1cm4ge1xuICAgIGhlbHBlcjogcGFyZW50LmdldEhlbHBlcigpLFxuICAgIHBhcmVudDogcGFyZW50LFxuICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogaW5zdGFudFNlYXJjaEluc3RhbmNlLFxuICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgc2NvcGVkUmVzdWx0czogcGFyZW50LmdldFNjb3BlZFJlc3VsdHMoKSxcbiAgICBzdGF0ZTogcmVzdWx0cy5fc3RhdGUsXG4gICAgcmVuZGVyU3RhdGU6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS5yZW5kZXJTdGF0ZSxcbiAgICB0ZW1wbGF0ZXNDb25maWc6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS50ZW1wbGF0ZXNDb25maWcsXG4gICAgY3JlYXRlVVJMOiBwYXJlbnQuY3JlYXRlVVJMLFxuICAgIHNlYXJjaE1ldGFkYXRhOiB7XG4gICAgICBpc1NlYXJjaFN0YWxsZWQ6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS5zdGF0dXMgPT09ICdzdGFsbGVkJ1xuICAgIH0sXG4gICAgc3RhdHVzOiBpbnN0YW50U2VhcmNoSW5zdGFuY2Uuc3RhdHVzLFxuICAgIGVycm9yOiBpbnN0YW50U2VhcmNoSW5zdGFuY2UuZXJyb3JcbiAgfTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVNlYXJjaFBhcmFtZXRlcnMoY3VycmVudCkge1xuICB2YXIgcGFyZW50ID0gY3VycmVudC5nZXRQYXJlbnQoKTtcbiAgdmFyIHN0YXRlcyA9IFtjdXJyZW50LmdldEhlbHBlcigpLnN0YXRlXTtcblxuICB3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgc3RhdGVzID0gW3BhcmVudC5nZXRIZWxwZXIoKS5zdGF0ZV0uY29uY2F0KHN0YXRlcyk7XG4gICAgcGFyZW50ID0gcGFyZW50LmdldFBhcmVudCgpO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlcztcbn0iLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgZ2V0SGlnaGxpZ2h0RnJvbVNpYmxpbmdzIH0gZnJvbSBcIi4vZ2V0SGlnaGxpZ2h0RnJvbVNpYmxpbmdzLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcmV2ZXJzZUhpZ2hsaWdodGVkUGFydHMocGFydHMpIHtcbiAgaWYgKCFwYXJ0cy5zb21lKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgcmV0dXJuIHBhcnQuaXNIaWdobGlnaHRlZDtcbiAgfSkpIHtcbiAgICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYXJ0KSwge30sIHtcbiAgICAgICAgaXNIaWdobGlnaHRlZDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbiAocGFydCwgaSkge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBhcnQpLCB7fSwge1xuICAgICAgaXNIaWdobGlnaHRlZDogIWdldEhpZ2hsaWdodEZyb21TaWJsaW5ncyhwYXJ0cywgaSlcbiAgICB9KTtcbiAgfSk7XG59IiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuXG4vKipcbiAqIFJ1bnMgY29kZSBvbiBicm93c2VyIGVudmlyb25tZW50cyBzYWZlbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYWZlbHlSdW5PbkJyb3dzZXIoY2FsbGJhY2spIHtcbiAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSxcbiAgICAgIGZhbGxiYWNrID0gX3JlZi5mYWxsYmFjaztcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmYWxsYmFjaygpO1xuICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcblxuXG4gIHJldHVybiBjYWxsYmFjayh7XG4gICAgd2luZG93OiB3aW5kb3dcbiAgfSk7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVBheWxvYWQocGF5bG9hZCkge1xuICByZXR1cm4gYnRvYShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVBheWxvYWQoc2VyaWFsaXplZCkge1xuICByZXR1cm4gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYXRvYihzZXJpYWxpemVkKSkpO1xufSIsImltcG9ydCB7IGlzSW5kZXhXaWRnZXQgfSBmcm9tIFwiLi9pc0luZGV4V2lkZ2V0LmpzXCI7XG5pbXBvcnQgeyBjaGVja0luZGV4VWlTdGF0ZSB9IGZyb20gXCIuL2NoZWNrSW5kZXhVaVN0YXRlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc2V0SW5kZXhIZWxwZXJTdGF0ZShmaW5hbFVpU3RhdGUsIGluZGV4V2lkZ2V0KSB7XG4gIHZhciBuZXh0SW5kZXhVaVN0YXRlID0gZmluYWxVaVN0YXRlW2luZGV4V2lkZ2V0LmdldEluZGV4SWQoKV0gfHwge307XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY2hlY2tJbmRleFVpU3RhdGUoe1xuICAgICAgaW5kZXg6IGluZGV4V2lkZ2V0LFxuICAgICAgaW5kZXhVaVN0YXRlOiBuZXh0SW5kZXhVaVN0YXRlXG4gICAgfSk7XG4gIH1cblxuICBpbmRleFdpZGdldC5nZXRIZWxwZXIoKS5zZXRTdGF0ZShpbmRleFdpZGdldC5nZXRXaWRnZXRTZWFyY2hQYXJhbWV0ZXJzKGluZGV4V2lkZ2V0LmdldEhlbHBlcigpLnN0YXRlLCB7XG4gICAgdWlTdGF0ZTogbmV4dEluZGV4VWlTdGF0ZVxuICB9KSk7XG4gIGluZGV4V2lkZ2V0LmdldFdpZGdldHMoKS5maWx0ZXIoaXNJbmRleFdpZGdldCkuZm9yRWFjaChmdW5jdGlvbiAod2lkZ2V0KSB7XG4gICAgcmV0dXJuIHNldEluZGV4SGVscGVyU3RhdGUoZmluYWxVaVN0YXRlLCB3aWRnZXQpO1xuICB9KTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG59IiwiLyoqXG4gKiBBIHR5cGVkIHZlcnNpb24gb2YgT2JqZWN0LmtleXMsIHRvIHVzZSB3aGVuIGxvb3Bpbmcgb3ZlciBhIHN0YXRpYyBvYmplY3RcbiAqIGluc3BpcmVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzY1MTE3NDY1LzMxODUzMDdcbiAqL1xuZXhwb3J0IHZhciBrZXlzID0gT2JqZWN0LmtleXM7IiwiZXhwb3J0IGZ1bmN0aW9uIHVuaXEoYXJyYXkpIHtcbiAgcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBzZWxmKSB7XG4gICAgcmV0dXJuIHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4O1xuICB9KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAnNC40Ny4wJzsiLCJpbXBvcnQgeyBjcmVhdGVJbml0QXJncywgc2FmZWx5UnVuT25Ccm93c2VyIH0gZnJvbSBcIi4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xuXG5mdW5jdGlvbiBleHRyYWN0UGF5bG9hZCh3aWRnZXRzLCBpbnN0YW50U2VhcmNoSW5zdGFuY2UsIHBheWxvYWQpIHtcbiAgdmFyIGluaXRPcHRpb25zID0gY3JlYXRlSW5pdEFyZ3MoaW5zdGFudFNlYXJjaEluc3RhbmNlLCBpbnN0YW50U2VhcmNoSW5zdGFuY2UubWFpbkluZGV4LCBpbnN0YW50U2VhcmNoSW5zdGFuY2UuX2luaXRpYWxVaVN0YXRlKTtcbiAgd2lkZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uICh3aWRnZXQpIHtcbiAgICB2YXIgd2lkZ2V0UGFyYW1zID0ge307XG5cbiAgICBpZiAod2lkZ2V0LmdldFdpZGdldFJlbmRlclN0YXRlKSB7XG4gICAgICB2YXIgcmVuZGVyU3RhdGUgPSB3aWRnZXQuZ2V0V2lkZ2V0UmVuZGVyU3RhdGUoaW5pdE9wdGlvbnMpO1xuXG4gICAgICBpZiAocmVuZGVyU3RhdGUgJiYgcmVuZGVyU3RhdGUud2lkZ2V0UGFyYW1zKSB7XG4gICAgICAgIC8vIGNhc3RpbmcsIGFzIHdlIGp1c3QgZWFybGllciBjaGVja2VkIHdpZGdldFBhcmFtcyBleGlzdHMsIGFuZCB0aHVzIGFuIG9iamVjdFxuICAgICAgICB3aWRnZXRQYXJhbXMgPSByZW5kZXJTdGF0ZS53aWRnZXRQYXJhbXM7XG4gICAgICB9XG4gICAgfSAvLyBzaW5jZSB3ZSBkZXN0cnVjdHVyZSBpbiBhbGwgd2lkZ2V0cywgdGhlIHBhcmFtZXRlcnMgd2l0aCBkZWZhdWx0cyBhcmUgc2V0IHRvIFwidW5kZWZpbmVkXCJcblxuXG4gICAgdmFyIHBhcmFtcyA9IE9iamVjdC5rZXlzKHdpZGdldFBhcmFtcykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiB3aWRnZXRQYXJhbXNba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIHBheWxvYWQud2lkZ2V0cy5wdXNoKHtcbiAgICAgIHR5cGU6IHdpZGdldC4kJHR5cGUsXG4gICAgICB3aWRnZXRUeXBlOiB3aWRnZXQuJCR3aWRnZXRUeXBlLFxuICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICB9KTtcblxuICAgIGlmICh3aWRnZXQuJCR0eXBlID09PSAnYWlzLmluZGV4Jykge1xuICAgICAgZXh0cmFjdFBheWxvYWQod2lkZ2V0LmdldFdpZGdldHMoKSwgaW5zdGFudFNlYXJjaEluc3RhbmNlLCBwYXlsb2FkKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNNZXRhZGF0YUVuYWJsZWQoKSB7XG4gIHJldHVybiBzYWZlbHlSdW5PbkJyb3dzZXIoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgX3dpbmRvdyRuYXZpZ2F0b3IsIF93aW5kb3ckbmF2aWdhdG9yJHVzZTtcblxuICAgIHZhciB3aW5kb3cgPSBfcmVmLndpbmRvdztcbiAgICByZXR1cm4gKChfd2luZG93JG5hdmlnYXRvciA9IHdpbmRvdy5uYXZpZ2F0b3IpID09PSBudWxsIHx8IF93aW5kb3ckbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dpbmRvdyRuYXZpZ2F0b3IkdXNlID0gX3dpbmRvdyRuYXZpZ2F0b3IudXNlckFnZW50KSA9PT0gbnVsbCB8fCBfd2luZG93JG5hdmlnYXRvciR1c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3ckbmF2aWdhdG9yJHVzZS5pbmRleE9mKCdBbGdvbGlhIENyYXdsZXInKSkgPiAtMTtcbiAgfSwge1xuICAgIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufVxuLyoqXG4gKiBFeHBvc2VzIHRoZSBtZXRhZGF0YSBvZiBtb3VudGVkIHdpZGdldHMgaW4gYSBjdXN0b21cbiAqIGA8bWV0YSBuYW1lPVwiaW5zdGFudHNlYXJjaDp3aWRnZXRzXCIgLz5gIHRhZy4gVGhlIG1ldGFkYXRhIHBlciB3aWRnZXQgaXM6XG4gKiAtIGFwcGxpZWQgcGFyYW1ldGVyc1xuICogLSB3aWRnZXQgbmFtZVxuICogLSBjb25uZWN0b3IgbmFtZVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNZXRhZGF0YU1pZGRsZXdhcmUoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICB2YXIgaW5zdGFudFNlYXJjaEluc3RhbmNlID0gX3JlZjIuaW5zdGFudFNlYXJjaEluc3RhbmNlO1xuICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgd2lkZ2V0czogW11cbiAgICB9O1xuICAgIHZhciBwYXlsb2FkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuICAgIHZhciByZWZOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpO1xuICAgIHBheWxvYWRDb250YWluZXIubmFtZSA9ICdpbnN0YW50c2VhcmNoOndpZGdldHMnO1xuICAgIHJldHVybiB7XG4gICAgICBvblN0YXRlQ2hhbmdlOiBmdW5jdGlvbiBvblN0YXRlQ2hhbmdlKCkge30sXG4gICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZSgpIHtcbiAgICAgICAgLy8gdXNpbmcgc2V0VGltZW91dCBoZXJlIHRvIGRlbGF5IGV4dHJhY3Rpb24gdW50aWwgd2lkZ2V0cyBoYXZlIGJlZW4gYWRkZWQgaW4gYSB0aWNrIChlLmcuIFZ1ZSlcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNsaWVudCA9IGluc3RhbnRTZWFyY2hJbnN0YW5jZS5jbGllbnQ7XG4gICAgICAgICAgcGF5bG9hZC51YSA9IGNsaWVudC50cmFuc3BvcnRlciAmJiBjbGllbnQudHJhbnNwb3J0ZXIudXNlckFnZW50ID8gY2xpZW50LnRyYW5zcG9ydGVyLnVzZXJBZ2VudC52YWx1ZSA6IGNsaWVudC5fdWE7XG4gICAgICAgICAgZXh0cmFjdFBheWxvYWQoaW5zdGFudFNlYXJjaEluc3RhbmNlLm1haW5JbmRleC5nZXRXaWRnZXRzKCksIGluc3RhbnRTZWFyY2hJbnN0YW5jZSwgcGF5bG9hZCk7XG4gICAgICAgICAgcGF5bG9hZENvbnRhaW5lci5jb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG4gICAgICAgICAgcmVmTm9kZS5hcHBlbmRDaGlsZChwYXlsb2FkQ29udGFpbmVyKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9LFxuICAgICAgc3RhcnRlZDogZnVuY3Rpb24gc3RhcnRlZCgpIHt9LFxuICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBwYXlsb2FkQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCBzaW1wbGVTdGF0ZU1hcHBpbmcgZnJvbSBcIi4uL2xpYi9zdGF0ZU1hcHBpbmdzL3NpbXBsZS5qc1wiO1xuaW1wb3J0IGhpc3RvcnlSb3V0ZXIgZnJvbSBcIi4uL2xpYi9yb3V0ZXJzL2hpc3RvcnkuanNcIjtcbmltcG9ydCB7IGlzRXF1YWwgfSBmcm9tIFwiLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG5leHBvcnQgdmFyIGNyZWF0ZVJvdXRlck1pZGRsZXdhcmUgPSBmdW5jdGlvbiBjcmVhdGVSb3V0ZXJNaWRkbGV3YXJlKCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICB2YXIgX3Byb3BzJHJvdXRlciA9IHByb3BzLnJvdXRlcixcbiAgICAgIHJvdXRlciA9IF9wcm9wcyRyb3V0ZXIgPT09IHZvaWQgMCA/IGhpc3RvcnlSb3V0ZXIoKSA6IF9wcm9wcyRyb3V0ZXIsXG4gICAgICBfcHJvcHMkc3RhdGVNYXBwaW5nID0gcHJvcHMuc3RhdGVNYXBwaW5nLFxuICAgICAgc3RhdGVNYXBwaW5nID0gX3Byb3BzJHN0YXRlTWFwcGluZyA9PT0gdm9pZCAwID8gc2ltcGxlU3RhdGVNYXBwaW5nKCkgOiBfcHJvcHMkc3RhdGVNYXBwaW5nO1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgaW5zdGFudFNlYXJjaEluc3RhbmNlID0gX3JlZi5pbnN0YW50U2VhcmNoSW5zdGFuY2U7XG5cbiAgICBmdW5jdGlvbiB0b3BMZXZlbENyZWF0ZVVSTChuZXh0U3RhdGUpIHtcbiAgICAgIHZhciB1aVN0YXRlID0gT2JqZWN0LmtleXMobmV4dFN0YXRlKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaW5kZXhJZCkge1xuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhY2MpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBpbmRleElkLCBuZXh0U3RhdGVbaW5kZXhJZF0pKTtcbiAgICAgIH0sIGluc3RhbnRTZWFyY2hJbnN0YW5jZS5tYWluSW5kZXguZ2V0V2lkZ2V0VWlTdGF0ZSh7fSkpO1xuICAgICAgdmFyIHJvdXRlID0gc3RhdGVNYXBwaW5nLnN0YXRlVG9Sb3V0ZSh1aVN0YXRlKTtcbiAgICAgIHJldHVybiByb3V0ZXIuY3JlYXRlVVJMKHJvdXRlKTtcbiAgICB9IC8vIGNhc3RpbmcgdG8gVWlTdGF0ZSBoZXJlIHRvIGtlZXAgY3JlYXRlVVJMIHVuYXdhcmUgb2YgY3VzdG9tIFVpU3RhdGVcbiAgICAvLyAoYXMgbG9uZyBhcyBpdCdzIGFuIG9iamVjdCwgaXQncyBvaylcblxuXG4gICAgaW5zdGFudFNlYXJjaEluc3RhbmNlLl9jcmVhdGVVUkwgPSB0b3BMZXZlbENyZWF0ZVVSTDtcbiAgICB2YXIgbGFzdFJvdXRlU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgdmFyIGluaXRpYWxVaVN0YXRlID0gaW5zdGFudFNlYXJjaEluc3RhbmNlLl9pbml0aWFsVWlTdGF0ZTtcbiAgICByZXR1cm4ge1xuICAgICAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25TdGF0ZUNoYW5nZShfcmVmMikge1xuICAgICAgICB2YXIgdWlTdGF0ZSA9IF9yZWYyLnVpU3RhdGU7XG4gICAgICAgIHZhciByb3V0ZVN0YXRlID0gc3RhdGVNYXBwaW5nLnN0YXRlVG9Sb3V0ZSh1aVN0YXRlKTtcblxuICAgICAgICBpZiAobGFzdFJvdXRlU3RhdGUgPT09IHVuZGVmaW5lZCB8fCAhaXNFcXVhbChsYXN0Um91dGVTdGF0ZSwgcm91dGVTdGF0ZSkpIHtcbiAgICAgICAgICByb3V0ZXIud3JpdGUocm91dGVTdGF0ZSk7XG4gICAgICAgICAgbGFzdFJvdXRlU3RhdGUgPSByb3V0ZVN0YXRlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUoKSB7XG4gICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZS5faW5pdGlhbFVpU3RhdGUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGluaXRpYWxVaVN0YXRlKSwgc3RhdGVNYXBwaW5nLnJvdXRlVG9TdGF0ZShyb3V0ZXIucmVhZCgpKSk7XG4gICAgICAgIHJvdXRlci5vblVwZGF0ZShmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2Uuc2V0VWlTdGF0ZShzdGF0ZU1hcHBpbmcucm91dGVUb1N0YXRlKHJvdXRlKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHN0YXJ0ZWQ6IGZ1bmN0aW9uIHN0YXJ0ZWQoKSB7fSxcbiAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgcm91dGVyLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufTsiLCJleHBvcnQgKiBmcm9tICdhbGdvbGlhc2VhcmNoLWhlbHBlci90eXBlcy9hbGdvbGlhc2VhcmNoLmpzJztcbmV4cG9ydCB7fTsiLCIvLyBpbnRlcm5hbFxuZXhwb3J0ICogZnJvbSBcIi4vdXRpbHMuanNcIjsgLy8gQWxnb2xpYS1yZWxhdGVkXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L2V4cG9ydFxuXG5leHBvcnQgKiBmcm9tIFwiLi9hbGdvbGlhc2VhcmNoLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9yZXN1bHRzLmpzXCI7IC8vIGNvbXBvbmVudC1yZWxhdGVkXG5cbmV4cG9ydCAqIGZyb20gXCIuL2NvbXBvbmVudC5qc1wiOyAvLyBpbnN0YW50c2VhcmNoLXJlbGF0ZWRcblxuZXhwb3J0ICogZnJvbSBcIi4vaW5zdGFudHNlYXJjaC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbWlkZGxld2FyZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcm91dGVyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9pbnNpZ2h0cy5qc1wiOyAvLyB3aWRnZXQtcmVsYXRlZFxuXG5leHBvcnQgKiBmcm9tIFwiLi9jb25uZWN0b3IuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3dpZGdldC1mYWN0b3J5LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi93aWRnZXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3VpLXN0YXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9yZW5kZXItc3RhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RlbXBsYXRlcy5qc1wiOyIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgY29ubmVjdENvbmZpZ3VyZSBmcm9tIFwiLi4vLi4vY29ubmVjdG9ycy9jb25maWd1cmUvY29ubmVjdENvbmZpZ3VyZS5qc1wiO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbi8qKlxuICogQSBsaXN0IG9mIFtzZWFyY2ggcGFyYW1ldGVyc10oaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL2FwaS1yZWZlcmVuY2Uvc2VhcmNoLWFwaS1wYXJhbWV0ZXJzLylcbiAqIHRvIGVuYWJsZSB3aGVuIHRoZSB3aWRnZXQgbW91bnRzLlxuICovXG5cbnZhciBjb25maWd1cmUgPSBmdW5jdGlvbiBjb25maWd1cmUod2lkZ2V0UGFyYW1zKSB7XG4gIC8vIFRoaXMgaXMgYSByZW5kZXJsZXNzIHdpZGdldCB0aGF0IGZhbGxzIGJhY2sgdG8gdGhlIGNvbm5lY3RvcidzXG4gIC8vIG5vb3AgcmVuZGVyIGFuZCB1bm1vdW50IGZ1bmN0aW9ucy5cbiAgdmFyIG1ha2VXaWRnZXQgPSBjb25uZWN0Q29uZmlndXJlKG5vb3ApO1xuICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYWtlV2lkZ2V0KHtcbiAgICBzZWFyY2hQYXJhbWV0ZXJzOiB3aWRnZXRQYXJhbXNcbiAgfSkpLCB7fSwge1xuICAgICQkd2lkZ2V0VHlwZTogJ2Fpcy5jb25maWd1cmUnXG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlndXJlOyIsInZhciBkZWZhdWx0VGVtcGxhdGVzID0ge1xuICBlbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgcmV0dXJuICdObyByZXN1bHRzJztcbiAgfSxcbiAgaXRlbTogZnVuY3Rpb24gaXRlbShkYXRhKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdFRlbXBsYXRlczsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgaCwgcmVuZGVyIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBjb25uZWN0SGl0cyBmcm9tIFwiLi4vLi4vY29ubmVjdG9ycy9oaXRzL2Nvbm5lY3RIaXRzLmpzXCI7XG5pbXBvcnQgSGl0cyBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9IaXRzL0hpdHMuanNcIjtcbmltcG9ydCBkZWZhdWx0VGVtcGxhdGVzIGZyb20gXCIuL2RlZmF1bHRUZW1wbGF0ZXMuanNcIjtcbmltcG9ydCB7IGdldENvbnRhaW5lck5vZGUsIGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcHJlcGFyZVRlbXBsYXRlUHJvcHMgfSBmcm9tIFwiLi4vLi4vbGliL3RlbXBsYXRpbmcvaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9saWIvc3VpdC5qc1wiO1xuaW1wb3J0IHsgd2l0aEluc2lnaHRzLCB3aXRoSW5zaWdodHNMaXN0ZW5lciB9IGZyb20gXCIuLi8uLi9saWIvaW5zaWdodHMvaW5kZXguanNcIjtcbnZhciB3aXRoVXNhZ2UgPSBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvcih7XG4gIG5hbWU6ICdoaXRzJ1xufSk7XG52YXIgc3VpdCA9IGNvbXBvbmVudCgnSGl0cycpO1xudmFyIEhpdHNXaXRoSW5zaWdodHNMaXN0ZW5lciA9IHdpdGhJbnNpZ2h0c0xpc3RlbmVyKEhpdHMpO1xuXG52YXIgcmVuZGVyZXIgPSBmdW5jdGlvbiByZW5kZXJlcihfcmVmKSB7XG4gIHZhciByZW5kZXJTdGF0ZSA9IF9yZWYucmVuZGVyU3RhdGUsXG4gICAgICBjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgY29udGFpbmVyTm9kZSA9IF9yZWYuY29udGFpbmVyTm9kZSxcbiAgICAgIHRlbXBsYXRlcyA9IF9yZWYudGVtcGxhdGVzO1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYyLCBpc0ZpcnN0UmVuZGVyaW5nKSB7XG4gICAgdmFyIHJlY2VpdmVkSGl0cyA9IF9yZWYyLmhpdHMsXG4gICAgICAgIHJlc3VsdHMgPSBfcmVmMi5yZXN1bHRzLFxuICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSBfcmVmMi5pbnN0YW50U2VhcmNoSW5zdGFuY2UsXG4gICAgICAgIGluc2lnaHRzID0gX3JlZjIuaW5zaWdodHMsXG4gICAgICAgIGJpbmRFdmVudCA9IF9yZWYyLmJpbmRFdmVudDtcblxuICAgIGlmIChpc0ZpcnN0UmVuZGVyaW5nKSB7XG4gICAgICByZW5kZXJTdGF0ZS50ZW1wbGF0ZVByb3BzID0gcHJlcGFyZVRlbXBsYXRlUHJvcHMoe1xuICAgICAgICBkZWZhdWx0VGVtcGxhdGVzOiBkZWZhdWx0VGVtcGxhdGVzLFxuICAgICAgICB0ZW1wbGF0ZXNDb25maWc6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS50ZW1wbGF0ZXNDb25maWcsXG4gICAgICAgIHRlbXBsYXRlczogdGVtcGxhdGVzXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW5kZXIoaChIaXRzV2l0aEluc2lnaHRzTGlzdGVuZXIsIHtcbiAgICAgIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsXG4gICAgICBoaXRzOiByZWNlaXZlZEhpdHMsXG4gICAgICByZXN1bHRzOiByZXN1bHRzLFxuICAgICAgdGVtcGxhdGVQcm9wczogcmVuZGVyU3RhdGUudGVtcGxhdGVQcm9wcyxcbiAgICAgIGluc2lnaHRzOiBpbnNpZ2h0cyxcbiAgICAgIHNlbmRFdmVudDogZnVuY3Rpb24gc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZS5zZW5kRXZlbnRUb0luc2lnaHRzKGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBiaW5kRXZlbnQ6IGJpbmRFdmVudFxuICAgIH0pLCBjb250YWluZXJOb2RlKTtcbiAgfTtcbn07XG5cbnZhciBoaXRzID0gZnVuY3Rpb24gaGl0cyh3aWRnZXRQYXJhbXMpIHtcbiAgdmFyIF9yZWYzID0gd2lkZ2V0UGFyYW1zIHx8IHt9LFxuICAgICAgY29udGFpbmVyID0gX3JlZjMuY29udGFpbmVyLFxuICAgICAgZXNjYXBlSFRNTCA9IF9yZWYzLmVzY2FwZUhUTUwsXG4gICAgICB0cmFuc2Zvcm1JdGVtcyA9IF9yZWYzLnRyYW5zZm9ybUl0ZW1zLFxuICAgICAgX3JlZjMkdGVtcGxhdGVzID0gX3JlZjMudGVtcGxhdGVzLFxuICAgICAgdGVtcGxhdGVzID0gX3JlZjMkdGVtcGxhdGVzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYzJHRlbXBsYXRlcyxcbiAgICAgIF9yZWYzJGNzc0NsYXNzZXMgPSBfcmVmMy5jc3NDbGFzc2VzLFxuICAgICAgdXNlckNzc0NsYXNzZXMgPSBfcmVmMyRjc3NDbGFzc2VzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYzJGNzc0NsYXNzZXM7XG5cbiAgaWYgKCFjb250YWluZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYGNvbnRhaW5lcmAgb3B0aW9uIGlzIHJlcXVpcmVkLicpKTtcbiAgfVxuXG4gIHZhciBjb250YWluZXJOb2RlID0gZ2V0Q29udGFpbmVyTm9kZShjb250YWluZXIpO1xuICB2YXIgY3NzQ2xhc3NlcyA9IHtcbiAgICByb290OiBjeChzdWl0KCksIHVzZXJDc3NDbGFzc2VzLnJvb3QpLFxuICAgIGVtcHR5Um9vdDogY3goc3VpdCh7XG4gICAgICBtb2RpZmllck5hbWU6ICdlbXB0eSdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMuZW1wdHlSb290KSxcbiAgICBsaXN0OiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnbGlzdCdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMubGlzdCksXG4gICAgaXRlbTogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ2l0ZW0nXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLml0ZW0pXG4gIH07XG4gIHZhciBzcGVjaWFsaXplZFJlbmRlcmVyID0gcmVuZGVyZXIoe1xuICAgIGNvbnRhaW5lck5vZGU6IGNvbnRhaW5lck5vZGUsXG4gICAgY3NzQ2xhc3NlczogY3NzQ2xhc3NlcyxcbiAgICByZW5kZXJTdGF0ZToge30sXG4gICAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXNcbiAgfSk7XG4gIHZhciBtYWtlV2lkZ2V0ID0gd2l0aEluc2lnaHRzKGNvbm5lY3RIaXRzKShzcGVjaWFsaXplZFJlbmRlcmVyLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlbmRlcihudWxsLCBjb250YWluZXJOb2RlKTtcbiAgfSk7XG4gIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1ha2VXaWRnZXQoe1xuICAgIGVzY2FwZUhUTUw6IGVzY2FwZUhUTUwsXG4gICAgdHJhbnNmb3JtSXRlbXM6IHRyYW5zZm9ybUl0ZW1zXG4gIH0pKSwge30sIHtcbiAgICAkJHdpZGdldFR5cGU6ICdhaXMuaGl0cydcbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBoaXRzOyIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBhbGdvbGlhc2VhcmNoSGVscGVyIGZyb20gJ2FsZ29saWFzZWFyY2gtaGVscGVyJztcbmltcG9ydCB7IGNoZWNrSW5kZXhVaVN0YXRlLCBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvciwgcmVzb2x2ZVNlYXJjaFBhcmFtZXRlcnMsIG1lcmdlU2VhcmNoUGFyYW1ldGVycywgd2FybmluZywgaXNJbmRleFdpZGdldCwgY3JlYXRlSW5pdEFyZ3MsIGNyZWF0ZVJlbmRlckFyZ3MgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWxzL2luZGV4LmpzXCI7XG52YXIgd2l0aFVzYWdlID0gY3JlYXRlRG9jdW1lbnRhdGlvbk1lc3NhZ2VHZW5lcmF0b3Ioe1xuICBuYW1lOiAnaW5kZXgtd2lkZ2V0J1xufSk7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgc2FtZSBjb250ZW50IGFzIGhlbHBlci5fY2hhbmdlIC8gc2V0U3RhdGUsIGJ1dCBhbGxvd2luZyBmb3IgZXh0cmFcbiAqIFVpU3RhdGUgdG8gYmUgc3luY2hyb25pemVkLlxuICogc2VlOiBodHRwczovL2dpdGh1Yi5jb20vYWxnb2xpYS9hbGdvbGlhc2VhcmNoLWhlbHBlci1qcy9ibG9iLzZiODM1ZmZkMDc3NDJmMmQ2YjMxNDAyMmNjZTY4NDhmNWNmZWNkNGEvc3JjL2FsZ29saWFzZWFyY2guaGVscGVyLmpzI0wxMzExLUwxMzI0XG4gKi9cbmZ1bmN0aW9uIHByaXZhdGVIZWxwZXJTZXRTdGF0ZShoZWxwZXIsIF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIGlzUGFnZVJlc2V0ID0gX3JlZi5pc1BhZ2VSZXNldCxcbiAgICAgIF91aVN0YXRlID0gX3JlZi5fdWlTdGF0ZTtcblxuICBpZiAoc3RhdGUgIT09IGhlbHBlci5zdGF0ZSkge1xuICAgIGhlbHBlci5zdGF0ZSA9IHN0YXRlO1xuICAgIGhlbHBlci5lbWl0KCdjaGFuZ2UnLCB7XG4gICAgICBzdGF0ZTogaGVscGVyLnN0YXRlLFxuICAgICAgcmVzdWx0czogaGVscGVyLmxhc3RSZXN1bHRzLFxuICAgICAgaXNQYWdlUmVzZXQ6IGlzUGFnZVJlc2V0LFxuICAgICAgX3VpU3RhdGU6IF91aVN0YXRlXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TG9jYWxXaWRnZXRzVWlTdGF0ZSh3aWRnZXRzLCB3aWRnZXRTdGF0ZU9wdGlvbnMpIHtcbiAgdmFyIGluaXRpYWxVaVN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgcmV0dXJuIHdpZGdldHMucmVkdWNlKGZ1bmN0aW9uICh1aVN0YXRlLCB3aWRnZXQpIHtcbiAgICBpZiAoaXNJbmRleFdpZGdldCh3aWRnZXQpKSB7XG4gICAgICByZXR1cm4gdWlTdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoIXdpZGdldC5nZXRXaWRnZXRVaVN0YXRlICYmICF3aWRnZXQuZ2V0V2lkZ2V0U3RhdGUpIHtcbiAgICAgIHJldHVybiB1aVN0YXRlO1xuICAgIH1cblxuICAgIGlmICh3aWRnZXQuZ2V0V2lkZ2V0VWlTdGF0ZSkge1xuICAgICAgcmV0dXJuIHdpZGdldC5nZXRXaWRnZXRVaVN0YXRlKHVpU3RhdGUsIHdpZGdldFN0YXRlT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdpZGdldC5nZXRXaWRnZXRTdGF0ZSh1aVN0YXRlLCB3aWRnZXRTdGF0ZU9wdGlvbnMpO1xuICB9LCBpbml0aWFsVWlTdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGdldExvY2FsV2lkZ2V0c1NlYXJjaFBhcmFtZXRlcnMod2lkZ2V0cywgd2lkZ2V0U2VhcmNoUGFyYW1ldGVyc09wdGlvbnMpIHtcbiAgdmFyIGluaXRpYWxTZWFyY2hQYXJhbWV0ZXJzID0gd2lkZ2V0U2VhcmNoUGFyYW1ldGVyc09wdGlvbnMuaW5pdGlhbFNlYXJjaFBhcmFtZXRlcnMsXG4gICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHdpZGdldFNlYXJjaFBhcmFtZXRlcnNPcHRpb25zLCBbXCJpbml0aWFsU2VhcmNoUGFyYW1ldGVyc1wiXSk7XG5cbiAgcmV0dXJuIHdpZGdldHMuZmlsdGVyKGZ1bmN0aW9uICh3aWRnZXQpIHtcbiAgICByZXR1cm4gIWlzSW5kZXhXaWRnZXQod2lkZ2V0KTtcbiAgfSkucmVkdWNlKGZ1bmN0aW9uIChzdGF0ZSwgd2lkZ2V0KSB7XG4gICAgaWYgKCF3aWRnZXQuZ2V0V2lkZ2V0U2VhcmNoUGFyYW1ldGVycykge1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIHJldHVybiB3aWRnZXQuZ2V0V2lkZ2V0U2VhcmNoUGFyYW1ldGVycyhzdGF0ZSwgcmVzdCk7XG4gIH0sIGluaXRpYWxTZWFyY2hQYXJhbWV0ZXJzKTtcbn1cblxuZnVuY3Rpb24gcmVzZXRQYWdlRnJvbVdpZGdldHMod2lkZ2V0cykge1xuICB2YXIgaW5kZXhXaWRnZXRzID0gd2lkZ2V0cy5maWx0ZXIoaXNJbmRleFdpZGdldCk7XG5cbiAgaWYgKGluZGV4V2lkZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpbmRleFdpZGdldHMuZm9yRWFjaChmdW5jdGlvbiAod2lkZ2V0KSB7XG4gICAgdmFyIHdpZGdldEhlbHBlciA9IHdpZGdldC5nZXRIZWxwZXIoKTtcbiAgICBwcml2YXRlSGVscGVyU2V0U3RhdGUod2lkZ2V0SGVscGVyLCB7XG4gICAgICBzdGF0ZTogd2lkZ2V0SGVscGVyLnN0YXRlLnJlc2V0UGFnZSgpLFxuICAgICAgaXNQYWdlUmVzZXQ6IHRydWVcbiAgICB9KTtcbiAgICByZXNldFBhZ2VGcm9tV2lkZ2V0cyh3aWRnZXQuZ2V0V2lkZ2V0cygpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVTY29wZWRSZXN1bHRzRnJvbVdpZGdldHMod2lkZ2V0cykge1xuICB2YXIgaW5kZXhXaWRnZXRzID0gd2lkZ2V0cy5maWx0ZXIoaXNJbmRleFdpZGdldCk7XG4gIHJldHVybiBpbmRleFdpZGdldHMucmVkdWNlKGZ1bmN0aW9uIChzY29wZWRSZXN1bHRzLCBjdXJyZW50KSB7XG4gICAgcmV0dXJuIHNjb3BlZFJlc3VsdHMuY29uY2F0LmFwcGx5KHNjb3BlZFJlc3VsdHMsIFt7XG4gICAgICBpbmRleElkOiBjdXJyZW50LmdldEluZGV4SWQoKSxcbiAgICAgIHJlc3VsdHM6IGN1cnJlbnQuZ2V0UmVzdWx0cygpLFxuICAgICAgaGVscGVyOiBjdXJyZW50LmdldEhlbHBlcigpXG4gICAgfV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXNvbHZlU2NvcGVkUmVzdWx0c0Zyb21XaWRnZXRzKGN1cnJlbnQuZ2V0V2lkZ2V0cygpKSkpKTtcbiAgfSwgW10pO1xufVxuXG52YXIgaW5kZXggPSBmdW5jdGlvbiBpbmRleCh3aWRnZXRQYXJhbXMpIHtcbiAgaWYgKHdpZGdldFBhcmFtcyA9PT0gdW5kZWZpbmVkIHx8IHdpZGdldFBhcmFtcy5pbmRleE5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSBgaW5kZXhOYW1lYCBvcHRpb24gaXMgcmVxdWlyZWQuJykpO1xuICB9XG5cbiAgdmFyIGluZGV4TmFtZSA9IHdpZGdldFBhcmFtcy5pbmRleE5hbWUsXG4gICAgICBfd2lkZ2V0UGFyYW1zJGluZGV4SWQgPSB3aWRnZXRQYXJhbXMuaW5kZXhJZCxcbiAgICAgIGluZGV4SWQgPSBfd2lkZ2V0UGFyYW1zJGluZGV4SWQgPT09IHZvaWQgMCA/IGluZGV4TmFtZSA6IF93aWRnZXRQYXJhbXMkaW5kZXhJZDtcbiAgdmFyIGxvY2FsV2lkZ2V0cyA9IFtdO1xuICB2YXIgbG9jYWxVaVN0YXRlID0ge307XG4gIHZhciBsb2NhbEluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IG51bGw7XG4gIHZhciBsb2NhbFBhcmVudCA9IG51bGw7XG4gIHZhciBoZWxwZXIgPSBudWxsO1xuICB2YXIgZGVyaXZlZEhlbHBlciA9IG51bGw7XG4gIHJldHVybiB7XG4gICAgJCR0eXBlOiAnYWlzLmluZGV4JyxcbiAgICAkJHdpZGdldFR5cGU6ICdhaXMuaW5kZXgnLFxuICAgIGdldEluZGV4TmFtZTogZnVuY3Rpb24gZ2V0SW5kZXhOYW1lKCkge1xuICAgICAgcmV0dXJuIGluZGV4TmFtZTtcbiAgICB9LFxuICAgIGdldEluZGV4SWQ6IGZ1bmN0aW9uIGdldEluZGV4SWQoKSB7XG4gICAgICByZXR1cm4gaW5kZXhJZDtcbiAgICB9LFxuICAgIGdldEhlbHBlcjogZnVuY3Rpb24gZ2V0SGVscGVyKCkge1xuICAgICAgcmV0dXJuIGhlbHBlcjtcbiAgICB9LFxuICAgIGdldFJlc3VsdHM6IGZ1bmN0aW9uIGdldFJlc3VsdHMoKSB7XG4gICAgICByZXR1cm4gZGVyaXZlZEhlbHBlciAmJiBkZXJpdmVkSGVscGVyLmxhc3RSZXN1bHRzO1xuICAgIH0sXG4gICAgZ2V0U2NvcGVkUmVzdWx0czogZnVuY3Rpb24gZ2V0U2NvcGVkUmVzdWx0cygpIHtcbiAgICAgIHZhciB3aWRnZXRQYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpOyAvLyBJZiB0aGUgd2lkZ2V0IGlzIHRoZSByb290LCB3ZSBjb25zaWRlciBpdHNlbGYgYXMgdGhlIG9ubHkgc2libGluZy5cblxuICAgICAgdmFyIHdpZGdldFNpYmxpbmdzID0gd2lkZ2V0UGFyZW50ID8gd2lkZ2V0UGFyZW50LmdldFdpZGdldHMoKSA6IFt0aGlzXTtcbiAgICAgIHJldHVybiByZXNvbHZlU2NvcGVkUmVzdWx0c0Zyb21XaWRnZXRzKHdpZGdldFNpYmxpbmdzKTtcbiAgICB9LFxuICAgIGdldFBhcmVudDogZnVuY3Rpb24gZ2V0UGFyZW50KCkge1xuICAgICAgcmV0dXJuIGxvY2FsUGFyZW50O1xuICAgIH0sXG4gICAgY3JlYXRlVVJMOiBmdW5jdGlvbiBjcmVhdGVVUkwobmV4dFN0YXRlKSB7XG4gICAgICByZXR1cm4gbG9jYWxJbnN0YW50U2VhcmNoSW5zdGFuY2UuX2NyZWF0ZVVSTChfZGVmaW5lUHJvcGVydHkoe30sIGluZGV4SWQsIGdldExvY2FsV2lkZ2V0c1VpU3RhdGUobG9jYWxXaWRnZXRzLCB7XG4gICAgICAgIHNlYXJjaFBhcmFtZXRlcnM6IG5leHRTdGF0ZSxcbiAgICAgICAgaGVscGVyOiBoZWxwZXJcbiAgICAgIH0pKSk7XG4gICAgfSxcbiAgICBnZXRXaWRnZXRzOiBmdW5jdGlvbiBnZXRXaWRnZXRzKCkge1xuICAgICAgcmV0dXJuIGxvY2FsV2lkZ2V0cztcbiAgICB9LFxuICAgIGFkZFdpZGdldHM6IGZ1bmN0aW9uIGFkZFdpZGdldHMod2lkZ2V0cykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHdpZGdldHMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSBgYWRkV2lkZ2V0c2AgbWV0aG9kIGV4cGVjdHMgYW4gYXJyYXkgb2Ygd2lkZ2V0cy4nKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aWRnZXRzLnNvbWUoZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHdpZGdldC5pbml0ICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB3aWRnZXQucmVuZGVyICE9PSAnZnVuY3Rpb24nO1xuICAgICAgfSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHdpdGhVc2FnZSgnVGhlIHdpZGdldCBkZWZpbml0aW9uIGV4cGVjdHMgYSBgcmVuZGVyYCBhbmQvb3IgYW4gYGluaXRgIG1ldGhvZC4nKSk7XG4gICAgICB9XG5cbiAgICAgIGxvY2FsV2lkZ2V0cyA9IGxvY2FsV2lkZ2V0cy5jb25jYXQod2lkZ2V0cyk7XG5cbiAgICAgIGlmIChsb2NhbEluc3RhbnRTZWFyY2hJbnN0YW5jZSAmJiBCb29sZWFuKHdpZGdldHMubGVuZ3RoKSkge1xuICAgICAgICBwcml2YXRlSGVscGVyU2V0U3RhdGUoaGVscGVyLCB7XG4gICAgICAgICAgc3RhdGU6IGdldExvY2FsV2lkZ2V0c1NlYXJjaFBhcmFtZXRlcnMobG9jYWxXaWRnZXRzLCB7XG4gICAgICAgICAgICB1aVN0YXRlOiBsb2NhbFVpU3RhdGUsXG4gICAgICAgICAgICBpbml0aWFsU2VhcmNoUGFyYW1ldGVyczogaGVscGVyLnN0YXRlXG4gICAgICAgICAgfSksXG4gICAgICAgICAgX3VpU3RhdGU6IGxvY2FsVWlTdGF0ZVxuICAgICAgICB9KTsgLy8gV2UgY29tcHV0ZSB0aGUgcmVuZGVyIHN0YXRlIGJlZm9yZSBjYWxsaW5nIGBpbml0YCBpbiBhIHNlcGFyYXRlIGxvb3BcbiAgICAgICAgLy8gdG8gY29uc3RydWN0IHRoZSB3aG9sZSByZW5kZXIgc3RhdGUgb2JqZWN0IHRoYXQgaXMgdGhlbiBwYXNzZWQgdG9cbiAgICAgICAgLy8gYGluaXRgLlxuXG4gICAgICAgIHdpZGdldHMuZm9yRWFjaChmdW5jdGlvbiAod2lkZ2V0KSB7XG4gICAgICAgICAgaWYgKHdpZGdldC5nZXRSZW5kZXJTdGF0ZSkge1xuICAgICAgICAgICAgdmFyIHJlbmRlclN0YXRlID0gd2lkZ2V0LmdldFJlbmRlclN0YXRlKGxvY2FsSW5zdGFudFNlYXJjaEluc3RhbmNlLnJlbmRlclN0YXRlW190aGlzLmdldEluZGV4SWQoKV0gfHwge30sIGNyZWF0ZUluaXRBcmdzKGxvY2FsSW5zdGFudFNlYXJjaEluc3RhbmNlLCBfdGhpcywgbG9jYWxJbnN0YW50U2VhcmNoSW5zdGFuY2UuX2luaXRpYWxVaVN0YXRlKSk7XG4gICAgICAgICAgICBzdG9yZVJlbmRlclN0YXRlKHtcbiAgICAgICAgICAgICAgcmVuZGVyU3RhdGU6IHJlbmRlclN0YXRlLFxuICAgICAgICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2U6IGxvY2FsSW5zdGFudFNlYXJjaEluc3RhbmNlLFxuICAgICAgICAgICAgICBwYXJlbnQ6IF90aGlzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3aWRnZXRzLmZvckVhY2goZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICAgIGlmICh3aWRnZXQuaW5pdCkge1xuICAgICAgICAgICAgd2lkZ2V0LmluaXQoY3JlYXRlSW5pdEFyZ3MobG9jYWxJbnN0YW50U2VhcmNoSW5zdGFuY2UsIF90aGlzLCBsb2NhbEluc3RhbnRTZWFyY2hJbnN0YW5jZS5faW5pdGlhbFVpU3RhdGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsb2NhbEluc3RhbnRTZWFyY2hJbnN0YW5jZS5zY2hlZHVsZVNlYXJjaCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHJlbW92ZVdpZGdldHM6IGZ1bmN0aW9uIHJlbW92ZVdpZGdldHMod2lkZ2V0cykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh3aWRnZXRzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYHJlbW92ZVdpZGdldHNgIG1ldGhvZCBleHBlY3RzIGFuIGFycmF5IG9mIHdpZGdldHMuJykpO1xuICAgICAgfVxuXG4gICAgICBpZiAod2lkZ2V0cy5zb21lKGZ1bmN0aW9uICh3aWRnZXQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB3aWRnZXQuZGlzcG9zZSAhPT0gJ2Z1bmN0aW9uJztcbiAgICAgIH0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih3aXRoVXNhZ2UoJ1RoZSB3aWRnZXQgZGVmaW5pdGlvbiBleHBlY3RzIGEgYGRpc3Bvc2VgIG1ldGhvZC4nKSk7XG4gICAgICB9XG5cbiAgICAgIGxvY2FsV2lkZ2V0cyA9IGxvY2FsV2lkZ2V0cy5maWx0ZXIoZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICByZXR1cm4gd2lkZ2V0cy5pbmRleE9mKHdpZGdldCkgPT09IC0xO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChsb2NhbEluc3RhbnRTZWFyY2hJbnN0YW5jZSAmJiBCb29sZWFuKHdpZGdldHMubGVuZ3RoKSkge1xuICAgICAgICB2YXIgbmV4dFN0YXRlID0gd2lkZ2V0cy5yZWR1Y2UoZnVuY3Rpb24gKHN0YXRlLCB3aWRnZXQpIHtcbiAgICAgICAgICAvLyB0aGUgYGRpc3Bvc2VgIG1ldGhvZCBleGlzdHMgYXQgdGhpcyBwb2ludCB3ZSBhbHJlYWR5IGFzc2VydCBpdFxuICAgICAgICAgIHZhciBuZXh0ID0gd2lkZ2V0LmRpc3Bvc2Uoe1xuICAgICAgICAgICAgaGVscGVyOiBoZWxwZXIsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBwYXJlbnQ6IF90aGlzMlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBuZXh0IHx8IHN0YXRlO1xuICAgICAgICB9LCBoZWxwZXIuc3RhdGUpO1xuICAgICAgICBsb2NhbFVpU3RhdGUgPSBnZXRMb2NhbFdpZGdldHNVaVN0YXRlKGxvY2FsV2lkZ2V0cywge1xuICAgICAgICAgIHNlYXJjaFBhcmFtZXRlcnM6IG5leHRTdGF0ZSxcbiAgICAgICAgICBoZWxwZXI6IGhlbHBlclxuICAgICAgICB9KTtcbiAgICAgICAgaGVscGVyLnNldFN0YXRlKGdldExvY2FsV2lkZ2V0c1NlYXJjaFBhcmFtZXRlcnMobG9jYWxXaWRnZXRzLCB7XG4gICAgICAgICAgdWlTdGF0ZTogbG9jYWxVaVN0YXRlLFxuICAgICAgICAgIGluaXRpYWxTZWFyY2hQYXJhbWV0ZXJzOiBuZXh0U3RhdGVcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGlmIChsb2NhbFdpZGdldHMubGVuZ3RoKSB7XG4gICAgICAgICAgbG9jYWxJbnN0YW50U2VhcmNoSW5zdGFuY2Uuc2NoZWR1bGVTZWFyY2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoX3JlZjIpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzLFxuICAgICAgICAgIF9pbnN0YW50U2VhcmNoSW5zdGFuYztcblxuICAgICAgdmFyIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IF9yZWYyLmluc3RhbnRTZWFyY2hJbnN0YW5jZSxcbiAgICAgICAgICBwYXJlbnQgPSBfcmVmMi5wYXJlbnQsXG4gICAgICAgICAgdWlTdGF0ZSA9IF9yZWYyLnVpU3RhdGU7XG5cbiAgICAgIGlmIChoZWxwZXIgIT09IG51bGwpIHtcbiAgICAgICAgLy8gaGVscGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQsIHRoZXJlZm9yZSB3ZSBkbyBub3QgbmVlZCB0byBzZXQgdXBcbiAgICAgICAgLy8gYW55IGxpc3RlbmVyc1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxvY2FsSW5zdGFudFNlYXJjaEluc3RhbmNlID0gaW5zdGFudFNlYXJjaEluc3RhbmNlO1xuICAgICAgbG9jYWxQYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBsb2NhbFVpU3RhdGUgPSB1aVN0YXRlW2luZGV4SWRdIHx8IHt9OyAvLyBUaGUgYG1haW5IZWxwZXJgIGlzIGFscmVhZHkgZGVmaW5lZCBhdCB0aGlzIHBvaW50LiBUaGUgaW5zdGFuY2UgaXMgY3JlYXRlZFxuICAgICAgLy8gaW5zaWRlIEluc3RhbnRTZWFyY2ggYXQgdGhlIGBzdGFydGAgbWV0aG9kLCB3aGljaCBvY2N1cnMgYmVmb3JlIHRoZSBgaW5pdGBcbiAgICAgIC8vIHN0ZXAuXG5cbiAgICAgIHZhciBtYWluSGVscGVyID0gaW5zdGFudFNlYXJjaEluc3RhbmNlLm1haW5IZWxwZXI7XG4gICAgICB2YXIgcGFyYW1ldGVycyA9IGdldExvY2FsV2lkZ2V0c1NlYXJjaFBhcmFtZXRlcnMobG9jYWxXaWRnZXRzLCB7XG4gICAgICAgIHVpU3RhdGU6IGxvY2FsVWlTdGF0ZSxcbiAgICAgICAgaW5pdGlhbFNlYXJjaFBhcmFtZXRlcnM6IG5ldyBhbGdvbGlhc2VhcmNoSGVscGVyLlNlYXJjaFBhcmFtZXRlcnMoe1xuICAgICAgICAgIGluZGV4OiBpbmRleE5hbWVcbiAgICAgICAgfSlcbiAgICAgIH0pOyAvLyBUaGlzIEhlbHBlciBpcyBvbmx5IHVzZWQgZm9yIHN0YXRlIG1hbmFnZW1lbnQgd2UgZG8gbm90IGNhcmUgYWJvdXQgdGhlXG4gICAgICAvLyBgc2VhcmNoQ2xpZW50YC4gT25seSB0aGUgXCJtYWluXCIgSGVscGVyIGNyZWF0ZWQgYXQgdGhlIGBJbnN0YW50U2VhcmNoYFxuICAgICAgLy8gbGV2ZWwgaXMgYXdhcmUgb2YgdGhlIGNsaWVudC5cblxuICAgICAgaGVscGVyID0gYWxnb2xpYXNlYXJjaEhlbHBlcih7fSwgcGFyYW1ldGVycy5pbmRleCwgcGFyYW1ldGVycyk7IC8vIFdlIGZvcndhcmQgdGhlIGNhbGwgdG8gYHNlYXJjaGAgdG8gdGhlIFwibWFpblwiIGluc3RhbmNlIG9mIHRoZSBIZWxwZXJcbiAgICAgIC8vIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyB0aGUgcXVlcmllcyAoaXQncyB0aGUgb25seSBvbmUgdGhhdCBpc1xuICAgICAgLy8gYXdhcmUgb2YgdGhlIGBzZWFyY2hDbGllbnRgKS5cblxuICAgICAgaGVscGVyLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGluc3RhbnRTZWFyY2hJbnN0YW5jZS5vblN0YXRlQ2hhbmdlKSB7XG4gICAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlLm9uU3RhdGVDaGFuZ2Uoe1xuICAgICAgICAgICAgdWlTdGF0ZTogaW5zdGFudFNlYXJjaEluc3RhbmNlLm1haW5JbmRleC5nZXRXaWRnZXRVaVN0YXRlKHt9KSxcbiAgICAgICAgICAgIHNldFVpU3RhdGU6IGZ1bmN0aW9uIHNldFVpU3RhdGUobmV4dFN0YXRlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpbnN0YW50U2VhcmNoSW5zdGFuY2Uuc2V0VWlTdGF0ZShuZXh0U3RhdGUsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTsgLy8gV2UgZG9uJ3QgdHJpZ2dlciBhIHNlYXJjaCB3aGVuIGNvbnRyb2xsZWQgYmVjYXVzZSBpdCBiZWNvbWVzIHRoZVxuICAgICAgICAgIC8vIHJlc3BvbnNpYmlsaXR5IG9mIGBzZXRVaVN0YXRlYC5cblxuICAgICAgICAgIHJldHVybiBtYWluSGVscGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1haW5IZWxwZXIuc2VhcmNoKCk7XG4gICAgICB9O1xuXG4gICAgICBoZWxwZXIuc2VhcmNoV2l0aG91dFRyaWdnZXJpbmdPblN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbWFpbkhlbHBlci5zZWFyY2goKTtcbiAgICAgIH07IC8vIFdlIHVzZSB0aGUgc2FtZSBwYXR0ZXJuIGZvciB0aGUgYHNlYXJjaEZvckZhY2V0VmFsdWVzYC5cblxuXG4gICAgICBoZWxwZXIuc2VhcmNoRm9yRmFjZXRWYWx1ZXMgPSBmdW5jdGlvbiAoZmFjZXROYW1lLCBmYWNldFZhbHVlLCBtYXhGYWNldEhpdHMsIHVzZXJTdGF0ZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSBoZWxwZXIuc3RhdGUuc2V0UXVlcnlQYXJhbWV0ZXJzKHVzZXJTdGF0ZSk7XG4gICAgICAgIHJldHVybiBtYWluSGVscGVyLnNlYXJjaEZvckZhY2V0VmFsdWVzKGZhY2V0TmFtZSwgZmFjZXRWYWx1ZSwgbWF4RmFjZXRIaXRzLCBzdGF0ZSk7XG4gICAgICB9O1xuXG4gICAgICBkZXJpdmVkSGVscGVyID0gbWFpbkhlbHBlci5kZXJpdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbWVyZ2VTZWFyY2hQYXJhbWV0ZXJzLmFwcGx5KHZvaWQgMCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlc29sdmVTZWFyY2hQYXJhbWV0ZXJzKF90aGlzMykpKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGluZGV4SW5pdGlhbFJlc3VsdHMgPSAoX2luc3RhbnRTZWFyY2hJbnN0YW5jID0gaW5zdGFudFNlYXJjaEluc3RhbmNlLl9pbml0aWFsUmVzdWx0cykgPT09IG51bGwgfHwgX2luc3RhbnRTZWFyY2hJbnN0YW5jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW5zdGFudFNlYXJjaEluc3RhbmNbdGhpcy5nZXRJbmRleElkKCldO1xuXG4gICAgICBpZiAoaW5kZXhJbml0aWFsUmVzdWx0cykge1xuICAgICAgICAvLyBXZSByZXN0b3JlIHRoZSBzaGFwZSBvZiB0aGUgcmVzdWx0cyBwcm92aWRlZCB0byB0aGUgaW5zdGFuY2UgdG8gcmVzcGVjdFxuICAgICAgICAvLyB0aGUgaGVscGVyJ3Mgc3RydWN0dXJlLlxuICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBhbGdvbGlhc2VhcmNoSGVscGVyLlNlYXJjaFJlc3VsdHMobmV3IGFsZ29saWFzZWFyY2hIZWxwZXIuU2VhcmNoUGFyYW1ldGVycyhpbmRleEluaXRpYWxSZXN1bHRzLnN0YXRlKSwgaW5kZXhJbml0aWFsUmVzdWx0cy5yZXN1bHRzKTtcbiAgICAgICAgZGVyaXZlZEhlbHBlci5sYXN0UmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgICAgIGhlbHBlci5sYXN0UmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgICB9IC8vIFN1YnNjcmliZSB0byB0aGUgSGVscGVyIHN0YXRlIGNoYW5nZXMgZm9yIHRoZSBwYWdlIGJlZm9yZSB3aWRnZXRzXG4gICAgICAvLyBhcmUgaW5pdGlhbGl6ZWQuIFRoaXMgYmVoYXZpb3IgbWltaWNzIHRoZSBvcmlnaW5hbCBvbmUgb2YgdGhlIEhlbHBlci5cbiAgICAgIC8vIEl0IG1ha2VzIHNlbnNlIHRvIHJlcGxpY2F0ZSBpdCBhdCB0aGUgYGluaXRgIHN0ZXAuIFdlIGhhdmUgYW5vdGhlclxuICAgICAgLy8gbGlzdGVuZXIgb24gYGNoYW5nZWAgYmVsb3csIG9uY2UgYGluaXRgIGlzIGRvbmUuXG5cblxuICAgICAgaGVscGVyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgdmFyIGlzUGFnZVJlc2V0ID0gX3JlZjMuaXNQYWdlUmVzZXQ7XG5cbiAgICAgICAgaWYgKGlzUGFnZVJlc2V0KSB7XG4gICAgICAgICAgcmVzZXRQYWdlRnJvbVdpZGdldHMobG9jYWxXaWRnZXRzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBkZXJpdmVkSGVscGVyLm9uKCdzZWFyY2gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFRoZSBpbmRleCBkb2VzIG5vdCBtYW5hZ2UgdGhlIFwic3RhbGVuZXNzXCIgb2YgdGhlIHNlYXJjaC4gVGhpcyBpcyB0aGVcbiAgICAgICAgLy8gcmVzcG9uc2liaWxpdHkgb2YgdGhlIG1haW4gaW5zdGFuY2UuIEl0IGRvZXMgbm90IG1ha2Ugc2Vuc2UgdG8gbWFuYWdlXG4gICAgICAgIC8vIGl0IGF0IHRoZSBpbmRleCBsZXZlbCBiZWNhdXNlIGl0J3MgZWl0aGVyOiBhbGwgb2YgdGhlbSBvciBub25lIG9mIHRoZW1cbiAgICAgICAgLy8gdGhhdCBhcmUgc3RhbGxlZC4gVGhlIHF1ZXJpZXMgYXJlIHBlcmZvcm1lZCBpbnRvIGEgc2luZ2xlIG5ldHdvcmsgcmVxdWVzdC5cbiAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlLnNjaGVkdWxlU3RhbGxlZFJlbmRlcigpO1xuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGNoZWNrSW5kZXhVaVN0YXRlKHtcbiAgICAgICAgICAgIGluZGV4OiBfdGhpczMsXG4gICAgICAgICAgICBpbmRleFVpU3RhdGU6IGxvY2FsVWlTdGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGRlcml2ZWRIZWxwZXIub24oJ3Jlc3VsdCcsIGZ1bmN0aW9uIChfcmVmNCkge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IF9yZWY0LnJlc3VsdHM7XG4gICAgICAgIC8vIFRoZSBpbmRleCBkb2VzIG5vdCByZW5kZXIgdGhlIHJlc3VsdHMgaXQgc2NoZWR1bGVzIGEgbmV3IHJlbmRlclxuICAgICAgICAvLyB0byBsZXQgYWxsIHRoZSBvdGhlciBpbmRpY2VzIGVtaXQgdGhlaXIgb3duIHJlc3VsdHMuIEl0IGFsbG93cyB1cyB0b1xuICAgICAgICAvLyBydW4gdGhlIHJlbmRlciBwcm9jZXNzIGluIG9uZSBwYXNzLlxuICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2Uuc2NoZWR1bGVSZW5kZXIoKTsgLy8gdGhlIGRlcml2ZWQgaGVscGVyIGlzIHRoZSBvbmUgd2hpY2ggYWN0dWFsbHkgc2VhcmNoZXMsIGJ1dCB0aGUgaGVscGVyXG4gICAgICAgIC8vIHdoaWNoIGlzIGV4cG9zZWQgZS5nLiB2aWEgaW5zdGFuY2UuaGVscGVyLCBkb2Vzbid0IHNlYXJjaCwgYW5kIHRodXNcbiAgICAgICAgLy8gZG9lcyBub3QgaGF2ZSBhY2Nlc3MgdG8gbGFzdFJlc3VsdHMsIHdoaWNoIGl0IHVzZWQgdG8gaW4gcHJlLWZlZGVyYXRlZFxuICAgICAgICAvLyBzZWFyY2ggYmVoYXZpb3IuXG5cbiAgICAgICAgaGVscGVyLmxhc3RSZXN1bHRzID0gcmVzdWx0cztcbiAgICAgIH0pOyAvLyBXZSBjb21wdXRlIHRoZSByZW5kZXIgc3RhdGUgYmVmb3JlIGNhbGxpbmcgYGluaXRgIGluIGEgc2VwYXJhdGUgbG9vcFxuICAgICAgLy8gdG8gY29uc3RydWN0IHRoZSB3aG9sZSByZW5kZXIgc3RhdGUgb2JqZWN0IHRoYXQgaXMgdGhlbiBwYXNzZWQgdG9cbiAgICAgIC8vIGBpbml0YC5cblxuICAgICAgbG9jYWxXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICBpZiAod2lkZ2V0LmdldFJlbmRlclN0YXRlKSB7XG4gICAgICAgICAgdmFyIHJlbmRlclN0YXRlID0gd2lkZ2V0LmdldFJlbmRlclN0YXRlKGluc3RhbnRTZWFyY2hJbnN0YW5jZS5yZW5kZXJTdGF0ZVtfdGhpczMuZ2V0SW5kZXhJZCgpXSB8fCB7fSwgY3JlYXRlSW5pdEFyZ3MoaW5zdGFudFNlYXJjaEluc3RhbmNlLCBfdGhpczMsIHVpU3RhdGUpKTtcbiAgICAgICAgICBzdG9yZVJlbmRlclN0YXRlKHtcbiAgICAgICAgICAgIHJlbmRlclN0YXRlOiByZW5kZXJTdGF0ZSxcbiAgICAgICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZTogaW5zdGFudFNlYXJjaEluc3RhbmNlLFxuICAgICAgICAgICAgcGFyZW50OiBfdGhpczNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsb2NhbFdpZGdldHMuZm9yRWFjaChmdW5jdGlvbiAod2lkZ2V0KSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyggLy8gaWYgaXQgaGFzIE5PIGdldFdpZGdldFN0YXRlIG9yIGlmIGl0IGhhcyBnZXRXaWRnZXRVaVN0YXRlLCB3ZSBkb24ndCB3YXJuXG4gICAgICAgIC8vIGFrYSB3ZSB3YXJuIGlmIHRoZXJlJ3MgX29ubHlfIGdldFdpZGdldFN0YXRlXG4gICAgICAgICF3aWRnZXQuZ2V0V2lkZ2V0U3RhdGUgfHwgQm9vbGVhbih3aWRnZXQuZ2V0V2lkZ2V0VWlTdGF0ZSksICdUaGUgYGdldFdpZGdldFN0YXRlYCBtZXRob2QgaXMgcmVuYW1lZCBgZ2V0V2lkZ2V0VWlTdGF0ZWAgYW5kIHdpbGwgbm8gbG9uZ2VyIGV4aXN0IHVuZGVyIHRoYXQgbmFtZSBpbiBJbnN0YW50U2VhcmNoLmpzIDUueC4gUGxlYXNlIHVzZSBgZ2V0V2lkZ2V0VWlTdGF0ZWAgaW5zdGVhZC4nKSA6IHZvaWQgMDtcblxuICAgICAgICBpZiAod2lkZ2V0LmluaXQpIHtcbiAgICAgICAgICB3aWRnZXQuaW5pdChjcmVhdGVJbml0QXJncyhpbnN0YW50U2VhcmNoSW5zdGFuY2UsIF90aGlzMywgdWlTdGF0ZSkpO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gU3Vic2NyaWJlIHRvIHRoZSBIZWxwZXIgc3RhdGUgY2hhbmdlcyBmb3IgdGhlIGB1aVN0YXRlYCBvbmNlIHdpZGdldHNcbiAgICAgIC8vIGFyZSBpbml0aWFsaXplZC4gVW50aWwgdGhlIGZpcnN0IHJlbmRlciwgc3RhdGUgY2hhbmdlcyBhcmUgcGFydCBvZiB0aGVcbiAgICAgIC8vIGNvbmZpZ3VyYXRpb24gc3RlcC4gVGhpcyBpcyBtYWlubHkgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBjdXN0b21cbiAgICAgIC8vIHdpZGdldHMuIFdoZW4gdGhlIHN1YnNjcmlwdGlvbiBoYXBwZW5zIGJlZm9yZSB0aGUgYGluaXRgIHN0ZXAsIHRoZSAoc3RhdGljKVxuICAgICAgLy8gY29uZmlndXJhdGlvbiBvZiB0aGUgd2lkZ2V0IGlzIHB1c2hlZCBpbiB0aGUgVVJMLiBUaGF0J3Mgd2hhdCB3ZSB3YW50IHRvIGF2b2lkLlxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FsZ29saWEvaW5zdGFudHNlYXJjaC5qcy9wdWxsLzk5NC9jb21taXRzLzRhNjcyYWUzZmQ3ODgwOWUyMTNkZTAzNjg1NDllZjEyZTlkYzk0NTRcblxuICAgICAgaGVscGVyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gZXZlbnQuc3RhdGU7XG4gICAgICAgIHZhciBfdWlTdGF0ZSA9IGV2ZW50Ll91aVN0YXRlO1xuICAgICAgICBsb2NhbFVpU3RhdGUgPSBnZXRMb2NhbFdpZGdldHNVaVN0YXRlKGxvY2FsV2lkZ2V0cywge1xuICAgICAgICAgIHNlYXJjaFBhcmFtZXRlcnM6IHN0YXRlLFxuICAgICAgICAgIGhlbHBlcjogaGVscGVyXG4gICAgICAgIH0sIF91aVN0YXRlIHx8IHt9KTsgLy8gV2UgZG9uJ3QgdHJpZ2dlciBhbiBpbnRlcm5hbCBjaGFuZ2Ugd2hlbiBjb250cm9sbGVkIGJlY2F1c2UgaXRcbiAgICAgICAgLy8gYmVjb21lcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgYHNldFVpU3RhdGVgLlxuXG4gICAgICAgIGlmICghaW5zdGFudFNlYXJjaEluc3RhbmNlLm9uU3RhdGVDaGFuZ2UpIHtcbiAgICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2Uub25JbnRlcm5hbFN0YXRlQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaW5kZXhJbml0aWFsUmVzdWx0cykge1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgaW5pdGlhbCByZXN1bHRzLCB3ZSdyZSBub3Qgbm90aWZpZWQgb2YgdGhlIG5leHQgcmVzdWx0c1xuICAgICAgICAvLyBiZWNhdXNlIHdlIGRvbid0IHRyaWdnZXIgYW4gaW5pdGlhbCBzZWFyY2guIFdlIHRoZXJlZm9yZSBuZWVkIHRvIGRpcmVjdGx5XG4gICAgICAgIC8vIHNjaGVkdWxlIGEgcmVuZGVyIHRoYXQgd2lsbCByZW5kZXIgdGhlIHJlc3VsdHMgaW5qZWN0ZWQgb24gdGhlIGhlbHBlci5cbiAgICAgICAgaW5zdGFudFNlYXJjaEluc3RhbmNlLnNjaGVkdWxlUmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihfcmVmNSkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSBfcmVmNS5pbnN0YW50U2VhcmNoSW5zdGFuY2U7XG5cbiAgICAgIGlmICghdGhpcy5nZXRSZXN1bHRzKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsb2NhbFdpZGdldHMuZm9yRWFjaChmdW5jdGlvbiAod2lkZ2V0KSB7XG4gICAgICAgIGlmICh3aWRnZXQuZ2V0UmVuZGVyU3RhdGUpIHtcbiAgICAgICAgICB2YXIgcmVuZGVyU3RhdGUgPSB3aWRnZXQuZ2V0UmVuZGVyU3RhdGUoaW5zdGFudFNlYXJjaEluc3RhbmNlLnJlbmRlclN0YXRlW190aGlzNC5nZXRJbmRleElkKCldIHx8IHt9LCBjcmVhdGVSZW5kZXJBcmdzKGluc3RhbnRTZWFyY2hJbnN0YW5jZSwgX3RoaXM0KSk7XG4gICAgICAgICAgc3RvcmVSZW5kZXJTdGF0ZSh7XG4gICAgICAgICAgICByZW5kZXJTdGF0ZTogcmVuZGVyU3RhdGUsXG4gICAgICAgICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2U6IGluc3RhbnRTZWFyY2hJbnN0YW5jZSxcbiAgICAgICAgICAgIHBhcmVudDogX3RoaXM0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbG9jYWxXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCBhbGwgdGhlIHZhcmlhYmxlcyB1c2VkIGJlbG93IGFyZSBzZXQuIEJvdGggYGhlbHBlcmBcbiAgICAgICAgLy8gYW5kIGBkZXJpdmVkSGVscGVyYCBoYXZlIGJlZW4gY3JlYXRlZCBhdCB0aGUgYGluaXRgIHN0ZXAuIFRoZSBhdHRyaWJ1dGVcbiAgICAgICAgLy8gYGxhc3RSZXN1bHRzYCBtaWdodCBiZSBgbnVsbGAgdGhvdWdoLiBJdCdzIHBvc3NpYmxlIHRoYXQgYSBzdGFsbGVkIHJlbmRlclxuICAgICAgICAvLyBoYXBwZW5zIGJlZm9yZSB0aGUgcmVzdWx0IGUuZyB3aXRoIGEgZHluYW1pY2FsbHkgYWRkZWQgaW5kZXggdGhlIHJlcXVlc3QgbWlnaHRcbiAgICAgICAgLy8gYmUgZGVsYXllZC4gVGhlIHJlbmRlciBpcyB0cmlnZ2VyZWQgZm9yIHRoZSBjb21wbGV0ZSB0cmVlIGJ1dCBzb21lIHBhcnRzIGRvXG4gICAgICAgIC8vIG5vdCBoYXZlIHJlc3VsdHMgeWV0LlxuICAgICAgICBpZiAod2lkZ2V0LnJlbmRlcikge1xuICAgICAgICAgIHdpZGdldC5yZW5kZXIoY3JlYXRlUmVuZGVyQXJncyhpbnN0YW50U2VhcmNoSW5zdGFuY2UsIF90aGlzNCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgbG9jYWxXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24gKHdpZGdldCkge1xuICAgICAgICBpZiAod2lkZ2V0LmRpc3Bvc2UpIHtcbiAgICAgICAgICAvLyBUaGUgZGlzcG9zZSBmdW5jdGlvbiBpcyBhbHdheXMgY2FsbGVkIG9uY2UgdGhlIGluc3RhbmNlIGlzIHN0YXJ0ZWRcbiAgICAgICAgICAvLyAoaXQncyBhbiBlZmZlY3Qgb2YgYHJlbW92ZVdpZGdldHNgKS4gVGhlIGluZGV4IGlzIGluaXRpYWxpemVkIGFuZFxuICAgICAgICAgIC8vIHRoZSBIZWxwZXIgaXMgYXZhaWxhYmxlLiBXZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXR1cm4gdmFsdWUgb2ZcbiAgICAgICAgICAvLyBgZGlzcG9zZWAgYmVjYXVzZSB0aGUgaW5kZXggaXMgcmVtb3ZlZC4gV2UgY2FuJ3QgY2FsbCBgcmVtb3ZlV2lkZ2V0c2BcbiAgICAgICAgICAvLyBiZWNhdXNlIHdlIHdhbnQgdG8ga2VlcCB0aGUgd2lkZ2V0cyBvbiB0aGUgaW5zdGFuY2UsIHRvIGFsbG93IGlkZW1wb3RlbnRcbiAgICAgICAgICAvLyBvcGVyYXRpb25zIG9uIGBhZGRgICYgYHJlbW92ZWAuXG4gICAgICAgICAgd2lkZ2V0LmRpc3Bvc2Uoe1xuICAgICAgICAgICAgaGVscGVyOiBoZWxwZXIsXG4gICAgICAgICAgICBzdGF0ZTogaGVscGVyLnN0YXRlLFxuICAgICAgICAgICAgcGFyZW50OiBfdGhpczVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsb2NhbEluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IG51bGw7XG4gICAgICBsb2NhbFBhcmVudCA9IG51bGw7XG4gICAgICBoZWxwZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICBoZWxwZXIgPSBudWxsO1xuICAgICAgZGVyaXZlZEhlbHBlci5kZXRhY2goKTtcbiAgICAgIGRlcml2ZWRIZWxwZXIgPSBudWxsO1xuICAgIH0sXG4gICAgZ2V0V2lkZ2V0VWlTdGF0ZTogZnVuY3Rpb24gZ2V0V2lkZ2V0VWlTdGF0ZSh1aVN0YXRlKSB7XG4gICAgICByZXR1cm4gbG9jYWxXaWRnZXRzLmZpbHRlcihpc0luZGV4V2lkZ2V0KS5yZWR1Y2UoZnVuY3Rpb24gKHByZXZpb3VzVWlTdGF0ZSwgaW5uZXJJbmRleCkge1xuICAgICAgICByZXR1cm4gaW5uZXJJbmRleC5nZXRXaWRnZXRVaVN0YXRlKHByZXZpb3VzVWlTdGF0ZSk7XG4gICAgICB9LCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHVpU3RhdGUpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCB0aGlzLmdldEluZGV4SWQoKSwgbG9jYWxVaVN0YXRlKSkpO1xuICAgIH0sXG4gICAgZ2V0V2lkZ2V0U3RhdGU6IGZ1bmN0aW9uIGdldFdpZGdldFN0YXRlKHVpU3RhdGUpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gd2FybmluZyhmYWxzZSwgJ1RoZSBgZ2V0V2lkZ2V0U3RhdGVgIG1ldGhvZCBpcyByZW5hbWVkIGBnZXRXaWRnZXRVaVN0YXRlYCBhbmQgd2lsbCBubyBsb25nZXIgZXhpc3QgdW5kZXIgdGhhdCBuYW1lIGluIEluc3RhbnRTZWFyY2guanMgNS54LiBQbGVhc2UgdXNlIGBnZXRXaWRnZXRVaVN0YXRlYCBpbnN0ZWFkLicpIDogdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0V2lkZ2V0VWlTdGF0ZSh1aVN0YXRlKTtcbiAgICB9LFxuICAgIGdldFdpZGdldFNlYXJjaFBhcmFtZXRlcnM6IGZ1bmN0aW9uIGdldFdpZGdldFNlYXJjaFBhcmFtZXRlcnMoc2VhcmNoUGFyYW1ldGVycywgX3JlZjYpIHtcbiAgICAgIHZhciB1aVN0YXRlID0gX3JlZjYudWlTdGF0ZTtcbiAgICAgIHJldHVybiBnZXRMb2NhbFdpZGdldHNTZWFyY2hQYXJhbWV0ZXJzKGxvY2FsV2lkZ2V0cywge1xuICAgICAgICB1aVN0YXRlOiB1aVN0YXRlLFxuICAgICAgICBpbml0aWFsU2VhcmNoUGFyYW1ldGVyczogc2VhcmNoUGFyYW1ldGVyc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoVWlTdGF0ZTogZnVuY3Rpb24gcmVmcmVzaFVpU3RhdGUoKSB7XG4gICAgICBsb2NhbFVpU3RhdGUgPSBnZXRMb2NhbFdpZGdldHNVaVN0YXRlKGxvY2FsV2lkZ2V0cywge1xuICAgICAgICBzZWFyY2hQYXJhbWV0ZXJzOiB0aGlzLmdldEhlbHBlcigpLnN0YXRlLFxuICAgICAgICBoZWxwZXI6IHRoaXMuZ2V0SGVscGVyKClcbiAgICAgIH0sIGxvY2FsVWlTdGF0ZSk7XG4gICAgfVxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5kZXg7XG5cbmZ1bmN0aW9uIHN0b3JlUmVuZGVyU3RhdGUoX3JlZjcpIHtcbiAgdmFyIHJlbmRlclN0YXRlID0gX3JlZjcucmVuZGVyU3RhdGUsXG4gICAgICBpbnN0YW50U2VhcmNoSW5zdGFuY2UgPSBfcmVmNy5pbnN0YW50U2VhcmNoSW5zdGFuY2UsXG4gICAgICBwYXJlbnQgPSBfcmVmNy5wYXJlbnQ7XG4gIHZhciBwYXJlbnRJbmRleE5hbWUgPSBwYXJlbnQgPyBwYXJlbnQuZ2V0SW5kZXhJZCgpIDogaW5zdGFudFNlYXJjaEluc3RhbmNlLm1haW5JbmRleC5nZXRJbmRleElkKCk7XG4gIGluc3RhbnRTZWFyY2hJbnN0YW5jZS5yZW5kZXJTdGF0ZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5zdGFudFNlYXJjaEluc3RhbmNlLnJlbmRlclN0YXRlKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcGFyZW50SW5kZXhOYW1lLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGluc3RhbnRTZWFyY2hJbnN0YW5jZS5yZW5kZXJTdGF0ZVtwYXJlbnRJbmRleE5hbWVdKSwgcmVuZGVyU3RhdGUpKSk7XG59IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IGgsIHJlbmRlciB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUGFnaW5hdGlvbiBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9QYWdpbmF0aW9uL1BhZ2luYXRpb24uanNcIjtcbmltcG9ydCBjb25uZWN0UGFnaW5hdGlvbiBmcm9tIFwiLi4vLi4vY29ubmVjdG9ycy9wYWdpbmF0aW9uL2Nvbm5lY3RQYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBnZXRDb250YWluZXJOb2RlLCBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvciB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9saWIvc3VpdC5qc1wiO1xudmFyIHN1aXQgPSBjb21wb25lbnQoJ1BhZ2luYXRpb24nKTtcbnZhciB3aXRoVXNhZ2UgPSBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvcih7XG4gIG5hbWU6ICdwYWdpbmF0aW9uJ1xufSk7XG52YXIgZGVmYXVsdFRlbXBsYXRlcyA9IHtcbiAgcHJldmlvdXM6ICfigLknLFxuICBuZXh0OiAn4oC6JyxcbiAgZmlyc3Q6ICfCqycsXG4gIGxhc3Q6ICfCuydcbn07XG5cbnZhciByZW5kZXJlciA9IGZ1bmN0aW9uIHJlbmRlcmVyKF9yZWYpIHtcbiAgdmFyIGNvbnRhaW5lck5vZGUgPSBfcmVmLmNvbnRhaW5lck5vZGUsXG4gICAgICBjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgdGVtcGxhdGVzID0gX3JlZi50ZW1wbGF0ZXMsXG4gICAgICBzaG93Rmlyc3QgPSBfcmVmLnNob3dGaXJzdCxcbiAgICAgIHNob3dMYXN0ID0gX3JlZi5zaG93TGFzdCxcbiAgICAgIHNob3dQcmV2aW91cyA9IF9yZWYuc2hvd1ByZXZpb3VzLFxuICAgICAgc2hvd05leHQgPSBfcmVmLnNob3dOZXh0LFxuICAgICAgc2Nyb2xsVG9Ob2RlID0gX3JlZi5zY3JvbGxUb05vZGU7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZjIsIGlzRmlyc3RSZW5kZXJpbmcpIHtcbiAgICB2YXIgY3JlYXRlVVJMID0gX3JlZjIuY3JlYXRlVVJMLFxuICAgICAgICBjdXJyZW50UmVmaW5lbWVudCA9IF9yZWYyLmN1cnJlbnRSZWZpbmVtZW50LFxuICAgICAgICBuYlBhZ2VzID0gX3JlZjIubmJQYWdlcyxcbiAgICAgICAgcGFnZXMgPSBfcmVmMi5wYWdlcyxcbiAgICAgICAgaXNGaXJzdFBhZ2UgPSBfcmVmMi5pc0ZpcnN0UGFnZSxcbiAgICAgICAgaXNMYXN0UGFnZSA9IF9yZWYyLmlzTGFzdFBhZ2UsXG4gICAgICAgIHJlZmluZSA9IF9yZWYyLnJlZmluZTtcbiAgICBpZiAoaXNGaXJzdFJlbmRlcmluZykgcmV0dXJuO1xuXG4gICAgdmFyIHNldEN1cnJlbnRQYWdlID0gZnVuY3Rpb24gc2V0Q3VycmVudFBhZ2UocGFnZU51bWJlcikge1xuICAgICAgcmVmaW5lKHBhZ2VOdW1iZXIpO1xuXG4gICAgICBpZiAoc2Nyb2xsVG9Ob2RlICE9PSBmYWxzZSkge1xuICAgICAgICBzY3JvbGxUb05vZGUuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmVuZGVyKGgoUGFnaW5hdGlvbiwge1xuICAgICAgY3JlYXRlVVJMOiBjcmVhdGVVUkwsXG4gICAgICBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzLFxuICAgICAgY3VycmVudFBhZ2U6IGN1cnJlbnRSZWZpbmVtZW50LFxuICAgICAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXG4gICAgICBuYlBhZ2VzOiBuYlBhZ2VzLFxuICAgICAgcGFnZXM6IHBhZ2VzLFxuICAgICAgaXNGaXJzdFBhZ2U6IGlzRmlyc3RQYWdlLFxuICAgICAgaXNMYXN0UGFnZTogaXNMYXN0UGFnZSxcbiAgICAgIHNldEN1cnJlbnRQYWdlOiBzZXRDdXJyZW50UGFnZSxcbiAgICAgIHNob3dGaXJzdDogc2hvd0ZpcnN0LFxuICAgICAgc2hvd0xhc3Q6IHNob3dMYXN0LFxuICAgICAgc2hvd1ByZXZpb3VzOiBzaG93UHJldmlvdXMsXG4gICAgICBzaG93TmV4dDogc2hvd05leHRcbiAgICB9KSwgY29udGFpbmVyTm9kZSk7XG4gIH07XG59O1xuXG52YXIgcGFnaW5hdGlvbiA9IGZ1bmN0aW9uIHBhZ2luYXRpb24od2lkZ2V0UGFyYW1zKSB7XG4gIHZhciBfcmVmMyA9IHdpZGdldFBhcmFtcyB8fCB7fSxcbiAgICAgIGNvbnRhaW5lciA9IF9yZWYzLmNvbnRhaW5lcixcbiAgICAgIF9yZWYzJHRlbXBsYXRlcyA9IF9yZWYzLnRlbXBsYXRlcyxcbiAgICAgIHVzZXJUZW1wbGF0ZXMgPSBfcmVmMyR0ZW1wbGF0ZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjMkdGVtcGxhdGVzLFxuICAgICAgX3JlZjMkY3NzQ2xhc3NlcyA9IF9yZWYzLmNzc0NsYXNzZXMsXG4gICAgICB1c2VyQ3NzQ2xhc3NlcyA9IF9yZWYzJGNzc0NsYXNzZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjMkY3NzQ2xhc3NlcyxcbiAgICAgIHRvdGFsUGFnZXMgPSBfcmVmMy50b3RhbFBhZ2VzLFxuICAgICAgcGFkZGluZyA9IF9yZWYzLnBhZGRpbmcsXG4gICAgICBfcmVmMyRzaG93Rmlyc3QgPSBfcmVmMy5zaG93Rmlyc3QsXG4gICAgICBzaG93Rmlyc3QgPSBfcmVmMyRzaG93Rmlyc3QgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmMyRzaG93Rmlyc3QsXG4gICAgICBfcmVmMyRzaG93TGFzdCA9IF9yZWYzLnNob3dMYXN0LFxuICAgICAgc2hvd0xhc3QgPSBfcmVmMyRzaG93TGFzdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYzJHNob3dMYXN0LFxuICAgICAgX3JlZjMkc2hvd1ByZXZpb3VzID0gX3JlZjMuc2hvd1ByZXZpb3VzLFxuICAgICAgc2hvd1ByZXZpb3VzID0gX3JlZjMkc2hvd1ByZXZpb3VzID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjMkc2hvd1ByZXZpb3VzLFxuICAgICAgX3JlZjMkc2hvd05leHQgPSBfcmVmMy5zaG93TmV4dCxcbiAgICAgIHNob3dOZXh0ID0gX3JlZjMkc2hvd05leHQgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmMyRzaG93TmV4dCxcbiAgICAgIF9yZWYzJHNjcm9sbFRvID0gX3JlZjMuc2Nyb2xsVG8sXG4gICAgICB1c2VyU2Nyb2xsVG8gPSBfcmVmMyRzY3JvbGxUbyA9PT0gdm9pZCAwID8gJ2JvZHknIDogX3JlZjMkc2Nyb2xsVG87XG5cbiAgaWYgKCFjb250YWluZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3Iod2l0aFVzYWdlKCdUaGUgYGNvbnRhaW5lcmAgb3B0aW9uIGlzIHJlcXVpcmVkLicpKTtcbiAgfVxuXG4gIHZhciBjb250YWluZXJOb2RlID0gZ2V0Q29udGFpbmVyTm9kZShjb250YWluZXIpO1xuICB2YXIgc2Nyb2xsVG8gPSB1c2VyU2Nyb2xsVG8gPT09IHRydWUgPyAnYm9keScgOiB1c2VyU2Nyb2xsVG87XG4gIHZhciBzY3JvbGxUb05vZGUgPSBzY3JvbGxUbyAhPT0gZmFsc2UgPyBnZXRDb250YWluZXJOb2RlKHNjcm9sbFRvKSA6IGZhbHNlO1xuICB2YXIgY3NzQ2xhc3NlcyA9IHtcbiAgICByb290OiBjeChzdWl0KCksIHVzZXJDc3NDbGFzc2VzLnJvb3QpLFxuICAgIG5vUmVmaW5lbWVudFJvb3Q6IGN4KHN1aXQoe1xuICAgICAgbW9kaWZpZXJOYW1lOiAnbm9SZWZpbmVtZW50J1xuICAgIH0pLCB1c2VyQ3NzQ2xhc3Nlcy5ub1JlZmluZW1lbnRSb290KSxcbiAgICBsaXN0OiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnbGlzdCdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMubGlzdCksXG4gICAgaXRlbTogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ2l0ZW0nXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLml0ZW0pLFxuICAgIGZpcnN0UGFnZUl0ZW06IGN4KHN1aXQoe1xuICAgICAgZGVzY2VuZGFudE5hbWU6ICdpdGVtJyxcbiAgICAgIG1vZGlmaWVyTmFtZTogJ2ZpcnN0UGFnZSdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMuZmlyc3RQYWdlSXRlbSksXG4gICAgbGFzdFBhZ2VJdGVtOiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnaXRlbScsXG4gICAgICBtb2RpZmllck5hbWU6ICdsYXN0UGFnZSdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMubGFzdFBhZ2VJdGVtKSxcbiAgICBwcmV2aW91c1BhZ2VJdGVtOiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnaXRlbScsXG4gICAgICBtb2RpZmllck5hbWU6ICdwcmV2aW91c1BhZ2UnXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLnByZXZpb3VzUGFnZUl0ZW0pLFxuICAgIG5leHRQYWdlSXRlbTogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ2l0ZW0nLFxuICAgICAgbW9kaWZpZXJOYW1lOiAnbmV4dFBhZ2UnXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLm5leHRQYWdlSXRlbSksXG4gICAgcGFnZUl0ZW06IGN4KHN1aXQoe1xuICAgICAgZGVzY2VuZGFudE5hbWU6ICdpdGVtJyxcbiAgICAgIG1vZGlmaWVyTmFtZTogJ3BhZ2UnXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLnBhZ2VJdGVtKSxcbiAgICBzZWxlY3RlZEl0ZW06IGN4KHN1aXQoe1xuICAgICAgZGVzY2VuZGFudE5hbWU6ICdpdGVtJyxcbiAgICAgIG1vZGlmaWVyTmFtZTogJ3NlbGVjdGVkJ1xuICAgIH0pLCB1c2VyQ3NzQ2xhc3Nlcy5zZWxlY3RlZEl0ZW0pLFxuICAgIGRpc2FibGVkSXRlbTogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ2l0ZW0nLFxuICAgICAgbW9kaWZpZXJOYW1lOiAnZGlzYWJsZWQnXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLmRpc2FibGVkSXRlbSksXG4gICAgbGluazogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ2xpbmsnXG4gICAgfSksIHVzZXJDc3NDbGFzc2VzLmxpbmspXG4gIH07XG5cbiAgdmFyIHRlbXBsYXRlcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdFRlbXBsYXRlcyksIHVzZXJUZW1wbGF0ZXMpO1xuXG4gIHZhciBzcGVjaWFsaXplZFJlbmRlcmVyID0gcmVuZGVyZXIoe1xuICAgIGNvbnRhaW5lck5vZGU6IGNvbnRhaW5lck5vZGUsXG4gICAgY3NzQ2xhc3NlczogY3NzQ2xhc3NlcyxcbiAgICB0ZW1wbGF0ZXM6IHRlbXBsYXRlcyxcbiAgICBzaG93Rmlyc3Q6IHNob3dGaXJzdCxcbiAgICBzaG93TGFzdDogc2hvd0xhc3QsXG4gICAgc2hvd1ByZXZpb3VzOiBzaG93UHJldmlvdXMsXG4gICAgc2hvd05leHQ6IHNob3dOZXh0LFxuICAgIHNjcm9sbFRvTm9kZTogc2Nyb2xsVG9Ob2RlXG4gIH0pO1xuICB2YXIgbWFrZVdpZGdldCA9IGNvbm5lY3RQYWdpbmF0aW9uKHNwZWNpYWxpemVkUmVuZGVyZXIsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmVuZGVyKG51bGwsIGNvbnRhaW5lck5vZGUpO1xuICB9KTtcbiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFrZVdpZGdldCh7XG4gICAgdG90YWxQYWdlczogdG90YWxQYWdlcyxcbiAgICBwYWRkaW5nOiBwYWRkaW5nXG4gIH0pKSwge30sIHtcbiAgICAkJHdpZGdldFR5cGU6ICdhaXMucGFnaW5hdGlvbidcbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwYWdpbmF0aW9uOyIsImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuXG52YXIgX3JlZjIgPSBoKFwicGF0aFwiLCB7XG4gIGQ6IFwiTTguMTE0IDEwTC45NDQgMi44MyAwIDEuODg1IDEuODg2IDBsLjk0My45NDNMMTAgOC4xMTNsNy4xNy03LjE3Ljk0NC0uOTQzTDIwIDEuODg2bC0uOTQzLjk0My03LjE3IDcuMTcgNy4xNyA3LjE3Ljk0My45NDRMMTguMTE0IDIwbC0uOTQzLS45NDMtNy4xNy03LjE3LTcuMTcgNy4xNy0uOTQ0Ljk0M0wwIDE4LjExNGwuOTQzLS45NDNMOC4xMTMgMTB6XCJcbn0pO1xuXG52YXIgX3JlZjQgPSBoKFwicGF0aFwiLCB7XG4gIGQ6IFwiTTI2LjgwNCAyOS4wMWMtMi44MzIgMi4zNC02LjQ2NSAzLjc0Ni0xMC40MjYgMy43NDZDNy4zMzMgMzIuNzU2IDAgMjUuNDI0IDAgMTYuMzc4IDAgNy4zMzMgNy4zMzMgMCAxNi4zNzggMGM5LjA0NiAwIDE2LjM3OCA3LjMzMyAxNi4zNzggMTYuMzc4IDAgMy45Ni0xLjQwNiA3LjU5NC0zLjc0NiAxMC40MjZsMTAuNTM0IDEwLjUzNGMuNjA3LjYwNy42MSAxLjU5LS4wMDQgMi4yMDItLjYxLjYxLTEuNTk3LjYxLTIuMjAyLjAwNEwyNi44MDQgMjkuMDF6bS0xMC40MjYuNjI3YzcuMzIzIDAgMTMuMjYtNS45MzYgMTMuMjYtMTMuMjYgMC03LjMyLTUuOTM3LTEzLjI1Ny0xMy4yNi0xMy4yNTdDOS4wNTYgMy4xMiAzLjEyIDkuMDU2IDMuMTIgMTYuMzc4YzAgNy4zMjMgNS45MzYgMTMuMjYgMTMuMjU4IDEzLjI2elwiXG59KTtcblxudmFyIF9yZWY2ID0gaChcImdcIiwge1xuICBmaWxsOiBcIm5vbmVcIixcbiAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiXG59LCBoKFwiZ1wiLCB7XG4gIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMSAxKVwiLFxuICBzdHJva2VXaWR0aDogXCIyXCJcbn0sIGgoXCJjaXJjbGVcIiwge1xuICBzdHJva2VPcGFjaXR5OiBcIi41XCIsXG4gIGN4OiBcIjE4XCIsXG4gIGN5OiBcIjE4XCIsXG4gIHI6IFwiMThcIlxufSksIGgoXCJwYXRoXCIsIHtcbiAgZDogXCJNMzYgMThjMC05Ljk0LTguMDYtMTgtMTgtMThcIlxufSwgaChcImFuaW1hdGVUcmFuc2Zvcm1cIiwge1xuICBhdHRyaWJ1dGVOYW1lOiBcInRyYW5zZm9ybVwiLFxuICB0eXBlOiBcInJvdGF0ZVwiLFxuICBmcm9tOiBcIjAgMTggMThcIixcbiAgdG86IFwiMzYwIDE4IDE4XCIsXG4gIGR1cjogXCIxc1wiLFxuICByZXBlYXRDb3VudDogXCJpbmRlZmluaXRlXCJcbn0pKSkpO1xuXG52YXIgZGVmYXVsdFRlbXBsYXRlID0ge1xuICByZXNldDogZnVuY3Rpb24gcmVzZXQoX3JlZikge1xuICAgIHZhciBjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzO1xuICAgIHJldHVybiBoKFwic3ZnXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yZXNldEljb24sXG4gICAgICB2aWV3Qm94OiBcIjAgMCAyMCAyMFwiLFxuICAgICAgd2lkdGg6IFwiMTBcIixcbiAgICAgIGhlaWdodDogXCIxMFwiXG4gICAgfSwgX3JlZjIpO1xuICB9LFxuICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdChfcmVmMykge1xuICAgIHZhciBjc3NDbGFzc2VzID0gX3JlZjMuY3NzQ2xhc3NlcztcbiAgICByZXR1cm4gaChcInN2Z1wiLCB7XG4gICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMuc3VibWl0SWNvbixcbiAgICAgIHdpZHRoOiBcIjEwXCIsXG4gICAgICBoZWlnaHQ6IFwiMTBcIixcbiAgICAgIHZpZXdCb3g6IFwiMCAwIDQwIDQwXCJcbiAgICB9LCBfcmVmNCk7XG4gIH0sXG4gIGxvYWRpbmdJbmRpY2F0b3I6IGZ1bmN0aW9uIGxvYWRpbmdJbmRpY2F0b3IoX3JlZjUpIHtcbiAgICB2YXIgY3NzQ2xhc3NlcyA9IF9yZWY1LmNzc0NsYXNzZXM7XG4gICAgcmV0dXJuIGgoXCJzdmdcIiwge1xuICAgICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmxvYWRpbmdJY29uLFxuICAgICAgd2lkdGg6IFwiMTZcIixcbiAgICAgIGhlaWdodDogXCIxNlwiLFxuICAgICAgdmlld0JveDogXCIwIDAgMzggMzhcIixcbiAgICAgIHN0cm9rZTogXCIjNDQ0XCJcbiAgICB9LCBfcmVmNik7XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0VGVtcGxhdGU7IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IGgsIHJlbmRlciB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBnZXRDb250YWluZXJOb2RlLCBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvciB9IGZyb20gXCIuLi8uLi9saWIvdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9saWIvc3VpdC5qc1wiO1xuaW1wb3J0IGNvbm5lY3RTZWFyY2hCb3ggZnJvbSBcIi4uLy4uL2Nvbm5lY3RvcnMvc2VhcmNoLWJveC9jb25uZWN0U2VhcmNoQm94LmpzXCI7XG5pbXBvcnQgU2VhcmNoQm94IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL1NlYXJjaEJveC9TZWFyY2hCb3guanNcIjtcbmltcG9ydCBkZWZhdWx0VGVtcGxhdGVzIGZyb20gXCIuL2RlZmF1bHRUZW1wbGF0ZXMuanNcIjtcbnZhciB3aXRoVXNhZ2UgPSBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvcih7XG4gIG5hbWU6ICdzZWFyY2gtYm94J1xufSk7XG52YXIgc3VpdCA9IGNvbXBvbmVudCgnU2VhcmNoQm94Jyk7XG5cbnZhciByZW5kZXJlciA9IGZ1bmN0aW9uIHJlbmRlcmVyKF9yZWYpIHtcbiAgdmFyIGNvbnRhaW5lck5vZGUgPSBfcmVmLmNvbnRhaW5lck5vZGUsXG4gICAgICBjc3NDbGFzc2VzID0gX3JlZi5jc3NDbGFzc2VzLFxuICAgICAgcGxhY2Vob2xkZXIgPSBfcmVmLnBsYWNlaG9sZGVyLFxuICAgICAgdGVtcGxhdGVzID0gX3JlZi50ZW1wbGF0ZXMsXG4gICAgICBhdXRvZm9jdXMgPSBfcmVmLmF1dG9mb2N1cyxcbiAgICAgIHNlYXJjaEFzWW91VHlwZSA9IF9yZWYuc2VhcmNoQXNZb3VUeXBlLFxuICAgICAgc2hvd1Jlc2V0ID0gX3JlZi5zaG93UmVzZXQsXG4gICAgICBzaG93U3VibWl0ID0gX3JlZi5zaG93U3VibWl0LFxuICAgICAgc2hvd0xvYWRpbmdJbmRpY2F0b3IgPSBfcmVmLnNob3dMb2FkaW5nSW5kaWNhdG9yO1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgdmFyIHJlZmluZSA9IF9yZWYyLnJlZmluZSxcbiAgICAgICAgcXVlcnkgPSBfcmVmMi5xdWVyeSxcbiAgICAgICAgaXNTZWFyY2hTdGFsbGVkID0gX3JlZjIuaXNTZWFyY2hTdGFsbGVkO1xuICAgIHJlbmRlcihoKFNlYXJjaEJveCwge1xuICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgICAgYXV0b2ZvY3VzOiBhdXRvZm9jdXMsXG4gICAgICByZWZpbmU6IHJlZmluZSxcbiAgICAgIHNlYXJjaEFzWW91VHlwZTogc2VhcmNoQXNZb3VUeXBlLFxuICAgICAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXG4gICAgICBzaG93U3VibWl0OiBzaG93U3VibWl0LFxuICAgICAgc2hvd1Jlc2V0OiBzaG93UmVzZXQsXG4gICAgICBzaG93TG9hZGluZ0luZGljYXRvcjogc2hvd0xvYWRpbmdJbmRpY2F0b3IsXG4gICAgICBpc1NlYXJjaFN0YWxsZWQ6IGlzU2VhcmNoU3RhbGxlZCxcbiAgICAgIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXNcbiAgICB9KSwgY29udGFpbmVyTm9kZSk7XG4gIH07XG59O1xuLyoqXG4gKiBUaGUgc2VhcmNoYm94IHdpZGdldCBpcyB1c2VkIHRvIGxldCB0aGUgdXNlciBzZXQgYSB0ZXh0IGJhc2VkIHF1ZXJ5LlxuICpcbiAqIFRoaXMgaXMgdXN1YWxseSB0aGUgIG1haW4gZW50cnkgcG9pbnQgdG8gc3RhcnQgdGhlIHNlYXJjaCBpbiBhbiBpbnN0YW50c2VhcmNoIGNvbnRleHQuIEZvciB0aGF0XG4gKiByZWFzb24gaXMgdXN1YWxseSBwbGFjZWQgb24gdG9wLCBhbmQgbm90IGhpZGRlbiBzbyB0aGF0IHRoZSB1c2VyIGNhbiBzdGFydCBzZWFyY2hpbmcgcmlnaHRcbiAqIGF3YXkuXG4gKlxuICovXG5cblxudmFyIHNlYXJjaEJveCA9IGZ1bmN0aW9uIHNlYXJjaEJveCh3aWRnZXRQYXJhbXMpIHtcbiAgdmFyIF9yZWYzID0gd2lkZ2V0UGFyYW1zIHx8IHt9LFxuICAgICAgY29udGFpbmVyID0gX3JlZjMuY29udGFpbmVyLFxuICAgICAgX3JlZjMkcGxhY2Vob2xkZXIgPSBfcmVmMy5wbGFjZWhvbGRlcixcbiAgICAgIHBsYWNlaG9sZGVyID0gX3JlZjMkcGxhY2Vob2xkZXIgPT09IHZvaWQgMCA/ICcnIDogX3JlZjMkcGxhY2Vob2xkZXIsXG4gICAgICBfcmVmMyRjc3NDbGFzc2VzID0gX3JlZjMuY3NzQ2xhc3NlcyxcbiAgICAgIHVzZXJDc3NDbGFzc2VzID0gX3JlZjMkY3NzQ2xhc3NlcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMyRjc3NDbGFzc2VzLFxuICAgICAgX3JlZjMkYXV0b2ZvY3VzID0gX3JlZjMuYXV0b2ZvY3VzLFxuICAgICAgYXV0b2ZvY3VzID0gX3JlZjMkYXV0b2ZvY3VzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYzJGF1dG9mb2N1cyxcbiAgICAgIF9yZWYzJHNlYXJjaEFzWW91VHlwZSA9IF9yZWYzLnNlYXJjaEFzWW91VHlwZSxcbiAgICAgIHNlYXJjaEFzWW91VHlwZSA9IF9yZWYzJHNlYXJjaEFzWW91VHlwZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYzJHNlYXJjaEFzWW91VHlwZSxcbiAgICAgIF9yZWYzJHNob3dSZXNldCA9IF9yZWYzLnNob3dSZXNldCxcbiAgICAgIHNob3dSZXNldCA9IF9yZWYzJHNob3dSZXNldCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYzJHNob3dSZXNldCxcbiAgICAgIF9yZWYzJHNob3dTdWJtaXQgPSBfcmVmMy5zaG93U3VibWl0LFxuICAgICAgc2hvd1N1Ym1pdCA9IF9yZWYzJHNob3dTdWJtaXQgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmMyRzaG93U3VibWl0LFxuICAgICAgX3JlZjMkc2hvd0xvYWRpbmdJbmRpID0gX3JlZjMuc2hvd0xvYWRpbmdJbmRpY2F0b3IsXG4gICAgICBzaG93TG9hZGluZ0luZGljYXRvciA9IF9yZWYzJHNob3dMb2FkaW5nSW5kaSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYzJHNob3dMb2FkaW5nSW5kaSxcbiAgICAgIHF1ZXJ5SG9vayA9IF9yZWYzLnF1ZXJ5SG9vayxcbiAgICAgIF9yZWYzJHRlbXBsYXRlcyA9IF9yZWYzLnRlbXBsYXRlcyxcbiAgICAgIHVzZXJUZW1wbGF0ZXMgPSBfcmVmMyR0ZW1wbGF0ZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjMkdGVtcGxhdGVzO1xuXG4gIGlmICghY29udGFpbmVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHdpdGhVc2FnZSgnVGhlIGBjb250YWluZXJgIG9wdGlvbiBpcyByZXF1aXJlZC4nKSk7XG4gIH1cblxuICB2YXIgY29udGFpbmVyTm9kZSA9IGdldENvbnRhaW5lck5vZGUoY29udGFpbmVyKTtcbiAgdmFyIGNzc0NsYXNzZXMgPSB7XG4gICAgcm9vdDogY3goc3VpdCgpLCB1c2VyQ3NzQ2xhc3Nlcy5yb290KSxcbiAgICBmb3JtOiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnZm9ybSdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMuZm9ybSksXG4gICAgaW5wdXQ6IGN4KHN1aXQoe1xuICAgICAgZGVzY2VuZGFudE5hbWU6ICdpbnB1dCdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMuaW5wdXQpLFxuICAgIHN1Ym1pdDogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ3N1Ym1pdCdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMuc3VibWl0KSxcbiAgICBzdWJtaXRJY29uOiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnc3VibWl0SWNvbidcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMuc3VibWl0SWNvbiksXG4gICAgcmVzZXQ6IGN4KHN1aXQoe1xuICAgICAgZGVzY2VuZGFudE5hbWU6ICdyZXNldCdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMucmVzZXQpLFxuICAgIHJlc2V0SWNvbjogY3goc3VpdCh7XG4gICAgICBkZXNjZW5kYW50TmFtZTogJ3Jlc2V0SWNvbidcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMucmVzZXRJY29uKSxcbiAgICBsb2FkaW5nSW5kaWNhdG9yOiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAnbG9hZGluZ0luZGljYXRvcidcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMubG9hZGluZ0luZGljYXRvciksXG4gICAgbG9hZGluZ0ljb246IGN4KHN1aXQoe1xuICAgICAgZGVzY2VuZGFudE5hbWU6ICdsb2FkaW5nSWNvbidcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMubG9hZGluZ0ljb24pXG4gIH07XG5cbiAgdmFyIHRlbXBsYXRlcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdFRlbXBsYXRlcyksIHVzZXJUZW1wbGF0ZXMpO1xuXG4gIHZhciBzcGVjaWFsaXplZFJlbmRlcmVyID0gcmVuZGVyZXIoe1xuICAgIGNvbnRhaW5lck5vZGU6IGNvbnRhaW5lck5vZGUsXG4gICAgY3NzQ2xhc3NlczogY3NzQ2xhc3NlcyxcbiAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXG4gICAgYXV0b2ZvY3VzOiBhdXRvZm9jdXMsXG4gICAgc2VhcmNoQXNZb3VUeXBlOiBzZWFyY2hBc1lvdVR5cGUsXG4gICAgc2hvd1Jlc2V0OiBzaG93UmVzZXQsXG4gICAgc2hvd1N1Ym1pdDogc2hvd1N1Ym1pdCxcbiAgICBzaG93TG9hZGluZ0luZGljYXRvcjogc2hvd0xvYWRpbmdJbmRpY2F0b3JcbiAgfSk7XG4gIHZhciBtYWtlV2lkZ2V0ID0gY29ubmVjdFNlYXJjaEJveChzcGVjaWFsaXplZFJlbmRlcmVyLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlbmRlcihudWxsLCBjb250YWluZXJOb2RlKTtcbiAgfSk7XG4gIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1ha2VXaWRnZXQoe1xuICAgIHF1ZXJ5SG9vazogcXVlcnlIb29rXG4gIH0pKSwge30sIHtcbiAgICAkJHdpZGdldFR5cGU6ICdhaXMuc2VhcmNoQm94J1xuICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlYXJjaEJveDsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgaCwgcmVuZGVyIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBTdGF0cyBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9TdGF0cy9TdGF0cy5qc1wiO1xuaW1wb3J0IGNvbm5lY3RTdGF0cyBmcm9tIFwiLi4vLi4vY29ubmVjdG9ycy9zdGF0cy9jb25uZWN0U3RhdHMuanNcIjtcbmltcG9ydCB7IGdldENvbnRhaW5lck5vZGUsIGNyZWF0ZURvY3VtZW50YXRpb25NZXNzYWdlR2VuZXJhdG9yIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcHJlcGFyZVRlbXBsYXRlUHJvcHMgfSBmcm9tIFwiLi4vLi4vbGliL3RlbXBsYXRpbmcvaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9saWIvc3VpdC5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0TnVtYmVyIH0gZnJvbSBcIi4uLy4uL2xpYi9mb3JtYXROdW1iZXIuanNcIjtcbnZhciB3aXRoVXNhZ2UgPSBjcmVhdGVEb2N1bWVudGF0aW9uTWVzc2FnZUdlbmVyYXRvcih7XG4gIG5hbWU6ICdzdGF0cydcbn0pO1xudmFyIHN1aXQgPSBjb21wb25lbnQoJ1N0YXRzJyk7XG5leHBvcnQgdmFyIGRlZmF1bHRUZW1wbGF0ZXMgPSB7XG4gIHRleHQ6IGZ1bmN0aW9uIHRleHQocHJvcHMpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQocHJvcHMuYXJlSGl0c1NvcnRlZCA/IGdldFNvcnRlZFJlc3VsdHNTZW50ZW5jZShwcm9wcykgOiBnZXRSZXN1bHRzU2VudGVuY2UocHJvcHMpLCBcIiBmb3VuZCBpbiBcIikuY29uY2F0KHByb3BzLnByb2Nlc3NpbmdUaW1lTVMsIFwibXNcIik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldFNvcnRlZFJlc3VsdHNTZW50ZW5jZShfcmVmKSB7XG4gIHZhciBuYkhpdHMgPSBfcmVmLm5iSGl0cyxcbiAgICAgIGhhc05vU29ydGVkUmVzdWx0cyA9IF9yZWYuaGFzTm9Tb3J0ZWRSZXN1bHRzLFxuICAgICAgaGFzT25lU29ydGVkUmVzdWx0cyA9IF9yZWYuaGFzT25lU29ydGVkUmVzdWx0cyxcbiAgICAgIGhhc01hbnlTb3J0ZWRSZXN1bHRzID0gX3JlZi5oYXNNYW55U29ydGVkUmVzdWx0cyxcbiAgICAgIG5iU29ydGVkSGl0cyA9IF9yZWYubmJTb3J0ZWRIaXRzO1xuICB2YXIgc3VmZml4ID0gXCJzb3J0ZWQgb3V0IG9mIFwiLmNvbmNhdChmb3JtYXROdW1iZXIobmJIaXRzKSk7XG5cbiAgaWYgKGhhc05vU29ydGVkUmVzdWx0cykge1xuICAgIHJldHVybiBcIk5vIHJlbGV2YW50IHJlc3VsdHMgXCIuY29uY2F0KHN1ZmZpeCk7XG4gIH1cblxuICBpZiAoaGFzT25lU29ydGVkUmVzdWx0cykge1xuICAgIHJldHVybiBcIjEgcmVsZXZhbnQgcmVzdWx0IFwiLmNvbmNhdChzdWZmaXgpO1xuICB9XG5cbiAgaWYgKGhhc01hbnlTb3J0ZWRSZXN1bHRzKSB7XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KGZvcm1hdE51bWJlcihuYlNvcnRlZEhpdHMgfHwgMCksIFwiIHJlbGV2YW50IHJlc3VsdHMgXCIpLmNvbmNhdChzdWZmaXgpO1xuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBnZXRSZXN1bHRzU2VudGVuY2UoX3JlZjIpIHtcbiAgdmFyIG5iSGl0cyA9IF9yZWYyLm5iSGl0cyxcbiAgICAgIGhhc05vUmVzdWx0cyA9IF9yZWYyLmhhc05vUmVzdWx0cyxcbiAgICAgIGhhc09uZVJlc3VsdCA9IF9yZWYyLmhhc09uZVJlc3VsdCxcbiAgICAgIGhhc01hbnlSZXN1bHRzID0gX3JlZjIuaGFzTWFueVJlc3VsdHM7XG5cbiAgaWYgKGhhc05vUmVzdWx0cykge1xuICAgIHJldHVybiAnTm8gcmVzdWx0cyc7XG4gIH1cblxuICBpZiAoaGFzT25lUmVzdWx0KSB7XG4gICAgcmV0dXJuICcxIHJlc3VsdCc7XG4gIH1cblxuICBpZiAoaGFzTWFueVJlc3VsdHMpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQoZm9ybWF0TnVtYmVyKG5iSGl0cyksIFwiIHJlc3VsdHNcIik7XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbnZhciByZW5kZXJlciA9IGZ1bmN0aW9uIHJlbmRlcmVyKF9yZWYzKSB7XG4gIHZhciByZW5kZXJTdGF0ZSA9IF9yZWYzLnJlbmRlclN0YXRlLFxuICAgICAgY3NzQ2xhc3NlcyA9IF9yZWYzLmNzc0NsYXNzZXMsXG4gICAgICBjb250YWluZXJOb2RlID0gX3JlZjMuY29udGFpbmVyTm9kZSxcbiAgICAgIHRlbXBsYXRlcyA9IF9yZWYzLnRlbXBsYXRlcztcbiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNCwgaXNGaXJzdFJlbmRlcmluZykge1xuICAgIHZhciBoaXRzUGVyUGFnZSA9IF9yZWY0LmhpdHNQZXJQYWdlLFxuICAgICAgICBuYkhpdHMgPSBfcmVmNC5uYkhpdHMsXG4gICAgICAgIG5iU29ydGVkSGl0cyA9IF9yZWY0Lm5iU29ydGVkSGl0cyxcbiAgICAgICAgYXJlSGl0c1NvcnRlZCA9IF9yZWY0LmFyZUhpdHNTb3J0ZWQsXG4gICAgICAgIG5iUGFnZXMgPSBfcmVmNC5uYlBhZ2VzLFxuICAgICAgICBwYWdlID0gX3JlZjQucGFnZSxcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWVNUyA9IF9yZWY0LnByb2Nlc3NpbmdUaW1lTVMsXG4gICAgICAgIHF1ZXJ5ID0gX3JlZjQucXVlcnksXG4gICAgICAgIGluc3RhbnRTZWFyY2hJbnN0YW5jZSA9IF9yZWY0Lmluc3RhbnRTZWFyY2hJbnN0YW5jZTtcblxuICAgIGlmIChpc0ZpcnN0UmVuZGVyaW5nKSB7XG4gICAgICByZW5kZXJTdGF0ZS50ZW1wbGF0ZVByb3BzID0gcHJlcGFyZVRlbXBsYXRlUHJvcHMoe1xuICAgICAgICBkZWZhdWx0VGVtcGxhdGVzOiBkZWZhdWx0VGVtcGxhdGVzLFxuICAgICAgICB0ZW1wbGF0ZXNDb25maWc6IGluc3RhbnRTZWFyY2hJbnN0YW5jZS50ZW1wbGF0ZXNDb25maWcsXG4gICAgICAgIHRlbXBsYXRlczogdGVtcGxhdGVzXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW5kZXIoaChTdGF0cywge1xuICAgICAgY3NzQ2xhc3NlczogY3NzQ2xhc3NlcyxcbiAgICAgIGhpdHNQZXJQYWdlOiBoaXRzUGVyUGFnZSxcbiAgICAgIG5iSGl0czogbmJIaXRzLFxuICAgICAgbmJTb3J0ZWRIaXRzOiBuYlNvcnRlZEhpdHMsXG4gICAgICBhcmVIaXRzU29ydGVkOiBhcmVIaXRzU29ydGVkLFxuICAgICAgbmJQYWdlczogbmJQYWdlcyxcbiAgICAgIHBhZ2U6IHBhZ2UsXG4gICAgICBwcm9jZXNzaW5nVGltZU1TOiBwcm9jZXNzaW5nVGltZU1TLFxuICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgdGVtcGxhdGVQcm9wczogcmVuZGVyU3RhdGUudGVtcGxhdGVQcm9wc1xuICAgIH0pLCBjb250YWluZXJOb2RlKTtcbiAgfTtcbn07XG4vKipcbiAqIFRoZSBgc3RhdHNgIHdpZGdldCBpcyB1c2VkIHRvIGRpc3BsYXkgdXNlZnVsIGluc2lnaHRzIGFib3V0IHRoZSBjdXJyZW50IHJlc3VsdHMuXG4gKlxuICogQnkgZGVmYXVsdCwgaXQgd2lsbCBkaXNwbGF5IHRoZSAqKm51bWJlciBvZiBoaXRzKiogYW5kIHRoZSB0aW1lIHRha2VuIHRvIGNvbXB1dGUgdGhlXG4gKiByZXN1bHRzIGluc2lkZSB0aGUgZW5naW5lLlxuICovXG5cblxudmFyIHN0YXRzID0gZnVuY3Rpb24gc3RhdHMod2lkZ2V0UGFyYW1zKSB7XG4gIHZhciBfcmVmNSA9IHdpZGdldFBhcmFtcyB8fCB7fSxcbiAgICAgIGNvbnRhaW5lciA9IF9yZWY1LmNvbnRhaW5lcixcbiAgICAgIF9yZWY1JGNzc0NsYXNzZXMgPSBfcmVmNS5jc3NDbGFzc2VzLFxuICAgICAgdXNlckNzc0NsYXNzZXMgPSBfcmVmNSRjc3NDbGFzc2VzID09PSB2b2lkIDAgPyB7fSA6IF9yZWY1JGNzc0NsYXNzZXMsXG4gICAgICBfcmVmNSR0ZW1wbGF0ZXMgPSBfcmVmNS50ZW1wbGF0ZXMsXG4gICAgICB0ZW1wbGF0ZXMgPSBfcmVmNSR0ZW1wbGF0ZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjUkdGVtcGxhdGVzO1xuXG4gIGlmICghY29udGFpbmVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHdpdGhVc2FnZSgnVGhlIGBjb250YWluZXJgIG9wdGlvbiBpcyByZXF1aXJlZC4nKSk7XG4gIH1cblxuICB2YXIgY29udGFpbmVyTm9kZSA9IGdldENvbnRhaW5lck5vZGUoY29udGFpbmVyKTtcbiAgdmFyIGNzc0NsYXNzZXMgPSB7XG4gICAgcm9vdDogY3goc3VpdCgpLCB1c2VyQ3NzQ2xhc3Nlcy5yb290KSxcbiAgICB0ZXh0OiBjeChzdWl0KHtcbiAgICAgIGRlc2NlbmRhbnROYW1lOiAndGV4dCdcbiAgICB9KSwgdXNlckNzc0NsYXNzZXMudGV4dClcbiAgfTtcbiAgdmFyIHNwZWNpYWxpemVkUmVuZGVyZXIgPSByZW5kZXJlcih7XG4gICAgY29udGFpbmVyTm9kZTogY29udGFpbmVyTm9kZSxcbiAgICBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzLFxuICAgIHRlbXBsYXRlczogdGVtcGxhdGVzLFxuICAgIHJlbmRlclN0YXRlOiB7fVxuICB9KTtcbiAgdmFyIG1ha2VXaWRnZXQgPSBjb25uZWN0U3RhdHMoc3BlY2lhbGl6ZWRSZW5kZXJlciwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByZW5kZXIobnVsbCwgY29udGFpbmVyTm9kZSk7XG4gIH0pO1xuICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYWtlV2lkZ2V0KHt9KSksIHt9LCB7XG4gICAgJCR3aWRnZXRUeXBlOiAnYWlzLnN0YXRzJ1xuICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHN0YXRzOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHNwZWNpYWwgdGhhbmtzIHRvIGh0dHBzOi8vYmxvZy5uYWFsbi5jb20vMjAxNi8wNy9oZXhvLXdpdGgtYWxnb2xpYS9cbmltcG9ydCBhbGdvbGlhc2VhcmNoIGZyb20gJ2FsZ29saWFzZWFyY2gvbGl0ZSdcbmltcG9ydCBpbnN0YW50c2VhcmNoIGZyb20gJ2luc3RhbnRzZWFyY2guanMnXG5pbXBvcnQge1xuICBjb25maWd1cmUsXG4gIHNlYXJjaEJveCxcbiAgaGl0cyxcbiAgc3RhdHMsXG4gIHBhZ2luYXRpb24sXG59IGZyb20gJ2luc3RhbnRzZWFyY2guanMvZXMvd2lkZ2V0cydcbmltcG9ydCBhcmNoZXJVdGlsIGZyb20gJy4vdXRpbCdcblxuY29uc3QgaW5pdEFsZ29saWEgPSAoKSA9PiB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBhbGdvbGlhU2V0dGluZ3MgPSBhbGdvbGlhXG4gICAgY29uc3QgaXNBbGdvbGlhU2V0dGluZ3NWYWxpZCA9XG4gICAgICBhbGdvbGlhU2V0dGluZ3MuYXBwbGljYXRpb25JRCAmJlxuICAgICAgYWxnb2xpYVNldHRpbmdzLmFwaUtleSAmJlxuICAgICAgYWxnb2xpYVNldHRpbmdzLmluZGV4TmFtZVxuXG4gICAgaWYgKCFpc0FsZ29saWFTZXR0aW5nc1ZhbGlkKSB7XG4gICAgICB3aW5kb3cuY29uc29sZS5lcnJvcihcbiAgICAgICAgJ0FsZ29saWEgU2V0dGluZ3MgYXJlIGludmFsaWQuIENoZWNrIGRvY3M6IGh0dHBzOi8vZ2l0aHViLmNvbS9maTNld29yay9oZXhvLXRoZW1lLWFyY2hlci93aWtpLyVFNSU5MCVBRiVFNyU5NCVBOC1BbGdvbGlhLSVFNiU5MCU5QyVFNyVCNCVBMiMlRTglOEUlQjclRTUlOEYlOTYta2V5cydcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHNlYXJjaENsaWVudCA9IGFsZ29saWFzZWFyY2goXG4gICAgICBhbGdvbGlhU2V0dGluZ3MuYXBwbGljYXRpb25JRCxcbiAgICAgIGFsZ29saWFTZXR0aW5ncy5hcGlLZXlcbiAgICApXG5cbiAgICBjb25zdCBzZWFyY2ggPSBpbnN0YW50c2VhcmNoKHtcbiAgICAgIGluZGV4TmFtZTogYWxnb2xpYVNldHRpbmdzLmluZGV4TmFtZSxcbiAgICAgIHNlYXJjaENsaWVudCxcbiAgICAgIHNlYXJjaEZ1bmN0aW9uOiBmdW5jdGlvbiAoaGVscGVyKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gJCgnI2FsZ29saWEtc2VhcmNoLWlucHV0JykuZmluZCgnaW5wdXQnKVxuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGdvbGlhLXJlc3VsdHMnKVxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGhlbHBlci5zdGF0ZS5xdWVyeSA9PT0gJycgPyAnbm9uZScgOiAnJ1xuXG4gICAgICAgIGlmIChzZWFyY2hJbnB1dC52YWwoKSkge1xuICAgICAgICAgIGhlbHBlci5zZWFyY2goKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc3RhbGxlZFNlYXJjaERlbGF5OiA1MDAsXG4gICAgfSlcblxuICAgIC8vIFJlZ2lzdGVyaW5nIFdpZGdldHNcbiAgICBzZWFyY2guYWRkV2lkZ2V0cyhbXG4gICAgICBjb25maWd1cmUoe1xuICAgICAgICBoaXRzUGVyUGFnZTogYWxnb2xpYVNldHRpbmdzLmhpdHMucGVyX3BhZ2UgfHwgMTAsXG4gICAgICB9KSxcbiAgICAgIHNlYXJjaEJveCh7XG4gICAgICAgIGNvbnRhaW5lcjogJyNhbGdvbGlhLXNlYXJjaC1pbnB1dCcsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBhbGdvbGlhU2V0dGluZ3MubGFiZWxzLmlucHV0X3BsYWNlaG9sZGVyLFxuICAgICAgICBzaG93U3VibWl0OiBmYWxzZSxcbiAgICAgICAgc2hvd1Jlc2V0OiBmYWxzZSxcbiAgICAgICAgc2hvd0xvYWRpbmdJbmRpY2F0b3I6IGZhbHNlLFxuICAgICAgfSksXG4gICAgICBoaXRzKHtcbiAgICAgICAgY29udGFpbmVyOiAnI2FsZ29saWEtaGl0cycsXG4gICAgICAgIHRlbXBsYXRlczoge1xuICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZGF0YS5wZXJtYWxpbmtcbiAgICAgICAgICAgICAgPyBkYXRhLnBlcm1hbGlua1xuICAgICAgICAgICAgICA6IHNpdGVNZXRhLnJvb3QgKyBkYXRhLnBhdGhcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICc8YSBocmVmPVwiJyArXG4gICAgICAgICAgICAgIGxpbmsgK1xuICAgICAgICAgICAgICAnXCIgY2xhc3M9XCJhbGdvbGlhLWhpdC1pdGVtLWxpbmtcIj4nICtcbiAgICAgICAgICAgICAgaW5zdGFudHNlYXJjaC5oaWdobGlnaHQoe1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ3RpdGxlJyxcbiAgICAgICAgICAgICAgICBoaXQ6IGRhdGEsXG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRUYWdOYW1lOiAnZW0nLFxuICAgICAgICAgICAgICB9KSArXG4gICAgICAgICAgICAgICc8L2E+J1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJmYXMgZmEtZHJhZnRpbmctY29tcGFzcyBmYS0xMHhcIj48L2k+JyArXG4gICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxnb2xpYS1oaXQtZW1wdHktbGFiZWxcIj4nICtcbiAgICAgICAgICAgICAgYWxnb2xpYVNldHRpbmdzLmxhYmVscy5oaXRzX2VtcHR5LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgL1xcJFxce3F1ZXJ5XFx9LyxcbiAgICAgICAgICAgICAgICBkYXRhLnF1ZXJ5XG4gICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNzc0NsYXNzZXM6IHtcbiAgICAgICAgICBpdGVtOiAnYWxnb2xpYS1oaXQtaXRlbScsXG4gICAgICAgICAgbGlzdDogJ2FsZ29saWEtaGl0LWxpc3QnLFxuICAgICAgICAgIHJvb3Q6ICdhbGdvbGlhLWhpdCcsXG4gICAgICAgICAgZW1wdHlSb290OiAnYWxnb2xpYS1oaXQtZW1wdHknLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICBzdGF0cyh7XG4gICAgICAgIGNvbnRhaW5lcjogJyNhbGdvbGlhLXN0YXRzJyxcbiAgICAgICAgdGVtcGxhdGVzOiB7XG4gICAgICAgICAgdGV4dDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGxldCBzdGF0cyA9IGFsZ29saWFTZXR0aW5ncy5sYWJlbHMuaGl0c19zdGF0c1xuICAgICAgICAgICAgICAucmVwbGFjZSgvXFwkXFx7aGl0c1xcfS8sIGRhdGEubmJIaXRzKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvXFwkXFx7dGltZVxcfS8sIGRhdGEucHJvY2Vzc2luZ1RpbWVNUylcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIHN0YXRzICtcbiAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxnb2xpYS1wb3dlcmVkXCI+JyArXG4gICAgICAgICAgICAgICcgIDxpbWcgc3JjPVwiJyArXG4gICAgICAgICAgICAgIHNpdGVNZXRhLnJvb3QgK1xuICAgICAgICAgICAgICAnYXNzZXRzL2FsZ29saWFfbG9nby5zdmdcIiBhbHQ9XCJBbGdvbGlhXCIgLz4nICtcbiAgICAgICAgICAgICAgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgJzxociAvPidcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBjc3NDbGFzc2VzOiB7XG4gICAgICAgICAgcm9vdDogJ2FsZ29saWEtc3RhdC1yb290JyxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAgcGFnaW5hdGlvbih7XG4gICAgICAgIGNvbnRhaW5lcjogJyNhbGdvbGlhLXBhZ2luYXRpb24nLFxuICAgICAgICBzY3JvbGxUbzogZmFsc2UsXG4gICAgICAgIHRlbXBsYXRlczoge1xuICAgICAgICAgIGZpcnN0OiAnPGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3VibGUtbGVmdFwiPjwvaT4nLFxuICAgICAgICAgIGxhc3Q6ICc8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvaT4nLFxuICAgICAgICAgIHByZXZpb3VzOiAnPGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1sZWZ0XCI+PC9pPicsXG4gICAgICAgICAgbmV4dDogJzxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtcmlnaHRcIj48L2k+JyxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIF0pXG5cbiAgICBzZWFyY2guc3RhcnQoKVxuXG4gICAgJCgnLnBvcHVwLXRyaWdnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgJCgnYm9keScpXG4gICAgICAgIC5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwic2VhcmNoLXBvcHVwLW92ZXJsYXkgYWxnb2xpYS1wb3Atb3ZlcmxheVwiPjwvZGl2PicpXG4gICAgICAgIC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpXG4gICAgICAkKCcucG9wdXAnKS50b2dnbGUoKVxuICAgICAgJCgnI2FsZ29saWEtc2VhcmNoLWlucHV0JykuZmluZCgnaW5wdXQnKS5mb2N1cygpXG4gICAgICBhcmNoZXJVdGlsLnN0b3BCb2R5U2Nyb2xsKHRydWUpXG4gICAgfSlcblxuICAgIGNvbnN0IGhpZGVQb3B1cCA9ICgpID0+IHtcbiAgICAgICQoJy5haXMtU2VhcmNoQm94LWZvcm0nKS50cmlnZ2VyKCdyZXNldCcpXG4gICAgICAkKCcucG9wdXAnKS5oaWRlKClcbiAgICAgICQoJy5hbGdvbGlhLXBvcC1vdmVybGF5JykucmVtb3ZlKClcbiAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpXG4gICAgICBhcmNoZXJVdGlsLnN0b3BCb2R5U2Nyb2xsKGZhbHNlKVxuICAgIH1cblxuICAgICQoJy5wb3B1cC1idG4tY2xvc2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBoaWRlUG9wdXAoKVxuICAgIH0pXG5cbiAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsICcuYWlzLVNlYXJjaEJveC1mb3JtJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBoaWRlUG9wdXAoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAkKCcuc2l0ZS1zZWFyY2gnKS5yZW1vdmVDbGFzcygnc2l0ZS1zZWFyY2gtbG9hZGluZycpXG4gIH0pXG59XG5cbmluaXRBbGdvbGlhKClcbiJdLCJuYW1lcyI6WyJib2R5RWwiLCJkb2N1bWVudCIsImJvZHkiLCJ3aW5kb3dUb3AiLCJib2R5RWxQb3NpdGlvbiIsInN0eWxlIiwicG9zaXRpb24iLCJhcmNoZXJVdGlsIiwiYmFja1RvcCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsInRvcCIsImJlaGF2aW9yIiwiZ2V0QWJzUG9zaXRpb24iLCJlIiwieCIsIm9mZnNldExlZnQiLCJ5Iiwib2Zmc2V0VG9wIiwiY3VycmVudCIsIm9mZnNldFBhcmVudCIsImRhdGVGb3JtYXRlciIsImRhdGUiLCJmbXQiLCJvIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsIk1hdGgiLCJmbG9vciIsIlMiLCJnZXRNaWxsaXNlY29uZHMiLCJ0ZXN0IiwicmVwbGFjZSIsIlJlZ0V4cCIsIiQxIiwiU3RyaW5nIiwiZ2V0RnVsbFllYXIiLCJzdWJzdHIiLCJsZW5ndGgiLCJrIiwicmVtIiwicGFyc2VJbnQiLCIkIiwiY3NzIiwic2V0V2luZG93SGFzaCIsImhhc2giLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiZ2V0V2luZG93SGFzaCIsImxvY2F0aW9uIiwicmFmVGljayIsInRpY2tpbmciLCJ1cGRhdGVGdW5jIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RvcEJvZHlTY3JvbGwiLCJpc0ZpeGVkIiwic2Nyb2xsWSIsIndpZHRoIiwidGhyb3R0bGUiLCJmdW5jIiwid2FpdCIsImltbWVkaWF0ZSIsInRpbWVyIiwiYXJncyIsImFyZ3VtZW50cyIsInNldFRpbWVvdXQiLCJ1bmRlZmluZWQiLCJhcHBseSIsImRlYm91bmNlIiwiY2xlYXJUaW1lb3V0IiwiYWxnb2xpYXNlYXJjaCIsImluc3RhbnRzZWFyY2giLCJjb25maWd1cmUiLCJzZWFyY2hCb3giLCJoaXRzIiwic3RhdHMiLCJwYWdpbmF0aW9uIiwiaW5pdEFsZ29saWEiLCJyZWFkeSIsImFsZ29saWFTZXR0aW5ncyIsImFsZ29saWEiLCJpc0FsZ29saWFTZXR0aW5nc1ZhbGlkIiwiYXBwbGljYXRpb25JRCIsImFwaUtleSIsImluZGV4TmFtZSIsImNvbnNvbGUiLCJlcnJvciIsInNlYXJjaENsaWVudCIsInNlYXJjaCIsInNlYXJjaEZ1bmN0aW9uIiwiaGVscGVyIiwic2VhcmNoSW5wdXQiLCJmaW5kIiwiY29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsImRpc3BsYXkiLCJzdGF0ZSIsInF1ZXJ5IiwidmFsIiwic3RhbGxlZFNlYXJjaERlbGF5IiwiYWRkV2lkZ2V0cyIsImhpdHNQZXJQYWdlIiwicGVyX3BhZ2UiLCJwbGFjZWhvbGRlciIsImxhYmVscyIsImlucHV0X3BsYWNlaG9sZGVyIiwic2hvd1N1Ym1pdCIsInNob3dSZXNldCIsInNob3dMb2FkaW5nSW5kaWNhdG9yIiwidGVtcGxhdGVzIiwiaXRlbSIsImRhdGEiLCJsaW5rIiwicGVybWFsaW5rIiwic2l0ZU1ldGEiLCJyb290IiwicGF0aCIsImhpZ2hsaWdodCIsImF0dHJpYnV0ZSIsImhpdCIsImhpZ2hsaWdodGVkVGFnTmFtZSIsImVtcHR5IiwiaGl0c19lbXB0eSIsImNzc0NsYXNzZXMiLCJsaXN0IiwiZW1wdHlSb290IiwidGV4dCIsImhpdHNfc3RhdHMiLCJuYkhpdHMiLCJwcm9jZXNzaW5nVGltZU1TIiwiZmlyc3QiLCJsYXN0IiwicHJldmlvdXMiLCJuZXh0Iiwic3RhcnQiLCJvbiIsInN0b3BQcm9wYWdhdGlvbiIsInByZXBlbmQiLCJ0b2dnbGUiLCJmb2N1cyIsImhpZGVQb3B1cCIsInRyaWdnZXIiLCJoaWRlIiwicmVtb3ZlIiwiY2xpY2siLCJrZXkiLCJyZW1vdmVDbGFzcyJdLCJzb3VyY2VSb290IjoiIn0=